<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Micronaut,Groovy,Gradle,Java,æ–‡æ¡£,ä¸­æ–‡">
    <meta name="description" content="Micronaut Groovy Gradle Java æ–‡æ¡£ ä¸­æ–‡">
    <meta name="author" content="æ—å¨ç¾½">
    
    <title>
        
            Dependency Management |
        
        æ—å¨ç¾½çš„ç¬”è®°
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/logo.svg">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/css/font-awesome.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"zh-CN","path":"search.json"};
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":true,"init_open":true},"style":{"primary_color":"rgb(153,153,0)","avatar":"/images/avatar.jpg","favicon":"/images/logo.svg","article_img_align":"left","left_side_width":"400px","content_max_width":"920px","hover":{"shadow":true,"scale":true},"first_screen":{"enable":true,"background_img":null,"description":"def containsğŸš€ = ['Micronaut', 'Groovy', 'Gradle', 'etc']"},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":true}}},"local_search":{"enable":true,"preload":true},"code_copy":{"enable":true,"style":"mac"},"pjax":{"enable":true},"lazyload":{"enable":true},"version":"3.4.5"};
    KEEP.language_ago = {"second":"%s ç§’å‰","minute":"%s åˆ†é’Ÿå‰","hour":"%s å°æ—¶å‰","day":"%s å¤©å‰","week":"%s å‘¨å‰","month":"%s ä¸ªæœˆå‰","year":"%s å¹´å‰"};
  </script>
<meta name="generator" content="Hexo 6.1.0"></head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fas fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                æ—å¨ç¾½çš„ç¬”è®°
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                é¦–é¡µ
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/categories"
                            >
                                åˆ†ç±»
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/tags"
                            >
                                æ ‡ç­¾
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                å½’æ¡£
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >
                                å…³äº
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">é¦–é¡µ</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/categories">åˆ†ç±»</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/tags">æ ‡ç­¾</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">å½’æ¡£</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about">å…³äº</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

    <a target="_blank" rel="noopener" href="https://github.com/linweiyu21/" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80"
        viewBox="0 0 250 250" style="fill:#64CEAA; color:#fff; position: absolute; top: 0; border: 0; right: 0;"
        aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path
          d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
          fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path
          d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
          fill="currentColor" class="octo-body"></path>
      </svg></a>
    <style>
      .github-corner:hover .octo-arm {
        animation: octocat-wave 560ms ease-in-out
      }

      @keyframes octocat-wave {

        0%,
        100% {
          transform: rotate(0)
        }

        20%,
        60% {
          transform: rotate(-25deg)
        }

        40%,
        80% {
          transform: rotate(10deg)
        }
      }

      @media (max-width:500px) {
        .github-corner:hover .octo-arm {
          animation: none
        }

        .github-corner .octo-arm {
          animation: octocat-wave 560ms ease-in-out
        }
      }
    </style>
</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">Dependency Management</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/avatar.jpg">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">æ—å¨ç¾½</span>
                        
                            <span class="author-label">Lv8</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;
        <span class="pc">2022-05-05 11:47:30</span>
        <span class="mobile">2022-05-05 11:47</span>
    </span>
    
        <span class="article-categories article-meta-item">
            <i class="fas fa-folder"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/Gradle-User-Guides/">Gradle - User Guides</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/Gradle/">Gradle</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/User-Guides/">User Guides</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
        <span class="article-pv article-meta-item">
            <i class="fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <!-- TOC -->

<ul>
<li><a href="#dependency-management">Dependency Management</a><ul>
<li><a href="#learning-the-basics">Learning the Basics</a></li>
<li><a href="#declaring-repositories">Declaring repositories</a></li>
<li><a href="#strict-limitation-to-declared-repositories">Strict limitation to declared repositories</a></li>
<li><a href="#supported-repository-types">Supported repository types</a><ul>
<li><a href="#different-formats">Different formats</a></li>
<li><a href="#with-different-connectivity">With different connectivity</a></li>
</ul>
</li>
<li><a href="#flat-directory-repository">Flat directory repository</a></li>
<li><a href="#local-repository">Local repository</a></li>
<li><a href="#maven-repositories">Maven repositories</a><ul>
<li><a href="#setting-up-composite-maven-repositories">Setting up composite Maven repositories</a></li>
<li><a href="#local-maven-repository">Local Maven repository</a></li>
<li><a href="#the-case-of-mavenlocal">The case of mavenLocal()</a></li>
</ul>
</li>
<li><a href="#ivy-repositories">Ivy repositories</a><ul>
<li><a href="#defining-an-ivy-repositories-with-a-standard-layout">Defining an Ivy repositories with a standard layout</a></li>
<li><a href="#defining-a-named-layout-for-an-ivy-repository">Defining a named layout for an Ivy repository</a></li>
<li><a href="#defining-custom-pattern-layout-for-an-ivy-repository">Defining custom pattern layout for an Ivy repository</a></li>
<li><a href="#accessing-authenticated-ivy-repositories">Accessing authenticated Ivy repositories</a></li>
</ul>
</li>
<li><a href="#repository-content-filtering">Repository content filtering</a><ul>
<li><a href="#declaring-content-exclusively-fonud-in-one-repository">Declaring content exclusively fonud in one repository</a></li>
</ul>
</li>
<li><a href="#maven-repository-filtering">Maven repository filtering</a></li>
<li><a href="#supported-metadata-sources">Supported metadata sources</a></li>
<li><a href="#plugin-repositories-vs-build-repositories">Plugin repositories vs. build repositories</a><ul>
<li><a href="#plugin-repositories">Plugin repositories</a></li>
</ul>
</li>
<li><a href="#centralizing-repositories-declaration">Centralizing repositories declaration</a></li>
<li><a href="#supported-repository-transport-protocols">Supported repository transport protocols</a></li>
<li><a href="#https-authentication-schemes-configuration">HTTP(S) authentication schemes configuration</a><ul>
<li><a href="#using-preemptive-authentication">using preemptive authentication</a></li>
<li><a href="#using-http-header-authentication">Using HTTP header authentication</a></li>
</ul>
</li>
<li><a href="#handling-credentials">Handling credentials</a></li>
<li><a href="#declaring-dependencies">Declaring dependencies</a><ul>
<li><a href="#what-are-dependency-configurations">What are dependency configurations</a><ul>
<li><a href="#configuration-inheritance-and-composition">Configuration inheritance and composition</a></li>
</ul>
</li>
<li><a href="#resolvable-and-consumable-configurations">Resolvable and consumable configurations</a></li>
<li><a href="#defining-custom-configurations">Defining custom configurations</a></li>
<li><a href="#different-kinds-of-dependencies">Different kinds of dependencies</a><ul>
<li><a href="#module-dependencies">Module dependencies</a></li>
<li><a href="#file-dependencies">File dependencies</a></li>
</ul>
</li>
<li><a href="#versioning-of-file-dependencies">Versioning of file dependencies</a></li>
<li><a href="#project-dependencies">Project dependencies</a></li>
<li><a href="#type-safe-dependencies">Type-safe dependencies</a></li>
<li><a href="#gradle-api-dependency">Gradle API dependency</a></li>
<li><a href="#gradle-testkit-dependency">Gradle TestKit dependency</a></li>
<li><a href="#local-groovy-dependency">Local Groovy dependency</a></li>
<li><a href="#documenting-dependencies">Documenting dependencies</a></li>
</ul>
</li>
<li><a href="#understanding-the-difference-between-libraries-and-applications">Understanding the difference between libraries and applications</a><ul>
<li><a href="#producers-vs-consumers">Producers vs consumers</a></li>
<li><a href="#strong-encapsulation">Strong encapsulation</a></li>
<li><a href="#being-respectful-of-consumers">Being respectful of consumers</a></li>
</ul>
</li>
<li><a href="#viewing-and-debugging-dependencies">Viewing and debugging dependencies</a><ul>
<li><a href="#listing-dependencies-in-a-project">Listing dependencies in a project</a></li>
<li><a href="#identifying-which-dependency-version-was-selected-and-why">Identifying which dependency version was selected and why</a></li>
</ul>
</li>
<li><a href="#understanding-dependency-resolution">Understanding dependency resolution</a><ul>
<li><a href="#how-gradle-handles-conflicts">How Gradle handles conflicts?</a></li>
<li><a href="#version-conflicts">Version conflicts</a></li>
<li><a href="#implementation-conflicts">Implementation conflicts</a></li>
<li><a href="#version-conflicts-resolution">Version conflicts resolution</a><ul>
<li><a href="#resolution-strategy">Resolution strategy</a></li>
</ul>
</li>
<li><a href="#implementation-conflict-resolution">Implementation conflict resolution</a></li>
<li><a href="#how-gradle-retrieves-dependency-metadata">How Gradle retrieves dependency metadata?</a></li>
<li><a href="#the-dependency-cache">The Dependency Cache</a></li>
<li><a href="#verifying-dependencies">Verifying dependencies</a><ul>
<li><a href="#enabling-dependency-verification">Enabling dependency verification</a><ul>
<li><a href="#the-verification-metadata-file">The verification metadata file</a></li>
</ul>
</li>
<li><a href="#bootstrapping-dependency-verification">Bootstrapping dependency verification</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#declaring-versions">Declaring Versions</a><ul>
<li><a href="#declaring-a-dependency-without-version">Declaring a dependency without version</a></li>
<li><a href="#declaring-rich-versions">Declaring Rich Versions</a><ul>
<li><a href="#strictly"><code>strictly</code></a></li>
<li><a href="#require"><code>require</code></a></li>
<li><a href="#prefer"><code>prefer</code></a></li>
<li><a href="#reject"><code>reject</code></a></li>
<li><a href="#rich-version-declaration">Rich version declaration</a></li>
</ul>
</li>
<li><a href="#handling-versions-which-change-over-time">Handling versions which change over time</a><ul>
<li><a href="#declaring-a-dynamic-version">Declaring a dynamic version</a></li>
<li><a href="#declaring-a-changing-version">Declaring a changing version</a></li>
<li><a href="#controlling-dependency-cacheing-programmatically">Controlling dependency cacheing programmatically</a></li>
<li><a href="#controlling-dependency-caching-from-command-line">Controlling dependency caching from command line</a><ul>
<li><a href="#avoiding-network-access-with-offline-mode">Avoiding network access with offline mode</a></li>
<li><a href="#refreshing-dependencies">Refreshing dependencies</a></li>
</ul>
</li>
<li><a href="#using-component-selection-rules">Using component selection rules</a></li>
</ul>
</li>
<li><a href="#locking-dependency-versions">Locking dependency versions</a></li>
</ul>
</li>
<li><a href="#controlling-transitive-dependencies">Controlling transitive Dependencies</a><ul>
<li><a href="#adding-constraints-on-transitive-dependencies">Adding constraints on transitive dependencies</a></li>
<li><a href="#downgrading-versions-and-excluding-dependencies">Downgrading versions and excluding dependencies</a><ul>
<li><a href="#overriding-transitive-dependency-versions">Overriding transitive dependency versions</a></li>
<li><a href="#excluding-transitive-dependencies">Excluding transitive dependencies</a></li>
</ul>
</li>
<li><a href="#sharing-dependency-versions-between-projects">Sharing dependency versions between projects</a><ul>
<li><a href="#central-declaration-of-dependencies">Central declaration of dependencies</a></li>
<li><a href="#declaring-a-version-catalog">Declaring a version catalog</a></li>
<li><a href="#using-a-platform-to-control-transitive-versions">Using a platform to control transitive versions</a></li>
<li><a href="#importing-maven-boms">Importing Maven BOMs</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#excluding-a-dependency-from-a-configuration-completely">Excluding a dependency from a configuration completely</a></li>
<li><a href="#publishing-libraries">Publishing Libraries</a><ul>
<li><a href="#publishing-a-project-as-module">Publishing a project as module</a></li>
<li><a href="#what-to-publish">What to publish</a></li>
<li><a href="#where-to-publish">Where to publish</a></li>
<li><a href="#how-to-publish">How to publish</a></li>
<li><a href="#setting-up-basic-publishing">Setting up basic publishing</a></li>
<li><a href="#suppressing-validation-errors">Suppressing validation errors</a></li>
<li><a href="#understanding-gradle-module-metadata">Understanding Gradle Module Metadata</a></li>
<li><a href="#gradle-module-metadata-reproducibility">Gradle Module Metadata reproducibility</a></li>
<li><a href="#disabling-gradle-module-metadata-publication">Disabling Gradle Module Metadata publication</a></li>
<li><a href="#signing-artifacts">Signing artifacts</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- /TOC -->

<h1 id="Dependency-Management"><a href="#Dependency-Management" class="headerlink" title="Dependency Management"></a>Dependency Management</h1><h2 id="Learning-the-Basics"><a href="#Learning-the-Basics" class="headerlink" title="Learning the Basics"></a>Learning the Basics</h2><p>Gradle Build ä¼šè®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿçš„ä»“åº“, å¹¶å°†ä½¿ç”¨åˆ°çš„ artifact ä¿å­˜åˆ° Gradle Cache ä¸­</p>
<p>å¯ä»¥ä¸ºä¸åŒ <code>scope</code> å£°æ˜ä¸åŒçš„ä¾èµ–, ä¾‹å¦‚, ä¸ºç¼–è¯‘æºä»£ç çš„ <code>scope</code>, ä¸ºæ‰§è¡Œæµ‹è¯•çš„ <code>scope</code></p>
<p>åœ¨ Gradle ä¸­, ä¸€ä¸ªä¾èµ–çš„ <code>scope</code> è¢«ç§°ä¸ºé…ç½®(<code>configuration</code>)</p>
<h2 id="Declaring-repositories"><a href="#Declaring-repositories" class="headerlink" title="Declaring repositories"></a>Declaring repositories</h2><p>Example - Adding central Maven repository:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    mavenCentral()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Example - Adding Google Maven repository:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    google()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è‡ªå®šä¹‰ URLs çš„ä»“åº“å¯ä»¥è¢«å®šä¹‰ä¸º Maven æˆ–è€… Ivy ä»“åº“, é€šè¿‡è°ƒç”¨ <code>RepositoryHandler</code> API ä¸­å¯¹åº”çš„æ–¹æ³•æ¥å®šä¹‰</p>
<p>Gradle ä¸ä»…æ”¯æŒ <code>http</code> å’Œ <code>https</code> åè®®çš„ URLs, è¿˜æ”¯æŒ <code>file</code>, <code>sftp</code>, <code>s3</code> åè®®</p>
<p>å¯ä»¥ä½¿ç”¨ <code>ivy &#123;&#125;</code> æ¥å®šä¹‰ä½ è‡ªå·±çš„ä»“åº“å¸ƒå±€</p>
<p>Example - Declaring multiple repositories:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    mavenCentral()</span><br><span class="line">    maven &#123;</span><br><span class="line">        url <span class="string">&quot;http://repo.spring.io/release&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    maven &#123;</span><br><span class="line">        url <span class="string">&quot;https://repository.jboos.org/maven2&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»“åº“å£°æ˜çš„é¡ºåºå†³å®šäº† Gradle åœ¨è¿è¡Œæ—¶å°†ä¼šæ€æ ·æ£€æŸ¥ä¾èµ–. å¦‚æœ Gradle åœ¨ä¸€ä¸ªä»“åº“ä¸­å‘ç°äº†ä¸€ä¸ª <code>module</code> descriptor, Gradle å°†ä¼šå°è¯•åœ¨åŒä¸€ä¸ªä»“åº“ä¸­ä¸‹è½½è¿™ä¸ª <code>module</code> çš„æ‰€æœ‰ artifact</p>
<h2 id="Strict-limitation-to-declared-repositories"><a href="#Strict-limitation-to-declared-repositories" class="headerlink" title="Strict limitation to declared repositories"></a>Strict limitation to declared repositories</h2><p>Maven POM metadata å¯ä»¥å¼•ç”¨é¢å¤–çš„ä»“åº“. ä½†æ˜¯ Gradle ä¼šå¿½ç•¥è¿™äº›</p>
<p>Gradle åªä¼šä½¿ç”¨åœ¨æ„å»ºä¸­å£°æ˜çš„ä»“åº“</p>
<h2 id="Supported-repository-types"><a href="#Supported-repository-types" class="headerlink" title="Supported repository types"></a>Supported repository types</h2><h3 id="Different-formats"><a href="#Different-formats" class="headerlink" title="Different formats"></a>Different formats</h3><p>ä¸€ä¸ªå…¼å®¹ Maven æ„ä»¶çš„ä»“åº“</p>
<p>ä¸€ä¸ªå…¼å®¹ Ivy æ„å»ºçš„ä»“åº“(åŒ…æ‹¬è‡ªå®šä¹‰å¸ƒå±€)</p>
<p>æœ¬åœ°(æ‰å¹³)æ–‡ä»¶å¤¹</p>
<h3 id="With-different-connectivity"><a href="#With-different-connectivity" class="headerlink" title="With different connectivity"></a>With different connectivity</h3><p>ä¸€ä¸ªè®¤è¯çš„ä»“åº“</p>
<p>ä¸€ä¸ªå¤šç§è¿œç¨‹åè®®çš„ä»“åº“, ä¾‹å¦‚ HTTPS, SFTP, AWS S3</p>
<h2 id="Flat-directory-repository"><a href="#Flat-directory-repository" class="headerlink" title="Flat directory repository"></a>Flat directory repository</h2><p>Example - Flat repository resolver:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    <span class="keyword">flatDir</span> &#123;</span><br><span class="line">        dirs <span class="string">&#x27;lib&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">flatDir</span> &#123;</span><br><span class="line">        dirs <span class="string">&#x27;lib1&#x27;</span>, <span class="string">&#x27;lib2&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Gradle åœ¨è¿™äº›ç›®å½•ä¸­æŸ¥æ‰¾ä¾èµ–</p>
<p>è¿™ç§ç±»å‹çš„ä»“åº“ä¸æ”¯æŒä»»ä½•å…ƒæ•°æ®æ ¼å¼, ä¾‹å¦‚ Ivy XML, Maven POM æ–‡ä»¶</p>
<p>Gradle ä¼šåŸºäºå­˜åœ¨çš„æ„å»ºåŠ¨æ€åœ°ç”Ÿæˆä¸€ä¸ª <code>module</code> æè¿°å™¨(æ²¡æœ‰ä»»ä½•ä¾èµ–ä¿¡æ¯)</p>
<p>Gradle æ›´åŠ å€¾å‘äºä½¿ç”¨æœ‰çœŸæ­£ <code>module</code> æè¿°å™¨çš„ <code>module</code>, è€Œä¸æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„</p>
<p>å¦‚æœä¸¤ä¸ª <code>module</code> åŒæ—¶æ‰¾åˆ°, <code>flat directory</code> ä¸­çš„ <code>module</code>, å’Œå…¶ä»–ä»“åº“ä¸­çš„ <code>module</code>, å…¶ä»–ä»“åº“ä¸­çš„è¿™ä¸ª <code>module</code> æ‹¥æœ‰ <code>*.pom</code> æ–‡ä»¶æ¥å£°æ˜å…ƒæ•°æ®, Gradle å°†ä¼šä½¿ç”¨æœ‰ <code>*.pom</code> æ–‡ä»¶çš„ä»“åº“</p>
<h2 id="Local-repository"><a href="#Local-repository" class="headerlink" title="Local repository"></a>Local repository</h2><p>æœ¬åœ°ä»“åº“å’Œ <code>flat directory</code> çš„åŒºåˆ«åœ¨äºæœ¬åœ°ä»“åº“éµå¾ªä¸€ä¸ªæ ¼å¼ä¸åŒ…å«å…ƒæ•°æ®</p>
<p>å¦‚æœå®šä¹‰äº†æœ¬åœ°ä»“åº“, Gradle å®Œå…¨è·³è¿‡å®ƒçš„ä¾èµ–ç¼“å­˜, å› ä¸ºä¸èƒ½ä¿è¯åœ¨ä¸¤æ¬¡æ‰§è¡Œä¹‹é—´å†…å®¹ä¸ä¼šå‘ç”Ÿæ”¹å˜. ç”±äºè¿™ä¸ªé™åˆ¶, è¿™ä¼šæœ‰å¾ˆå¤§çš„æ€§èƒ½å½±å“</p>
<p>å®ƒä»¬ä¹Ÿä½¿å¾—æ„å»ºçš„é‡ç°æ€§æ›´åŠ éš¾ä»¥å®ç°ï¼Œå®ƒä»¬çš„ä½¿ç”¨åº”è¯¥é™äºä¿®è¡¥æˆ–åŸå‹å¼€å‘</p>
<h2 id="Maven-repositories"><a href="#Maven-repositories" class="headerlink" title="Maven repositories"></a>Maven repositories</h2><p>Gradle å¯ä»¥é€šè¿‡ URL æ¥å£°æ˜ Maven ä»“åº“</p>
<p>Example - Adding custom Maven repository:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    maven &#123;</span><br><span class="line">        url <span class="string">&quot;http://repo.mycompany.com/maven2&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Setting-up-composite-Maven-repositories"><a href="#Setting-up-composite-Maven-repositories" class="headerlink" title="Setting up composite Maven repositories"></a>Setting up composite Maven repositories</h3><p>æœ‰æ—¶å€™ä¸€ä¸ªä»“åº“ä¼šå°† POMs å‘å¸ƒåˆ°ä¸€ä¸ªä½ç½®, å°† JARs å‘å¸ƒåˆ°ä¸€ä¸ªä½ç½®, å°†æ„å»ºå‘å¸ƒåˆ°å¦å¤–ä¸€ä¸ªä½ç½®</p>
<p>Example - Adding additional Maven repositories for JAR files:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    maven &#123;</span><br><span class="line">        <span class="comment">// Look for POMs and artifacts, such as JARs, here</span></span><br><span class="line">        url <span class="string">&quot;http://repo2.mycompany.com/maven2&quot;</span></span><br><span class="line">        <span class="comment">// Look for artifacts here if not found at the above location</span></span><br><span class="line">        artifactUrls <span class="string">&quot;http://repo.mycompany.com/jars&quot;</span></span><br><span class="line">        artifactUrls <span class="string">&quot;http://repo.mycompany.com/jars2&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Gradle å°†ä¼šä» <code>url</code> ä¸­æœç´¢ POM å’Œ JAR. å¦‚æœ JAR æ‰¾ä¸åˆ°, å°†ä¼šä» <code>artifactUrl</code> æœç´¢</p>
<h3 id="Local-Maven-repository"><a href="#Local-Maven-repository" class="headerlink" title="Local Maven repository"></a>Local Maven repository</h3><p>Gradle å¯ä»¥ä»æœ¬åœ° Maven ä»“åº“ä¸­è·å–ä¾èµ–</p>
<p>Gradle åœ¨è‡ªå·±çš„ç¼“å­˜ä¸­ä¿å­˜è§£æå¥½çš„ä¾èµ–. ä¸€ä¸ªæ„å»ºä¸éœ€è¦å£°æ˜æœ¬åœ° Maven ä»“åº“, å³ä½¿ä½ ä»ä¸€ä¸ªè¿œç¨‹çš„ Maven ä»“åº“è§£æä¾èµ–</p>
<p>åœ¨æ·»åŠ ä¸€ä¸ª Maven æœ¬åœ°ä»“åº“ä¹‹å‰, ä½ åº”è¯¥ç¡®è®¤çœŸçš„éœ€è¦å®ƒ</p>
<p>Example - Adding the local Maven cache as a repository:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    mavenLocal()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Gradle é»˜è®¤ä» <code>USER_HOME/.m2</code> ä¸­è¯»å– <code>settings.xml</code> æ¥å®šä½æœ¬åœ° Maven ä»“åº“, å¦åˆ™ Gradle å°†ä¼šä½¿ç”¨é»˜è®¤çš„ <code>USER_HOME/.m2/repository</code> ä½ç½®</p>
<h3 id="The-case-of-mavenLocal"><a href="#The-case-of-mavenLocal" class="headerlink" title="The case of mavenLocal()"></a>The case of mavenLocal()</h3><p>åº”è¯¥å°½é‡é¿å…æ·»åŠ  <code>mavenLocal()</code> ä½œä¸ºä»“åº“. å­˜åœ¨çš„é—®é¢˜:</p>
<p>Maven ä½¿ç”¨å®ƒæ¥ä½œä¸ºä¸€ä¸ªç¼“å­˜, è€Œä¸æ˜¯ä¸€ä¸ªä»“åº“, æ„å‘³ç€å®ƒå¯èƒ½åŒ…å«ä¸å®Œå…¨çš„ <code>module</code>:</p>
<ul>
<li>ä¾‹å¦‚. å¦‚æœ Maven æ°¸è¿œæ²¡æœ‰ä¸‹è½½ä¸€ä¸ª <code>module</code> çš„æºç å’Œæ–‡æ¡£æ–‡ä»¶, é‚£ä¹ˆ Gradle ä¹Ÿä¸ä¼šæœç´¢å®ƒä»¬, å› ä¸º Gradle ä¸€æ—¦æ‰¾åˆ° <code>module</code>, å®ƒå°±ä¼šåœ¨å•ä¸ªå­˜å‚¨åº“ä¸­æœç´¢æ–‡ä»¶</li>
</ul>
<p>ä½œä¸ºä¸€ä¸ªæœ¬åœ°ä»“åº“, Gradle ä¸ç›¸ä¿¡å®ƒé‡Œé¢çš„å†…å®¹, å› ä¸º:</p>
<ul>
<li>æ„ä»¶çš„æºæ— æ³•è·Ÿè¸ª, å¯¼è‡´äº†æ­£ç¡®æ€§å’Œå®‰å…¨æ€§é—®é¢˜</li>
<li>æ„ä»¶å¯ä»¥å¾ˆå®¹æ˜“åœ°è¢«è¦†ç›–, å¯¼è‡´äº†æ­£ç¡®æ€§, å®‰å…¨æ€§, å¯é‡ç°æ€§é—®é¢˜</li>
</ul>
<p>ä¸ºäº†å‡è½»å…ƒæ•°æ®æˆ–è€…æ„ä»¶å¯ä»¥è¢«ä¿®æ”¹çš„äº‹å®, Gradle ä¸ä¼šä¸ºæœ¬åœ°ä»“åº“è¿›è¡Œä»»ä½•ç¼“å­˜:</p>
<ul>
<li>å¯¼è‡´çš„ç»“æœæ˜¯, ä½ çš„æ„å»ºä¼šæ›´åŠ æ…¢</li>
<li>å£°æ˜æœ¬åœ° Maven ä»“åº“çš„é¡ºåºæ˜¯å¾ˆé‡è¦çš„, å°† <code>mavenLocal()</code> æ”¾åœ¨æœ€å‰æ„å‘³ç€ä½ æ‰€æœ‰çš„æ„å»ºéƒ½ä¼šæ›´æ…¢</li>
</ul>
<p>æœ‰ä¸€äº›æƒ…å†µä½ è¿˜æ˜¯å¿…é¡»ä½¿ç”¨ <code>mavenLocal()</code>:</p>
<ul>
<li>å’Œ Maven äº’ç›¸æ“ä½œ</li>
<li>å’Œ Gradle è‡ªå·±äº’ç›¸æ“ä½œ</li>
</ul>
<p>å¦‚æœè¿˜æ˜¯è¦ä½¿ç”¨ <code>mavenLocal()</code>, è®°å¾—å°†å…¶å’Œä»“åº“è¿‡æ»¤å™¨ä¸€èµ·ä½¿ç”¨</p>
<h2 id="Ivy-repositories"><a href="#Ivy-repositories" class="headerlink" title="Ivy repositories"></a>Ivy repositories</h2><h3 id="Defining-an-Ivy-repositories-with-a-standard-layout"><a href="#Defining-an-Ivy-repositories-with-a-standard-layout" class="headerlink" title="Defining an Ivy repositories with a standard layout"></a>Defining an Ivy repositories with a standard layout</h3><p>Example - Ivy repository:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    ivy &#123;</span><br><span class="line">        url <span class="string">&quot;http://repo.mycompany.com/repo&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Defining-a-named-layout-for-an-Ivy-repository"><a href="#Defining-a-named-layout-for-an-Ivy-repository" class="headerlink" title="Defining a named layout for an Ivy repository"></a>Defining a named layout for an Ivy repository</h3><p>Example - Ivy repository with named layout:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    ivy &#123;</span><br><span class="line">        url <span class="string">&quot;http://repo.mycompany.com/repo&quot;</span></span><br><span class="line">        layout <span class="string">&quot;maven&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æœ‰æ•ˆçš„ <code>layout</code> æ˜¯:</p>
<ul>
<li><code>gradle</code>(é»˜è®¤)</li>
<li><code>maven</code></li>
<li><code>ivy</code></li>
</ul>
<p>åœ¨ <code>IvyArtifactRepository.layout(java.lang.String)</code> API ä¸­æŸ¥çœ‹æ›´å¤š <code>named layout</code> çš„ç»†èŠ‚</p>
<h3 id="Defining-custom-pattern-layout-for-an-Ivy-repository"><a href="#Defining-custom-pattern-layout-for-an-Ivy-repository" class="headerlink" title="Defining custom pattern layout for an Ivy repository"></a>Defining custom pattern layout for an Ivy repository</h3><p>Example - Ivy repository with pattern layout:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    ivy &#123;</span><br><span class="line">        url <span class="string">&quot;http://repo.mycompany.com/repo&quot;</span></span><br><span class="line">        patternLayout &#123;</span><br><span class="line">            artifact <span class="string">&quot;[module]/[revision]/[type]/[artifact].[ext]&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Accessing-authenticated-Ivy-repositories"><a href="#Accessing-authenticated-Ivy-repositories" class="headerlink" title="Accessing authenticated Ivy repositories"></a>Accessing authenticated Ivy repositories</h3><p>Example - Ivy repository with authentication:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    ivy &#123;</span><br><span class="line">        url <span class="string">&quot;http://repo.mycompany.com&quot;</span></span><br><span class="line">        credentials &#123;</span><br><span class="line">            username <span class="string">&quot;user&quot;</span></span><br><span class="line">            password <span class="string">&quot;password&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Repository-content-filtering"><a href="#Repository-content-filtering" class="headerlink" title="Repository content filtering"></a>Repository content filtering</h2><p>Example - Declaring repository contents:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    maven &#123;</span><br><span class="line">        url <span class="string">&quot;http://repo.mycompany.com/maven2&quot;</span></span><br><span class="line">        content &#123;</span><br><span class="line">            <span class="comment">// this repository *only* contains artifacts with group &quot;my.company&quot;</span></span><br><span class="line">            includeGroup <span class="string">&quot;my.company&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    mavenCentral &#123;</span><br><span class="line">        content &#123;</span><br><span class="line">            <span class="comment">// this repository contains everything BUT artifacts with group starting with &quot;my.company&quot;</span></span><br><span class="line">            excludeGroupByRegex <span class="string">&quot;my\\.company.*&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é»˜è®¤æƒ…å†µä¸‹, ä»“åº“åŒ…å«æ‰€æœ‰ä¸œè¥¿, ä»€ä¹ˆä¸œè¥¿éƒ½ä¸æ’é™¤</p>
<p>å¦‚æœä½ å£°æ˜äº† <code>include</code>, å°†ä¼š <code>exclude</code> åŒ…å«çš„ä¸œè¥¿ä»¥å¤–çš„æ‰€æœ‰ä¸œè¥¿</p>
<p>å¦‚æœä½ å£°æ˜äº† <code>exclude</code>, å°†ä¼š <code>include</code> æ’é™¤çš„ä¸œè¥¿ä»¥å¤–çš„æ‰€æœ‰ä¸œè¥¿</p>
<p>å¦‚æœä½ åŒæ—¶å£°æ˜äº† <code>include</code> å’Œ <code>exclude</code>, åªä¼š <code>include</code> å£°æ˜çš„ä¸œè¥¿å’Œæ²¡æœ‰è¢« <code>exclude</code> çš„ä¸œè¥¿</p>
<p>å¯ä»¥ä½¿ç”¨æŒ‡å®š <code>group</code>, <code>module</code>, <code>version</code>, æˆ–è€…ç²¾ç¡®çš„å’Œæ­£åˆ™çš„è¡¨è¾¾å¼æ¥è¿›è¡Œè¿‡æ»¤</p>
<p>å¯ä»¥ä½¿ç”¨ <code>version</code> èŒƒå›´æ¥è¿‡æ»¤</p>
<p>å¯ä»¥é€šè¿‡é…ç½®åæˆ–è€…é…ç½®å€¼æ¥è¿›è¡Œè¿‡æ»¤</p>
<p>æŸ¥çœ‹ <code>RespositoryContentDescriptor</code> äº†è§£æ›´å¤šç»†èŠ‚</p>
<h3 id="Declaring-content-exclusively-fonud-in-one-repository"><a href="#Declaring-content-exclusively-fonud-in-one-repository" class="headerlink" title="Declaring content exclusively fonud in one repository"></a>Declaring content exclusively fonud in one repository</h3><p><code>exclusively</code> : ç‹¬å åœ°</p>
<p>Example - Declaring exclusive repository contents:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    <span class="comment">// This repository will *not* be searched for artifacts in my.company</span></span><br><span class="line">    <span class="comment">// despite being declared first</span></span><br><span class="line">    mavenCentral()</span><br><span class="line">    exclusiveContent &#123;</span><br><span class="line">        forRepository &#123;</span><br><span class="line">            maven &#123;</span><br><span class="line">                url <span class="string">&quot;http://repo.mycompany.com/maven2&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        filter &#123;</span><br><span class="line">            <span class="comment">// this repository *only* contains artifacts with group &quot;my.company&quot;</span></span><br><span class="line">            includeGroup <span class="string">&quot;my.company&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Maven-repository-filtering"><a href="#Maven-repository-filtering" class="headerlink" title="Maven repository filtering"></a>Maven repository filtering</h2><p>Example - Splitting snapshots and releases:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    maven &#123;</span><br><span class="line">        url <span class="string">&quot;https://repo.mycompany.com/releases&quot;</span></span><br><span class="line">        mavenContent &#123;</span><br><span class="line">            releaseOnly()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    maven &#123;</span><br><span class="line">        url <span class="string">&quot;http://repo.mycompany.com/snapshots&quot;</span></span><br><span class="line">        mavenContent &#123;</span><br><span class="line">            snapshotsOnly()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Supported-metadata-sources"><a href="#Supported-metadata-sources" class="headerlink" title="Supported metadata sources"></a>Supported metadata sources</h2><p>å½“åœ¨ä¸€ä¸ªä»“åº“ä¸­æœç´¢ä¸€ä¸ª <code>module</code> æ—¶, Gradle é»˜è®¤åœ°åœ¨ä»“åº“ä¸­æ£€æŸ¥ æ”¯æŒçš„å…ƒæ•°æ®æ–‡ä»¶æ ¼å¼(<code>supported metadata file formats</code>)</p>
<p>åœ¨ä¸€ä¸ª Maven ä»“åº“ä¸­, Gradle æŸ¥æ‰¾ä¸€ä¸ª <code>.pom</code> æ–‡ä»¶</p>
<p>åœ¨ä¸€ä¸ª Ivy ä»“åº“ä¸­, Gradle æŸ¥æ‰¾ä¸€ä¸ª <code>Ivy.xml</code> æ–‡ä»¶</p>
<p>åœ¨ä¸€ä¸ª flat directory ä»“åº“ä¸­, Gradle ç›´æ¥æŸ¥æ‰¾ <code>.jar</code> æ–‡ä»¶, å› ä¸ºæ²¡æœ‰å…ƒæ•°æ®æ–‡ä»¶</p>
<p>ä» 5.0 ç‰ˆæœ¬å¼€å§‹, Gradle è¿˜ä¼šæŸ¥æ‰¾ <code>.module</code> æ–‡ä»¶</p>
<p>å¦‚æœä½ å®šä¹‰äº†ä¸€ä¸ªè‡ªå®šä¹‰ä»“åº“, æƒ³è¦æ§åˆ¶è¿™äº›è¡Œä¸º. ä¾‹å¦‚, å®šä¹‰ä¸€ä¸ªæ²¡æœ‰ <code>.pom</code> æ–‡ä»¶çš„åªæœ‰ jar æ–‡ä»¶çš„ Maven ä»“åº“, å¯ä»¥è¿™æ ·è¿›è¡Œé…ç½®:</p>
<p>Example - Maven repository that supports artifacts without metadata:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    maven &#123;</span><br><span class="line">        url <span class="string">&quot;http://repository.mycompany.com/repo&quot;</span></span><br><span class="line">        metadataSources &#123;</span><br><span class="line">            mavenPom()</span><br><span class="line">            artifact()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥å£°æ˜å¤šä¸ª <code>sources</code> æ¥å‘Šè¯‰ Gradle æ¥åœ¨ä¸€ä¸ªæ–‡ä»¶æŸ¥æ‰¾ä¸åˆ°æ—¶ç»§ç»­å¯»æ‰¾, é€šè¿‡ <code>sources</code> çš„é¡ºåºæ¥è¿›è¡Œå¯»æ‰¾</p>
<p>Table - Supported metadata sources:</p>
<table>
<thead>
<tr>
<th align="left">Metadata</th>
<th align="left">Description</th>
<th align="left">Order</th>
<th align="left">Maven</th>
<th align="left">Ivy&#x2F;flat dir</th>
</tr>
</thead>
<tbody><tr>
<td align="left">gradleMetadata()</td>
<td align="left">å¯»æ‰¾ <code>.module</code> æ–‡ä»¶</td>
<td align="left">ç¬¬ä¸€</td>
<td align="left">yes</td>
<td align="left">yes</td>
</tr>
<tr>
<td align="left">mavenPom()</td>
<td align="left">å¯»æ‰¾ <code>.pom</code> æ–‡ä»¶</td>
<td align="left">ç¬¬äºŒ</td>
<td align="left">yes</td>
<td align="left">yes</td>
</tr>
<tr>
<td align="left">ivyDescriptor()</td>
<td align="left">å¯»æ‰¾ <code>ivy.xml</code> æ–‡ä»¶</td>
<td align="left">ç¬¬äºŒ</td>
<td align="left">no</td>
<td align="left">yes</td>
</tr>
<tr>
<td align="left">artifact()</td>
<td align="left">ç›´æ¥å¯»æ‰¾æ„ä»¶æ–‡ä»¶</td>
<td align="left">ç¬¬ä¸‰</td>
<td align="left">yes</td>
<td align="left">yes</td>
</tr>
</tbody></table>
<p>Ivy å’Œ Maven ä»“åº“çš„é»˜è®¤è¡Œä¸ºä» Gradle 6.0 å¼€å§‹å˜åŒ–äº†</p>
<p>åœ¨ 6.0 ä¹‹å‰, <code>artifact()</code> æ˜¯é»˜è®¤å¼•å…¥çš„, å¯¼è‡´äº†åœ¨ <code>module</code> å®Œå…¨ä¸å­˜åœ¨æ—¶æ•ˆç‡å¾ˆå·®. ä¸ºäº†ä¿®æ­£è¿™ä¸ªè¡Œä¸º, å¯¹äº Maven ä»“åº“å¯ä»¥ä½¿ç”¨ <code>mavenCentral &#123; metadataSources &#123; mavenPom(); artifact() &#125; &#125;</code></p>
<p>åœ¨æ—§ç‰ˆæœ¬ä¸­, <code>mavenCentral &#123; metadataSources &#123; mavenPom() &#125; &#125;</code> å¯ä»¥è¾¾åˆ°åŒæ ·çš„è¡Œä¸º</p>
<p>ä» Gradle 5.3 å¼€å§‹, å½“è§£æä¸€ä¸ª metadata æ–‡ä»¶æ—¶, Ivy çš„æˆ–è€… Maven çš„, Gradle ä¼šå¯»æ‰¾ä¸€ä¸ª marker æ¥è¡¨æ˜ä¸€ä¸ªåŒ¹é…çš„ Gradle module metadata æ–‡ä»¶æ˜¯å¦å­˜åœ¨. å¦‚æœå­˜åœ¨, å°†ä¼šä½¿ç”¨è¿™ä¸ª module æ–‡ä»¶</p>
<p>ä» Gradle 5.6 å¼€å§‹, å¯ä»¥é€šè¿‡æ·»åŠ  <code>ignoreGradleMetadataRedirection()</code> æ¥åœæ­¢è¿™ä¸ªåŠŸèƒ½</p>
<p>Example - Mavne repository that does not use gradle metadata redirection:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    maven &#123;</span><br><span class="line">        url <span class="string">&quot;http://repo.mycompany.com/repo&quot;</span></span><br><span class="line">        metadataSources &#123;</span><br><span class="line">            mavenPom()</span><br><span class="line">            artifact()</span><br><span class="line">            ignoreGradleMetadataRedirection()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Plugin-repositories-vs-build-repositories"><a href="#Plugin-repositories-vs-build-repositories" class="headerlink" title="Plugin repositories vs. build repositories"></a>Plugin repositories vs. build repositories</h2><p>Gradle å°†ä¼šåœ¨æ„å»ºçš„ä¸¤ä¸ªä¸åŒé˜¶æ®µä½¿ç”¨ä»“åº“</p>
<p>ç¬¬ä¸€ä¸ªé˜¶æ®µæ˜¯é…ç½®ä½ çš„æ„å»ºå¹¶åŠ è½½æ’ä»¶æ—¶, Gradle å°†ä¼šä½¿ç”¨ä¸€ç»„ç‰¹åˆ«çš„ä»“åº“</p>
<p>ç¬¬äºŒä¸ªé˜¶æ®µæ˜¯åœ¨ä¾èµ–è§£æçš„æ—¶å€™, åœ¨è¿™ä¸ªæ—¶å€™ Gradle å°†ä¼šä½¿ç”¨ä½ åœ¨é¡¹ç›®ä¸­å£°æ˜çš„ä»“åº“</p>
<h3 id="Plugin-repositories"><a href="#Plugin-repositories" class="headerlink" title="Plugin repositories"></a>Plugin repositories</h3><p>é»˜è®¤æƒ…å†µä¸‹, Gradle å°†ä¼šä½¿ç”¨ <code>Gradle plugin portal</code> æ¥æœç´¢æ’ä»¶</p>
<p>Example - Using plugins from custom plugin repositories:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// setting.gradle</span></span><br><span class="line">pluginManagement &#123;</span><br><span class="line">    <span class="keyword">repositories</span> &#123;</span><br><span class="line">        maven &#123;</span><br><span class="line">            url <span class="string">&#x27;./maven-repo&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">        gradlePluginPortal()</span><br><span class="line">        ivy &#123;</span><br><span class="line">            url <span class="string">&#x27;./ivy-repo&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Centralizing-repositories-declaration"><a href="#Centralizing-repositories-declaration" class="headerlink" title="Centralizing repositories declaration"></a>Centralizing repositories declaration</h2><p>é™¤äº†åœ¨æ¯ä¸ªå­é¡¹ç›®çš„æ„å»ºä¸­, æˆ–è€…åœ¨ä¸€ä¸ª <code>allprojects &#123;&#125;</code> ä¸­å£°æ˜ä»“åº“</p>
<p>Gradle æä¾›äº†ä¸€ä¸ªé›†ä¸­çš„åœ°æ–¹æ¥ä¸ºæ‰€æœ‰é¡¹ç›®è¿›è¡Œå£°æ˜</p>
<p>ä½œä¸ºçº¦å®šå¹¶åº”ç”¨äºæ‰€æœ‰å­é¡¹ç›®çš„ä»“åº“å¯ä»¥è¢«å£°æ˜åœ¨ <code>settings.gradle</code> æ–‡ä»¶ä¸­</p>
<p>Example - Declaring a Maven repository in settings:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// settings.gradle</span></span><br><span class="line">dependencyResolutionManagement &#123;</span><br><span class="line">    <span class="keyword">repositories</span> &#123;</span><br><span class="line">        mavenCentral()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é»˜è®¤æƒ…å†µä¸‹, ä¸€ä¸ªé¡¹ç›®ä¸­çš„ä»“åº“å£°æ˜å°†ä¼šè¦†ç›– <code>settings</code> ä¸­çš„å£°æ˜, å¯ä»¥é€šè¿‡ä¿®æ”¹è¿™ä¸ªè¡Œä¸ºæ¥ç¡®ä¿æ€»æ˜¯ä½¿ç”¨ <code>settings</code> ä¸­çš„å£°æ˜</p>
<p>Example - Preferring settings repositories:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// settings.gradle</span></span><br><span class="line">dependencyResolutionManagement &#123;</span><br><span class="line">    repositoriesMode.set(RepositoriesMode.PREFER_SETTINS)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å› ä¸ºä¸€äº›åŸå› , ä¸€ä¸ªé¡¹ç›®æˆ–è€…ä¸€ä¸ªå£°æ˜äº†ä¸€ä¸ªä»“åº“, Gradle ä¼šè¿›è¡Œè­¦å‘Š, ä½ å¯ä»¥è®©æ„å»ºå› ä¸ºè¿™æ ·çš„è¡Œä¸ºè€Œå¤±è´¥, ä»è€Œå¼ºåˆ¶ä½¿ç”¨ <code>settings</code> ä¸­çš„ä»“åº“</p>
<p>Example - Enforcing settings repositories:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// settings.gradle</span></span><br><span class="line">dependencyResolutionManagement &#123;</span><br><span class="line">    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Example - Preferring project repositories:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// settings.gradle</span></span><br><span class="line">dependencyResolutionManagement &#123;</span><br><span class="line">    repositoriesMode.set(RepositoriesMode.PREFER_PROJECT)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Supported-repository-transport-protocols"><a href="#Supported-repository-transport-protocols" class="headerlink" title="Supported repository transport protocols"></a>Supported repository transport protocols</h2><p>Table - Repository transport protocols:</p>
<table>
<thead>
<tr>
<th align="left">Type</th>
<th align="left">Credential types</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>file</code></td>
<td align="left">none</td>
</tr>
<tr>
<td align="left"><code>http</code></td>
<td align="left">username&#x2F;password</td>
</tr>
<tr>
<td align="left"><code>https</code></td>
<td align="left">username&#x2F;password</td>
</tr>
<tr>
<td align="left"><code>sftp</code></td>
<td align="left">username&#x2F;password</td>
</tr>
<tr>
<td align="left"><code>s3</code></td>
<td align="left">access key&#x2F;secret key&#x2F;session token or Environment variables</td>
</tr>
<tr>
<td align="left"><code>gcs</code></td>
<td align="left">default application credentials sourced from well known files, Environment variables etc</td>
</tr>
</tbody></table>
<p>ä¸è¦å°†å¯†ç æ˜æ–‡ä¿å­˜åœ¨æ„å»ºè„šæœ¬ä¸­</p>
<p>å¯ä»¥å°†è¯ä¹¦å­˜å‚¨åœ¨ä¸€ä¸ªæœ¬åœ°çš„ <code>gradle.properties</code> æ–‡ä»¶ä¸­, ç„¶åä½¿ç”¨ä¸€ä¸ªå¼€æºçš„ Gradle æ’ä»¶æ¥åŠ è§£å¯†è¯ä¹¦, ä¾‹å¦‚ <code>credentials plugin</code></p>
<p>Example - Using the SFTP protocol for a repository:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    maven &#123;</span><br><span class="line">        url <span class="string">&quot;sftp://repo.mycompany.com:22/maven2&quot;</span></span><br><span class="line">        credentials &#123;</span><br><span class="line">            username <span class="string">&quot;user&quot;</span></span><br><span class="line">            password <span class="string">&quot;password&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ivy &#123;</span><br><span class="line">        url <span class="string">&quot;sftp://repo.mycompany.com:22/repo&quot;</span></span><br><span class="line">        credentials &#123;</span><br><span class="line">            username <span class="string">&quot;user&quot;</span></span><br><span class="line">            password <span class="string">&quot;password&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="HTTP-S-authentication-schemes-configuration"><a href="#HTTP-S-authentication-schemes-configuration" class="headerlink" title="HTTP(S) authentication schemes configuration"></a>HTTP(S) authentication schemes configuration</h2><p>Exampel - Accessing password-protected Maven repository:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    maven &#123;</span><br><span class="line">        url <span class="string">&quot;http://repo.mycompany.com/maven2&quot;</span></span><br><span class="line">        credentials &#123;</span><br><span class="line">            username <span class="string">&quot;user&quot;</span></span><br><span class="line">            password <span class="string">&quot;password&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Example - Configure repository to use only digest authentication:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    maven &#123;</span><br><span class="line">        url <span class="string">&quot;https://repo.mycompany.com/maven2&quot;</span></span><br><span class="line">        credentials &#123;</span><br><span class="line">            username <span class="string">&quot;user&quot;</span></span><br><span class="line">            password <span class="string">&quot;password&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">        authentication &#123;</span><br><span class="line">            digest(DigestAuthentication)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“å‰æ”¯æŒçš„ authentication schemes æ˜¯:</p>
<ul>
<li>BasicAuthentication</li>
<li>DigestAuthentication</li>
<li>HttpHeaderAuthentication</li>
</ul>
<h3 id="using-preemptive-authentication"><a href="#using-preemptive-authentication" class="headerlink" title="using preemptive authentication"></a>using preemptive authentication</h3><p><code>preemptive</code> : æŠ¢å å¼</p>
<p>Gradle çš„é»˜è®¤è¡Œä¸ºæ˜¯ä»…ä»…åœ¨ä¸€ä¸ªæœåŠ¡å™¨å“åº” HTTP 401 æ—¶æ‰æäº¤è®¤è¯</p>
<p>åœ¨ä¸€äº›æƒ…å†µä¸‹, æœåŠ¡å™¨å¯èƒ½ä¼šå“åº”ä¸åŒçš„ä»£ç ä»è€Œå¯¼è‡´ä¾èµ–è§£æå¤±è´¥</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜, è®¤è¯å¯ä»¥æŠ¢å å¼åœ°å‘é€ç»™æœåŠ¡å™¨</p>
<p>é€šè¿‡é…ç½® BasicAuthentication scheme æ¥æ˜¾å¼ä½¿ç”¨æŠ¢å å¼è®¤è¯</p>
<p>Example - Configure repository to use preemtive authentication:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    maven &#123;</span><br><span class="line">        url <span class="string">&#x27;https://repo.mycompany.com/maven2&quot;</span></span><br><span class="line"><span class="string">        credentials &#123;</span></span><br><span class="line"><span class="string">            username &quot;user&quot;</span></span><br><span class="line"><span class="string">            password &quot;password&quot;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        authentication &#123;</span></span><br><span class="line"><span class="string">            basic(BasicAuthentication)</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="Using-HTTP-header-authentication"><a href="#Using-HTTP-header-authentication" class="headerlink" title="Using HTTP header authentication"></a>Using HTTP header authentication</h3><p>é€šè¿‡ <code>HttpHeaderCredentials</code> ä½¿ç”¨ <code>HttpHeaderAuthentication</code> æ¥æŒ‡å®šä»»ä½• HTTP header ç±»æ¥ä½¿ç”¨è¦æ±‚ token, OAuth2, æˆ–è€…å…¶ä»–åŸºäº HTTP header è®¤è¯çš„ä¿å¯† Maven ä»“åº“</p>
<p>Example - Accessing header-protected Maven repository:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    maven &#123;</span><br><span class="line">        url <span class="string">&quot;http://repo.mycompany.com/maven2&quot;</span></span><br><span class="line">        credentials(HttpHeaderCredentials) &#123;</span><br><span class="line">            name = <span class="string">&quot;Private-Token&quot;</span></span><br><span class="line">            value = <span class="string">&quot;TOKEN&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">        authentication &#123;</span><br><span class="line">            header(HttpHeaderAuthentication)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Handling-credentials"><a href="#Handling-credentials" class="headerlink" title="Handling credentials"></a>Handling credentials</h2><p>ä¸è¦å°†ç”¨æˆ·åå¯†ç ä¿å­˜åˆ°æ„å»ºè„šæœ¬ä¸­, å°†å…¶ä¿å­˜åˆ° Gradle Properties ä¸­</p>
<p>Example - Externalized repository credentials:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    mavne &#123;</span><br><span class="line">        name = <span class="string">&quot;mySecureRepository&quot;</span></span><br><span class="line">        credentials(PasswordCredentials)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”¨æˆ·åå’Œå¯†ç å°†ä¼šé€šè¿‡ <code>mySecureRepositoryUsername</code> å’Œ <code>mySecureRepositoryPassword</code> property æ¥è¿›è¡ŒæŸ¥æ‰¾</p>
<p>è®¤è¯ä¿¡æ¯å¯ä»¥é€šè¿‡ <code>gradle.properties</code> æ–‡ä»¶, å‘½ä»¤è¡Œå‚æ•°, ç¯å¢ƒå˜é‡æˆ–è€…è¿™äº›æ–¹å¼çš„ç»„åˆæ¥æä¾›</p>
<p>è®¤è¯ä¿¡æ¯åªæœ‰åœ¨æ„å»ºçœŸæ­£ä½¿ç”¨åˆ°å®ƒçš„æ—¶å€™æ‰ä¼šè¿›è¡Œè®¿é—®</p>
<p>å¦‚æœçœŸçš„éœ€è¦ç”¨åˆ°è®¤è¯ä¿¡æ¯, Gradle å°†ä¼šé¦–å…ˆæ£€æŸ¥æ„å»ºä¿¡æ¯æ˜¯å¦å­˜åœ¨, å¦‚æœä¸å­˜åœ¨åˆ™ä¸ä¼šæ‰§è¡Œåé¢çš„ <code>task</code></p>
<p>Table - Credentials that support value lookup and their corresponding properties:</p>
<table>
<thead>
<tr>
<th align="left">Type</th>
<th align="left">Argument</th>
<th align="left">Base property name</th>
<th align="left">Required?</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>PasswordCredentials</code></td>
<td align="left">username</td>
<td align="left">Username</td>
<td align="left">required</td>
</tr>
<tr>
<td align="left"><code>PasswordCredentials</code></td>
<td align="left">password</td>
<td align="left">Password</td>
<td align="left">required</td>
</tr>
<tr>
<td align="left"><code>AwsCredentials</code></td>
<td align="left">accesskey</td>
<td align="left">AccessKey</td>
<td align="left">required</td>
</tr>
<tr>
<td align="left"><code>AwsCredentials</code></td>
<td align="left">secretKey</td>
<td align="left">SecretKey</td>
<td align="left">required</td>
</tr>
<tr>
<td align="left"><code>AwsCredentials</code></td>
<td align="left">sessionToken</td>
<td align="left">SessionToken</td>
<td align="left">optional</td>
</tr>
<tr>
<td align="left"><code>HttpHeaderCredentials</code></td>
<td align="left">name</td>
<td align="left">AuthHeaderName</td>
<td align="left">required</td>
</tr>
<tr>
<td align="left"><code>PasswordCredentials</code></td>
<td align="left">value</td>
<td align="left">AuthHeaderValue</td>
<td align="left">required</td>
</tr>
</tbody></table>
<h2 id="Declaring-dependencies"><a href="#Declaring-dependencies" class="headerlink" title="Declaring dependencies"></a>Declaring dependencies</h2><h3 id="What-are-dependency-configurations"><a href="#What-are-dependency-configurations" class="headerlink" title="What are dependency configurations"></a>What are dependency configurations</h3><p>Gradle é¡¹ç›®ä¸­å£°æ˜çš„æ¯ä¸ªä¾èµ–éƒ½è¢«åº”ç”¨åˆ°ä¸€ä¸ªæŒ‡å®šçš„ä½œç”¨åŸŸ(<code>scope</code>)</p>
<p>Gradle åœ¨é…ç½®çš„å¸®åŠ©ä¸‹è¡¨ç¤ºä¾èµ–çš„ä½œç”¨åŸŸ</p>
<p>æ¯ä¸ªé…ç½®éƒ½é€šè¿‡ä¸€ä¸ªå”¯ä¸€çš„åå­—æ¥è¿›è¡Œæ ‡è¯†</p>
<p>è®¸å¤š Gradle æ’ä»¶æ·»åŠ äº†é¢„å®šä¹‰çš„é…ç½®åˆ°ä½ çš„é¡¹ç›®ä¸­. ä¾‹å¦‚ Java æ’ä»¶, æ·»åŠ é…ç½®æ¥è¡¨ç¤ºä¸åŒçš„ classpath</p>
<h4 id="Configuration-inheritance-and-composition"><a href="#Configuration-inheritance-and-composition" class="headerlink" title="Configuration inheritance and composition"></a>Configuration inheritance and composition</h4><p>ä¸€ä¸ªé…ç½®å¯ä»¥ç»§æ‰¿å…¶ä»–é…ç½®, æ¥å½¢æˆä¸€ä¸ªç»§æ‰¿å±‚æ¬¡ç»“æ„</p>
<p>å­é…ç½®ç»§æ‰¿äº†çˆ¶é…ç½®ä¸­å£°æ˜çš„æ‰€æœ‰çš„ä¾èµ–</p>
<p>é…ç½®ç»§æ‰¿åœ¨ Gradle æ ¸å¿ƒæ’ä»¶ä¸­å¤§é‡ä½¿ç”¨, ä¾‹å¦‚ Java æ’ä»¶, <code>testImplementation</code> é…ç½®ç»§æ‰¿äº† <code>implemention</code> é…ç½®</p>
<p>å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>Configuration.extendsFrom(org.gradle.api.artifacts.Configuration[])</code> æ–¹æ³•æ¥ç»§æ‰¿å…¶ä»–é…ç½®</p>
<p>ä¸€ä¸ªé…ç½®å¯ä»¥ç»§æ‰¿å…¶ä»–é…ç½®, ä¸ç®¡è¿™ä¸ªé…ç½®æ˜¯å®šä¹‰åœ¨æ„å»ºè„šæœ¬ä¸­è¿˜æ˜¯æ¥è‡ªæ’ä»¶</p>
<p>ä¾‹å¦‚, å®šä¹‰ä¸€ä¸ªæ–°çš„ç§°ä¸º <code>smokeTest</code> çš„é…ç½®, è¿™ä¸ªé…ç½®ç»§æ‰¿äº† <code>testImplementation</code> é…ç½®æ¥é‡ç”¨å·²ç»å­˜åœ¨çš„æµ‹è¯•æ¡†æ¶ä¾èµ–</p>
<p>Example - Extending a configuration from another configuration:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">configurations</span> &#123;</span><br><span class="line">    smokeTest.extendsFrom testImplementation</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    testImplementation <span class="string">&#x27;junit:junit:4.13&#x27;</span></span><br><span class="line">    smokeTest <span class="string">&#x27;org.apache.httpcomponents:httpclient:4.5.5&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Resolvable-and-consumable-configurations"><a href="#Resolvable-and-consumable-configurations" class="headerlink" title="Resolvable and consumable configurations"></a>Resolvable and consumable configurations</h3><p>åœ¨ Gradle ä¸­, é…ç½®æ˜¯ä¾èµ–è§£æå¿…ä¸å¯å°‘çš„ä¸€éƒ¨åˆ†</p>
<p>åœ¨ä¾èµ–è§£æçš„ä¸Šä¸‹æ–‡ä¸­, åŒºåˆ«ä¸€ä¸ª <code>consumer</code> å’Œ ä¸€ä¸ª <code>producer</code> æ˜¯å¾ˆæœ‰ç”¨çš„</p>
<p>é…ç½®è‡³å°‘æœ‰ 3 ä¸­ä¸åŒçš„è§„åˆ™:</p>
<ol>
<li>å£°æ˜ä¾èµ–</li>
<li>ä½œä¸ºä¸€ä¸ª <code>consumer</code>, å°†ä¸€ç»„ä¾èµ–è§£æåˆ°æ–‡ä»¶</li>
<li>ä½œä¸ºä¸€ä¸ª <code>producer</code>, æš´éœ² artifact å’Œ å®ƒä»¬çš„ä¾èµ–, ä¾›å…¶ä»–é¡¹ç›®ä½¿ç”¨ (è¿™ç§å¯æ¶ˆè´¹çš„é…ç½®é€šå¸¸ä»£è¡¨ç”Ÿäº§è€…æä¾›ç»™æ¶ˆè´¹è€…çš„å˜ä½“)</li>
</ol>
<p>Example - Configurations are used to declare dependencies:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">configurations</span> &#123;</span><br><span class="line">    <span class="comment">// declare a &quot;configuration&quot; named &quot;someConfiguration&quot;</span></span><br><span class="line">    someConfiguration</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    <span class="comment">// add a project dependency to the &quot;someConfiguration&quot; configuration</span></span><br><span class="line">    someConfiguration <span class="keyword">project</span>(<span class="string">&quot;:lib&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ä¾‹å­ä¸­æ²¡æœ‰å‘Šè¯‰æˆ‘ä»¬å…³äºè¿™ä¸ªé…ç½®çš„é¢„æœŸä½¿ç”¨è€…çš„ä»»ä½•ä¿¡æ¯, ç‰¹åˆ«æ˜¯, å®ƒæ²¡æœ‰å‘Šè¯‰æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨é…ç½®</p>
<p>Example - Configurations representing concrete dependency graphs - è¡¨ç¤ºå…·ä½“ä¾èµ–å…³ç³»å›¾çš„é…ç½®:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">configurations</span> &#123;</span><br><span class="line">    <span class="comment">// declare a configuration that is going to resolve the compile classpath of the application</span></span><br><span class="line">    compileClasspath.extendsFrom(someConfiguration)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// declare a configuration that is going to resolve the runtime classpath of the application</span></span><br><span class="line">    runtimeClasspath.extendsFrom(someConfiguration)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶, æˆ‘ä»¬æœ‰ 3 ä¸ªä¸åŒçš„é…ç½®, å…·æœ‰ä¸åŒçš„è§’è‰²</p>
<ul>
<li><code>someConfiguration</code> å£°æ˜äº†æˆ‘ä»¬é¡¹ç›®çš„ä¾èµ–. å®ƒä»…ä»…æ˜¯ä¸€ä¸ªåŒ…å«äº†ä¸€ç³»åˆ—ä¾èµ–çš„æ¡¶</li>
<li><code>compileClasspath</code> å’Œ <code>runtimeClasspath</code> æ˜¯è¦è¢«è§£æçš„é…ç½®</li>
</ul>
<p>åœ¨ <code>Configuration</code> ç±»ä¸­è¿™ä¸ªåŒºåˆ«é€šè¿‡ <code>canBeResolved</code> æ ‡è¯†æ¥è¡¨ç¤º</p>
<p>ä¸€ä¸ªå¯ä»¥è¢«è§£æçš„é…ç½®æ˜¯ä¸€ä¸ªæˆ‘ä»¬å¯ä»¥è®¡ç®—å‡ºä¾èµ–å…³ç³»å›¾çš„é…ç½®, å› ä¸ºå®ƒåŒ…å«äº†æ‰€æœ‰éœ€è¦è§£æçš„ä¿¡æ¯</p>
<p>å°† <code>canBeResolved</code> è®¾ç½®ä¸º <code>false</code> çš„é…ç½®å¹¶ä¸æ„å‘³ç€è¦è¢«è§£æ. è¿™æ ·çš„é…ç½®åªç”¨äºå£°æ˜ä¾èµ–é¡¹</p>
<p>å°è¯•è§£æä¸€ä¸ª <code>canBeResolved</code> ä¸º <code>false</code> çš„é…ç½®æ˜¯ä¸€ä¸ª error</p>
<p>ä¸€ä¸ªå¯ä»¥è§£æçš„é…ç½®è‡³å°‘ç»§æ‰¿ä¸€ä¸ªä¸å¯è§£æçš„é…ç½®</p>
<p>å‡å¦‚, <code>lib</code> é¡¹ç›®æš´éœ²ä¸€ä¸ª <code>apiElements</code> é…ç½®, è¿™ä¸ªé…ç½®æ˜¯é’ˆå¯¹å¯»æ‰¾ API çš„æ¶ˆè´¹è€…çš„. è¿™æ ·ä¸€ä¸ªé…ç½®æ˜¯ å¯æ¶ˆè´¹çš„(<code>consumable</code>) , ä½†æ˜¯ä¸æ„å‘³ç€å¯è§£æçš„. è¿™æ˜¯é€šè¿‡ <code>Configuration</code> çš„ <code>canBeConsumed</code> æ ‡è¯†è¡¨ç¤ºçš„:</p>
<p>Example - Setting up configurations:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">configurations</span> &#123;</span><br><span class="line">    <span class="comment">// A configuration meant for consumers that need the API of this component</span></span><br><span class="line">    exposedApi &#123;</span><br><span class="line">        <span class="comment">// This configuration is an &quot;outgoing&quot; configuration, it&#x27;s not meant to be resolved</span></span><br><span class="line">        canBeResolved = <span class="keyword">false</span></span><br><span class="line">        <span class="comment">// As an outgoing configuration, explain that consumers may want to consume it</span></span><br><span class="line">        canBeConsumed = <span class="keyword">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// A configuration meant for consumers that need the implemention of this component</span></span><br><span class="line">    exposedRuntime &#123;</span><br><span class="line">        canBeResolved = <span class="keyword">false</span></span><br><span class="line">        canBeConsumed = <span class="keyword">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ€»ç»“, ä¸€ä¸ªé…ç½®çš„è§’è‰²æ˜¯é€šè¿‡ <code>canBeResolved</code> å’Œ <code>canBeConsumed</code> æ ‡è¯†çš„ç»„åˆæ¥è¡¨ç¤ºçš„:</p>
<p>Table - Configuration roles:</p>
<table>
<thead>
<tr>
<th align="left">Configuration role</th>
<th align="left">can be resolved</th>
<th align="left">can be consumed</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Bucket of dependencies</td>
<td align="left">false</td>
<td align="left">false</td>
</tr>
<tr>
<td align="left">Resolve for certain usage</td>
<td align="left">true</td>
<td align="left">false</td>
</tr>
<tr>
<td align="left">Exposed to consumers</td>
<td align="left">false</td>
<td align="left">true</td>
</tr>
<tr>
<td align="left">Legacy, dontâ€™ use</td>
<td align="left">true</td>
<td align="left">grue</td>
</tr>
</tbody></table>
<h3 id="Defining-custom-configurations"><a href="#Defining-custom-configurations" class="headerlink" title="Defining custom configurations"></a>Defining custom configurations</h3><p>Example - Declaring and using a custom configuration:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">configurations</span> &#123;</span><br><span class="line">    jasper</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    mavenCentral()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    jasper <span class="string">&#x27;org.apache.tomcat.embed:tomcat-embed-jasper:9.0.2&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tasks.register(<span class="string">&#x27;preCompileJsps&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">doLast</span> &#123;</span><br><span class="line">        <span class="keyword">ant</span>.taskdef(classname: <span class="string">&#x27;org.gradle.jasper.JspC&#x27;</span>,</span><br><span class="line">                    name: <span class="string">&#x27;jasper&#x27;</span>,</span><br><span class="line">                    <span class="keyword">classpath</span>: <span class="keyword">configurations</span>.jasper.asPath)</span><br><span class="line">        <span class="keyword">ant</span>.jasper(validateXml: <span class="keyword">false</span>,</span><br><span class="line">                    uriroot: <span class="keyword">file</span>(<span class="string">&#x27;src/main/webapp&#x27;</span>),</span><br><span class="line">                    outputDir: <span class="keyword">file</span>(<span class="string">&quot;$buildDir/compiled-jsps&quot;</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸€ä¸ªé¡¹ç›®çš„é…ç½®æ˜¯é€šè¿‡ <code>configurations</code> å¯¹è±¡æ¥ç®¡ç†çš„</p>
<h3 id="Different-kinds-of-dependencies"><a href="#Different-kinds-of-dependencies" class="headerlink" title="Different kinds of dependencies"></a>Different kinds of dependencies</h3><h4 id="Module-dependencies"><a href="#Module-dependencies" class="headerlink" title="Module dependencies"></a>Module dependencies</h4><p>module ä¾èµ–æ˜¯æœ€æ™®é€šçš„ä¾èµ–. å®ƒä»¬å¼•ç”¨ä¾èµ–åº“ä¸­çš„ module</p>
<p>Example - Module dependencies:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    runtimeOnly gourp: <span class="string">&#x27;org.springframework&#x27;</span>, name: <span class="string">&#x27;spring-core&#x27;</span>, version: <span class="string">&#x27;2.5&#x27;</span></span><br><span class="line">    runtimeOnly(<span class="keyword">group</span>: <span class="string">&#x27;org.hibernate&#x27;</span>, name: <span class="string">&#x27;hibernate&#x27;</span>, version: <span class="string">&#x27;3.0.5&#x27;</span>) &#123;</span><br><span class="line">        transitive = <span class="keyword">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹ <code>DependencyHandler</code> çš„ API è·å–æ›´å¤šçš„ä¿¡æ¯</p>
<p>æŸ¥çœ‹ <code>ExternalModuleDependency</code> æ¥è·å–æ›´å¤šå¯¹ module ä¾èµ–è¿›è¡Œé…ç½®çš„ä¿¡æ¯</p>
<p>åœ¨ Maven ä¸­, ä¸€ä¸ª module åªèƒ½æœ‰ä¸€ä¸ª artifact</p>
<p>åœ¨ Ivy å’Œ Gradle ä¸­, ä¸€ä¸ª module å¯ä»¥æœ‰å¤šä¸ª artifact. æ¯ä¸ª artifact å¯ä»¥æœ‰ä¸€ç»„ä¸åŒçš„ä¾èµ–</p>
<h4 id="File-dependencies"><a href="#File-dependencies" class="headerlink" title="File dependencies"></a>File dependencies</h4><p>æ²¡æœ‰ä»»ä½• metadata çš„ä¾èµ–</p>
<p>Example - Declaring multiple file dependencies:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">configurations</span> &#123;</span><br><span class="line">    antContrib</span><br><span class="line">    externalLibs</span><br><span class="line">    deploymentTools</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    antContrib files(<span class="string">&#x27;ant/antcontrib.jar&#x27;</span>)</span><br><span class="line">    externalLibs files(<span class="string">&#x27;libs/commons-lang.jar&#x27;</span>, <span class="string">&#x27;libs/log4j.jar&#x27;</span>)</span><br><span class="line">    deploymentTools(<span class="keyword">fileTree</span>(<span class="string">&#x27;tools&#x27;</span>) &#123; <span class="keyword">include</span> <span class="string">&#x27;*.exe&#x27;</span>&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ <code>Project.files(java.lang.Object...)</code>, <code>ProjectLayout.files(java.lang.Object...)</code>, <code>Project.fileTree(java.lang.Object)</code> æ¥åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¼•ç”¨</p>
<p>æ–‡ä»¶ä¾èµ–å…è®¸ä½ ç›´æ¥æ·»åŠ ä¸€ç»„æ–‡ä»¶åˆ°é…ç½®ä¸­, è€Œä¸éœ€è¦é¦–å…ˆå°†è¿™äº›æ–‡ä»¶æ·»åŠ åˆ°ä¾èµ–ä»“åº“ä¸­</p>
<p>ä¸ºäº†æ·»åŠ ä¸€äº›æ–‡ä»¶ä½œä¸ºé…ç½®çš„ä¾èµ–, å¯ä»¥ç®€å•åœ°ä¼ å…¥ä¸€ä¸ªæ–‡ä»¶é›†åˆä½œä¸ºä¾èµ–:</p>
<p>Example - File dependencies:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    runtimeOnly files(<span class="string">&#x27;libs/a.jar&#x27;</span>, <span class="string">&#x27;libs/b.jar&#x27;</span>)</span><br><span class="line">    runtimeOnly <span class="keyword">fileTree</span>(<span class="string">&#x27;libs&#x27;</span>) &#123; <span class="keyword">include</span> <span class="string">&#x27;*.jar&#x27;</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ–‡ä»¶ä¾èµ–ä¸åŒ…å«åœ¨å·²å‘å¸ƒçš„ä¾èµ–æè¿°ç¬¦ä¸­</p>
<p>æ–‡ä»¶ä¾èµ–åŒ…å«åœ¨åŒä¸€æ„å»ºä¸­çš„å¯ä¼ é€’é¡¹ç›®ä¾èµ–ä¸­</p>
<p>è¿™æ„å‘³ç€å®ƒä»¬ä¸èƒ½ç”¨åœ¨å½“å‰æ„å»ºä¹‹å¤–, ä½†å®ƒä»¬å¯ä»¥ç”¨åœ¨åŒä¸€ä¸ªæ„å»ºä¸­</p>
<p>Example - Generated file dependencies:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    implementation files(layout.buildDirectory.dir(<span class="string">&#x27;classes&#x27;</span>)) &#123;</span><br><span class="line">        builtBy <span class="string">&#x27;compile&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tasks.register(<span class="string">&#x27;compile&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">doLast</span> &#123;</span><br><span class="line">        <span class="keyword">println</span> <span class="string">&#x27;compiling classes&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tasks.register(<span class="string">&#x27;list&#x27;</span>) &#123;</span><br><span class="line">    dependsOn <span class="keyword">configurations</span>.compileClasspath</span><br><span class="line">    <span class="keyword">doLast</span> &#123;</span><br><span class="line">        <span class="keyword">println</span> <span class="string">&quot;classpath = $&#123;configurations.compileClasspath.collect &#123; File file -&gt; file.name &#125;&#125;&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Versioning-of-file-dependencies"><a href="#Versioning-of-file-dependencies" class="headerlink" title="Versioning of file dependencies"></a>Versioning of file dependencies</h3><p>å»ºè®®æ˜ç¡®è¡¨è¾¾æ–‡ä»¶ä¾èµ–å…³ç³»çš„æ„å›¾å’Œå…·ä½“ç‰ˆæœ¬</p>
<p>åœ¨æ–‡ä»¶åä¸­å®šä¹‰ç‰ˆæœ¬æ¥è¿›è¡ŒåŒºåˆ†, ä¾‹å¦‚: <code>commons-beanutils-1.3.jar</code></p>
<h3 id="Project-dependencies"><a href="#Project-dependencies" class="headerlink" title="Project dependencies"></a>Project dependencies</h3><p>Example - Project dependencies:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    implementation <span class="keyword">project</span>(<span class="string">&#x27;:shared&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿è¡Œæ—¶, æ„å»ºè‡ªåŠ¨ç¡®ä¿ä»¥æ­£ç¡®çš„é¡ºåºæ„å»ºé¡¹ç›®ä¾èµ–é¡¹, å¹¶å°†å…¶æ·»åŠ åˆ°ç±»è·¯å¾„ä¸­è¿›è¡Œç¼–è¯‘</p>
<h3 id="Type-safe-dependencies"><a href="#Type-safe-dependencies" class="headerlink" title="Type-safe dependencies"></a>Type-safe dependencies</h3><p>ä» Gradle 7.0 å¼€å§‹çš„ä¸€ä¸ªå®éªŒæ€§ API</p>
<p>Example - Declaring project dependencies using the type-safe API:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// web-services/build.gradle</span></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    implementation projects.utils</span><br><span class="line">    implementation projects.api</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>project(&quot;:some:path&quot;)</code> çš„ä¸€ä¸ªé—®é¢˜æ˜¯ä½ å¿…é¡»è®°ä½ä½ æƒ³ä¾èµ–çš„æ¯ä¸ªé¡¹ç›®çš„è·¯å¾„</p>
<h3 id="Gradle-API-dependency"><a href="#Gradle-API-dependency" class="headerlink" title="Gradle API dependency"></a>Gradle API dependency</h3><p>ä½ å¯ä»¥ä½¿ç”¨ <code>DependencyHandler.gradleApi()</code> æ–¹æ³•æ¥å°†å½“å‰ç‰ˆæœ¬çš„ Gradle çš„ API å£°æ˜ä¸ºä¾èµ–</p>
<p>åœ¨è¿›è¡Œè‡ªå®šä¹‰ <code>task</code> å¼€å‘, æ’ä»¶å¼€å‘æ—¶å¾ˆæœ‰ç”¨</p>
<p>Example - Gradle API dependencies:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    implementation gradleApi()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Gradle-TestKit-dependency"><a href="#Gradle-TestKit-dependency" class="headerlink" title="Gradle TestKit dependency"></a>Gradle TestKit dependency</h3><p>ä½ å¯ä»¥ä½¿ç”¨ <code>DependencyHandler.gradleTestKit()</code> æ–¹æ³•æ¥å°†å½“å‰ç‰ˆæœ¬çš„ Gradle çš„ TestKit API å£°æ˜ä¸ºä¾èµ–</p>
<p>åœ¨ä¸º Gradle æ’ä»¶æˆ–è€…æ„å»ºè„šæœ¬è¿›è¡Œç¼–å†™å’Œæ‰§è¡Œæ—¶å¾ˆæœ‰ç”¨</p>
<p>Example - Gradle TestKit dependencies:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    testImplementation gradleTestKit()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Local-Groovy-dependency"><a href="#Local-Groovy-dependency" class="headerlink" title="Local Groovy dependency"></a>Local Groovy dependency</h3><p>é€šè¿‡ <code>DependencyHandler.localGroovy()</code> æ¥ä¾èµ–è·Ÿç€ Gradle å‘å¸ƒçš„ Groovy</p>
<p>è¿™åœ¨ä½¿ç”¨ Groovy å¼€å‘è‡ªå®šä¹‰ Gradle <code>task</code> å’Œæ’ä»¶ä¸­éå¸¸æœ‰ç”¨</p>
<p>Example - Gradleâ€™s Groovy dependencies:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    implementation localGroovy()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Documenting-dependencies"><a href="#Documenting-dependencies" class="headerlink" title="Documenting dependencies"></a>Documenting dependencies</h3><p>å£°æ˜ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿™ä¸ªä¾èµ–</p>
<p>Example - Giving a reason for choosing a certain module version in a dependency declaration:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;java-library&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    mavenCentral()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    implementation(<span class="string">&#x27;org.ow2.asm:asm:7.1&#x27;</span>) &#123;</span><br><span class="line">        because <span class="string">&#x27;we require a JDK 9 compatible bytecode generator&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Example - Using the dependency insight report with custom reasons:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gradle -q dependencyInsight --dependency asm</span><br></pre></td></tr></table></figure>

<h2 id="Understanding-the-difference-between-libraries-and-applications"><a href="#Understanding-the-difference-between-libraries-and-applications" class="headerlink" title="Understanding the difference between libraries and applications"></a>Understanding the difference between libraries and applications</h2><h3 id="Producers-vs-consumers"><a href="#Producers-vs-consumers" class="headerlink" title="Producers vs consumers"></a>Producers vs consumers</h3><p>å¦‚æœä½ æ„å»ºä¸€ä¸ªç±»åº“, é‚£ä¹ˆä½ å®é™…ä¸Šæ˜¯ä¸€ä¸ªç”Ÿäº§è€…</p>
<p>ä¸€ä¸ªæ¶ˆè´¹è€…è¦ä»æ›´å¤§çš„è§’åº¦æ¥ç†è§£:</p>
<ul>
<li>ä¸€ä¸ªä¾èµ–å¦ä¸€ä¸ªé¡¹ç›®çš„é¡¹ç›®æ˜¯ä¸€ä¸ªæ¶ˆè´¹è€…</li>
<li>ä¸€ä¸ªä¾èµ–ä¸€ä¸ª artifact çš„ <code>task</code> æ˜¯ä¸€ä¸ªç»†ç²’åº¦çš„æ¶ˆè´¹è€…</li>
</ul>
<h3 id="Strong-encapsulation"><a href="#Strong-encapsulation" class="headerlink" title="Strong encapsulation"></a>Strong encapsulation</h3><p>ä¸ºäº†è®©ç”Ÿäº§è€…ç¼–è¯‘ä¸€ä¸ªåº“, å®ƒéœ€è¦å®ƒæ‰€æœ‰çš„ <code>implementation</code> é…ç½®çš„ä¾èµ–åœ¨ç¼–è¯‘ç±»è·¯å¾„ä¸Š</p>
<p>ä¸€ä¸ªç±»åº“ä¸­çš„ä¸€ä¸ªèµ‹å€¼ç»™ <code>implementation</code> é…ç½®çš„ä¾èµ–ä¸ä¼šå‡ºç°åœ¨æ¶ˆè´¹è€…çš„ç¼–è¯‘ç±»è·¯å¾„ä¸­</p>
<p>ä¸€ä¸ªç±»åº“ä¸­çš„ä¸€ä¸ªèµ‹å€¼ç»™ <code>api</code> é…ç½®çš„ä¾èµ–ä¼šå‡ºç°åœ¨æ¶ˆè´¹è€…çš„ç¼–è¯‘ç±»è·¯å¾„ä¸­</p>
<p>ä½†æ˜¯åœ¨è¿è¡Œæ—¶, æ‰€æœ‰çš„ä¾èµ–éƒ½æ˜¯å¿…é¡»çš„</p>
<h3 id="Being-respectful-of-consumers"><a href="#Being-respectful-of-consumers" class="headerlink" title="Being respectful of consumers"></a>Being respectful of consumers</h3><p>æ— è®ºä»€ä¹ˆæ—¶å€™, ä½œä¸ºä¸€ä¸ªå¼€å‘è€…, ä½ å†³å®šåŒ…å«ä¸€ä¸ªä¾èµ–, ä½ å¿…é¡»æ˜ç™½è¿™ä¼šç»™ä½ çš„æ¶ˆè´¹è€…å¸¦æ¥åæœ</p>
<p>ä¾‹å¦‚, å¦‚æœä½ æ·»åŠ ä¸€ä¸ªä¾èµ–åˆ°ä½ çš„é¡¹ç›®ä¸­, è¿™ä¸ªä¾èµ–å˜æˆä¸€ä¸ªä¼ é€’æ€§ä¾èµ–åˆ°ä½ çš„æ¶ˆè´¹è€…ä¸­, å°†æœ‰å¯èƒ½å¯¼è‡´ä¾èµ–å†²çª</p>
<h2 id="Viewing-and-debugging-dependencies"><a href="#Viewing-and-debugging-dependencies" class="headerlink" title="Viewing and debugging dependencies"></a>Viewing and debugging dependencies</h2><h3 id="Listing-dependencies-in-a-project"><a href="#Listing-dependencies-in-a-project" class="headerlink" title="Listing dependencies in a project"></a>Listing dependencies in a project</h3><p><code>dependencies task</code> åªä¼šæ‰§è¡Œåœ¨ä¸€ä¸ªé¡¹ç›®ä¸Š, å¦‚æœæ‰§è¡Œåœ¨æ ¹é¡¹ç›®ä¸Š, åªä¼šæ˜¾ç¤ºæ ¹é¡¹ç›®çš„ä¾èµ–, è€Œä¸ä¼šæ˜¾ç¤ºå­é¡¹ç›®çš„ä¾èµ–. æ‰€ä»¥è¦åœ¨æ­£ç¡®çš„é¡¹ç›®ä¸Šè¿è¡Œè¿™ä¸ª <code>task</code></p>
<p>é€šè¿‡ <code>--configuration</code> æ¥æŒ‡å®šè¦æ˜¾ç¤ºçš„é…ç½®çš„ä¾èµ–</p>
<p>Example - æ˜¾ç¤ºä¸€ä¸ªæŒ‡å®šçš„é…ç½®çš„ä¾èµ–æŠ¥å‘Š</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    mavenCentral()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">configurations</span> &#123;</span><br><span class="line">    scm</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    scm <span class="string">&#x27;org.eclipse.jgit:org.eclipse.jgit:4.9.2.201712150930-r&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœ:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">â•­â”€daisy at thinkpad <span class="keyword">in</span> ~/Desktop</span><br><span class="line">â•°â”€â—‹ gradle dependencies --configuration scm</span><br><span class="line">Starting a Gradle Daemon (subsequent builds will be faster)</span><br><span class="line"></span><br><span class="line">&gt; Task :dependencies</span><br><span class="line"></span><br><span class="line">------------------------------------------------------------</span><br><span class="line">Root project <span class="string">&#x27;Desktop&#x27;</span></span><br><span class="line">------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">scm</span><br><span class="line">\--- org.eclipse.jgit:org.eclipse.jgit:4.9.2.201712150930-r</span><br><span class="line">     +--- com.jcraft:jsch:0.1.54</span><br><span class="line">     +--- com.googlecode.javaewah:JavaEWAH:1.1.6</span><br><span class="line">     +--- org.apache.httpcomponents:httpclient:4.3.6</span><br><span class="line">     |    +--- org.apache.httpcomponents:httpcore:4.3.3</span><br><span class="line">     |    +--- commons-logging:commons-logging:1.1.3</span><br><span class="line">     |    \--- commons-codec:commons-codec:1.6</span><br><span class="line">     \--- org.slf4j:slf4j-api:1.7.2</span><br><span class="line"></span><br><span class="line">A web-based, searchable dependency report is available by adding the --scan option.</span><br><span class="line"></span><br><span class="line">BUILD SUCCESSFUL <span class="keyword">in</span> 9s</span><br><span class="line">1 actionable task: 1 executed</span><br></pre></td></tr></table></figure>

<p>ä¸èƒ½è¢«è§£æçš„ä¾èµ–ä½¿ç”¨çº¢è‰²æ¥æ ‡è®°</p>
<p>åœ¨å›¾ä¸­å‡ºç°å¤šæ¬¡çš„åŒä¸€ä¸ªä¾èµ–ä¼šè¢«çœç•¥å¹¶ä½¿ç”¨ <code>*</code> å·æ¥æ ‡è®°</p>
<p>è§£å†³äº†ä¾èµ–å†²çªçš„ä¾èµ–ä½¿ç”¨ <code>-&gt;</code> æ¥æ ‡è®°</p>
<h3 id="Identifying-which-dependency-version-was-selected-and-why"><a href="#Identifying-which-dependency-version-was-selected-and-why" class="headerlink" title="Identifying which dependency version was selected and why"></a>Identifying which dependency version was selected and why</h3><p>Gradle ä½¿ç”¨<code>ç‰ˆæœ¬å†²çªè§£å†³(version conflict resolution)</code> æ¥ä¿è¯ä¸€ä¸ªä¾èµ–åªæœ‰ä¸€ä¸ªç‰ˆæœ¬å­˜åœ¨äºä¾èµ–å›¾ä¸­</p>
<p>Gradle æä¾›äº†ä¸€ä¸ª <code>dependencyInsight task</code> æ¥ç”Ÿæˆä¾èµ–æ´å¯ŸæŠ¥å‘Š</p>
<p><code>dependencyInsight task</code> ä½¿ç”¨å¦‚ä¸‹å‚æ•°</p>
<table>
<thead>
<tr>
<th align="left">åç§°</th>
<th align="left">å«ä¹‰</th>
<th align="left">æ˜¯å¦å¯é€‰</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>--dependency &lt;dependency&gt;</code></td>
<td align="left">æŒ‡æ˜è¦è§‚å¯Ÿçš„ä¾èµ–; å¯ä»¥æ˜¯å®Œæ•´çš„ <code>group:name</code>, ä¹Ÿå¯ä»¥æ˜¯éƒ¨åˆ†åç§°; å¦‚æœæœ‰å¤šä¸ªä¾èµ–, åˆ™å…¨éƒ¨ä¾èµ–éƒ½ä¼šæ‰“å°åˆ°æŠ¥å‘Šä¸­</td>
<td align="left">å¿…å¡«</td>
</tr>
<tr>
<td align="left"><code>--configuration &lt;name&gt;</code></td>
<td align="left">æŒ‡æ˜è¦è§‚å¯Ÿå“ªä¸ªé…ç½®ä¸­çš„ä¾èµ–; é»˜è®¤æ˜¯ Java æ’ä»¶ä¸­çš„ <code>compileClasspath</code> é…ç½®</td>
<td align="left">æœ‰ Java æ’ä»¶æ—¶æ˜¯å¯é€‰; æ—  Java æ’ä»¶æ—¶æ˜¯å¿…å¡«</td>
</tr>
<tr>
<td align="left"><code>--singlepath</code></td>
<td align="left">Indicates to render only a single path to the dependency</td>
<td align="left">å¯é€‰</td>
</tr>
</tbody></table>
<p><code>dependencyInsight task</code> åªèƒ½æ‰§è¡Œåœ¨ä¸€ä¸ªé¡¹ç›®ä¸Š, å¦‚æœåœ¨æ ¹ç›®å½•æ‰§è¡Œ, åˆ™åªèƒ½æ˜¾ç¤ºæ ¹ç›®å½•çš„æƒ…å†µ, ä¸åŒ…æ‹¬å­ç›®å½•çš„æƒ…å†µ</p>
<p>Example - Using the dependency insight report for a given dependency:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">â•­â”€daisy at thinkpad <span class="keyword">in</span> ~/Desktop</span><br><span class="line">â•°â”€â—‹ gradle dependencyInsight --dependency commons-codec --configuration scm</span><br><span class="line"></span><br><span class="line">&gt; Task :dependencyInsight</span><br><span class="line">commons-codec:commons-codec:1.7</span><br><span class="line">   variant <span class="string">&quot;default&quot;</span> [</span><br><span class="line">      org.gradle.status = release (not requested)</span><br><span class="line">   ]</span><br><span class="line">   Selection reasons:</span><br><span class="line">      - By conflict resolution : between versions 1.7 and 1.6</span><br><span class="line"></span><br><span class="line">commons-codec:commons-codec:1.7</span><br><span class="line">\--- scm</span><br><span class="line"></span><br><span class="line">commons-codec:commons-codec:1.6 -&gt; 1.7</span><br><span class="line">\--- org.apache.httpcomponents:httpclient:4.3.6</span><br><span class="line">     \--- org.eclipse.jgit:org.eclipse.jgit:4.9.2.201712150930-r</span><br><span class="line">          \--- scm</span><br><span class="line"></span><br><span class="line">A web-based, searchable dependency report is available by adding the --scan option.</span><br><span class="line"></span><br><span class="line">BUILD SUCCESSFUL <span class="keyword">in</span> 786ms</span><br><span class="line">1 actionable task: 1 executed</span><br></pre></td></tr></table></figure>

<h2 id="Understanding-dependency-resolution"><a href="#Understanding-dependency-resolution" class="headerlink" title="Understanding dependency resolution"></a>Understanding dependency resolution</h2><h3 id="How-Gradle-handles-conflicts"><a href="#How-Gradle-handles-conflicts" class="headerlink" title="How Gradle handles conflicts?"></a>How Gradle handles conflicts?</h3><p>åœ¨è¿›è¡Œä¾èµ–è§£ææ—¶, Gradle å¤„ç†ä¸¤ç§ç±»å‹çš„å†²çª:</p>
<ul>
<li>ç‰ˆæœ¬å†²çª(version conflicts)</li>
<li>å®ç°å†²çª(implementation conflicts)</li>
</ul>
<h3 id="Version-conflicts"><a href="#Version-conflicts" class="headerlink" title="Version conflicts"></a>Version conflicts</h3><p>æœ‰ä¸¤ä¸ªæˆ–æ›´å¤šçš„ä¾èµ–éœ€è¦ä¸€ä¸ªä¾èµ–çš„ä¸åŒç‰ˆæœ¬</p>
<h3 id="Implementation-conflicts"><a href="#Implementation-conflicts" class="headerlink" title="Implementation conflicts"></a>Implementation conflicts</h3><p>That is when the dependency graph contains multiple modules that provide the same implementation, or capability in Gradle terminology</p>
<p>ä¹Ÿå°±æ˜¯è¯´, ä¾èµ–å…³ç³»å›¾åŒ…å«å¤šä¸ªæä¾›ç›¸åŒå®ç°çš„æ¨¡å—, æˆ–è€…ç”¨ Gradle æœ¯è¯­æ¥è¯´å°±æ˜¯ç›¸åŒçš„åŠŸèƒ½</p>
<h3 id="Version-conflicts-resolution"><a href="#Version-conflicts-resolution" class="headerlink" title="Version conflicts resolution"></a>Version conflicts resolution</h3><h4 id="Resolution-strategy"><a href="#Resolution-strategy" class="headerlink" title="Resolution strategy"></a>Resolution strategy</h4><p>Gradle å°†ä¼šè€ƒè™‘æ‰€æœ‰éœ€è¦çš„ç‰ˆæœ¬, æ— è®ºå®ƒä»¬å‡ºç°åœ¨ä¾èµ–å›¾çš„ä»€ä¹ˆåœ°æ–¹</p>
<p>åœ¨è¿™äº›ç‰ˆæœ¬ä¸­, Gradle å°†ä¼šé€‰æ‹©ç‰ˆæœ¬å·æœ€é«˜çš„ä¸€ä¸ª</p>
<p>Gradle æ”¯æŒ <code>rich version declaration</code>, æ‰€ä»¥æœ€é«˜ç‰ˆæœ¬å–å†³äºç‰ˆæœ¬çš„å£°æ˜æ–¹å¼:</p>
<ul>
<li>å¦‚æœæ²¡æœ‰æ¶‰åŠèŒƒå›´, åˆ™å°†é€‰æ‹©æœªè¢«æ‹’ç»çš„æœ€é«˜ç‰ˆæœ¬<ul>
<li>å¦‚æœå£°æ˜ä¸º <code>strictly</code> çš„ç‰ˆæœ¬ä½äºè¯¥ç‰ˆæœ¬, åˆ™é€‰æ‹©å°†ä¼šå¤±è´¥</li>
</ul>
</li>
<li>å¦‚æœæœ‰æ¶‰åŠèŒƒå›´<ul>
<li>å¦‚æœæœ‰éèŒƒå›´ç‰ˆæœ¬ä½äºæŒ‡å®šèŒƒå›´å†…æˆ–é«˜äºå…¶ä¸Šé™, åˆ™å°†é€‰ä¸­è¯¥ç‰ˆæœ¬</li>
<li>å¦‚æœåªæœ‰èŒƒå›´, åˆ™å°†é€‰æ‹©è¯¥èŒƒå›´ç°æœ‰çš„æœ€é«˜ç‰ˆæœ¬å’Œæœ€é«˜ä¸Šé™</li>
<li>å¦‚æœå£°æ˜ä¸º <code>strictly</code> çš„ç‰ˆæœ¬ä½äºè¯¥ç‰ˆæœ¬, åˆ™é€‰æ‹©å°†å¤±è´¥</li>
</ul>
</li>
</ul>
<p>æ³¨æ„, åœ¨æ¶‰åŠèŒƒå›´çš„æƒ…å†µä¸‹, Gradle éœ€è¦å…ƒæ•°æ®æ¥ç¡®å®šæ‰€è€ƒè™‘çš„èŒƒå›´ä¸­å­˜åœ¨å“ªäº›ç‰ˆæœ¬. è¿™å°†ä¼šå¯¼è‡´é©¬ä¸ŠæŸ¥æ‰¾å…ƒæ•°æ®</p>
<h3 id="Implementation-conflict-resolution"><a href="#Implementation-conflict-resolution" class="headerlink" title="Implementation conflict resolution"></a>Implementation conflict resolution</h3><p>æŸ¥çœ‹ <code>Understanding variant selection</code> ç« èŠ‚çš„è¯´æ˜</p>
<p>æŸ¥çœ‹ <code>Selecting between candidates</code> ç« èŠ‚çš„è¯´æ˜</p>
<h3 id="How-Gradle-retrieves-dependency-metadata"><a href="#How-Gradle-retrieves-dependency-metadata" class="headerlink" title="How Gradle retrieves dependency metadata?"></a>How Gradle retrieves dependency metadata?</h3><p>Gradle éœ€è¦å…ƒæ•°æ®æ¥æŒ‡æ˜ä½¿ç”¨çš„ module ç‰ˆæœ¬</p>
<p>Gradle å€¾å‘äºä½¿ç”¨æœ‰å…ƒæ•°æ®æ–‡ä»¶çš„ module</p>
<p>ä¸€æ—¦ä¸€ä¸ªä¾èµ–ä»“åº“è¿”å›äº†ä¸€ä¸ªå…ƒæ•°æ®ç»“æœ, å…¶ä½™çš„ä¾èµ–ä»“åº“å°†ä¼šè¢«å¿½ç•¥</p>
<p>å¦‚æœ module çš„å…ƒæ•°æ®æ˜¯ä¸€ä¸ª POM æ–‡ä»¶å¹¶ä¸”å®šä¹‰äº†ä¸€ä¸ªçˆ¶ POM, Gradle å°†ä¼šå°è¯•é€’å½’è§£ææ¯ä¸€ä¸ªçˆ¶ module çš„ POM</p>
<h3 id="The-Dependency-Cache"><a href="#The-Dependency-Cache" class="headerlink" title="The Dependency Cache"></a>The Dependency Cache</h3><p>å¦‚æœæ‰€éœ€çš„æ„ä»¶åœ¨æ„å»ºæŒ‡å®šçš„ä»»ä½•ä»“åº“ä¸­éƒ½ä¸å¯ç”¨, é‚£ä¹ˆä¾èµ–è§£æå°†ä¼šå¤±è´¥, å³ä½¿æœ¬åœ°ç¼“å­˜æ‹¥æœ‰ä»ä¸åŒä»“åº“æ£€ç´¢åˆ°çš„æ­¤æ„ä»¶çš„å‰¯æœ¬</p>
<p>ä¾èµ–ä»“åº“çš„ç‹¬ç«‹æ€§å…è®¸æ„å»ºä»¥ä¸€ç§ä»¥å‰ä»»ä½•æ„å»ºå·¥å…·éƒ½æ²¡æœ‰åšåˆ°çš„é«˜çº§æ–¹å¼å½¼æ­¤éš”ç¦»</p>
<p>å¦‚æœä¸€ä¸ªæ„ä»¶çš„ <code>checksum</code> æ–‡ä»¶ä¸èƒ½ä»è¿œç¨‹æœåŠ¡å™¨ä¸­ä¸‹è½½, é‚£ä¹ˆå³ä½¿å·²ç»å­˜åœ¨ä¸€ä¸ªæ„ä»¶, è¿œç¨‹çš„æ„å»ºéƒ½ä¼šè¢«ä¸‹è½½</p>
<p>å¦‚æœæœ¬åœ°çš„ Maven ä»“åº“ä¸­æ‹¥æœ‰ç›¸åŒçš„æ„ä»¶, ä¸”èƒ½å¤Ÿä¸è¿œç¨‹æœåŠ¡ä¸­æ„ä»¶çš„ <code>checksum</code> æ£€éªŒé€šè¿‡çš„è¯, å°†ä¼šä½¿ç”¨æœ¬åœ°çš„ Maven ä»“åº“</p>
<p>é€šè¿‡åŸºäºæ„ä»¶çš„ SHA1 checksum æ¥ç¼“å­˜æ„ä»¶, Gradle å¯ä»¥ä¿æŒåŒä¸€ä¸ªæ„ä»¶çš„ä¸åŒç‰ˆæœ¬</p>
<p>Gradle ä¼šè·Ÿè¸ªç¼“å­˜çš„ä¾èµ–çš„ä½¿ç”¨æƒ…å†µ, ç¼“å­˜å¦‚æœè¶…è¿‡30æ²¡æœ‰è¢«ä½¿ç”¨, é‚£ä¹ˆå°†ä¼šè¢«åˆ é™¤</p>
<h3 id="Verifying-dependencies"><a href="#Verifying-dependencies" class="headerlink" title="Verifying dependencies"></a>Verifying dependencies</h3><p>ä¾èµ–æ£€æŸ¥åŒ…å«ä¸¤ä¸ªä¸åŒä½†åˆäº’è¡¥çš„æ“ä½œ:</p>
<ul>
<li><code>checksum</code> æ£€æŸ¥, æ£€æŸ¥ä¸€ä¸ªä¾èµ–çš„å®Œæ•´æ€§</li>
<li><code>signature</code> æ£€æŸ¥, æ£€æŸ¥ä¸€ä¸ªä¾èµ–çš„æ¥æº</li>
</ul>
<p>Gradle é»˜è®¤ä¸è¿›è¡Œä¾èµ–æ£€æŸ¥</p>
<h4 id="Enabling-dependency-verification"><a href="#Enabling-dependency-verification" class="headerlink" title="Enabling dependency verification"></a>Enabling dependency verification</h4><h5 id="The-verification-metadata-file"><a href="#The-verification-metadata-file" class="headerlink" title="The verification metadata file"></a>The verification metadata file</h5><p>ä¸€æ—¦æ‰¾åˆ°é…ç½®æ–‡ä»¶, å°†ä¼šè‡ªåŠ¨å¼€å¯ä¾èµ–æ£€éªŒ</p>
<p>é…ç½®æ–‡ä»¶ä½äº <code>$PROJECT_ROOT/gradle/verification-metadata.xml</code>, æ–‡ä»¶çš„æœ€å°‘å†…å®¹ä¸º:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">verification-metadata</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">verify-metadata</span>&gt;</span>true<span class="tag">&lt;/<span class="name">verify-metadata</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">verify-signatures</span>&gt;</span>false<span class="tag">&lt;/<span class="name">verify-signatures</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">verification-metadata</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨è¿™ä¸ªæœ€å°é…ç½®çš„æ–‡ä»¶, ä¸€ä¸ªé¡¹ç›®ä½¿ç”¨ä»»ä½•é¢å¤–ä¾èµ–æˆ–æ’ä»¶éƒ½ä¼šé©¬ä¸Šå¤±è´¥, å› ä¸ºå®ƒä¸åŒ…å«ä»»ä½• checksum å»æ£€éªŒ</p>
<p>åœ¨å‘½ä»¤è¡Œä¸­è¾“å‡ºæ£€éªŒä¿¡æ¯, é€šè¿‡åœ¨ <code>gradle.properties</code> æ–‡ä»¶ä¸­æ·»åŠ é…ç½®: <code>org.gradle.dependency.verification.console=verbose</code></p>
<h4 id="Bootstrapping-dependency-verification"><a href="#Bootstrapping-dependency-verification" class="headerlink" title="Bootstrapping dependency verification"></a>Bootstrapping dependency verification</h4><p>ä¾èµ–æ£€éªŒæ–‡ä»¶å¯é€šè¿‡ä¸‹é¢çš„å‘½ä»¤è¡Œå‚æ•°æ¥ç”Ÿæˆ: <code>gradle --write-verification-metadata sha256 help</code></p>
<h2 id="Declaring-Versions"><a href="#Declaring-Versions" class="headerlink" title="Declaring Versions"></a>Declaring Versions</h2><h3 id="Declaring-a-dependency-without-version"><a href="#Declaring-a-dependency-without-version" class="headerlink" title="Declaring a dependency without version"></a>Declaring a dependency without version</h3><p>ä½¿ç”¨ä¾èµ–é™åˆ¶æ¥è¿›è¡Œä¾èµ–å£°æ˜</p>
<p>è¿™æ ·åšçš„å¥½å¤„æ˜¯ä¾èµ–é™åˆ¶å…è®¸ä½ åœ¨ä¸€ä¸ªåœ°æ–¹ç®¡ç†æ‰€æœ‰ä¾èµ–çš„ç‰ˆæœ¬, åŒ…æ‹¬ä¼ é€’æ€§ä¾èµ–</p>
<p>Example - Declaring a dependency without version:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    implementation <span class="string">&#x27;org.springframework:spring-web&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    constraints &#123;</span><br><span class="line">        implementation <span class="string">&#x27;org.springframework:spring-web:5.0.2.RELEASE&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Declaring-Rich-Versions"><a href="#Declaring-Rich-Versions" class="headerlink" title="Declaring Rich Versions"></a>Declaring Rich Versions</h3><h4 id="strictly"><a href="#strictly" class="headerlink" title="strictly"></a><code>strictly</code></h4><p>ä»»ä½•ä¸æ­¤ç‰ˆæœ¬æ ‡è®°ä¸ç¬¦åˆçš„ç‰ˆæœ¬éƒ½ä¼šè¢«æ’é™¤</p>
<p>è¿™ä¸ªæ˜¯æœ€å¼ºçš„ç‰ˆæœ¬å£°æ˜</p>
<p>åœ¨ä¸€ä¸ªå£°æ˜çš„ä¾èµ–ä¸Š, <code>strictly</code> å¯ä»¥é™ä½ç‰ˆæœ¬</p>
<p>åœ¨ä¸€ä¸ªä¼ é€’æ€§ä¾èµ–ä¸Š, å¦‚æœæ²¡æœ‰æ­¤å­å¥å¯æ¥å—çš„ç‰ˆæœ¬å¯ä»¥è¢«é€‰æ‹©, è¿™å°†ä¼šå¯¼è‡´ä¾èµ–è§£æå¤±è´¥</p>
<p>å½“å®šä¹‰äº†è¿™ä¸ªä¹‹å, å°†ä¼šè¦†ç›–ä¹‹å‰æ‰€æœ‰çš„ <code>require</code> å£°æ˜å’Œæ¸…é™¤ä¹‹å‰çš„ <code>reject</code></p>
<h4 id="require"><a href="#require" class="headerlink" title="require"></a><code>require</code></h4><p>æ„å‘³ç€é€‰æ‹©çš„ç‰ˆæœ¬ä¸èƒ½ä½äº <code>require</code> å¯ä»¥æ¥å—çš„èŒƒå›´, ä½†æ˜¯åœ¨å†²çªè§£å†³æ—¶å¯ä»¥é«˜äº <code>require</code> çš„èŒƒå›´, å³ä½¿æ›´é«˜çš„ç‰ˆæœ¬æœ‰ä¸€ä¸ªæ’é™¤å‹çš„è¾¹ç•Œå€¼</p>
<p>å½“å®šä¹‰äº†è¿™ä¸ªä¹‹å, å°†ä¼šè¦†ç›–ä¹‹å‰æ‰€æœ‰çš„ <code>strictly</code> å£°æ˜å’Œæ¸…é™¤ä¹‹å‰çš„ <code>reject</code></p>
<h4 id="prefer"><a href="#prefer" class="headerlink" title="prefer"></a><code>prefer</code></h4><p>å®ƒåªé€‚ç”¨äºå¯¹äº module çš„ç‰ˆæœ¬æ²¡æœ‰æ›´å¼ºçš„éåŠ¨æ€å£°æ˜çš„æƒ…å†µ</p>
<p>è¿™ä¸ªå£°æ˜å¯ä»¥ç”¨æ¥è¡¥å…… <code>strictly</code> å’Œ <code>require</code></p>
<h4 id="reject"><a href="#reject" class="headerlink" title="reject"></a><code>reject</code></h4><p>å£°æ˜æŒ‡å®šçš„ç‰ˆæœ¬ä¸èƒ½é€‚ç”¨äº module</p>
<p>å°†æœ‰å¯èƒ½å¯¼è‡´ä¾èµ–è§£æå¤±è´¥</p>
<h4 id="Rich-version-declaration"><a href="#Rich-version-declaration" class="headerlink" title="Rich version declaration"></a>Rich version declaration</h4><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    implementation(<span class="string">&#x27;org.slf4j:slf4j-api&#x27;</span>) &#123;</span><br><span class="line">        version &#123;</span><br><span class="line">            strictly <span class="string">&#x27;[1.7, 1.8[&#x27;</span></span><br><span class="line">            prefer <span class="string">&#x27;1.7.25&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    constraints &#123;</span><br><span class="line">        implementation(<span class="string">&#x27;org.springframework:spring-core&#x27;</span>) &#123;</span><br><span class="line">            version &#123;</span><br><span class="line">                require <span class="string">&#x27;4.2.9.RELEASE&#x27;</span></span><br><span class="line">                reject <span class="string">&#x27;4.3.16.RELEASE&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Handling-versions-which-change-over-time"><a href="#Handling-versions-which-change-over-time" class="headerlink" title="Handling versions which change over time"></a>Handling versions which change over time</h3><p>ä¸€ä¸ªåŠ¨æ€ç‰ˆæœ¬å¯ä»¥ä½¿ç”¨ç‰ˆæœ¬èŒƒå›´ <code>2.+</code> æˆ–è€…ä½¿ç”¨ä¸€ä¸ªå ä½ç¬¦æ¥ä»£è¡¨æœ€æ–°çš„å¯ç”¨ç‰ˆæœ¬ <code>latest.integration</code></p>
<p>ä¸€ä¸ª module å¯èƒ½ä¸æ–­åœ°æ”¹å˜, ä½†æ˜¯æœ‰ç›¸åŒçš„ç‰ˆæœ¬å·</p>
<p>ä¾‹å¦‚ Maven çš„ <code>SNAPSHOT</code> module, å®ƒæ€»æ˜¯æŒ‡å‘æœ€æ–°å‘å¸ƒçš„æ„ä»¶</p>
<h4 id="Declaring-a-dynamic-version"><a href="#Declaring-a-dynamic-version" class="headerlink" title="Declaring a dynamic version"></a>Declaring a dynamic version</h4><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;java-library&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    mavenCentral()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    implementation <span class="string">&#x27;org.springframework:spring-web:5.+&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é»˜è®¤æƒ…å†µä¸‹, Gradle ç¼“å­˜ä¾èµ–çš„åŠ¨æ€ç‰ˆæœ¬ 24 å°æ—¶, åœ¨è¿™ä¸ªæ—¶é—´çª—å£å†… Gradle ä¸ä¼šä»ä»“åº“ä¸­å°è¯•å»è§£ææ›´æ–°çš„ç‰ˆæœ¬</p>
<h4 id="Declaring-a-changing-version"><a href="#Declaring-a-changing-version" class="headerlink" title="Declaring a changing version"></a>Declaring a changing version</h4><p>åœ¨ Maven ä»“åº“ä¸­, ä¸€ä¸ªæ”¹å˜ä¸­çš„ç‰ˆæœ¬é€šå¸¸è®¤ä¸ºæ˜¯ä¸€ä¸ª snapshot versions</p>
<p>Snapshot versions åŒ…å«åç¼€ <code>-SNAPSHOT</code></p>
<p>Example - Declaring a dependency with a changing version:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;java-library&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    mavenCentral()</span><br><span class="line">    maven &#123;</span><br><span class="line">        url <span class="string">&#x27;https://repo.spring.io/snapshot/&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    implementation <span class="string">&#x27;org.springframework:spring-web:5.0.3.BUILD-SNAPSHOT&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é»˜è®¤æƒ…å†µä¸‹,  Gradle ç¼“å­˜ changing versions ä¾èµ– 24 ä¸ªå°æ—¶</p>
<p>åœ¨è¿™ä¸ªæ—¶é—´å†…, Gradle ä¸ä¼šå°è¯•å»åœ¨æŒ‡å®šä»“åº“ä¸­è§£ææ›´æ–°ç‰ˆæœ¬çš„ä¾èµ–</p>
<h4 id="Controlling-dependency-cacheing-programmatically"><a href="#Controlling-dependency-cacheing-programmatically" class="headerlink" title="Controlling dependency cacheing programmatically"></a>Controlling dependency cacheing programmatically</h4><p>åœ¨é…ç½®ä¸­ä½¿ç”¨ <code>ResolutionStrategy</code></p>
<p>Example - Dynamic version cache control:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">configurations</span>.all &#123;</span><br><span class="line">    resolutionStrategy.cacheDynamicVersionsFor <span class="number">10</span>, <span class="string">&#x27;minutes&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Example - Changing module cache control:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">configurations</span>.all &#123;</span><br><span class="line">    resolutionStrategy.cacheChangingModulesFor <span class="number">4</span>, <span class="string">&#x27;hours&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Controlling-dependency-caching-from-command-line"><a href="#Controlling-dependency-caching-from-command-line" class="headerlink" title="Controlling dependency caching from command line"></a>Controlling dependency caching from command line</h4><h5 id="Avoiding-network-access-with-offline-mode"><a href="#Avoiding-network-access-with-offline-mode" class="headerlink" title="Avoiding network access with offline mode"></a>Avoiding network access with offline mode</h5><p><code>--offline</code> å‘½ä»¤è¡Œå‚æ•°ç”¨æ¥å‘Šè¯‰ Gradle æ€»æ˜¯ä½¿ç”¨ç¼“å­˜ä¸­çš„ module, ä¸ç®¡å®ƒä»¬æ˜¯å¦éœ€è¦å†æ¬¡æ£€æŸ¥</p>
<p>ç¦»çº¿è¿è¡Œæ—¶, Gradle æ°¸è¿œä¸ä¼šå°è¯•è®¿é—®ç½‘ç»œæ¥è¿›è¡Œä¾èµ–è§£æ, å¦‚æœéœ€è¦çš„ module ä¸å­˜åœ¨äºä¾èµ–ç¼“å­˜æ—¶, æ„å»ºä¼šå¤±è´¥</p>
<h5 id="Refreshing-dependencies"><a href="#Refreshing-dependencies" class="headerlink" title="Refreshing dependencies"></a>Refreshing dependencies</h5><p>æ‚¨å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œæ§åˆ¶ä¸åŒæ„å»ºæ‰§è¡Œçš„ä¾èµ–é¡¹ç¼“å­˜è¡Œä¸º</p>
<p>ä½¿ç”¨ <code>--refresh-dependencies</code> é€‰é¡¹æ¥åˆ·æ–°æ‰€æœ‰çš„ä¾èµ–ç¼“å­˜</p>
<p>åªæœ‰å½“ä½ å®é™…ä½¿ç”¨äº† dynamic dependencies, æˆ–è€…ä½ æœ‰ä¸€äº›ä½ æ²¡æœ‰æ„è¯†åˆ°çš„ changing dependencies æ—¶, refreshing dependencies æ‰ä¼šäº§ç”Ÿå½±å“</p>
<p>è®¤ä¸ºä½¿ç”¨ <code>--refresh-dependencies</code> ä¼šå¼ºåˆ¶ä¸‹è½½ä¾èµ–æ˜¯ä¸€ä¸ªæ™®éçš„è¯¯è§£</p>
<p>Gradle åªä¼šæ‰§è¡Œåˆ·æ–° dynamic dependencies çš„ä¸¥æ ¼è¦æ±‚. å¯èƒ½ä¼šæ‰§è¡Œä¸‹è½½æ–°çš„ä¸€äº›æ–‡ä»¶æˆ–å…ƒæ–‡ä»¶, æˆ–æ„ä»¶. ä½†æ˜¯å¦‚æœä»€ä¹ˆéƒ½æ²¡æœ‰å˜åŒ–çš„è¯, è¿™ä¸ªå‚æ•°çš„å½±å“æ˜¯å¾ˆå°çš„</p>
<h4 id="Using-component-selection-rules"><a href="#Using-component-selection-rules" class="headerlink" title="Using component selection rules"></a>Using component selection rules</h4><p>Example - Component selection rule:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">configurations</span> &#123;</span><br><span class="line">    rejectConfig &#123;</span><br><span class="line">        resolutionStrategy &#123;</span><br><span class="line">            componentSelection &#123;</span><br><span class="line">                all &#123; ComponentSelection selection -&gt;</span><br><span class="line">                    <span class="keyword">if</span> (selection.candidate.<span class="keyword">group</span> == <span class="string">&#x27;org.sample&#x27;</span> &amp;&amp; selection.candidate.module == <span class="string">&#x27;api&#x27;</span> &amp;&amp; selection.candidate.version == <span class="string">&#x27;1.5&#x27;</span>) &#123;</span><br><span class="line">                        selection.reject(<span class="string">&quot;version 1.5 is broken for &#x27;org.sample:api&#x27;&quot;</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    rejectConfig <span class="string">&quot;org.sample:api:1.+&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Example &#x3D; Component selection rule with module target:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">configurations</span> &#123;</span><br><span class="line">    targetConfig &#123;</span><br><span class="line">        resolutionStrategy &#123;</span><br><span class="line">            componentSelection &#123;</span><br><span class="line">                withModule(<span class="string">&quot;org.sample:api&quot;</span>) &#123;</span><br><span class="line">                    ComponentSelection selection -&gt;</span><br><span class="line">                    <span class="keyword">if</span> (selection.candidate.version == <span class="string">&quot;1.5&quot;</span>) &#123;</span><br><span class="line">                        selection.reject(<span class="string">&quot;version 1.5 is broken for &#x27;org.sample:api&#x27;&quot;</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Locking-dependency-versions"><a href="#Locking-dependency-versions" class="headerlink" title="Locking dependency versions"></a>Locking dependency versions</h3><p>ä¾èµ–é”å®šåªæœ‰åœ¨ dynamic versions ä¸­ç”Ÿæ•ˆ. åœ¨ changing versions ä¸­ä¸ç”Ÿæ•ˆ</p>
<p>Example - Locking a specific configuration:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">configurations</span> &#123;</span><br><span class="line">    compileClasspath &#123;</span><br><span class="line">        resolutionStrategy.activeDependencyLocking()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Controlling-transitive-Dependencies"><a href="#Controlling-transitive-Dependencies" class="headerlink" title="Controlling transitive Dependencies"></a>Controlling transitive Dependencies</h2><h3 id="Adding-constraints-on-transitive-dependencies"><a href="#Adding-constraints-on-transitive-dependencies" class="headerlink" title="Adding constraints on transitive dependencies"></a>Adding constraints on transitive dependencies</h3><p><code>constraints</code> : é™åˆ¶; çº¦æŸ</p>
<p>ä¾èµ–çº¦æŸå…è®¸ä½ ä¸ºæ„å»ºè„šæœ¬ä¸­çš„ä¾èµ–ç‰ˆæœ¬å’Œä¼ é€’æ€§ä¾èµ–çš„ç‰ˆæœ¬å®šä¹‰ç‰ˆæœ¬æˆ–è€…ç‰ˆæœ¬èŒƒå›´</p>
<p>é»˜è®¤æƒ…å†µä¸‹, æ»¡è¶³æ‰€æœ‰æƒ…å†µçš„æœ€é«˜ç‰ˆæœ¬ä¼šè¢«é€‰æ‹©</p>
<p>Example - Define dependency constraints:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    implementation <span class="string">&#x27;org.apache.httpcomponents:httpclient&#x27;</span></span><br><span class="line">    constraints &#123;</span><br><span class="line">        implementation(<span class="string">&#x27;org.apache.httpcomponents:httpclient:4.5.3&#x27;</span>) &#123;</span><br><span class="line">            because <span class="string">&#x27;previouse versions have a bug impacting this application&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">        implementation(<span class="string">&#x27;commons-codec:commons-codec:1.11&#x27;</span>) &#123;</span><br><span class="line">            because <span class="string">&#x27;version 1.9 pulled from httpclient has bugs affecting this application&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­, ä¾èµ–å£°æ˜ä¸­çš„æ‰€æœ‰ç‰ˆæœ¬éƒ½ä¼šè¢«å¿½ç•¥. ç›¸å, å°†ä¼šä½¿ç”¨å®šä¹‰åœ¨ <code>constraints</code> å—ä¸­çš„ç‰ˆæœ¬, åŒ…æ‹¬ä¼ é€’æ€§ä¾èµ–ä¸­çš„æ„ä»¶éƒ½ä¼šä½¿ç”¨è¿™ä¸ªå—ä¸­çš„å£°æ˜çš„ç‰ˆæœ¬</p>
<p>ä¾èµ–çº¦æŸåªæœ‰åœ¨ä½¿ç”¨ Gradle Module Metadata æ—¶æ‰å‘å¸ƒ(published)</p>
<h3 id="Downgrading-versions-and-excluding-dependencies"><a href="#Downgrading-versions-and-excluding-dependencies" class="headerlink" title="Downgrading versions and excluding dependencies"></a>Downgrading versions and excluding dependencies</h3><h4 id="Overriding-transitive-dependency-versions"><a href="#Overriding-transitive-dependency-versions" class="headerlink" title="Overriding transitive dependency versions"></a>Overriding transitive dependency versions</h4><p>Example - Setting a strict version:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    implementation <span class="string">&#x27;org.apache.httpcomponents:httpclient:4.5.4&#x27;</span></span><br><span class="line">    implementation(<span class="string">&#x27;commons-codec:commons-codec&#x27;</span>) &#123;</span><br><span class="line">        version &#123;</span><br><span class="line">            strictly <span class="string">&#x27;1.9&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é¦–å…ˆä½¿ç”¨ <code>strict versions</code> è€Œä¸æ˜¯ <code>forced dependencies</code></p>
<p>Example - Enforcing a dependency version:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    implementation <span class="string">&#x27;org.apache.httpcomponents:httpclient:4.5.4&#x27;</span></span><br><span class="line">    implementation(<span class="string">&#x27;commons-codec:commons-codec:1.9&#x27;</span>) &#123;</span><br><span class="line">        force = <span class="keyword">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Example - Enforcing a dependency version on the configuration-level:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">configurations</span> &#123;</span><br><span class="line">    compileClasspath &#123;</span><br><span class="line">        resolutionStrategy.force <span class="string">&#x27;commons-codec:commons-codec:1.9&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    implementation <span class="string">&#x27;org.apache.httpcomponents:httpclient:4.5.4&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Excluding-transitive-dependencies"><a href="#Excluding-transitive-dependencies" class="headerlink" title="Excluding transitive dependencies"></a>Excluding transitive dependencies</h4><p>Example - Excluding a transitive dependency for a particular dependency declaration:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    implementation(<span class="string">&#x27;commons-beanutils:commons-beanutils:1.9.4&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">exclude</span> <span class="keyword">group</span>: <span class="string">&#x27;commons-collections&#x27;</span>, module: <span class="string">&#x27;commons-collections&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Sharing-dependency-versions-between-projects"><a href="#Sharing-dependency-versions-between-projects" class="headerlink" title="Sharing dependency versions between projects"></a>Sharing dependency versions between projects</h3><h4 id="Central-declaration-of-dependencies"><a href="#Central-declaration-of-dependencies" class="headerlink" title="Central declaration of dependencies"></a>Central declaration of dependencies</h4><p>è¿™æ˜¯ä¸€ä¸ªå­µåŒ–ä¸­çš„ç‰¹æ€§</p>
<p>Example - Using a library declared in a version catalog:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    implementation(libs.groovy.core)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Declaring-a-version-catalog"><a href="#Declaring-a-version-catalog" class="headerlink" title="Declaring a version catalog"></a>Declaring a version catalog</h4><p>Example - Declaring a version catalog:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// settings.gradle</span></span><br><span class="line">dependencyResolutionManagement &#123;</span><br><span class="line">    versionCatalogs &#123;</span><br><span class="line">        libs &#123;</span><br><span class="line">            alias(<span class="string">&#x27;groovy-core&#x27;</span>).to(<span class="string">&#x27;org.codehaus.groovy:groovy:3.0.5&#x27;</span>)</span><br><span class="line">            alias(<span class="string">&#x27;groovy-json&#x27;</span>).to(<span class="string">&#x27;org.codehaus.groovy:groovy-json:3.0.5&#x27;</span>)</span><br><span class="line">            alias(<span class="string">&#x27;groovy-nio&#x27;</span>).to(<span class="string">&#x27;org.codehaus.groovy:groovy-nio:3.0.5&#x27;</span>)</span><br><span class="line">            alias(<span class="string">&#x27;commons-lang3&#x27;</span>).to(<span class="string">&#x27;org.apache.commons&#x27;</span>, <span class="string">&#x27;commons-lang3&#x27;</span>).version &#123;</span><br><span class="line">                strictly <span class="string">&#x27;[3.8, 4.0[&#x27;</span></span><br><span class="line">                prefer <span class="string">&#x27;3.9&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Using-a-platform-to-control-transitive-versions"><a href="#Using-a-platform-to-control-transitive-versions" class="headerlink" title="Using a platform to control transitive versions"></a>Using a platform to control transitive versions</h4><p>Example - Getting versions declared in a platform:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    <span class="comment">// get recommended versions from the platform project</span></span><br><span class="line">    api platform(<span class="keyword">project</span>(<span class="string">&#x27;:platform&#x27;</span>))</span><br><span class="line">    <span class="comment">// no version required</span></span><br><span class="line">    api <span class="string">&#x27;commons-httpclient:commons-httpclient&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Importing-Maven-BOMs"><a href="#Importing-Maven-BOMs" class="headerlink" title="Importing Maven BOMs"></a>Importing Maven BOMs</h4><p>BOMs æ˜¯ <code>.pom</code> æ–‡ä»¶ä¸­çš„ <code>&lt;dependencyManagement&gt;</code> èŠ‚ç‚¹, ç”¨æ¥æ§åˆ¶ä¾èµ–çš„ç‰ˆæœ¬</p>
<p>Example - Depending on a BOM to import its dependency comstraints:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    <span class="comment">// import a BOM</span></span><br><span class="line">    implementation platform(<span class="string">&#x27;org.springframework.boot:spring-boot-dependencies:1.5.8.RELEASE&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// define dependencies without versions</span></span><br><span class="line">    implementation <span class="string">&#x27;com.google.code.gson:gson&#x27;</span></span><br><span class="line">    implementation <span class="string">&#x27;dom4j:dom4j&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Example - Importing a BOM, making sure the versions it defines override any other version found:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    <span class="comment">// import a BOM. The versions used in this file will override any other version found in the graph</span></span><br><span class="line">    implementation enforcedplatform(<span class="string">&#x27;org.springframework.boot:spring-boot-dependencies:1.5.8.RELEASE&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// define dependencies without versions</span></span><br><span class="line">    implementation <span class="string">&#x27;com.google.code.gson:gson&#x27;</span></span><br><span class="line">    implementation <span class="string">&#x27;dom4j:dom4j&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// this version will be overridden by the one found in the BOM</span></span><br><span class="line">    implementation <span class="string">&#x27;org.codehaus.groovy:groovy:1.8.6&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Excluding-a-dependency-from-a-configuration-completely"><a href="#Excluding-a-dependency-from-a-configuration-completely" class="headerlink" title="Excluding a dependency from a configuration completely"></a>Excluding a dependency from a configuration completely</h2><p>ä½¿ç”¨ <code>Configuration.exclude(java.util.Map)</code>, è¿™ä¸ªæ–¹æ³•å°†ä¼šè‡ªåŠ¨æ’é™¤é…ç½®ä¸­å£°æ˜çš„æ‰€æœ‰ä¾èµ–é¡¹çš„ä¼ é€’ä¾èµ–</p>
<p>Example - Excluding transitive dependency for a particular configuration:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">configurations</span> &#123;</span><br><span class="line">    implementation &#123;</span><br><span class="line">        <span class="keyword">exclude</span> <span class="keyword">group</span>: <span class="string">&#x27;commons-collections&#x27;</span>, module: <span class="string">&#x27;commons-collections&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    implementation <span class="string">&#x27;commons-beanutils:commons-beanutils:1.9.4&#x27;</span></span><br><span class="line">    implementation <span class="string">&#x27;com.opencsv:opencsv:4.6&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Publishing-Libraries"><a href="#Publishing-Libraries" class="headerlink" title="Publishing Libraries"></a>Publishing Libraries</h2><h3 id="Publishing-a-project-as-module"><a href="#Publishing-a-project-as-module" class="headerlink" title="Publishing a project as module"></a>Publishing a project as module</h3><p><code>Publishing</code> æ˜¯å°†æ‰€æ„å»ºçš„ä¸œè¥¿æä¾›ç»™æ¶ˆè´¹è€…ä½¿ç”¨çš„è¿‡ç¨‹</p>
<p>åœ¨ Gradle ä¸­, è¿™ä¸ªè¿‡ç¨‹æ˜¯è¿™æ ·çš„:</p>
<ol>
<li>å®šä¹‰å‘å¸ƒä»€ä¹ˆä¸œè¥¿</li>
<li>å®šä¹‰å‘å¸ƒåˆ°å“ªé‡Œå»</li>
<li>æ‰§è¡Œå‘å¸ƒ</li>
</ol>
<p>æœ€å¸¸è§çš„ä¸¤ç§ç±»å‹çš„å‘å¸ƒä»“åº“: Maven-compatible å’Œ Ivy-compatible</p>
<p>ä» Gradle 6.0 å¼€å§‹, Gradle Module Metadata å°†å§‹ç»ˆä¸ Ivy XML æˆ–è€… Maven POM å…ƒæ•°æ®æ–‡ä»¶ä¸€èµ·å‘å¸ƒ</p>
<p>Gradle å†…ç½® Maven Publish Plugin å’Œ Ivy Publish Plugin æ¥è¿›è¡Œå‘å¸ƒ</p>
<h3 id="What-to-publish"><a href="#What-to-publish" class="headerlink" title="What to publish"></a>What to publish</h3><p>Gradle å°† artifacts å’Œ metadata ç»“åˆåœ¨ä¸€èµ·çš„ä¸œè¥¿ç§°ä¸ºä¸€ä¸ª <code>publication</code></p>
<p>ä¸€ä¸ªè¢«å‘å¸ƒåˆ° Maven ä»“åº“çš„ <code>publication</code> åŒ…å«:</p>
<ul>
<li>ä¸€ä¸ªæˆ–å¤šä¸ª artifact</li>
<li>Gradle Module Metadata æ–‡ä»¶</li>
<li>Maven POM æ–‡ä»¶; <code>-sources</code> å’Œ <code>-javadoc</code> JAR æ–‡ä»¶</li>
<li>checksum</li>
<li>signature</li>
<li>ä» Gradle 6.0 å¼€å§‹, è¿˜ä¼šåŒ…æ‹¬ SHA256 å’Œ SHA512 çš„ checksum</li>
</ul>
<h3 id="Where-to-publish"><a href="#Where-to-publish" class="headerlink" title="Where to publish"></a>Where to publish</h3><p>ä½¿ç”¨ <code>repositories</code> æ¥å‘Šè¯‰ Gradle å°† <code>publication</code> å‘å¸ƒåˆ°å“ªé‡Œ</p>
<h3 id="How-to-publish"><a href="#How-to-publish" class="headerlink" title="How to publish"></a>How to publish</h3><p>Gradle è‡ªåŠ¨ä¸ºæ‰€æœ‰å¯èƒ½çš„ <code>publication</code> ç»„åˆå’Œä»“åº“ç”Ÿæˆå‘å¸ƒ <code>task</code></p>
<p>å¦‚æœå‘å¸ƒåˆ° Maven ä»“åº“, <code>task</code> æ˜¯ <code>PublishToMavenRepository</code> ç±»å‹çš„</p>
<h3 id="Setting-up-basic-publishing"><a href="#Setting-up-basic-publishing" class="headerlink" title="Setting up basic publishing"></a>Setting up basic publishing</h3><p>Example - Applying the necessary plugins:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;java-library&#x27;</span></span><br><span class="line">    id <span class="string">&#x27;maven-publish&#x27;</span>  <span class="comment">// Maven å‘å¸ƒæ’ä»¶</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é…ç½®å¥½æ’ä»¶ä¹‹å, å°±å¯ä»¥é…ç½® <code>publication</code> å’Œ ä»“åº“äº†</p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­, æˆ‘ä»¬æƒ³è¦å‘å¸ƒ <code>jar task</code> ç”Ÿæˆçš„ JAR æ–‡ä»¶åˆ° Maven ä»“åº“ä¸­</p>
<p>åªéœ€è¦ä½¿ç”¨ <code>PublishingExtension</code> æä¾›çš„ <code>publishing &#123;&#125;</code> å—</p>
<p>Example - Configuring a Java library for publishing:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">group</span> = <span class="string">&#x27;org.example&#x27;</span></span><br><span class="line">version = <span class="string">&#x27;1.0&#x27;</span></span><br><span class="line"></span><br><span class="line">publishing &#123;</span><br><span class="line">    publications &#123;</span><br><span class="line">        <span class="comment">// å®šä¹‰äº†ä¸€ä¸ªåç§°ä¸º &quot;myLibrary&quot; , ç±»å‹ä¸º &quot;MavenPublication&quot; çš„ publication</span></span><br><span class="line">        <span class="comment">// è¿™ä¸ª Publication åŒ…å«äº† java component æä¾›çš„ JAR artifact å’Œ metadata</span></span><br><span class="line">        myLibrary(MavenPublication) &#123;                   </span><br><span class="line">            <span class="keyword">from</span> components.java</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">repositories</span> &#123;</span><br><span class="line">        maven &#123;</span><br><span class="line">            <span class="comment">// ä¸€ä¸ªåŸºäºæ–‡ä»¶çš„ Maven ä»“åº“, åç§°ä¸º &quot;myRepo&quot;</span></span><br><span class="line">            name = <span class="string">&#x27;myRepo&#x27;</span></span><br><span class="line">            <span class="comment">// ä¸€ä¸ªåŸºäºæ–‡ä»¶çš„ Maven ä»“åº“</span></span><br><span class="line">            url = layout.buildDirectory.dir(<span class="string">&quot;repo&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>components</code> æ˜¯å®šä¹‰ä¸€ä¸ª <code>publication</code> çš„æ ‡å‡†æ–¹å¼</p>
<p><code>components</code> é€šè¿‡æ’ä»¶æä¾›, é€šå¸¸æ˜¯å¼€å‘è¯­è¨€æˆ–å¹³å°çš„ç±»å‹. ä¾‹å¦‚: Java æ’ä»¶å®šä¹‰äº† <code>SoftwareComponent</code> ç±»å‹çš„ <code>components.java</code>; War æ’ä»¶å®šä¹‰äº† <code>components.web</code></p>
<p>é€šè¿‡ç»“åˆé¡¹ç›®çš„ <code>group</code> å’Œ <code>version</code>, <code>publication</code> å’Œ ä»“åº“å®šä¹‰æä¾›äº† Gradle å‘å¸ƒé¡¹ç›®äº§å“ JAR åŒ…æ‰€éœ€çš„ä¸€åˆ‡</p>
<p>Gradle å°†ä¼šåˆ›å»ºä¸€ä¸ªä¸“é—¨çš„ <code>publishMyLibraryPublicationToMyRepoRepository task</code> æ¥æ‰§è¡Œ; è¿™ä¸ª <code>task</code> çš„åå­—åŸºäº <code>publish[PubName]PublicationTo[RepoName]Repository</code> æ¨¡æ¿</p>
<p>å¯ä»¥ç›´æ¥å•ç‹¬æ‰§è¡Œä¸Šé¢çš„ <code>publishMyLibraryPublicationToMyRepoRepository task</code></p>
<p>æˆ–è€…å¯ä»¥æ‰§è¡Œ <code>publish task</code>, è¿™ä¸ª <code>task</code> å°†ä¼šè¿è¡Œæ‰€æœ‰å¯ç”¨çš„å‘å¸ƒ <code>task</code>, ä¾‹å¦‚æ‰§è¡Œ <code>publishMyLibraryPublicationToMyRepoRepository task</code></p>
<h3 id="Suppressing-validation-errors"><a href="#Suppressing-validation-errors" class="headerlink" title="Suppressing validation errors"></a>Suppressing validation errors</h3><p>åœ¨ <code>GenerateModuleMetadata task</code> ä¸­æŒ‡å®šè¦å…³é—­çš„æ ¡éªŒå¼‚å¸¸çš„åç§°</p>
<p>Example - Disabling some validation errors:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">tasks.withType(GenerateModuleMetadata).configureEach &#123;</span><br><span class="line">    <span class="comment">// The value &#x27;enforced-platform&#x27; is provided in the validation</span></span><br><span class="line">    <span class="comment">// error message you got</span></span><br><span class="line">    suppressedValidationErrors.add(<span class="string">&#x27;enforced-platform&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Understanding-Gradle-Module-Metadata"><a href="#Understanding-Gradle-Module-Metadata" class="headerlink" title="Understanding Gradle Module Metadata"></a>Understanding Gradle Module Metadata</h3><p>Gradle Module Metadata æ˜¯ä¸€ä¸ªç”¨æ¥åºåˆ—åŒ– Gradle ç»„ä»¶æ¨¡å‹çš„æ ¼å¼</p>
<p>ç±»ä¼¼äº Maven çš„ POM æ–‡ä»¶, Ivy çš„ ivy.xml æ–‡ä»¶</p>
<p>metadata æ–‡ä»¶çš„ç›®æ ‡æ˜¯ä¸ºæ¶ˆè´¹è€…æä¾›ä¸€ä¸ªåˆç†çš„å‘å¸ƒåˆ°ä»“åº“ä¸­çš„æ¨¡å‹</p>
<p>Gradle Module Metadata æ˜¯ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„æ ¼å¼, é€šè¿‡ä½¿å…¶è·¨å¹³å°å’Œé¢å‘å˜ä½“æ¥å¢å¼ºä¾èµ–è§£æ</p>
<p>å…·ä½“æ¥è¯´, Gradle Module Metadata æ”¯æŒ:</p>
<ul>
<li>rich version constraints</li>
<li>dependency constraints</li>
<li>component capabilities</li>
<li>variant-aware resolution</li>
</ul>
<p>å‘å¸ƒ Gradle Module Metadata å°†ä¼šè®©ä½ çš„æ„ä»¶æ¶ˆè´¹è€…æœ‰æ›´å¥½çš„ä¾èµ–ç®¡ç†</p>
<p>Gradle Module Metadata é€šè¿‡ Maven Publish plugin æ’ä»¶è‡ªåŠ¨å‘å¸ƒ</p>
<h3 id="Gradle-Module-Metadata-reproducibility"><a href="#Gradle-Module-Metadata-reproducibility" class="headerlink" title="Gradle Module Metadata reproducibility"></a>Gradle Module Metadata reproducibility</h3><p>å¦‚æœæƒ³åœ¨æ¯æ¬¡æ„å»ºæ‰§è¡Œçš„æ—¶å€™ç”Ÿæˆä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ <code>module</code> æ–‡ä»¶</p>
<p>Example - Configuring the build identifier of a publication:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">publishing &#123;</span><br><span class="line">    publications &#123;</span><br><span class="line">        myLibrary(MavenPublication) &#123;</span><br><span class="line">            <span class="keyword">from</span> components.java</span><br><span class="line">            withBuildIdentifier()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Disabling-Gradle-Module-Metadata-publication"><a href="#Disabling-Gradle-Module-Metadata-publication" class="headerlink" title="Disabling Gradle Module Metadata publication"></a>Disabling Gradle Module Metadata publication</h3><p>æœ‰ä¸¤ç§ä¸å‘å¸ƒ Gradle Module Metadata çš„å¯èƒ½æ€§:</p>
<ul>
<li>è¦å‘å¸ƒçš„ä»“åº“ä¸æ¥å—è¿™ç§ç±»å‹çš„ metadata æ–‡ä»¶</li>
<li>æƒ³è¦ä»…ä»…ä»¥ Maven æˆ– Ivy çš„æ¦‚å¿µæ¥å‘å¸ƒé¡¹ç›®</li>
</ul>
<p>é€šè¿‡åœç”¨ç”Ÿæˆ metadata æ–‡ä»¶çš„ <code>task</code> æ¥è¾¾åˆ°è¿™ä¸ªç›®çš„</p>
<p>Example - Disabling publication of Gradle Module Metadata:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">tasks.withType(GenerateModuleMetadata) &#123;</span><br><span class="line">    enabled = <span class="keyword">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Signing-artifacts"><a href="#Signing-artifacts" class="headerlink" title="Signing artifacts"></a>Signing artifacts</h3><p><code>Signing</code> æ’ä»¶å¯ä»¥ç”¨æ¥ç­¾åæ‰€æœ‰çš„æ„ä»¶å’Œå…ƒæ•°æ®æ–‡ä»¶, åŒ…æ‹¬ Maven çš„ POM æ–‡ä»¶å’Œ Ivy module descriptors</p>

        </div>

        
            <div class="post-copyright-info">
                <div class="article-copyright-info-container">
    <ul>
        <li>æœ¬æ–‡æ ‡é¢˜ï¼šDependency Management</li>
        <li>æœ¬æ–‡ä½œè€…ï¼šæ—å¨ç¾½</li>
        <li>åˆ›å»ºæ—¶é—´ï¼š2022-05-05 11:47:30</li>
        <li>
            æœ¬æ–‡é“¾æ¥ï¼šhttps://linweiyu21.github.io/gradle/gradle-dependency-management/
        </li>
        <li>
            ç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
        </li>
    </ul>
</div>

            </div>
        

        
            <ul class="post-tags-box">
                
                    <li class="tag-item">
                        <a href="/tags/Gradle/">#Gradle</a>&nbsp;
                    </li>
                
                    <li class="tag-item">
                        <a href="/tags/User-Guides/">#User Guides</a>&nbsp;
                    </li>
                
            </ul>
        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/gradle/gradle-java-other-jvm-projects/"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Java &amp; Other JVM Projects</span>
                                <span class="post-nav-item">ä¸Šä¸€ç¯‡</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/gradle/gradle-testing-build-logic-with-testkit/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Testing Build Logic with TestKit</span>
                                <span class="post-nav-item">ä¸‹ä¸€ç¯‡</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
            <div class="comment-container">
                <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fas fa-comments">&nbsp;è¯„è®º</i>
    </div>
    

        
            
    <div class="valine-container">
        <script data-pjax
                src="//cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js"></script>
        <div id="vcomments"></div>
        <script data-pjax>
            function loadValine() {
                new Valine({
                    el: '#vcomments',
                    appId: '8xWQ0WFbKUNN4h8ixIO12etk-gzGzoHsz',
                    appKey: '7cLjTvkIsF6aIuIVSd0um89m',
                    meta: ['nick', 'mail', 'link'],
                    avatar: 'wavatar',
                    enableQQ: true,
                    placeholder: 'è¯·å¼€å§‹ä½ çš„è¡¨æ¼”',
                    lang: 'zh-CN'.toLowerCase()
                });

                function getAuthor(language) {
                    switch (language) {
                        case 'en':
                            return 'Author';
                        case 'zh-CN':
                            return 'åšä¸»';
                        default:
                            return 'Master';
                    }
                }

                // Add "Author" identify
                const getValineDomTimer = setInterval(() => {
                    const vcards = document.querySelectorAll('#vcomments .vcards .vcard');
                    if (vcards.length > 0) {
                        let author = 'æ—å¨ç¾½';

                        if (author) {
                            for (let vcard of vcards) {
                                const vnick_dom = vcard.querySelector('.vhead .vnick');
                                const vnick = vnick_dom.innerHTML;
                                if (vnick === author) {
                                    vnick_dom.innerHTML = `${vnick} <span class="author">${getAuthor(KEEP.hexo_config.language)}</span>`
                                }
                            }
                        }
                        clearInterval(getValineDomTimer);
                    } else {
                        clearInterval(getValineDomTimer);
                    }
                }, 2000);
            }

            if ('true') {
                const loadValineTimeout = setTimeout(() => {
                    loadValine();
                    clearTimeout(loadValineTimeout);
                }, 1000);
            } else {
                window.addEventListener('DOMContentLoaded', loadValine);
            }
        </script>
    </div>



        
    
</div>

            </div>
        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
            2022&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">æ—å¨ç¾½</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv">
                        è®¿é—®äººæ•°&nbsp;<span id="busuanzi_value_site_uv"></span>&ensp;
                    </span>
                
                
                    <span id="busuanzi_container_site_pv">
                        æ€»è®¿é—®é‡&nbsp;<span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            ç”± <a target="_blank" href="https://hexo.io">Hexo</a> é©±åŠ¨&nbsp;|&nbsp;ä¸»é¢˜&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.5</a>
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fas fa-comment"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Dependency-Management"><span class="nav-number">1.</span> <span class="nav-text">Dependency Management</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Learning-the-Basics"><span class="nav-number">1.1.</span> <span class="nav-text">Learning the Basics</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Declaring-repositories"><span class="nav-number">1.2.</span> <span class="nav-text">Declaring repositories</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Strict-limitation-to-declared-repositories"><span class="nav-number">1.3.</span> <span class="nav-text">Strict limitation to declared repositories</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Supported-repository-types"><span class="nav-number">1.4.</span> <span class="nav-text">Supported repository types</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Different-formats"><span class="nav-number">1.4.1.</span> <span class="nav-text">Different formats</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#With-different-connectivity"><span class="nav-number">1.4.2.</span> <span class="nav-text">With different connectivity</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Flat-directory-repository"><span class="nav-number">1.5.</span> <span class="nav-text">Flat directory repository</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Local-repository"><span class="nav-number">1.6.</span> <span class="nav-text">Local repository</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Maven-repositories"><span class="nav-number">1.7.</span> <span class="nav-text">Maven repositories</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Setting-up-composite-Maven-repositories"><span class="nav-number">1.7.1.</span> <span class="nav-text">Setting up composite Maven repositories</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Local-Maven-repository"><span class="nav-number">1.7.2.</span> <span class="nav-text">Local Maven repository</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#The-case-of-mavenLocal"><span class="nav-number">1.7.3.</span> <span class="nav-text">The case of mavenLocal()</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ivy-repositories"><span class="nav-number">1.8.</span> <span class="nav-text">Ivy repositories</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Defining-an-Ivy-repositories-with-a-standard-layout"><span class="nav-number">1.8.1.</span> <span class="nav-text">Defining an Ivy repositories with a standard layout</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Defining-a-named-layout-for-an-Ivy-repository"><span class="nav-number">1.8.2.</span> <span class="nav-text">Defining a named layout for an Ivy repository</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Defining-custom-pattern-layout-for-an-Ivy-repository"><span class="nav-number">1.8.3.</span> <span class="nav-text">Defining custom pattern layout for an Ivy repository</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Accessing-authenticated-Ivy-repositories"><span class="nav-number">1.8.4.</span> <span class="nav-text">Accessing authenticated Ivy repositories</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Repository-content-filtering"><span class="nav-number">1.9.</span> <span class="nav-text">Repository content filtering</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Declaring-content-exclusively-fonud-in-one-repository"><span class="nav-number">1.9.1.</span> <span class="nav-text">Declaring content exclusively fonud in one repository</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Maven-repository-filtering"><span class="nav-number">1.10.</span> <span class="nav-text">Maven repository filtering</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Supported-metadata-sources"><span class="nav-number">1.11.</span> <span class="nav-text">Supported metadata sources</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Plugin-repositories-vs-build-repositories"><span class="nav-number">1.12.</span> <span class="nav-text">Plugin repositories vs. build repositories</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Plugin-repositories"><span class="nav-number">1.12.1.</span> <span class="nav-text">Plugin repositories</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Centralizing-repositories-declaration"><span class="nav-number">1.13.</span> <span class="nav-text">Centralizing repositories declaration</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Supported-repository-transport-protocols"><span class="nav-number">1.14.</span> <span class="nav-text">Supported repository transport protocols</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP-S-authentication-schemes-configuration"><span class="nav-number">1.15.</span> <span class="nav-text">HTTP(S) authentication schemes configuration</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#using-preemptive-authentication"><span class="nav-number">1.15.1.</span> <span class="nav-text">using preemptive authentication</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-HTTP-header-authentication"><span class="nav-number">1.15.2.</span> <span class="nav-text">Using HTTP header authentication</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Handling-credentials"><span class="nav-number">1.16.</span> <span class="nav-text">Handling credentials</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Declaring-dependencies"><span class="nav-number">1.17.</span> <span class="nav-text">Declaring dependencies</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#What-are-dependency-configurations"><span class="nav-number">1.17.1.</span> <span class="nav-text">What are dependency configurations</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Configuration-inheritance-and-composition"><span class="nav-number">1.17.1.1.</span> <span class="nav-text">Configuration inheritance and composition</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Resolvable-and-consumable-configurations"><span class="nav-number">1.17.2.</span> <span class="nav-text">Resolvable and consumable configurations</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Defining-custom-configurations"><span class="nav-number">1.17.3.</span> <span class="nav-text">Defining custom configurations</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Different-kinds-of-dependencies"><span class="nav-number">1.17.4.</span> <span class="nav-text">Different kinds of dependencies</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Module-dependencies"><span class="nav-number">1.17.4.1.</span> <span class="nav-text">Module dependencies</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#File-dependencies"><span class="nav-number">1.17.4.2.</span> <span class="nav-text">File dependencies</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Versioning-of-file-dependencies"><span class="nav-number">1.17.5.</span> <span class="nav-text">Versioning of file dependencies</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Project-dependencies"><span class="nav-number">1.17.6.</span> <span class="nav-text">Project dependencies</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Type-safe-dependencies"><span class="nav-number">1.17.7.</span> <span class="nav-text">Type-safe dependencies</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Gradle-API-dependency"><span class="nav-number">1.17.8.</span> <span class="nav-text">Gradle API dependency</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Gradle-TestKit-dependency"><span class="nav-number">1.17.9.</span> <span class="nav-text">Gradle TestKit dependency</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Local-Groovy-dependency"><span class="nav-number">1.17.10.</span> <span class="nav-text">Local Groovy dependency</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Documenting-dependencies"><span class="nav-number">1.17.11.</span> <span class="nav-text">Documenting dependencies</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Understanding-the-difference-between-libraries-and-applications"><span class="nav-number">1.18.</span> <span class="nav-text">Understanding the difference between libraries and applications</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Producers-vs-consumers"><span class="nav-number">1.18.1.</span> <span class="nav-text">Producers vs consumers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Strong-encapsulation"><span class="nav-number">1.18.2.</span> <span class="nav-text">Strong encapsulation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Being-respectful-of-consumers"><span class="nav-number">1.18.3.</span> <span class="nav-text">Being respectful of consumers</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Viewing-and-debugging-dependencies"><span class="nav-number">1.19.</span> <span class="nav-text">Viewing and debugging dependencies</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Listing-dependencies-in-a-project"><span class="nav-number">1.19.1.</span> <span class="nav-text">Listing dependencies in a project</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Identifying-which-dependency-version-was-selected-and-why"><span class="nav-number">1.19.2.</span> <span class="nav-text">Identifying which dependency version was selected and why</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Understanding-dependency-resolution"><span class="nav-number">1.20.</span> <span class="nav-text">Understanding dependency resolution</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#How-Gradle-handles-conflicts"><span class="nav-number">1.20.1.</span> <span class="nav-text">How Gradle handles conflicts?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Version-conflicts"><span class="nav-number">1.20.2.</span> <span class="nav-text">Version conflicts</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Implementation-conflicts"><span class="nav-number">1.20.3.</span> <span class="nav-text">Implementation conflicts</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Version-conflicts-resolution"><span class="nav-number">1.20.4.</span> <span class="nav-text">Version conflicts resolution</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Resolution-strategy"><span class="nav-number">1.20.4.1.</span> <span class="nav-text">Resolution strategy</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Implementation-conflict-resolution"><span class="nav-number">1.20.5.</span> <span class="nav-text">Implementation conflict resolution</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#How-Gradle-retrieves-dependency-metadata"><span class="nav-number">1.20.6.</span> <span class="nav-text">How Gradle retrieves dependency metadata?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#The-Dependency-Cache"><span class="nav-number">1.20.7.</span> <span class="nav-text">The Dependency Cache</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Verifying-dependencies"><span class="nav-number">1.20.8.</span> <span class="nav-text">Verifying dependencies</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Enabling-dependency-verification"><span class="nav-number">1.20.8.1.</span> <span class="nav-text">Enabling dependency verification</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#The-verification-metadata-file"><span class="nav-number">1.20.8.1.1.</span> <span class="nav-text">The verification metadata file</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Bootstrapping-dependency-verification"><span class="nav-number">1.20.8.2.</span> <span class="nav-text">Bootstrapping dependency verification</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Declaring-Versions"><span class="nav-number">1.21.</span> <span class="nav-text">Declaring Versions</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Declaring-a-dependency-without-version"><span class="nav-number">1.21.1.</span> <span class="nav-text">Declaring a dependency without version</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Declaring-Rich-Versions"><span class="nav-number">1.21.2.</span> <span class="nav-text">Declaring Rich Versions</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#strictly"><span class="nav-number">1.21.2.1.</span> <span class="nav-text">strictly</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#require"><span class="nav-number">1.21.2.2.</span> <span class="nav-text">require</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#prefer"><span class="nav-number">1.21.2.3.</span> <span class="nav-text">prefer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#reject"><span class="nav-number">1.21.2.4.</span> <span class="nav-text">reject</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Rich-version-declaration"><span class="nav-number">1.21.2.5.</span> <span class="nav-text">Rich version declaration</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Handling-versions-which-change-over-time"><span class="nav-number">1.21.3.</span> <span class="nav-text">Handling versions which change over time</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Declaring-a-dynamic-version"><span class="nav-number">1.21.3.1.</span> <span class="nav-text">Declaring a dynamic version</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Declaring-a-changing-version"><span class="nav-number">1.21.3.2.</span> <span class="nav-text">Declaring a changing version</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Controlling-dependency-cacheing-programmatically"><span class="nav-number">1.21.3.3.</span> <span class="nav-text">Controlling dependency cacheing programmatically</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Controlling-dependency-caching-from-command-line"><span class="nav-number">1.21.3.4.</span> <span class="nav-text">Controlling dependency caching from command line</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Avoiding-network-access-with-offline-mode"><span class="nav-number">1.21.3.4.1.</span> <span class="nav-text">Avoiding network access with offline mode</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Refreshing-dependencies"><span class="nav-number">1.21.3.4.2.</span> <span class="nav-text">Refreshing dependencies</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Using-component-selection-rules"><span class="nav-number">1.21.3.5.</span> <span class="nav-text">Using component selection rules</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Locking-dependency-versions"><span class="nav-number">1.21.4.</span> <span class="nav-text">Locking dependency versions</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Controlling-transitive-Dependencies"><span class="nav-number">1.22.</span> <span class="nav-text">Controlling transitive Dependencies</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Adding-constraints-on-transitive-dependencies"><span class="nav-number">1.22.1.</span> <span class="nav-text">Adding constraints on transitive dependencies</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Downgrading-versions-and-excluding-dependencies"><span class="nav-number">1.22.2.</span> <span class="nav-text">Downgrading versions and excluding dependencies</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Overriding-transitive-dependency-versions"><span class="nav-number">1.22.2.1.</span> <span class="nav-text">Overriding transitive dependency versions</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Excluding-transitive-dependencies"><span class="nav-number">1.22.2.2.</span> <span class="nav-text">Excluding transitive dependencies</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Sharing-dependency-versions-between-projects"><span class="nav-number">1.22.3.</span> <span class="nav-text">Sharing dependency versions between projects</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Central-declaration-of-dependencies"><span class="nav-number">1.22.3.1.</span> <span class="nav-text">Central declaration of dependencies</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Declaring-a-version-catalog"><span class="nav-number">1.22.3.2.</span> <span class="nav-text">Declaring a version catalog</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Using-a-platform-to-control-transitive-versions"><span class="nav-number">1.22.3.3.</span> <span class="nav-text">Using a platform to control transitive versions</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Importing-Maven-BOMs"><span class="nav-number">1.22.3.4.</span> <span class="nav-text">Importing Maven BOMs</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Excluding-a-dependency-from-a-configuration-completely"><span class="nav-number">1.23.</span> <span class="nav-text">Excluding a dependency from a configuration completely</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Publishing-Libraries"><span class="nav-number">1.24.</span> <span class="nav-text">Publishing Libraries</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Publishing-a-project-as-module"><span class="nav-number">1.24.1.</span> <span class="nav-text">Publishing a project as module</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#What-to-publish"><span class="nav-number">1.24.2.</span> <span class="nav-text">What to publish</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Where-to-publish"><span class="nav-number">1.24.3.</span> <span class="nav-text">Where to publish</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#How-to-publish"><span class="nav-number">1.24.4.</span> <span class="nav-text">How to publish</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Setting-up-basic-publishing"><span class="nav-number">1.24.5.</span> <span class="nav-text">Setting up basic publishing</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Suppressing-validation-errors"><span class="nav-number">1.24.6.</span> <span class="nav-text">Suppressing validation errors</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Understanding-Gradle-Module-Metadata"><span class="nav-number">1.24.7.</span> <span class="nav-text">Understanding Gradle Module Metadata</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Gradle-Module-Metadata-reproducibility"><span class="nav-number">1.24.8.</span> <span class="nav-text">Gradle Module Metadata reproducibility</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Disabling-Gradle-Module-Metadata-publication"><span class="nav-number">1.24.9.</span> <span class="nav-text">Disabling Gradle Module Metadata publication</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Signing-artifacts"><span class="nav-number">1.24.10.</span> <span class="nav-text">Signing artifacts</span></a></li></ol></li></ol></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="æœç´¢..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>



<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/dark-light-toggle.js"></script>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/local-search.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/code-copy.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/lazyload.js"></script>


<div class="post-scripts pjax">
    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/left-side-toggle.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/libs/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/toc.js"></script>
    
</div>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/libs/pjax.min.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            KEEP.refresh();
        });
    });
</script>



</body>
</html>
