<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Micronaut,Groovy,Gradle,Java,æ–‡æ¡£,ä¸­æ–‡">
    <meta name="description" content="Micronaut Groovy Gradle Java æ–‡æ¡£ ä¸­æ–‡">
    <meta name="author" content="æ—å¨ç¾½">
    
    <title>
        
            Plugins |
        
        æ—å¨ç¾½çš„ç¬”è®°
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/logo.svg">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/css/font-awesome.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"zh-CN","path":"search.json"};
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":true,"init_open":true},"style":{"primary_color":"rgb(153,153,0)","avatar":"/images/avatar.jpg","favicon":"/images/logo.svg","article_img_align":"left","left_side_width":"400px","content_max_width":"920px","hover":{"shadow":true,"scale":true},"first_screen":{"enable":true,"background_img":null,"description":"def containsğŸš€ = ['Micronaut', 'Groovy', 'Gradle', 'etc']"},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":true}}},"local_search":{"enable":true,"preload":true},"code_copy":{"enable":true,"style":"mac"},"pjax":{"enable":true},"lazyload":{"enable":true},"version":"3.4.5"};
    KEEP.language_ago = {"second":"%s ç§’å‰","minute":"%s åˆ†é’Ÿå‰","hour":"%s å°æ—¶å‰","day":"%s å¤©å‰","week":"%s å‘¨å‰","month":"%s ä¸ªæœˆå‰","year":"%s å¹´å‰"};
  </script>
<meta name="generator" content="Hexo 6.1.0"></head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fas fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                æ—å¨ç¾½çš„ç¬”è®°
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                é¦–é¡µ
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/categories"
                            >
                                åˆ†ç±»
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/tags"
                            >
                                æ ‡ç­¾
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                å½’æ¡£
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >
                                å…³äº
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">é¦–é¡µ</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/categories">åˆ†ç±»</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/tags">æ ‡ç­¾</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">å½’æ¡£</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about">å…³äº</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

    <a target="_blank" rel="noopener" href="https://github.com/linweiyu21/" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80"
        viewBox="0 0 250 250" style="fill:#64CEAA; color:#fff; position: absolute; top: 0; border: 0; right: 0;"
        aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path
          d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
          fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path
          d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
          fill="currentColor" class="octo-body"></path>
      </svg></a>
    <style>
      .github-corner:hover .octo-arm {
        animation: octocat-wave 560ms ease-in-out
      }

      @keyframes octocat-wave {

        0%,
        100% {
          transform: rotate(0)
        }

        20%,
        60% {
          transform: rotate(-25deg)
        }

        40%,
        80% {
          transform: rotate(10deg)
        }
      }

      @media (max-width:500px) {
        .github-corner:hover .octo-arm {
          animation: none
        }

        .github-corner .octo-arm {
          animation: octocat-wave 560ms ease-in-out
        }
      }
    </style>
</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">Plugins</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/avatar.jpg">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">æ—å¨ç¾½</span>
                        
                            <span class="author-label">Lv8</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;
        <span class="pc">2022-05-05 14:13:23</span>
        <span class="mobile">2022-05-05 14:13</span>
    </span>
    
        <span class="article-categories article-meta-item">
            <i class="fas fa-folder"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/Gradle-User-Guides/">Gradle - User Guides</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/Gradle/">Gradle</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/User-Guides/">User Guides</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
        <span class="article-pv article-meta-item">
            <i class="fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <!-- TOC -->

<ul>
<li><a href="#plugins">Plugins</a><ul>
<li><a href="#the-application-plugin">The Application Plugin</a><ul>
<li><a href="#building-jvm-applicatoins">Building JVM applicatoins</a></li>
<li><a href="#building-applications-using-the-java-module-system">Building applications using the Java Module System</a></li>
<li><a href="#building-a-distribution">Building a distribution</a></li>
<li><a href="#customizing-start-script-generation">Customizing start script generation</a></li>
<li><a href="#tasks">Tasks</a></li>
<li><a href="#application-extension">Application extension</a></li>
</ul>
</li>
<li><a href="#the-base-plugin">The Base Plugin</a><ul>
<li><a href="#usage">Usage</a></li>
<li><a href="#task">Task</a></li>
<li><a href="#dependency-management">Dependency management</a><ul>
<li><a href="#default">default</a></li>
<li><a href="#archives">archives</a></li>
</ul>
</li>
<li><a href="#contributed-extensions">Contributed extensions</a></li>
</ul>
</li>
<li><a href="#build-init-plugin">Build Init Plugin</a><ul>
<li><a href="#supported-gradle-build-types">Supported Gradle build types</a></li>
<li><a href="#tasks-1">Tasks</a></li>
<li><a href="#what-to-create">What to create</a></li>
<li><a href="#build-init-types">Build init types</a><ul>
<li><a href="#pom-build-type-maven-conversion"><code>pom</code> build type (Maven conversion)</a></li>
<li><a href="#java-application-build-type"><code>java-application</code> build type</a></li>
<li><a href="#java-library-build-type"><code>java-library</code> build type</a></li>
<li><a href="#java-gradle-plugin-build-type"><code>java-gradle-plugin</code> build type</a></li>
<li><a href="#groovy-library-build-type"><code>groovy-library</code> build type</a></li>
<li><a href="#groovy-application-build-type"><code>groovy-application</code> build type</a></li>
<li><a href="#groovy-gradle-plugin-build-type"><code>groovy-gradle-plugin</code> build type</a></li>
<li><a href="#basic-build-type"><code>basic</code> build type</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#the-checkstyle-plugin">The Checkstyle Plugin</a><ul>
<li><a href="#tasks-2">Tasks</a><ul>
<li><a href="#checkstylemain"><code>checkstyleMain</code></a></li>
<li><a href="#checkstyletest"><code>checkstyleTest</code></a></li>
<li><a href="#checkstylesourceset"><code>checkstyleSourceSet</code></a></li>
</ul>
</li>
<li><a href="#dependencies-added-to-other-tasks">Dependencies added to other tasks</a><ul>
<li><a href="#check"><code>check</code></a></li>
</ul>
</li>
<li><a href="#project-layout">Project layout</a></li>
<li><a href="#dependency-management-1">Dependency management</a></li>
</ul>
</li>
<li><a href="#the-codenarc-plugin">The CodeNarc Plugin</a><ul>
<li><a href="#tasks-3">Tasks</a><ul>
<li><a href="#codenarcmain"><code>codenarcMain</code></a></li>
<li><a href="#codenarctest"><code>codenarcTest</code></a></li>
<li><a href="#codenarcsourceset"><code>codenarcSourceSet</code></a></li>
</ul>
</li>
<li><a href="#dependencies-added-to-other-tasks-1">Dependencies added to other tasks</a></li>
<li><a href="#project-layout-1">Project layout</a></li>
<li><a href="#dependency-management-2">Dependency management</a></li>
</ul>
</li>
<li><a href="#the-distribution-plugin">The Distribution Plugin</a><ul>
<li><a href="#tasks-4">Tasks</a><ul>
<li><a href="#distzip"><code>distZip</code></a></li>
<li><a href="#disttar"><code>distTar</code></a></li>
<li><a href="#assembledist"><code>assembleDist</code></a></li>
</ul>
</li>
<li><a href="#distribution-contents">Distribution contents</a></li>
<li><a href="#publishing">Publishing</a></li>
</ul>
</li>
<li><a href="#the-groovy-plugin">The Groovy Plugin</a><ul>
<li><a href="#tasks-5">Tasks</a><ul>
<li><a href="#compilegroovy"><code>compileGroovy</code></a></li>
<li><a href="#compiletestgroovy"><code>compileTestGroovy</code></a></li>
<li><a href="#compilesourcesetgroovy"><code>compile&#123;SourceSet&#125;Groovy</code></a></li>
<li><a href="#groovydoc"><code>groovydoc</code></a></li>
</ul>
</li>
<li><a href="#dependency-management-3">Dependency management</a></li>
<li><a href="#project-layout-2">Project layout</a><ul>
<li><a href="#srcmainjava"><code>src/main/java</code></a></li>
<li><a href="#srcmainresources"><code>src/main/resources</code></a></li>
<li><a href="#srcmaingroovy"><code>src/main/groovy</code></a></li>
<li><a href="#srctestjava"><code>src/test/java</code></a></li>
<li><a href="#srctestresources"><code>src/test/resources</code></a></li>
<li><a href="#srctestgroovy"><code>src/test/groovy</code></a></li>
<li><a href="#srcsourcesetjava"><code>src/&#123;sourceSet&#125;/java</code></a></li>
<li><a href="#srcsourcesetresources"><code>src/&#123;sourceSet&#125;/resources</code></a></li>
<li><a href="#srcsourcesetgroovy"><code>src/&#123;sourceSet&#125;/groovy</code></a></li>
</ul>
</li>
<li><a href="#changing-the-project-layout">Changing the project layout</a></li>
<li><a href="#dependency-management-4">Dependency management</a></li>
<li><a href="#automatic-configuration-of-groovyclasspath">Automatic configuration of groovyClasspath</a></li>
<li><a href="#convention-properties">Convention properties</a></li>
<li><a href="#source-set-properties">Source set properties</a><ul>
<li><a href="#source-set-properties-groovy">source set properties <code>groovy</code></a></li>
<li><a href="#source-set-properties-groovysrcdirs">source set properties <code>groovy.srcDirs</code></a></li>
<li><a href="#source-set-properties-allgroovy">source set properties <code>allGroovy</code></a></li>
<li><a href="#modified-source-set-properties">modified source set properties</a></li>
</ul>
</li>
<li><a href="#groovycompile">GroovyCompile</a></li>
<li><a href="#compiling-and-testing-for-java-6-or-java-7">Compiling and testing for Java 6 or Java 7</a></li>
</ul>
</li>
<li><a href="#the-idea-plugin">The IDEA Plugin</a><ul>
<li><a href="#usage-1">Usage</a></li>
<li><a href="#tasks-6">Tasks</a></li>
</ul>
</li>
<li><a href="#the-jacoco-plugin">The JaCoco Plugin</a><ul>
<li><a href="#configuring-the-jacoco-plugin">Configuring the JaCoCo Plugin</a></li>
<li><a href="#jacoco-report-configuration">JaCoCo Report configuration</a></li>
</ul>
</li>
<li><a href="#the-java-plugin">The Java Plugin</a><ul>
<li><a href="#tasks-7">Tasks</a></li>
<li><a href="#sourceset-tasks">SourceSet Tasks</a></li>
<li><a href="#lifecycle-tasks">Lifecycle Tasks</a></li>
<li><a href="#project-layout-3">Project layout</a></li>
<li><a href="#changing-the-project-layout-1">Changing the project layout</a></li>
<li><a href="#source-sets">Source sets</a></li>
<li><a href="#source-set-properties-1">Source set properties</a></li>
<li><a href="#dependency-management-5">Dependency management</a><ul>
<li><a href="#dependency-configurations">Dependency configurations</a></li>
<li><a href="#sourceset-dependency-configurations">SourceSet dependency configurations</a></li>
</ul>
</li>
<li><a href="#contributed-extension">Contributed extension</a></li>
</ul>
</li>
<li><a href="#the-java-library-plugin">The Java Library Plugin</a><ul>
<li><a href="#api-and-implementation-separation">API and implementation separation</a></li>
<li><a href="#recognizing-api-and-implementation-dependencies">Recognizing API and implementation dependencies</a></li>
<li><a href="#the-java-library-plugin-configurations">The Java Library Plugin configurations</a></li>
<li><a href="#using-classes-instead-of-jar-for-compilation">Using classes instead of jar for compilation</a><ul>
<li><a href="#increased-memory-usage-for-consumers">Increased memory usage for consumers</a></li>
<li><a href="#significant-build-performance-drop-on-windows-for-huge-multi-projects">Significant build performance drop on Windows for huge multi-projects</a></li>
</ul>
</li>
<li><a href="#distribution-a-library">Distribution a library</a></li>
</ul>
</li>
<li><a href="#the-java-library-distribution-plugin">The Java Library Distribution Plugin</a><ul>
<li><a href="#tasks-8">Tasks</a></li>
<li><a href="#including-other-resources-in-the-distribution">Including other resources in the distribution</a></li>
</ul>
</li>
<li><a href="#the-java-platform-plugin">The Java Platform Plugin</a><ul>
<li><a href="#usage-2">Usage</a></li>
<li><a href="#api-and-runtime-separation">API and runtime separation</a></li>
<li><a href="#local-project-constraints">Local project constraints</a></li>
<li><a href="#sourcing-constraints-from-another-platform">Sourcing constraints from another platform</a></li>
<li><a href="#publishing-platforms">Publishing platforms</a></li>
<li><a href="#consuming-platforms">Consuming platforms</a></li>
</ul>
</li>
<li><a href="#maven-publish-plugin">Maven Publish Plugin</a><ul>
<li><a href="#tasks-9">Tasks</a></li>
<li><a href="#publications">Publications</a><ul>
<li><a href="#identity-values-in-the-generated-pom">Identity values in the generated POM</a></li>
<li><a href="#customizing-the-generated-pom">Customizing the generated POM</a></li>
<li><a href="#customizing-dependencies-versions">Customizing dependencies versions</a><ul>
<li><a href="#declared-versions%E9%BB%98%E8%AE%A4">Declared versions(é»˜è®¤)</a></li>
<li><a href="#resolved-versions">Resolved versions</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#repositories">Repositories</a><ul>
<li><a href="#snapshots-and-release-repositories">Snapshots and release repositories</a></li>
<li><a href="#publishing-to-maven-local">Publishing to Maven Local</a></li>
</ul>
</li>
<li><a href="#publishing-maven-relocation-information">Publishing Maven relocation information</a></li>
<li><a href="#complete-example">Complete example</a></li>
</ul>
</li>
<li><a href="#the-pmd-plugin">The PMD Plugin</a><ul>
<li><a href="#tasks-10">Tasks</a></li>
<li><a href="#dependency-management-6">Dependency management</a></li>
<li><a href="#configuration">Configuration</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- /TOC -->

<h1 id="Plugins"><a href="#Plugins" class="headerlink" title="Plugins"></a>Plugins</h1><h2 id="The-Application-Plugin"><a href="#The-Application-Plugin" class="headerlink" title="The Application Plugin"></a>The Application Plugin</h2><p>Application Plugin å¸®åŠ©åˆ›å»ºä¸€ä¸ªå¯æ‰§è¡Œçš„ JVM ç¨‹åº</p>
<p>Application Plugin ä½¿å¾—å¼€å‘æœŸé—´å¯åŠ¨åº”ç”¨ç¨‹åºå˜å¾—å®¹æ˜“, åŒæ—¶å°†åº”ç”¨ç¨‹åºæ‰“åŒ…æˆä¸€ä¸ª TAR&#x2F;ZIP, åŒ…å«äº†ç‰¹å®šæ“ä½œç³»ç»Ÿå¯åŠ¨ç”¨çš„è„šæœ¬</p>
<p>åº”ç”¨ Application Plugin åŒæ—¶éšå«åœ°åº”ç”¨äº† Java Plugin. <code>main</code> source set å®é™…ä¸Šæ˜¯ <code>application</code> source set</p>
<p>åº”ç”¨ Application Plugin åŒæ—¶éšå«åœ°åº”ç”¨äº† Distribution Plugin. A <code>main</code> distribution is created that packages up the application, including code dependencies and generated start scripts</p>
<h3 id="Building-JVM-applicatoins"><a href="#Building-JVM-applicatoins" class="headerlink" title="Building JVM applicatoins"></a>Building JVM applicatoins</h3><p>Example - Using the application plugin:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;application&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å”¯ä¸€éœ€è¦ä¸ºæ’ä»¶å¼ºåˆ¶é…ç½®çš„æ˜¯æŒ‡å®šç¨‹åºçš„å…¥å£(e.g å…¥å£ç‚¹(entry point))</p>
<p>Example - Configure the application main class:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">application &#123;</span><br><span class="line">    mainClass = <span class="string">&#x27;org.gradle.sample.Main&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½ å¯ä»¥é€šè¿‡æ‰§è¡Œ <code>run task</code>(<code>JavaExec</code>) æ¥è¿è¡Œè¿™ä¸ªç¨‹åº</p>
<p>è¿™ä¸ª <code>task</code> å°†ä¼šç¼–è¯‘ main source set, ç„¶åç”¨é¡¹ç›®çš„ç¼–è¯‘å¥½çš„ç±»(å’Œæ‰€æœ‰è¿è¡Œæ—¶ä¾èµ–)ä½œä¸º classpath å¹¶ä½¿ç”¨æŒ‡å®šçš„ main class å¯åŠ¨ä¸€ä¸ªæ–°çš„ JVM</p>
<p>å¯ä»¥ä½¿ç”¨ <code>gradle run --debug-jvm</code> åœ¨è°ƒè¯•æ¨¡å¼å¯åŠ¨é¡¹ç›® (see <a class="link"   target="_blank" rel="noopener" href="https://docs.gradle.org/7.3.3/javadoc/org/gradle/api/tasks/JavaExec.html#setDebug-boolean-" >JavaExec.setDebug(boolean)<i class="fas fa-external-link-alt"></i></a>)</p>
<p>ä» Gradle 4.9 ç‰ˆæœ¬å¼€å§‹, å‘½ä»¤è¡Œå‚æ•°å¯ä»¥é€šè¿‡ <code>--args</code> æ¥ä¼ é€’. ä¾‹å¦‚, å¦‚æœç°åœ¨å¯åŠ¨åº”ç”¨ç¨‹åºçš„æ—¶å€™å¸¦ä¸Šå‘½ä»¤è¡Œå‚æ•° <code>foo --bar</code>, ä½ å¯ä»¥ä½¿ç”¨ <code>gradle run --args=&quot;foo --bar&quot;</code> (see <a class="link"   target="_blank" rel="noopener" href="https://docs.gradle.org/7.3.3/javadoc/org/gradle/api/tasks/JavaExec.html#setArgsString-java.lang.String-" >JavaExec.setArgsString(java.lang.String)<i class="fas fa-external-link-alt"></i></a>)</p>
<p>å¦‚æœä½ çš„åº”ç”¨éœ€è¦ä¸€ç»„ JVM é…ç½®æˆ–ç³»ç»Ÿå±æ€§, ä½ å¯ä»¥é…ç½® <code>applicationDefaultJvmArgs</code> å±æ€§. è¿™äº› JVM å‚æ•°ä¼šè¢«åº”ç”¨åˆ° <code>run task</code> ä¸­, ä¹Ÿä¼šåŒ…å«åˆ°ç”Ÿæˆçš„å¯åŠ¨è„šæœ¬ä¸­</p>
<p>Example - Configure default JVM settings:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">application &#123;</span><br><span class="line">    applicationDefaultJvmArgs = [<span class="string">&#x27;-Dgreeting.language=en&#x27;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ çš„åº”ç”¨çš„å¯åŠ¨è„šæœ¬è¦æ”¾åˆ°å…¶ä»–ç›®å½•ä¸­, è€Œä¸æ˜¯é»˜è®¤çš„ <code>/bin</code> ç›®å½•ä¸­, ä½ å¯ä»¥é…ç½® <code>executableDir</code> å±æ€§</p>
<p>Example - Configure custom directory for start scripts:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">application &#123;</span><br><span class="line">    executableDir = <span class="string">&#x27;custom_bin_dir&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Building-applications-using-the-Java-Module-System"><a href="#Building-applications-using-the-Java-Module-System" class="headerlink" title="Building applications using the Java Module System"></a>Building applications using the Java Module System</h3><p>Java modules ä¹Ÿå¯ä»¥æ˜¯å¯è¿è¡Œçš„, ä½ å¯ä»¥ä½¿ç”¨ Application Plugin æ¥è¿è¡Œå’Œæ‰“åŒ…ä¸€ä¸ª modular åº”ç”¨</p>
<p>ç›¸å¯¹äº non-modular åº”ç”¨æ¥è¯´, ä½ éœ€è¦åšä¸¤ä»¶äº‹</p>
<p>ç¬¬ä¸€, ä½ éœ€è¦æ·»åŠ ä¸€ä¸ª <code>module-info.java</code> æ–‡ä»¶æ¥æè¿°ä½ çš„åº”ç”¨ç¨‹åº module</p>
<p>ç¬¬äºŒ, é™¤äº† main class ä¹‹å¤–, ä½ è¿˜éœ€è¦å‘Šè¯‰ Gradle ä½ æƒ³è¦è¿è¡Œçš„ module çš„åå­—:</p>
<p>Example - Configure the modular applicationâ€™s main module:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">application &#123;</span><br><span class="line">    mainModule = <span class="string">&#x27;org.gradle.sample.app&#x27;</span> <span class="comment">// name defined in module-info.java</span></span><br><span class="line">    mainClass = <span class="string">&#x27;org.gradle.sample.Main&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶å, å°±å¯ä»¥é€šè¿‡ <code>run task</code> æˆ–é€šè¿‡ç”Ÿæˆçš„å¯åŠ¨è„šæœ¬æ¥é¡¹ç›®ä½œä¸º module æ¥è¿è¡Œ, å¹¶åœ¨è¿è¡Œæ—¶éµå®ˆ module çš„è¾¹ç•Œ</p>
<p>é…ç½®çš„ main class ä¹Ÿä¼šè¢«æ”¾å…¥åº”ç”¨ç¨‹åºçš„ module-info.class æ–‡ä»¶ä¸­</p>
<p>å¦‚æœä½ ç›´æ¥ä½¿ç”¨ <code>java</code> å‘½ä»¤æ¥è¿è¡Œ modular åº”ç”¨ç¨‹åº, æä¾›æ¨¡å—åå°±å¯ä»¥äº†</p>
<h3 id="Building-a-distribution"><a href="#Building-a-distribution" class="headerlink" title="Building a distribution"></a>Building a distribution</h3><p>åº”ç”¨ç¨‹åºçš„å‘è¡Œç‰ˆå¯ä»¥é€šè¿‡ Distribution Plugin æ¥åˆ›å»º(å·²ç»è‡ªåŠ¨åº”ç”¨äº†è¿™ä¸ªæ’ä»¶)</p>
<p>ä½¿ç”¨å¦‚ä¸‹å†…å®¹åˆ›å»ºä¸€ä¸ªä¸»è¦å‘è¡Œç‰ˆ:</p>
<p>Table - Distribution content:</p>
<table>
<thead>
<tr>
<th align="left">Location</th>
<th align="left">Content</th>
</tr>
</thead>
<tbody><tr>
<td align="left">(root dir)</td>
<td align="left"><code>src/dist</code></td>
</tr>
<tr>
<td align="left"><code>lib</code></td>
<td align="left">All runtime dependencies and main source set class files</td>
</tr>
<tr>
<td align="left"><code>bin</code></td>
<td align="left">Start scripts(generated by <code>startScripts task</code>)</td>
</tr>
</tbody></table>
<p>æ·»åŠ åˆ°å‘è¡Œç‰ˆçš„é™æ€æ–‡ä»¶å¯ä»¥ç®€å•åœ°æ·»åŠ åˆ° <code>src/dict</code> ä¸­</p>
<p>Example - Include output from other tasks in the application distribution:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">tasks.register(<span class="string">&#x27;createDocs&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">def</span> docs = layout.buildDirectory.dir(<span class="string">&#x27;docs&#x27;</span>)</span><br><span class="line">    outputs.dir docs</span><br><span class="line">    <span class="keyword">doLast</span> &#123;</span><br><span class="line">        docs.get().asFile.mkdirs()</span><br><span class="line">        docs.get().<span class="keyword">file</span>(<span class="string">&#x27;readme.txt&#x27;</span>).asFile.<span class="keyword">write</span>(<span class="string">&#x27;Read me!&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">distributions &#123;</span><br><span class="line">    main &#123;</span><br><span class="line">        contents &#123;</span><br><span class="line">            <span class="keyword">from</span>(createDocs) &#123;</span><br><span class="line">                <span class="keyword">into</span> <span class="string">&#x27;docs&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Gradle ä¼šçŸ¥é“åœ¨ç»„åˆå‘è¡Œç‰ˆä¹‹å‰è¦å…ˆæ‰§è¡Œæä¾›è¿™ä¸ªæ–‡ä»¶çš„ <code>task</code>, Gradle ä¼šå¸®åŠ©ä½ æ‰§è¡Œ</p>
<p>è¿è¡Œ <code>gradle installDist</code> æ¥åœ¨ <code>build/install/projectName</code> ä¸­åˆ›å»ºä¸€ä¸ªåº”ç”¨ç¨‹åºçš„ image</p>
<p>è¿è¡Œ <code>gradle distZip</code> æ¥åˆ›å»ºä¸€ä¸ªåŒ…å«å‘è¡Œç‰ˆçš„ ZIP æ–‡ä»¶</p>
<p>è¿è¡Œ <code>gradle distTar</code> æ¥åˆ›å»ºä¸€ä¸ªåº”ç”¨ç¨‹åº TAR</p>
<p>æˆ–è€…è¿è¡Œ <code>gradle assemble</code> åŒæ—¶åˆ›å»º ZIP å’Œ TAR</p>
<h3 id="Customizing-start-script-generation"><a href="#Customizing-start-script-generation" class="headerlink" title="Customizing start script generation"></a>Customizing start script generation</h3><p>Application Plugin å¯ä»¥å¼€ç®±å³ç”¨åœ°ç”Ÿæˆç±» Unix çš„å’Œ Windows çš„å¯åŠ¨è„šæœ¬</p>
<p>å¯åŠ¨è„šæœ¬ä½¿ç”¨å®šä¹‰ä½œä¸ºåŸå§‹æ„å»ºå’Œè¿è¡Œæ—¶ç¯å¢ƒä¸€éƒ¨åˆ†çš„ç‰¹å®šé…ç½®æ¥å¯åŠ¨ JVM</p>
<p>é»˜è®¤çš„è„šæœ¬æ¨¡æ¿æ˜¯åŸºäºç”¨æ¥å¯åŠ¨ Gradle çš„å¯åŠ¨è„šæœ¬çš„</p>
<p>å¯åŠ¨è„šæœ¬æ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ ,å‚è€ƒ <a class="link"   target="_blank" rel="noopener" href="https://docs.gradle.org/7.3.3/dsl/org.gradle.jvm.application.tasks.CreateStartScripts.html" >CreateStartScripts<i class="fas fa-external-link-alt"></i></a> å‚çœ‹æ›´å¤šçš„ç»†èŠ‚å’Œä¾‹å­</p>
<h3 id="Tasks"><a href="#Tasks" class="headerlink" title="Tasks"></a>Tasks</h3><p>Application Plugin æ·»åŠ äº†å¦‚ä¸‹ <code>task</code> åˆ°é¡¹ç›®ä¸­:</p>
<table>
<thead>
<tr>
<th align="left">åç§°</th>
<th align="left">å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>run</code></td>
<td align="left"><code>JavaExec</code> ç±»å‹; ä¾èµ–äº <code>classes</code>; å¯åŠ¨åº”ç”¨ç¨‹åº</td>
</tr>
<tr>
<td align="left"><code>startScripts</code></td>
<td align="left"><code>CreateStartScripts</code> ç±»å‹; ä¾èµ–äº <code>jar</code>; åˆ›å»ºç‰¹å®šäºæ“ä½œç³»ç»Ÿçš„çš„è„šæœ¬, å»ºé¡¹ç›®ä½œä¸º JVM åº”ç”¨ç¨‹åºè¿è¡Œ</td>
</tr>
<tr>
<td align="left"><code>installDist</code></td>
<td align="left"><code>Sync</code> ç±»å‹; ä¾èµ–äº <code>jar</code>, <code>startScripts</code>; å®‰è£…åº”ç”¨ç¨‹åºåˆ°æŒ‡å®šçš„ç›®å½•</td>
</tr>
<tr>
<td align="left"><code>distZip</code></td>
<td align="left"><code>Zip</code> ç±»å‹; ä¾èµ–äº <code>jar</code>, <code>startScripts</code>; åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„å‘è¡Œç‰ˆ ZIP æ–‡ä»¶, åŒ…æ‹¬äº†è¿è¡Œæ—¶åº“å’Œç‰¹å®šçš„æ“ä½œç³»ç»Ÿçš„è„šæœ¬</td>
</tr>
<tr>
<td align="left"><code>distTar</code></td>
<td align="left"><code>Tar</code> ç±»å‹; ä¾èµ–äº <code>jar</code>, <code>startScripts</code>; åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„å‘è¡Œç‰ˆ TAR æ–‡ä»¶, åŒ…æ‹¬äº†è¿è¡Œæ—¶åº“å’Œç‰¹å®šçš„æ“ä½œç³»ç»Ÿçš„è„šæœ¬</td>
</tr>
</tbody></table>
<h3 id="Application-extension"><a href="#Application-extension" class="headerlink" title="Application extension"></a>Application extension</h3><p>Application Plugin æ·»åŠ ä¸€ä¸ªæ‰©å±•(extension) åˆ°é¡¹ç›®ä¸­, å¯ä»¥ç”¨è¿™ä¸ªæ‰©å±•æ¥æ§åˆ¶è¿™ä¸ªæ’ä»¶çš„è¡Œä¸º</p>
<p>æŸ¥çœ‹ [JavaApplication](åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„å‘è¡Œç‰ˆ ZIP æ–‡ä»¶, åŒ…æ‹¬äº†è¿è¡Œæ—¶åº“å’Œç‰¹å®šçš„æ“ä½œç³»ç»Ÿçš„è„šæœ¬) DSL æ–‡æ¡£æ¥è·å–æ›´å¤šæ‰©å±•ä¸Šå¯ç”¨çš„å±æ€§çš„ä¿¡æ¯</p>
<h2 id="The-Base-Plugin"><a href="#The-Base-Plugin" class="headerlink" title="The Base Plugin"></a>The Base Plugin</h2><p>Base Plugin æä¾›äº†å¤§å¤šæ•°æ„å»ºä¸­å¸¸è§çš„ä¸€äº› <code>task</code> å’Œ çº¦å®š, å¹¶å‘æ„å»ºä¸­æ·»åŠ äº†ä¸€ä¸ªç»“æ„, ä»¥ä¿ƒè¿›å…¶è¿è¡Œæ–¹å¼çš„ä¸€è‡´æ€§</p>
<p>Base Plugin æœ€ç»ˆè¦çš„è´¡çŒ®æ˜¯ä¸€ç»„ç”Ÿå‘½å‘¨æœŸ <code>task</code>, è¿™äº› <code>task</code> ä¸ºæ›´å…·ä½“çš„å…¶ä»–æ’ä»¶æä¾›çš„æˆ–è„šæœ¬ä½œè€…æä¾›çš„ <code>task</code> æ‰®æ¼”äº†ä¿æŠ¤ä¼çš„è§’è‰²</p>
<h3 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h3><p>Example - Applying the Base Plugin:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;base&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Task"><a href="#Task" class="headerlink" title="Task"></a>Task</h3><table>
<thead>
<tr>
<th align="left">åç§°</th>
<th align="left">å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>clean</code></td>
<td align="left"><code>Delete</code> ç±»å‹; åˆ é™¤æ„å»ºç›®å½•(é»˜è®¤ä¸º <code>build</code> ç›®å½•)åŠå…¶å…¶ä¸­æ‰€æœ‰çš„ä¸œè¥¿; é€šè¿‡ <code>Project.getBuildDir()</code> é¡¹ç›®å±æ€§æŒ‡å®šçš„ç›®å½•</td>
</tr>
<tr>
<td align="left"><code>check</code></td>
<td align="left">lifecycle task; æ’ä»¶æˆ–è€…è„šæœ¬ä½œè€…åº”è¯¥è¿æ¥å®ƒä»¬çš„éªŒè¯ <code>task</code>, ä¾‹å¦‚ä¸€ä¸ªæµ‹è¯• <code>task</code>, åˆ°è¿™ä¸ª lifecycle task, ä½¿ç”¨ <code>check.dependsOn(task)</code></td>
</tr>
<tr>
<td align="left"><code>assemble</code></td>
<td align="left">lifecycle task; æ’ä»¶æˆ–è€…è„šæœ¬ä½œè€…åº”è¯¥è¿æ¥å®ƒä»¬çš„åˆ›å»ºå‘è¡Œç‰ˆ <code>task</code> æˆ–å…¶ä»–å¯æ¶ˆè´¹çš„æ„å»º <code>task</code>, ä¾‹å¦‚ <code>jar</code>, åˆ°è¿™ä¸ª lifecycle task, ä½¿ç”¨ <code>assemble.dependsOn(task)</code></td>
</tr>
<tr>
<td align="left"><code>build</code></td>
<td align="left">lifecycle task;ä¾èµ–äº <code>check</code>, <code>assemble</code>; æ‰“ç®—æ„å»ºæ‰€æœ‰çš„ä¸œè¥¿, åŒ…æ‹¬è¿è¡Œæ‰€æœ‰æµ‹è¯•, ç”Ÿæˆäº§å“æ„ä»¶, ç”Ÿæˆæ–‡æ¡£; åº”è¯¥æ¯”è¾ƒå°‘åœ°ç›´æ¥è¿æ¥ <code>task</code> åˆ° <code>build</code> ä¸Š, <code>assemble</code> å’Œ <code>check</code> æ›´æ¨èç”¨æ¥è¿æ¥</td>
</tr>
<tr>
<td align="left"><code>build&#123;Configuration&#125;</code></td>
<td align="left">task rule; ç»„è£…é‚£äº›é™„åŠ åˆ°å‘½åçš„é…ç½®çš„æ„ä»¶, ä¾‹å¦‚, <code>buildArchives</code> å°†ä¼šæ‰§è¡Œåˆ›å»ºè¿æ¥åˆ° <code>archives configuration</code> çš„æ„ä»¶æ‰€éœ€çš„ä»»ä½• task</td>
</tr>
<tr>
<td align="left"><code>clean&#123;Taks&#125;</code></td>
<td align="left">task rule; åˆ é™¤ä¸€ä¸ª task å®šä¹‰å¥½çš„ outputs, ä¾‹å¦‚, <code>cleanJar</code> å°†ä¼šåˆ é™¤ Java Plugin ä¸­ <code>jar task</code> ç”Ÿæˆçš„ JAR æ–‡ä»¶</td>
</tr>
</tbody></table>
<h3 id="Dependency-management"><a href="#Dependency-management" class="headerlink" title="Dependency management"></a>Dependency management</h3><p>Base Plugin æ²¡æœ‰ä¸ºä¾èµ–æ·»åŠ  configuration, ä½†æ˜¯å®ƒæ·»åŠ äº†å¦‚ä¸‹é…ç½®:</p>
<h4 id="default"><a href="#default" class="headerlink" title="default"></a>default</h4><p>é»˜è®¤çš„é…ç½®</p>
<h4 id="archives"><a href="#archives" class="headerlink" title="archives"></a>archives</h4><p>ä¸€ä¸ªé¡¹ç›®ç”Ÿäº§æ„ä»¶çš„æ ‡å‡†é…ç½®</p>
<p><code>assemble task</code> ç”Ÿæˆæ‰€æœ‰çš„å…³è”åˆ° <code>archives</code> configuration çš„æ„ä»¶</p>
<h3 id="Contributed-extensions"><a href="#Contributed-extensions" class="headerlink" title="Contributed extensions"></a>Contributed extensions</h3><p>Example - Using the base extension:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">base &#123;</span><br><span class="line">    archivesName = <span class="string">&quot;gradle&quot;</span></span><br><span class="line">    distsDirectory = layout.buildDirectory.dir(<span class="string">&#x27;custom-dist&#x27;</span>)</span><br><span class="line">    libsDirectory = layout.buildDirectory.dir(<span class="string">&#x27;custom-libs&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>archivesName</code></p>
<ul>
<li>é»˜è®¤ä¸º <code>$project.name</code><ul>
<li>ä¸º <code>archive task</code> æä¾›é»˜è®¤çš„ <code>AbstractArchiveTask.getArchiveBaseName()</code></li>
</ul>
</li>
</ul>
<p><code>distsDirectory</code></p>
<ul>
<li>é»˜è®¤ä¸º <code>$buildDir/distributions</code><ul>
<li>å‘è¡Œç‰ˆ archives æ‰€åœ¨çš„ç›®å½•çš„é»˜è®¤åç§°</li>
</ul>
</li>
</ul>
<p><code>libsDirectory</code></p>
<ul>
<li>é»˜è®¤ä¸º <code>$buildDir/libs</code><ul>
<li>åº“ archives æ‰€åœ¨ç›®å½•çš„é»˜è®¤åç§°</li>
</ul>
</li>
</ul>
<p>è¿™ä¸ªæ’ä»¶è¿˜ä¸ºä»»ä½•ç»§æ‰¿äº† <code>AbstractArchiveTask</code> çš„ task æä¾›äº†é»˜è®¤å€¼:</p>
<p><code>destinationDirectory</code></p>
<ul>
<li>é»˜è®¤ä¸º <code>distsDirectory</code> æˆ– <code>libsDirectory</code></li>
</ul>
<p><code>archiveVersion</code></p>
<ul>
<li>é»˜è®¤ä¸º <code>$project.version</code> , å¦‚æœé¡¹ç›®æ²¡æœ‰ç‰ˆæœ¬å°±é»˜è®¤ä¸º <code>&#39;unspecified&#39;</code></li>
</ul>
<p><code>archiveBaseName</code></p>
<ul>
<li>é»˜è®¤ä¸º <code>$archivesBaseName</code></li>
</ul>
<h2 id="Build-Init-Plugin"><a href="#Build-Init-Plugin" class="headerlink" title="Build Init Plugin"></a>Build Init Plugin</h2><p>Build Init Plugin ç”¨æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ Gradle æ„å»º</p>
<p>Build Init Plugin æ”¯æŒåˆ›å»ºä¸åŒç±»å‹çš„å…¨æ–°çš„ Gradle æ„å»º, æˆ–è€…å°†å·²å­˜åœ¨çš„ Maven æ„å»ºè½¬æ¢ä¸º Gradle æ„å»º</p>
<h3 id="Supported-Gradle-build-types"><a href="#Supported-Gradle-build-types" class="headerlink" title="Supported Gradle build types"></a>Supported Gradle build types</h3><p>Table - Build init types:</p>
<table>
<thead>
<tr>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>pom</code></td>
<td align="left">å°†ä¸€ä¸ªå·²å­˜åœ¨çš„ Maven æ„å»ºè½¬æ¢ä¸º Gradle æ„å»º</td>
</tr>
<tr>
<td align="left"><code>basic</code></td>
<td align="left">ä¸€ä¸ªåŸºç¡€çš„, ç©ºçš„, Gradle æ„å»º</td>
</tr>
<tr>
<td align="left"><code>java-application</code></td>
<td align="left">ä¸€ä¸ª Java å®ç°çš„å‘½ä»¤è¡Œåº”ç”¨ç¨‹åº</td>
</tr>
<tr>
<td align="left"><code>java-gradle-plugin</code></td>
<td align="left">ä¸€ä¸ª Java å®ç°çš„ Gradle æ’ä»¶</td>
</tr>
<tr>
<td align="left"><code>java-library</code></td>
<td align="left">ä¸€ä¸ª Java åº“</td>
</tr>
<tr>
<td align="left"><code>kotlin-application</code></td>
<td align="left">ä¸€ä¸ª Kotlin&#x2F;JVM å®ç°çš„å‘½ä»¤è¡Œåº”ç”¨ç¨‹åº</td>
</tr>
<tr>
<td align="left"><code>kotlin-gradle-plugin</code></td>
<td align="left">ä¸€ä¸ª Kotlin&#x2F;JVM å®ç°çš„ Gradle æ’ä»¶</td>
</tr>
<tr>
<td align="left"><code>kotlin-library</code></td>
<td align="left">ä¸€ä¸ª Kotlin&#x2F;JVM åº“</td>
</tr>
<tr>
<td align="left"><code>groovy-application</code></td>
<td align="left">ä¸€ä¸ª Groovy å®ç°çš„å‘½ä»¤è¡Œåº”ç”¨ç¨‹åº</td>
</tr>
<tr>
<td align="left"><code>groovy-gradle-plugin</code></td>
<td align="left">ä¸€ä¸ª Groovy å®ç°çš„ Gradle æ’ä»¶</td>
</tr>
<tr>
<td align="left"><code>groovy-library</code></td>
<td align="left">ä¸€ä¸ª Groovy åº“</td>
</tr>
<tr>
<td align="left"><code>scala-application</code></td>
<td align="left">ä¸€ä¸ª Scala åº”ç”¨ç¨‹åº</td>
</tr>
<tr>
<td align="left"><code>scala-library</code></td>
<td align="left">ä¸€ä¸ª Scala åº“</td>
</tr>
<tr>
<td align="left"><code>cpp-application</code></td>
<td align="left">ä¸€ä¸ª C++ å®ç°çš„å‘½ä»¤è¡Œåº”ç”¨ç¨‹åº</td>
</tr>
<tr>
<td align="left"><code>cpp-library</code></td>
<td align="left">ä¸€ä¸ª C++ åº“</td>
</tr>
</tbody></table>
<h3 id="Tasks-1"><a href="#Tasks-1" class="headerlink" title="Tasks"></a>Tasks</h3><p>Build Init Plugin æ·»åŠ äº†å¦‚ä¸‹ task åˆ°é¡¹ç›®ä¸­</p>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>init</code></td>
<td align="left"><code>InitBuild</code> ç±»å‹; ä¾èµ–äº <code>wrapper</code>; åˆ›å»ºä¸€ä¸ª Gradle æ„å»º</td>
</tr>
<tr>
<td align="left"><code>wrapper</code></td>
<td align="left"><code>Wrapper</code> ç±»å‹; åˆ›å»º Gradle wrapper æ–‡ä»¶</td>
</tr>
</tbody></table>
<p>Gradle æ’ä»¶é€šå¸¸éœ€è¦åœ¨ä½¿ç”¨ä¹‹å‰è¢«åº”ç”¨åˆ°ä¸€ä¸ªé¡¹ç›®ä¸­, å³å…ˆå£°æ˜åä½¿ç”¨</p>
<p>ä½†æ˜¯, Build Init Plugin å¯¹æ¯ä¸€ä¸ªæ„å»ºæ¥è¯´æ˜¯è‡ªåŠ¨åº”ç”¨åˆ°æ ¹é¡¹ç›®ä¸­çš„, è¿™æ„å‘³ä½ ä¸éœ€è¦åœ¨æ˜¾å¼åœ°åº”ç”¨å®ƒä»è€Œä½¿ç”¨å®ƒ</p>
<p>ä½ åªéœ€è¦åœ¨ä½ æƒ³è¦åˆ›å»º Gradle æ„å»ºçš„ç›®å½•ä¸­ç®€å•åœ°æ‰§è¡Œ <code>init task</code></p>
<p>ä¸éœ€è¦ä¸ºäº†åº”ç”¨æ’ä»¶æ¥åˆ›å»ºä¸€ä¸ª stub <code>build.gradle</code></p>
<p>Build Init Plugin è¿˜ä¼šä½¿ç”¨ <code>wrapper task</code> æ¥ä¸ºæ„å»ºç”Ÿæˆ Wrapper æ–‡ä»¶</p>
<h3 id="What-to-create"><a href="#What-to-create" class="headerlink" title="What to create"></a>What to create</h3><p>æœ€ç®€å•æœ€æ¨èçš„ä½¿ç”¨ <code>init task</code> çš„æ–¹å¼æ˜¯åœ¨äº¤äº’å¼ç»ˆç«¯ä¸­è¿è¡Œ <code>gradle init</code>. Gradle ä¼šåˆ—å‡ºå¯ç”¨çš„æ„å»ºç±»å‹å¹¶å‘Šè¯‰ä½ å»é€‰æ‹©ä¸€ä¸ª. ç„¶åä¼šè¯¢é—®ä¸€äº›é¢å¤–çš„é—®é¢˜æ¥è®©ä½ å¾®è°ƒç»“æœ</p>
<p><code>init task</code> æœ‰ä¸€äº›å¯ç”¨çš„å‘½ä»¤è¡Œé€‰é¡¹æ¥è®©ä½ æ§åˆ¶ç”Ÿæˆä»€ä¹ˆä¸œè¥¿. Gradle ä¸æ˜¯è¿è¡Œåœ¨äº¤äº’å¼ç»ˆç«¯æ—¶å¯ä»¥ä½¿ç”¨è¿™äº›å‘½ä»¤è¡Œé€‰é¡¹</p>
<p>æ„å»ºç±»å‹é€šè¿‡å‘½ä»¤è¡Œå‚æ•° <code>--type</code> æ¥æŒ‡å®š. ä¾‹å¦‚, åˆ›å»ºä¸€ä¸ª Java library é¡¹ç›®: <code>gradle init --type java-library</code></p>
<p>å¦‚æœæ²¡æœ‰æä¾› <code>--type</code> å‚æ•°, Gradle å°†ä¼šä»è¿è¡Œç¯å¢ƒä¸­å°è¯•è¿›è¡Œæ¨æ–­. ä¾‹å¦‚, å¦‚æœæŸ¥æ‰¾åˆ°ä¸€ä¸ª <code>pom.xml</code> æ–‡ä»¶å°†ä¼šæ¨æ–­ <code>--type</code> ä¸º <code>pom</code> ç±»å‹æ¥å°†ä¸€ä¸ª Maven é¡¹ç›®è½¬æ¢ä¸º Gradle æ„å»º. å¦‚æœ <code>--type</code> ä¸èƒ½æ¨æ–­å‡ºæ¥, åˆ™ä½¿ç”¨ <code>basic</code> ç±»å‹</p>
<p><code>init task</code> è¿˜æ”¯æŒç”Ÿæˆä½¿ç”¨ Gradle Groovy DSL æˆ– Gradle Kotlin DSL çš„æ„å»ºè„šæœ¬</p>
<p>é»˜è®¤æ˜¯ Groovy DSL</p>
<p>å¯ä»¥ä½¿ç”¨ <code>--dsl</code> å‘½ä»¤è¡Œå‚æ•°æ¥é€‰æ‹© DSL. ä¾‹å¦‚, <code>gradle init --type java-library --dsl kotlin</code></p>
<p>å¯ä»¥ä½¿ç”¨ <code>--project-name</code> æ¥æŒ‡å®šç”Ÿæˆçš„é¡¹ç›®çš„åç§°, é»˜è®¤æ˜¯ <code>init task</code> è¿è¡Œçš„å·¥ä½œç›®å½•çš„åç§°</p>
<p>å¯ä»¥ä½¿ç”¨ <code>--package</code> æ¥æ‰§è¡Œç”Ÿæˆçš„æºä»£ç æ–‡ä»¶ä½¿ç”¨çš„åŒ…å, é»˜è®¤æ˜¯é¡¹ç›®åç§°</p>
<p>æ‰€æœ‰çš„æ„å»ºç±»å‹ä¹Ÿä¼šè®¾ç½® Gradle Wrapper</p>
<h3 id="Build-init-types"><a href="#Build-init-types" class="headerlink" title="Build init types"></a>Build init types</h3><h4 id="pom-build-type-Maven-conversion"><a href="#pom-build-type-Maven-conversion" class="headerlink" title="pom build type (Maven conversion)"></a><code>pom</code> build type (Maven conversion)</h4><p><code>pom</code> ç±»å‹å¯ä»¥ç”¨æ¥è½¬æ¢ä¸€ä¸ª Maven æ„å»ºä¸º Gradle æ„å»º</p>
<p>è¿™ä¸ªé€šè¿‡å°† POM è½¬æ¢ä¸ºä¸€ä¸ªæˆ–å¤šä¸ª Gradle æ–‡ä»¶æ¥å®ç°çš„</p>
<h4 id="java-application-build-type"><a href="#java-application-build-type" class="headerlink" title="java-application build type"></a><code>java-application</code> build type</h4><p><code>java-application</code> æ„å»ºç±»å‹æ˜¯ä¸å¯æ¨æ–­çš„, å®ƒå¿…é¡»æ˜¾å¼å£°æ˜</p>
<p><code>java-application</code> æ„å»ºç±»å‹æœ‰å¦‚ä¸‹ç‰¹æ€§:</p>
<ul>
<li>ä½¿ç”¨ <code>application</code> æ’ä»¶æ¥ç”Ÿæˆ Java å®ç°çš„å‘½ä»¤è¡Œåº”ç”¨ç¨‹åº</li>
<li>ä½¿ç”¨ <code>mavenCentral</code> ä¾èµ–ä»“åº“</li>
<li>ä½¿ç”¨ JUnit 4 æ¥è¿›è¡Œæµ‹è¯•</li>
<li>ä½¿ç”¨çº¦å®šçš„ç›®å½•ä½ç½®æ¥å­˜æ”¾æºä»£ç </li>
<li>å¦‚æœæ²¡æœ‰ä»»ä½•å­˜åœ¨çš„æºä»£ç å’Œæµ‹è¯•æ–‡ä»¶, å°±åŒ…å«ä¸€ä¸ªç®€å•çš„ç±»å’Œå•å…ƒæµ‹è¯•</li>
</ul>
<p>å¯ä»¥ä½¿ç”¨ <code>--test-framework</code> å‚æ•°æ¥æŒ‡å®šä½¿ç”¨å…¶ä»–æµ‹è¯•æ¡†æ¶:</p>
<ul>
<li><code>gradle init --type java-application --test-framework junit-jupiter</code></li>
<li><code>gradle init --type java-application --test-framework spock</code></li>
<li><code>gradle init --type java-application --test-framework testng</code></li>
</ul>
<h4 id="java-library-build-type"><a href="#java-library-build-type" class="headerlink" title="java-library build type"></a><code>java-library</code> build type</h4><p><code>java-library</code> æ„å»ºç±»å‹æ˜¯ä¸å¯æ¨æ–­çš„, å®ƒå¿…é¡»æ˜¾å¼å£°æ˜</p>
<p><code>java-library</code> æœ‰å¦‚ä¸‹ç‰¹æ€§:</p>
<ul>
<li>ä½¿ç”¨ <code>java</code> æ’ä»¶æ¥ç”Ÿæˆä¸€ä¸ª Java å®ç°çš„åº“</li>
<li>ä½¿ç”¨ <code>mavenCentral</code> ä¾èµ–ä»“åº“</li>
<li>ä½¿ç”¨ JUnit 4 ä½œä¸ºæµ‹è¯•æ¡†æ¶</li>
<li>ä½¿ç”¨çº¦å®šçš„ç›®å½•ä½ç½®æ¥å­˜æ”¾æºä»£ç </li>
<li>å¦‚æœæ²¡æœ‰ä»»ä½•å­˜åœ¨çš„æºä»£ç å’Œæµ‹è¯•æ–‡ä»¶, å°±åŒ…å«ä¸€ä¸ªç®€å•çš„ç±»å’Œå•å…ƒæµ‹è¯•</li>
</ul>
<p>ä½¿ç”¨ <code>--test-framework</code> å‚æ•°æ¥ä½¿ç”¨å…¶ä»–æµ‹è¯•æ¡†æ¶:</p>
<p><code>gradle init --type java-library --test-framework [junit-jupiter | spock | testng]</code></p>
<h4 id="java-gradle-plugin-build-type"><a href="#java-gradle-plugin-build-type" class="headerlink" title="java-gradle-plugin build type"></a><code>java-gradle-plugin</code> build type</h4><p><code>java-gradle-plugin</code> æ„å»ºç±»å‹æ˜¯ä¸å¯æ¨æ–­çš„, å®ƒå¿…é¡»æ˜¾å¼å£°æ˜</p>
<p><code>java-gradle-plugin</code> æœ‰å¦‚ä¸‹ç‰¹æ€§:</p>
<ul>
<li>ä½¿ç”¨ <code>java-gradle-plugin</code> æ’ä»¶æ¥ç”Ÿæˆä¸€ä¸ª Java å®ç°çš„ Gradle æ’ä»¶</li>
<li>ä½¿ç”¨ <code>mavenCentral</code> ä¾èµ–ä»“åº“</li>
<li>ä½¿ç”¨ JUnit 4 å’Œ TestKit æ¥è¿›è¡Œæµ‹è¯•</li>
<li>ä½¿ç”¨çº¦å®šçš„ç›®å½•ä½ç½®æ¥å­˜æ”¾æºä»£ç </li>
<li>å¦‚æœæ²¡æœ‰ä»»ä½•å­˜åœ¨çš„æºä»£ç å’Œæµ‹è¯•æ–‡ä»¶, å°±åŒ…å«ä¸€ä¸ªç®€å•çš„ç±»å’Œå•å…ƒæµ‹è¯•</li>
</ul>
<h4 id="groovy-library-build-type"><a href="#groovy-library-build-type" class="headerlink" title="groovy-library build type"></a><code>groovy-library</code> build type</h4><p><code>groovy-library</code> æ„å»ºç±»å‹æ˜¯ä¸å¯æ¨æ–­çš„, å®ƒå¿…é¡»æ˜¾å¼å£°æ˜</p>
<p><code>groovy-library</code> æœ‰å¦‚ä¸‹ç‰¹æ€§:</p>
<ul>
<li>ä½¿ç”¨ <code>groovy</code> æ’ä»¶æ¥ç”Ÿæˆ Groovy å®ç°çš„åº“</li>
<li>ä½¿ç”¨ <code>mavenCentral</code> ä¾èµ–ä»“åº“</li>
<li>ä½¿ç”¨ Groovy 2.x</li>
<li>ä½¿ç”¨ <code>Spock testing framework</code> æ¥è¿›è¡Œæµ‹è¯•</li>
<li>ä½¿ç”¨çº¦å®šçš„ç›®å½•ä½ç½®æ¥å­˜æ”¾æºä»£ç </li>
<li>å¦‚æœæ²¡æœ‰ä»»ä½•å·²å­˜åœ¨çš„æºä»£ç å’Œæµ‹è¯•æ–‡ä»¶, å°±åŒ…å«ä¸€ä¸ªç®€å•çš„ Groovy ç±»å’Œä¸€ä¸ªç›¸å…³çš„ <code>Spock specification</code></li>
</ul>
<h4 id="groovy-application-build-type"><a href="#groovy-application-build-type" class="headerlink" title="groovy-application build type"></a><code>groovy-application</code> build type</h4><p><code>groovy-application</code> æ„å»ºç±»å‹æ˜¯ä¸å¯æ¨æ–­çš„, å®ƒå¿…é¡»æ˜¾å¼å£°æ˜</p>
<p><code>groovy-application</code> æœ‰å¦‚ä¸‹ç‰¹æ€§:</p>
<ul>
<li>ä½¿ç”¨ <code>application</code> å’Œ <code>groovy</code> æ’ä»¶æ¥ç”Ÿæˆ Groovy å®ç°çš„å‘½ä»¤è¡Œåº”ç”¨ç¨‹åº</li>
<li>ä½¿ç”¨ <code>mavenCentral</code> ä¾èµ–ä»“åº“</li>
<li>ä½¿ç”¨ Groovy 2.x</li>
<li>ä½¿ç”¨ <code>Spock testing framework</code> æ¥è¿›è¡Œæµ‹è¯•</li>
<li>ä½¿ç”¨çº¦å®šçš„ç›®å½•ä½ç½®æ¥å­˜æ”¾æºä»£ç </li>
<li>å¦‚æœæ²¡æœ‰ä»»ä½•å·²å­˜åœ¨çš„æºä»£ç å’Œæµ‹è¯•æ–‡ä»¶, å°±åŒ…å«ä¸€ä¸ªç®€å•çš„ Groovy ç±»å’Œä¸€ä¸ªç›¸å…³çš„ <code>Spock specification</code></li>
</ul>
<h4 id="groovy-gradle-plugin-build-type"><a href="#groovy-gradle-plugin-build-type" class="headerlink" title="groovy-gradle-plugin build type"></a><code>groovy-gradle-plugin</code> build type</h4><p><code>groovy-gradle-plugin</code> æ„å»ºç±»å‹æ˜¯ä¸å¯æ¨æ–­çš„, å®ƒå¿…é¡»æ˜¾å¼å£°æ˜</p>
<p><code>groovy-gradle-plugin</code> æœ‰å¦‚ä¸‹ç‰¹æ€§:</p>
<ul>
<li>ä½¿ç”¨ <code>java-gradle-plugin</code> å’Œ <code>groovy</code> æ’ä»¶æ¥ç”Ÿæˆ Groovy å®ç°çš„ Gradle æ’ä»¶</li>
<li>ä½¿ç”¨ <code>mavenCentral</code> ä¾èµ–ä»“åº“</li>
<li>ä½¿ç”¨ Groovy 2.x</li>
<li>ä½¿ç”¨ <code>Spock testing framework</code> å’Œ TestKit æ¥è¿›è¡Œæµ‹è¯•</li>
<li>ä½¿ç”¨çº¦å®šçš„ç›®å½•ä½ç½®æ¥å­˜æ”¾æºä»£ç </li>
<li>å¦‚æœæ²¡æœ‰ä»»ä½•å·²å­˜åœ¨çš„æºä»£ç å’Œæµ‹è¯•æ–‡ä»¶, å°±åŒ…å«ä¸€ä¸ªç®€å•çš„ Groovy ç±»å’Œä¸€ä¸ªç›¸å…³çš„ <code>Spock specification</code></li>
</ul>
<h4 id="basic-build-type"><a href="#basic-build-type" class="headerlink" title="basic build type"></a><code>basic</code> build type</h4><p><code>basic</code> æ„å»ºç±»å‹å¯¹äºåˆ›å»ºä¸€ä¸ªæ–°çš„ Gradle æ„å»ºæ˜¯å¾ˆæœ‰ç”¨çš„. å®ƒåˆ›å»ºäº†ç®€å•çš„ settings å’Œ build æ–‡ä»¶, é‡Œé¢æœ‰æ³¨é‡Šå’Œé“¾æ¥æ¥å¸®åŠ©å¿«é€Ÿå¼€å§‹</p>
<p>å¦‚æœæ²¡æœ‰æ„å»ºç±»å‹æ˜¾å¼æŒ‡å®š, æ²¡æœ‰æ„å»ºç±»å‹å¯ä»¥è¢«æ¨æ–­å‡ºæ¥, åˆ™ä½¿ç”¨è¿™ä¸ª <code>basic</code> æ„å»ºç±»å‹</p>
<h2 id="The-Checkstyle-Plugin"><a href="#The-Checkstyle-Plugin" class="headerlink" title="The Checkstyle Plugin"></a>The Checkstyle Plugin</h2><p>Example - Using the Checkstyle plugin:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;checkstyle&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ’ä»¶æ·»åŠ äº†ä¸€äº› <code>task</code> åˆ°é¡¹ç›®ä¸­æ¥æ‰§è¡Œè´¨é‡æ£€æŸ¥. ä½ å¯ä»¥é€šè¿‡è¿è¡Œ <code>gradle check</code> æ¥æ‰§è¡Œæ£€æŸ¥</p>
<p>Checkstyle å°†ä½¿ç”¨ä¸è¿è¡Œ Gradle ç›¸åŒçš„ Java ç‰ˆæœ¬æ¥è¿è¡Œ</p>
<h3 id="Tasks-2"><a href="#Tasks-2" class="headerlink" title="Tasks"></a>Tasks</h3><p>Checkstyle æ’ä»¶æ·»åŠ å¦‚ä¸‹ <code>task</code> åˆ°é¡¹ç›®ä¸­:</p>
<h4 id="checkstyleMain"><a href="#checkstyleMain" class="headerlink" title="checkstyleMain"></a><code>checkstyleMain</code></h4><p><code>Checkstyle</code> ç±»å‹</p>
<p>ä¾èµ–äº <code>classes</code></p>
<p>åœ¨ç”Ÿäº§ Java æºä»£ç æ–‡ä»¶ä¸Šè¿è¡Œ Checkstyle</p>
<h4 id="checkstyleTest"><a href="#checkstyleTest" class="headerlink" title="checkstyleTest"></a><code>checkstyleTest</code></h4><p><code>Checkstyle</code> ç±»å‹</p>
<p>ä¾èµ–äº <code>testClasses</code></p>
<p>åœ¨ Java æµ‹è¯•æºä»£ç æ–‡ä»¶ä¸Šè¿è¡Œ Checkstyle</p>
<h4 id="checkstyleSourceSet"><a href="#checkstyleSourceSet" class="headerlink" title="checkstyleSourceSet"></a><code>checkstyleSourceSet</code></h4><p><code>Checkstyle</code> ç±»å‹</p>
<p>ä¾èµ–äº <code>sourceSetClasses</code></p>
<p>åœ¨ç»™å®šçš„ source set çš„ Java æºæ–‡ä»¶ä¸Šè¿è¡Œ Checkstyle</p>
<h3 id="Dependencies-added-to-other-tasks"><a href="#Dependencies-added-to-other-tasks" class="headerlink" title="Dependencies added to other tasks"></a>Dependencies added to other tasks</h3><p>Checkstyle Plugin æ·»åŠ å¦‚ä¸‹ä¾èµ–åˆ° Java Plugin çš„ task ä¸­:</p>
<h4 id="check"><a href="#check" class="headerlink" title="check"></a><code>check</code></h4><p>ä¾èµ–äºæ‰€æœ‰çš„ Checkstyle tasks, åŒ…æ‹¬ <code>checkstyleMain</code> å’Œ <code>checkstyleTest</code></p>
<h3 id="Project-layout"><a href="#Project-layout" class="headerlink" title="Project layout"></a>Project layout</h3><p>é»˜è®¤æƒ…å†µä¸‹, Checkstyle Plugin å¸Œæœ›é…ç½®æ–‡ä»¶æ”¾åˆ° root project ä¸­, ä½†è¿™æ˜¯å¯ä»¥é…ç½®çš„</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;root&gt;</span><br><span class="line">    config</span><br><span class="line">        checkstyle              // 1</span><br><span class="line">            checkstyle.xml      // 2</span><br><span class="line">            suppressions.xml</span><br></pre></td></tr></table></figure>

<p><code>1</code> : Checkstyle é…ç½®æ–‡ä»¶æ”¾åœ¨è¿™é‡Œ</p>
<p><code>2</code> : ä¸» Checkstyle é…ç½®æ–‡ä»¶</p>
<h3 id="Dependency-management-1"><a href="#Dependency-management-1" class="headerlink" title="Dependency management"></a>Dependency management</h3><p>Checkstyle Plugin æ·»åŠ å¦‚ä¸‹é…ç½® configuration</p>
<p><code>checkstyle configuration</code> : Checkstyle ä½¿ç”¨çš„åº“</p>
<h2 id="The-CodeNarc-Plugin"><a href="#The-CodeNarc-Plugin" class="headerlink" title="The CodeNarc Plugin"></a>The CodeNarc Plugin</h2><p>CodeNarc Plugin åœ¨ä½ é¡¹ç›®çš„ Groovy æºä»£ç ä¸Šä½¿ç”¨ CodeNarc æ‰§è¡Œè´¨é‡æ£€æŸ¥, å¹¶ç”Ÿæˆæ£€æŸ¥æŠ¥å‘Š</p>
<p>Example - Using the CodeNarc plugin</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;codenarc&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ’ä»¶æ·»åŠ äº†ä¸€äº› task åˆ°é¡¹ç›®ç”¨, æ¥åœ¨ä½¿ç”¨ Groovy Plugin æ—¶æ‰§è¡Œè´¨é‡æ£€æŸ¥. ä½ å¯ä»¥é€šè¿‡è¿è¡Œ <code>gradle check</code> æ¥æ‰§è¡Œæ£€æŸ¥</p>
<h3 id="Tasks-3"><a href="#Tasks-3" class="headerlink" title="Tasks"></a>Tasks</h3><p>CodeNarc Plugin æ·»åŠ å¦‚ä¸‹ task åˆ°é¡¹ç›®ä¸­</p>
<h4 id="codenarcMain"><a href="#codenarcMain" class="headerlink" title="codenarcMain"></a><code>codenarcMain</code></h4><p><code>CodeNarc</code> ç±»å‹</p>
<p>åœ¨ç”Ÿäº§çš„ Groovy æºä»£ç æ–‡ä»¶ä¸Šè¿è¡Œ CodeNarc</p>
<h4 id="codenarcTest"><a href="#codenarcTest" class="headerlink" title="codenarcTest"></a><code>codenarcTest</code></h4><p><code>CodeNarc</code> ç±»å‹</p>
<p>åœ¨ Groovy æµ‹è¯•æºä»£ç æ–‡ä»¶ä¸Šè¿è¡Œ CodeNarc</p>
<h4 id="codenarcSourceSet"><a href="#codenarcSourceSet" class="headerlink" title="codenarcSourceSet"></a><code>codenarcSourceSet</code></h4><p><code>CodeNarc</code> ç±»å‹</p>
<p>åœ¨ç»™å®šçš„ source set çš„ Groovy æºä»£ç æ–‡ä»¶ä¸Šè¿è¡Œ CodeNarc</p>
<h3 id="Dependencies-added-to-other-tasks-1"><a href="#Dependencies-added-to-other-tasks-1" class="headerlink" title="Dependencies added to other tasks"></a>Dependencies added to other tasks</h3><p>CodeNarc Plugin æ·»åŠ å¦‚ä¸‹ä¾èµ–åˆ° Groovy Plugin å®šä¹‰çš„ task ä¸­</p>
<p><code>check</code> : ä¾èµ–äºæ‰€æœ‰çš„ CodeNarc task, åŒ…æ‹¬ <code>codenarcMain</code> å’Œ <code>codenarcTest</code></p>
<h3 id="Project-layout-1"><a href="#Project-layout-1" class="headerlink" title="Project layout"></a>Project layout</h3><p>CodeNarc Plugin å¸Œæœ›å¦‚ä¸‹çš„é¡¹ç›®å¸ƒå±€:</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;root&gt;</span><br><span class="line">    config</span><br><span class="line">        codenarc            // 1</span><br><span class="line">            codenarc.xml    // 2</span><br></pre></td></tr></table></figure>

<p><code>1</code> : CodeNarc é…ç½®æ–‡ä»¶æ”¾åœ¨è¿™é‡Œ</p>
<p><code>2</code> : CodeNarc çš„ä¸»è¦é…ç½®æ–‡ä»¶</p>
<h3 id="Dependency-management-2"><a href="#Dependency-management-2" class="headerlink" title="Dependency management"></a>Dependency management</h3><p>CodeNarc Plugin æ·»åŠ å¦‚ä¸‹ä¾èµ–é…ç½®</p>
<p><code>codenarc configuration</code> : é…ç½® CodeNarc ä½¿ç”¨çš„ä¾èµ–</p>
<h2 id="The-Distribution-Plugin"><a href="#The-Distribution-Plugin" class="headerlink" title="The Distribution Plugin"></a>The Distribution Plugin</h2><p>Distribution Plugin å¸®åŠ©åˆ›å»º archives, è¿™ä¸ª archives ä½œä¸ºé¡¹ç›®çš„å‘è¡Œç‰ˆ(distribution)</p>
<p>Distribution archives é€šå¸¸åŒ…å«å¯æ‰§è¡Œåº”ç”¨ç¨‹åºå’Œå…¶ä»–è¾…åŠ©æ–‡ä»¶, ä¾‹å¦‚æ–‡æ¡£</p>
<p>Example - Using the Distribution Plugin:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;distribution&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ <code>gradle distZip</code> æ¥å°†ä¸»è¦çš„ distribution æ‰“åŒ…æˆä¸€ä¸ª ZIP æ–‡ä»¶</p>
<p>ä½¿ç”¨ <code>gradle distTar</code> æ¥å°†ä¸»è¦çš„ distribution æ‰“åŒ…æˆä¸€ä¸ª TAR æ–‡ä»¶</p>
<p>ä½¿ç”¨ <code>gradle assembleDist</code> æ¥å°†ä¸»è¦çš„ distribution æ‰“åŒ…æˆä¸€ä¸ª ZIP æ–‡ä»¶ å’Œ TAR æ–‡ä»¶</p>
<p>æ–‡ä»¶å°†ä¼šè¢«åˆ›å»ºåˆ° <code>$buildDir/distributions/$&#123;project.name&#125;-$&#123;project.version&#125;.&lt;&lt;ext&gt;&gt;</code></p>
<h3 id="Tasks-4"><a href="#Tasks-4" class="headerlink" title="Tasks"></a>Tasks</h3><p>Distribution Plugin æ·»åŠ äº†å¦‚ä¸‹ tasks åˆ°é¡¹ç›®ä¸­</p>
<h4 id="distZip"><a href="#distZip" class="headerlink" title="distZip"></a><code>distZip</code></h4><p><code>Zip</code> ç±»å‹</p>
<p>åˆ›å»º distribution å†…å®¹çš„ ZIP</p>
<h4 id="distTar"><a href="#distTar" class="headerlink" title="distTar"></a><code>distTar</code></h4><p><code>Task</code> ç±»å‹</p>
<p>åˆ›å»º distribution å†…å®¹çš„ TAR</p>
<h4 id="assembleDist"><a href="#assembleDist" class="headerlink" title="assembleDist"></a><code>assembleDist</code></h4><p><code>Task</code> ç±»å‹</p>
<p>ä¾èµ–äº <code>distTar</code>, <code>distZIP</code></p>
<p>åˆ›å»º distribution å†…å®¹çš„ ZIP å’Œ TAR</p>
<h3 id="Distribution-contents"><a href="#Distribution-contents" class="headerlink" title="Distribution contents"></a>Distribution contents</h3><p>æ‰€æœ‰åœ¨ <code>src/$distribution.name/dist</code> ç›®å½•ä¸­çš„æ–‡ä»¶éƒ½ä¼šè‡ªåŠ¨è¢«åŒ…å«åˆ° distribution</p>
<p>å¯ä»¥é€šè¿‡é…ç½® <code>Distribution object</code> æ¥æ·»åŠ é¢å¤–çš„æ–‡ä»¶ä½œä¸º distribution çš„ä¸€éƒ¨åˆ†</p>
<p>Example - Configuring the main distribution:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">distributions &#123;</span><br><span class="line">    main &#123;</span><br><span class="line">        distributionBaseName = <span class="string">&#x27;someName&#x27;</span></span><br><span class="line">        contents &#123;</span><br><span class="line">            <span class="keyword">from</span> <span class="string">&#x27;src/readme&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>src/readme</code> ç›®å½•å°†ä¼šè¢«åŒ…å«åˆ° distribution ä¸­, åŒæ—¶é»˜è®¤è¿˜ä¼šåŒ…å« <code>src/main/dist</code> ç›®å½•</p>
<p><code>bashName</code> å±æ€§è¢«ä¿®æ”¹äº†, æ‰€æœ‰ç”Ÿæˆçš„ distribution archives çš„åå­—ä¼šæœ‰ä¸€ä¸ªä¸åŒçš„åå­—</p>
<h3 id="Publishing"><a href="#Publishing" class="headerlink" title="Publishing"></a>Publishing</h3><p>ä¸€ä¸ª distribution å¯ä»¥é€šè¿‡ Ivy Publish Plugin æˆ– Maven Publish Plugin æ¥è¿›è¡Œå‘å¸ƒ</p>
<p>Example - Adding distribution archives to an Ivy publication:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;ivy-publish&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">publishing &#123;</span><br><span class="line">    publications &#123;</span><br><span class="line">        myDistribution(IvyPublication) &#123;</span><br><span class="line">            artifact distZip</span><br><span class="line">            artifact customDistTar</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Example - Adding distribution archives to a Maven publication:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;maven-publish&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">publishing &#123;</span><br><span class="line">    publications &#123;</span><br><span class="line">        myDistribution(MavenPublication) &#123;</span><br><span class="line">            artifact distZip</span><br><span class="line">            artifact customDistTar</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="The-Groovy-Plugin"><a href="#The-Groovy-Plugin" class="headerlink" title="The Groovy Plugin"></a>The Groovy Plugin</h2><p>Groovy Plugin æ‰©å±•äº† Java Plugin æ¥ä¸º Groovy é¡¹ç›®æ·»åŠ æ”¯æŒ</p>
<p>Groovy Plugin å¯ä»¥å¤„ç† Groovy ä»£ç , Groovy å’Œ Java æ··åˆçš„ä»£ç , å’Œå• Java ä»£ç </p>
<p>Groovy Plugin æ”¯æŒè”åˆç¼–è¯‘(joint compilation), å…è®¸ä½ è‡ªç”±åœ°æ··åˆå’ŒåŒ¹é… Groovy Java ä»£ç , é€šè¿‡åœ¨åŒä¸€ä¸ªæ–¹å‘ä¸Šçš„ä¾èµ–</p>
<p>å¦‚æœä½ æƒ³è¦ä» <code>java-library</code> æ’ä»¶çš„ <code>API/implementation separation</code> ä¸­è·ç›Š, é‚£ä¹ˆä½ è¿˜éœ€è¦åœ¨ä½  Groovy é¡¹ç›®ä¸­ä½¿ç”¨ <code>java-library</code></p>
<p>Example - Using the Groovy Plugin:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">plugis &#123;</span><br><span class="line">    id <span class="string">&#x27;groovy&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Tasks-5"><a href="#Tasks-5" class="headerlink" title="Tasks"></a>Tasks</h3><p>Groovy Plugin æ·»åŠ äº†å¦‚ä¸‹ task åˆ°é¡¹ç›®ä¸­</p>
<h4 id="compileGroovy"><a href="#compileGroovy" class="headerlink" title="compileGroovy"></a><code>compileGroovy</code></h4><p><code>GroovyCompile</code> ç±»å‹</p>
<p>ä¾èµ–äº <code>compileJava</code></p>
<p>ç¼–è¯‘ Groovy çš„äº§å“æºä»£ç æ–‡ä»¶</p>
<h4 id="compileTestGroovy"><a href="#compileTestGroovy" class="headerlink" title="compileTestGroovy"></a><code>compileTestGroovy</code></h4><p><code>GroovyCompile</code> ç±»å‹</p>
<p>ä¾èµ–äº <code>compileTestJava</code></p>
<p>ç¼–è¯‘ Groovy çš„æµ‹è¯•æ–‡ä»¶</p>
<h4 id="compile-SourceSet-Groovy"><a href="#compile-SourceSet-Groovy" class="headerlink" title="compile{SourceSet}Groovy"></a><code>compile&#123;SourceSet&#125;Groovy</code></h4><p><code>GroovyCompile</code> ç±»å‹</p>
<p>ä¾èµ–äº <code>compile&#123;SourceSet&#125;Java</code></p>
<p>ç¼–è¯‘ç»™å®šçš„ source set çš„ Groovy æºä»£ç æ–‡ä»¶</p>
<h4 id="groovydoc"><a href="#groovydoc" class="headerlink" title="groovydoc"></a><code>groovydoc</code></h4><p><code>Groovydoc</code> ç±»å‹</p>
<p>ä¸º Groovy ç”Ÿäº§æºä»£ç æ–‡ä»¶ç”Ÿæˆ API æ–‡æ¡£</p>
<h3 id="Dependency-management-3"><a href="#Dependency-management-3" class="headerlink" title="Dependency management"></a>Dependency management</h3><p>Groovy Plugin æ·»åŠ å¦‚ä¸‹ task ä¾èµ–åˆ° Java Plugin çš„ task ä¸Š</p>
<p>Table - Groovy Plugin - additional task dependencies:</p>
<table>
<thead>
<tr>
<th align="left">Task name</th>
<th align="left">Depends on</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>classes</code></td>
<td align="left"><code>compileGroovy</code></td>
</tr>
<tr>
<td align="left"><code>testClasses</code></td>
<td align="left"><code>compileTestGroovy</code></td>
</tr>
<tr>
<td align="left"><code>&#123;sourceSet&#125;Classes</code></td>
<td align="left"><code>compile&#123;SourceSet&#125;Groovy</code></td>
</tr>
</tbody></table>
<h3 id="Project-layout-2"><a href="#Project-layout-2" class="headerlink" title="Project layout"></a>Project layout</h3><p>æ‰€æœ‰çš„ Groovy æºç›®å½•éƒ½å¯ä»¥åŒ…å« Groovy å’Œ Java ä»£ç </p>
<p>Java æºç›®å½•åªèƒ½åŒ…å« Java æºä»£ç </p>
<h4 id="src-main-java"><a href="#src-main-java" class="headerlink" title="src/main/java"></a><code>src/main/java</code></h4><p>Java äº§å“ä»£ç </p>
<h4 id="src-main-resources"><a href="#src-main-resources" class="headerlink" title="src/main/resources"></a><code>src/main/resources</code></h4><p>äº§å“èµ„æº, ä¾‹å¦‚ XML å’Œ properties æ–‡ä»¶</p>
<h4 id="src-main-groovy"><a href="#src-main-groovy" class="headerlink" title="src/main/groovy"></a><code>src/main/groovy</code></h4><p>Groovy äº§å“ä»£ç . å¯ä»¥åŒ…å« Java æºç æ–‡ä»¶æ¥è¿›è¡Œè”åˆç¼–è¯‘</p>
<h4 id="src-test-java"><a href="#src-test-java" class="headerlink" title="src/test/java"></a><code>src/test/java</code></h4><p>Java æµ‹è¯•ä»£ç </p>
<h4 id="src-test-resources"><a href="#src-test-resources" class="headerlink" title="src/test/resources"></a><code>src/test/resources</code></h4><p>æµ‹è¯•èµ„æº</p>
<h4 id="src-test-groovy"><a href="#src-test-groovy" class="headerlink" title="src/test/groovy"></a><code>src/test/groovy</code></h4><p>Groovy æµ‹è¯•ä»£ç . å¯ä»¥åŒ…å« Java æºç æ–‡ä»¶æ¥è¿›è¡Œè”åˆç¼–è¯‘</p>
<h4 id="src-sourceSet-java"><a href="#src-sourceSet-java" class="headerlink" title="src/{sourceSet}/java"></a><code>src/&#123;sourceSet&#125;/java</code></h4><p>å‘½åä¸º {sourceSet} çš„ source set ä¸­çš„ Java æºç </p>
<h4 id="src-sourceSet-resources"><a href="#src-sourceSet-resources" class="headerlink" title="src/{sourceSet}/resources"></a><code>src/&#123;sourceSet&#125;/resources</code></h4><p>å‘½åä¸º {sourceSet} çš„ source set ä¸­çš„èµ„æº</p>
<h4 id="src-sourceSet-groovy"><a href="#src-sourceSet-groovy" class="headerlink" title="src/{sourceSet}/groovy"></a><code>src/&#123;sourceSet&#125;/groovy</code></h4><p>ç»™å®šçš„ {sourceSet} ä¸­çš„ Groovy æºç æ–‡ä»¶, å¯ä»¥åŒ…å« Java æºç æ–‡ä»¶æ¥è¿›è¡Œè”åˆç¼–è¯‘</p>
<h3 id="Changing-the-project-layout"><a href="#Changing-the-project-layout" class="headerlink" title="Changing the project layout"></a>Changing the project layout</h3><p>Groovy Plugin å…è®¸ä½ ä¸º Groovy äº§å“å’Œæµ‹è¯•æºä»£ç æ–‡ä»¶é…ç½®è‡ªå®šä¹‰çš„ä½ç½®</p>
<p>Example - Custom Groovy source layout:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">sourceSets</span> &#123;</span><br><span class="line">    main &#123;</span><br><span class="line">        groovy &#123;</span><br><span class="line">            srcDirs = [<span class="string">&#x27;src/groovy&#x27;</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    test &#123;</span><br><span class="line">        groovy &#123;</span><br><span class="line">            srcDirs = [<span class="string">&#x27;test/groovy&#x27;</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Dependency-management-4"><a href="#Dependency-management-4" class="headerlink" title="Dependency management"></a>Dependency management</h3><p>Gradle çš„å®‰è£…åŒ…ä¸­å·²ç»åŒ…å«ä¸€ä¸ª Groovy åº“</p>
<p>ç„¶è€Œ, Groovy é¡¹ç›®éœ€è¦æ˜¾å¼å£°æ˜ä¸€ä¸ª Groovy ä¾èµ–. è¿™ä¸ªä¾èµ–å°†ä¼šç”¨åœ¨ç¼–è¯‘æ—¶å’Œè¿è¡Œæ—¶ classpath ä¸Š. å®ƒè¿˜å°†åˆ†åˆ«ç”¨äºè·å¾— Groovy ç¼–è¯‘å™¨å’Œ Groovydoc å·¥å…·</p>
<p>å¦‚æœå°† Groovy ç”¨äºäº§å“ä»£ç , é‚£ä¹ˆ Groovy ä¾èµ–åº”è¯¥æ·»åŠ åˆ° <code>implementation configuration</code>:</p>
<p>Example - Configuration of Groovy dependency:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    mavenCentral()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    implementation <span class="string">&#x27;org.codehaus.groovy:groovy-all:2.4.15&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœ Groovy ä»…ä»…ç”¨åœ¨æµ‹è¯•ä»£ç , é‚£ä¹ˆ Groovy ä¾èµ–åº”è¯¥æ·»åŠ åˆ° <code>testImplementation configuration</code>:</p>
<p>Example - Configuration of Groovy test dependnecy:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    testImplementation <span class="string">&#x27;org.codehaus.groovy:groovy-all:2.4.15&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Groovy åº“ä¸å¿…æ˜¯ä»ä¸€ä¸ªè¿œç¨‹ä»“åº“ä¸­è·å–, ä¹Ÿå¯ä»¥ä»ä¸€ä¸ªæœ¬åœ° <code>lib</code> ç›®å½•ä¸­è·å–, æˆ–è€…å¯èƒ½ checked in åˆ°ä¸€ä¸ªæºç æ§åˆ¶ç³»ç»Ÿ</p>
<p>Example - Configuration of Groovy file dependnecy:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    <span class="keyword">flatDir</span> &#123; dirs <span class="string">&#x27;lib&#x27;</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    implementation module(<span class="string">&#x27;org.codehaus.groovy:groovy:2.4.15&#x27;</span>) &#123;</span><br><span class="line">        dependency(<span class="string">&#x27;org.ow2.asm:asm-all:5.0.3&#x27;</span>)</span><br><span class="line">        dependency(<span class="string">&#x27;antlr:antlr:2.7.7&#x27;</span>)</span><br><span class="line">        dependency(<span class="string">&#x27;commons-cli:commons-cli:1.2&#x27;</span>)</span><br><span class="line">        module(<span class="string">&#x27;org.apache.ant:ant:1.9.4&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">dependencies</span>(<span class="string">&#x27;org.apache.ant:ant-junit:1.9.4@jar&#x27;</span>,</span><br><span class="line">                         <span class="string">&#x27;org.apache.ant:ant-launcher:1.9.4&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Automatic-configuration-of-groovyClasspath"><a href="#Automatic-configuration-of-groovyClasspath" class="headerlink" title="Automatic configuration of groovyClasspath"></a>Automatic configuration of groovyClasspath</h3><p><code>GroovyCompile</code> å’Œ <code>Groovydoc</code> task ä»¥ä¸¤ç§æ–¹å¼ä½¿ç”¨ Groovy ä»£ç : åœ¨ classpath ä¸Šå’Œ åœ¨å®ƒä»¬çš„ groovyClasspath ä¸Š</p>
<p>å‰è€…ç”¨äºå®šä½æºä»£ç å¼•ç”¨çš„ç±», é€šå¸¸åŒ…å« Groovy åº“å’Œå…¶ä»–åº“</p>
<p>åè€…ç”¨äºåŠ è½½å’Œæ‰§è¡Œ Groovy ç¼–è¯‘å™¨å’Œ Groovydoc å·¥å…·, æ‰€ä»¥åº”è¯¥åªåŒ…å« Groovy åº“å’Œå®ƒä¾èµ–</p>
<p>é™¤éä¸€ä¸ª task çš„ <code>groovyClasspath</code> è¢«æ˜¾å¼é…ç½®, å¦åˆ™ Groovy(base) Plugin å°†ä¼šå°è¯•ä» task çš„ <code>classpath</code> æ¥è¿›è¡Œæ¨æ–­:</p>
<ul>
<li>å¦‚æœåœ¨ classpath ä¸Šæ‰¾åˆ°ä¸€ä¸ª <code>groovy-all(-indy)</code> Jar, è¿™ä¸ª Jar å°†ä¼šè¢«æ·»åŠ åˆ° <code>groovyClasspath</code></li>
<li>å¦‚æœåœ¨ classpath ä¸Šæ‰¾åˆ°ä¸€ä¸ª <code>groovy(-indy)</code> Jar, ä¸”é¡¹ç›®å£°æ˜äº†è‡³å°‘ä¸€ä¸ªä»“åº“, é‚£ä¹ˆä¸€ä¸ªç›¸åº”çš„ <code>groovy(-indy)</code> ä»“åº“ä¾èµ–å°†ä¼šè¢«æ·»åŠ åˆ° <code>groovyClasspath</code></li>
<li>å¦åˆ™, task çš„æ‰§è¡Œå°†ä¼šå¤±è´¥, å¹¶åœ¨ä¸€ä¸ªæ¶ˆæ¯ä¸­è¡¨æ˜ <code>groovyClasspath</code> ä¸èƒ½æ¨æ–­å‡ºæ¥</li>
</ul>
<p>æ¯ä¸ª jar çš„ <code>-indy</code> å˜ä½“æŒ‡çš„æ˜¯å…·æœ‰è°ƒç”¨åŠ¨æ€æ”¯æŒçš„ç‰ˆæœ¬</p>
<h3 id="Convention-properties"><a href="#Convention-properties" class="headerlink" title="Convention properties"></a>Convention properties</h3><p>Groovy Plugin æ²¡æœ‰æ·»åŠ ä»»ä½•çº¦å®šå±æ€§åˆ°é¡¹ç›®ä¸­</p>
<h3 id="Source-set-properties"><a href="#Source-set-properties" class="headerlink" title="Source set properties"></a>Source set properties</h3><p>Groovy Plugin æ·»åŠ å¦‚ä¸‹ extension åˆ°é¡¹ç›®ä¸­çš„æ¯ä¸ª source set ä¸­</p>
<p>ä½ å¯ä»¥åœ¨æ„å»ºè„šæœ¬ä¸­ä½¿ç”¨è¿™äº›å±æ€§å¥½åƒå®ƒä»¬æ˜¯ source set å¯¹è±¡çš„å±æ€§ä¸€æ ·</p>
<h4 id="source-set-properties-groovy"><a href="#source-set-properties-groovy" class="headerlink" title="source set properties groovy"></a>source set properties <code>groovy</code></h4><p><code>GroovySourceDirectorySet</code> (read-only)</p>
<p>Default value: Not null</p>
<p>è¿™ä¸ª source set çš„ Groovy æºæ–‡ä»¶</p>
<p>åŒ…å«æ‰€æœ‰åœ¨ Groovy æºç›®å½•ä¸­æ‰¾åˆ°çš„ <code>.groovy</code> å’Œ <code>.java</code> æ–‡ä»¶</p>
<p>ä¸åŒ…å«æ‰€æœ‰å…¶ä»–çš„ç±»å‹çš„æ–‡ä»¶</p>
<h4 id="source-set-properties-groovy-srcDirs"><a href="#source-set-properties-groovy-srcDirs" class="headerlink" title="source set properties groovy.srcDirs"></a>source set properties <code>groovy.srcDirs</code></h4><p><code>Set&lt;File&gt;</code></p>
<p>Default value: [<code>&#123;projectDir&#125;/src/&#123;name&#125;/groovy</code>]</p>
<blockquote>
<p>The source directories containing the Groovy source files of this source set</p>
</blockquote>
<p>åŒ…å«è¯¥ source set çš„ Groovy æºæ–‡ä»¶çš„æºç›®å½•</p>
<blockquote>
<p>May also contain Java source files for joint compilation</p>
</blockquote>
<p>è¿˜å¯èƒ½åŒ…å« Java æºæ–‡ä»¶æ¥è¿›è¡Œè”åˆç¼–è¯‘</p>
<h4 id="source-set-properties-allGroovy"><a href="#source-set-properties-allGroovy" class="headerlink" title="source set properties allGroovy"></a>source set properties <code>allGroovy</code></h4><p><code>FileTree</code> (read-only)</p>
<p>Default value: Not null</p>
<blockquote>
<p>All Groovy source files of this source set. Contains only the <code>.groovy</code> files found in the Groovy source directories</p>
</blockquote>
<p>è¿™ä¸ª source set çš„æ‰€æœ‰ Groovy æºæ–‡ä»¶. åªåŒ…æ‹¬ Groovy æºç›®å½•ä¸­çš„ <code>.groovy</code> æ–‡ä»¶</p>
<p>è¿™äº›å±æ€§é€šè¿‡ä¸€ä¸ªçº¦å®šçš„ç±»å‹ä¸º <code>GroovySourceSet</code> å¯¹è±¡æä¾›</p>
<h4 id="modified-source-set-properties"><a href="#modified-source-set-properties" class="headerlink" title="modified source set properties"></a>modified source set properties</h4><p>Groovy Plugin è¿˜ä¼šä¿®æ”¹ä¸€äº› source set å±æ€§</p>
<table>
<thead>
<tr>
<th align="left">Property name</th>
<th align="left">Change</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>allJava</code></td>
<td align="left">æ·»åŠ æ‰€æœ‰åœ¨ Groovy æºç›®å½•ä¸­æ‰¾åˆ°çš„ <code>.java</code> æ–‡ä»¶</td>
</tr>
<tr>
<td align="left"><code>allSource</code></td>
<td align="left">æ·»åŠ æ‰€æœ‰åœ¨ Groovy æºç›®å½•ä¸­æ‰¾åˆ°çš„æºæ–‡ä»¶</td>
</tr>
</tbody></table>
<h3 id="GroovyCompile"><a href="#GroovyCompile" class="headerlink" title="GroovyCompile"></a>GroovyCompile</h3><p>Groovy Plugin ä¸ºé¡¹ç›®ä¸­çš„æ¯ä¸€ä¸ª source set æ·»åŠ äº†ä¸€ä¸ª <code>GroovyCompile task</code></p>
<p><code>GroovyCompile task</code> ç»§æ‰¿äº† <code>AbstractCompile</code>, å’Œ <code>JavaCompile task</code> ç±»ä¼¼</p>
<p><code>GroovyCompile task</code> æ”¯æŒå¤§å¤šæ•°å®˜æ–¹ Groovy ç¼–è¯‘å™¨ä¸­çš„é€‰é¡¹</p>
<p>Table - Groovy Plugin - GroovyCompile properties:</p>
<table>
<thead>
<tr>
<th align="left">Task Property</th>
<th align="left">Type</th>
<th align="left">Default Value</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>classpath</code></td>
<td align="left"><code>FileCollection</code></td>
<td align="left">sourceSet.compileClasspath</td>
</tr>
<tr>
<td align="left"><code>source</code></td>
<td align="left"><code>FileTree</code></td>
<td align="left">sourceSet.groovy</td>
</tr>
<tr>
<td align="left"><code>destinationDirectory</code></td>
<td align="left"><code>File</code></td>
<td align="left">sourceSet.groovy.destinationDirectory</td>
</tr>
<tr>
<td align="left"><code>groovyClasspath</code></td>
<td align="left"><code>FileCollection</code></td>
<td align="left"><code>groovy</code> configuration if non-empty; Groovy library found on <code>classpath</code> otherwise</td>
</tr>
<tr>
<td align="left"><code>javaLauncher</code></td>
<td align="left"><code>Property&lt;JavaLauncher&gt;</code></td>
<td align="left">None but will be configured if a toolchain is defined on the <code>java</code> extension</td>
</tr>
</tbody></table>
<h3 id="Compiling-and-testing-for-Java-6-or-Java-7"><a href="#Compiling-and-testing-for-Java-6-or-Java-7" class="headerlink" title="Compiling and testing for Java 6 or Java 7"></a>Compiling and testing for Java 6 or Java 7</h3><p>Example - Configure Java 7 build for Groovy:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">java &#123;</span><br><span class="line">    toolchain &#123;</span><br><span class="line">        languageVersion = JavaLanguageVersion.of(<span class="number">7</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="The-IDEA-Plugin"><a href="#The-IDEA-Plugin" class="headerlink" title="The IDEA Plugin"></a>The IDEA Plugin</h2><p>IDEA Plugin ç”Ÿæˆè¢« Intellij IDEA ä½¿ç”¨çš„æ–‡ä»¶, å› æ­¤ä½¿å¾—å¯ä»¥ä» IDEA (File- Open Project) ä¸­æ‰“å¼€é¡¹ç›®. å¤–éƒ¨ä¾èµ–(åŒ…æ‹¬å…³è”çš„æºç å’Œ Javadoc æ–‡ä»¶)å’Œé¡¹ç›®ä¾èµ–éƒ½ä¼šè¢«è€ƒè™‘</p>
<p>IDEA Plugin ä¼šç”Ÿæˆä»€ä¹ˆä¸œè¥¿å–å†³äºä½ ä½¿ç”¨äº†å…¶ä»–ä»€ä¹ˆæ’ä»¶</p>
<p>æ€»æ˜¯ä¼šç”Ÿæˆ: ä¸€ä¸ª IDEA module æ–‡ä»¶. å¦‚æœé¡¹ç›®æ˜¯ root project, ç”Ÿæˆä¸€ä¸ª IDEA project å’Œ workspace æ–‡ä»¶</p>
<p>å¦‚æœä½¿ç”¨äº† Java Plugin: é¢å¤–æ·»åŠ  Java é…ç½®åˆ° IDEA module å’Œ project æ–‡ä»¶</p>
<h3 id="Usage-1"><a href="#Usage-1" class="headerlink" title="Usage"></a>Usage</h3><p>Example - Using the IDEA plugin:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;idea&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Tasks-6"><a href="#Tasks-6" class="headerlink" title="Tasks"></a>Tasks</h3><p><code>idea</code> :</p>
<ul>
<li>ä¾èµ–äº <code>ideaProject</code>, <code>ideaModule</code>, <code>ideaWorkspace</code></li>
<li>ç”Ÿæˆæ‰€æœ‰ IDEA é…ç½®æ–‡ä»¶</li>
</ul>
<p><code>openIdea</code> :</p>
<ul>
<li>ä¾èµ–äº <code>idea</code></li>
<li>ç”Ÿæˆæ‰€æœ‰ IDEA é…ç½®æ–‡ä»¶å¹¶åœ¨ IDEA ä¸­æ‰“å¼€é¡¹ç›®</li>
</ul>
<p><code>cleanIdea</code> :</p>
<ul>
<li><code>Delete</code> ç±»å‹</li>
<li>ä¾èµ–äº <code>cleanIdeaProject</code>, <code>cleanIdeaModule</code></li>
<li>åˆ é™¤æ‰€æœ‰çš„ IDEA é…ç½®æ–‡ä»¶</li>
</ul>
<p><code>cleanIdeaProject</code> :</p>
<ul>
<li><code>Delete</code> ç±»å‹</li>
<li>åˆ é™¤æ‰€æœ‰ IDEA project æ–‡ä»¶</li>
</ul>
<p><code>cleanIdeaModule</code> :</p>
<ul>
<li><code>Delete</code> ç±»å‹</li>
<li>åˆ é™¤æ‰€æœ‰ IDEA module æ–‡ä»¶</li>
</ul>
<p><code>cleanIdeaWorkspace</code> :</p>
<ul>
<li><code>Delete</code> ç±»å‹</li>
<li>åˆ é™¤æ‰€æœ‰ IEDA workspace æ–‡ä»¶</li>
</ul>
<p><code>ideaProject</code> :</p>
<ul>
<li><code>GenerateIdeaProject</code></li>
<li>ç”Ÿæˆ <code>.ipr</code> æ–‡ä»¶. è¿™ä¸ª <code>task</code> ä»…ç”¨äº root project</li>
</ul>
<p><code>ideaModule</code> :</p>
<ul>
<li><code>GenerateIdeaProject</code> ç±»å‹</li>
<li>ç”Ÿæˆ <code>.iml</code> æ–‡ä»¶</li>
</ul>
<p><code>ideaWorkspace</code> :</p>
<ul>
<li><code>GenerateIdeaWorkspace</code> ç±»å‹</li>
<li>ç”Ÿæˆ <code>.iws</code> æ–‡ä»¶. è¿™ä¸ª <code>task</code> ä»…ç”¨äº root project</li>
</ul>
<h2 id="The-JaCoco-Plugin"><a href="#The-JaCoco-Plugin" class="headerlink" title="The JaCoco Plugin"></a>The JaCoco Plugin</h2><p>JaCoCo Plugin ä¸º Java ä»£ç æä¾›ä»£ç è¦†ç›–ç‡, é€šè¿‡é›†æˆ JaCoCo</p>
<p>Example - Applying the JaCoCo Plugin:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;jacoco&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœ Java Plugin å·²ç»åº”ç”¨åˆ°ä½ çš„é¡¹ç›®ä¸­, ä¸€ä¸ªæ–°çš„ <code>jacocoTestReport task</code> ä¼šè¢«åˆ›å»º</p>
<p>é»˜è®¤æƒ…å†µä¸‹, ä¸€ä¸ª HTML æŠ¥å‘Šä¼šåœ¨ <code>$buildDir/reports/jacoco/test</code> ç›®å½•ä¸­åˆ›å»º</p>
<p>ç”±äºæµ‹è¯•éœ€è¦åœ¨ç”ŸæˆæŠ¥å‘Šä¹‹å‰æ‰§è¡Œ, æ‰€ä»¥ <code>jacocoTestReport task</code> æ²¡æœ‰ä¾èµ– <code>test task</code></p>
<p>Example - Define dependencies between code coverage reports and test execution:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">test &#123;</span><br><span class="line">    <span class="comment">// report is always generated after tests run</span></span><br><span class="line">    finalizedBy jacocoTestReport</span><br><span class="line">&#125;</span><br><span class="line">jacocoTestReport &#123;</span><br><span class="line">    <span class="comment">// tests are required to run before generating the report</span></span><br><span class="line">    dependsOn test</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Configuring-the-JaCoCo-Plugin"><a href="#Configuring-the-JaCoCo-Plugin" class="headerlink" title="Configuring the JaCoCo Plugin"></a>Configuring the JaCoCo Plugin</h3><p>Example - Configuring JaCoCo plugin settings:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">jacoco &#123;</span><br><span class="line">    toolVersion = <span class="string">&quot;0.8.7&quot;</span></span><br><span class="line">    reportsDirectory = layout.buildDirectory.dir(<span class="string">&#x27;customJacocoReportDir&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Table - Gradle defaults for JaCoCo properties:</p>
<table>
<thead>
<tr>
<th align="left">Property</th>
<th align="left">Gradle default</th>
</tr>
</thead>
<tbody><tr>
<td align="left">reportsDirectory</td>
<td align="left"><code>$buildDir/reports/jacoco</code></td>
</tr>
</tbody></table>
<h3 id="JaCoCo-Report-configuration"><a href="#JaCoCo-Report-configuration" class="headerlink" title="JaCoCo Report configuration"></a>JaCoCo Report configuration</h3><p>Example - Configuring test task:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">jacocoTestReport &#123;</span><br><span class="line">    reports &#123;</span><br><span class="line">        xml.required = <span class="keyword">false</span></span><br><span class="line">        csv.required = <span class="keyword">false</span></span><br><span class="line">        html.outputLocation = layout.buildDirectory.dir(<span class="string">&#x27;jacocoHtml&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Example - Configuring violation rules:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">jacocoTestCoverageVerification &#123;</span><br><span class="line">    violationRules &#123;</span><br><span class="line">        rule &#123;</span><br><span class="line">            limit &#123;</span><br><span class="line">                minimum = <span class="number">0.5</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        rule &#123;</span><br><span class="line">            enabled = <span class="keyword">false</span></span><br><span class="line">            element = <span class="string">&#x27;CLASS&#x27;</span></span><br><span class="line">            <span class="keyword">includes</span> = [<span class="string">&#x27;org.gradle.*&#x27;</span>]</span><br><span class="line"></span><br><span class="line">            limit &#123;</span><br><span class="line">                counter = <span class="string">&#x27;LINE&#x27;</span></span><br><span class="line">                value = <span class="string">&#x27;TOTALCOUNT&#x27;</span></span><br><span class="line">                maximum = <span class="number">0.3</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ›´å¤šä¿¡æ¯è¯·æŸ¥çœ‹æ–‡æ¡£</p>
<h2 id="The-Java-Plugin"><a href="#The-Java-Plugin" class="headerlink" title="The Java Plugin"></a>The Java Plugin</h2><p>Java Plugin å°† Java ç¼–è¯‘, æµ‹è¯•, ç»‘å®šçš„åŠŸèƒ½æ·»åŠ åˆ°é¡¹ç›®ä¸­</p>
<p>Java Plugin ä½œä¸ºå…¶ä»–çš„è®¸å¤š JVM è¯­è¨€ Gradle æ’ä»¶çš„åŸºç¡€</p>
<p>Java Plugin æ·»åŠ åŸºç¡€æ„å»º block æ¥å’Œ JVM é¡¹ç›®ä¸€èµ·å·¥ä½œ. Java Plugin çš„ç‰¹æ€§é›†å·²ç»è¢«å…¶ä»–æ’ä»¶æ‰€è¦†ç›–, å¯ä»¥æ ¹æ®é¡¹ç›®ç±»å‹æä¾›æ›´å¤šçš„ç‰¹æ€§</p>
<p>é™¤äº†ç›´æ¥åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ Java Plugin, ä½ åº”è¯¥çœ‹çœ‹ <code>java-library</code> æˆ–è€… <code>application</code> æ’ä»¶æˆ–è€…ä¸€ç§å—æ”¯æŒçš„æ›¿ä»£çš„ JVM è¯­è¨€</p>
<p>Example - Using the Java Plugin:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;java&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Tasks-7"><a href="#Tasks-7" class="headerlink" title="Tasks"></a>Tasks</h3><p><code>compileJava</code>:</p>
<ul>
<li><code>JavaCompile</code> ç±»å‹</li>
<li><blockquote>
<p>Depends on: All tasks which contribute to the compilation classpath, including <code>jar</code> tasks from projects that are on the classpath via project dependencies</p>
</blockquote>
</li>
<li>ä¾èµ–äºæä¾›ç¼–è¯‘ classpath çš„æ‰€æœ‰ä»»åŠ¡, åŒ…æ‹¬é€šè¿‡é¡¹ç›®ä¾èµ–åœ¨ç±»è·¯å¾„ä¸Šçš„é¡¹ç›®çš„ <code>jar task</code></li>
<li>ä½¿ç”¨ JDK ç¼–è¯‘å™¨ç¼–è¯‘ Java äº§å“æºä»£ç </li>
</ul>
<p><code>processResources</code>:</p>
<ul>
<li><code>Copy</code> ç±»å‹</li>
<li>å°†äº§å“èµ„æº(resources)å¤åˆ¶åˆ°äº§å“èµ„æº(resources)ç›®å½•</li>
</ul>
<p><code>classes</code>:</p>
<ul>
<li>ä¾èµ–äº <code>compileJava</code>, <code>processResources</code></li>
<li>è¿™æ˜¯ä¸€ä¸ªèšåˆ <code>task</code>, ä¾èµ–äºå…¶ä»–çš„ task; å…¶ä»–æ’ä»¶å¯ä»¥é™„åŠ é¢å¤–çš„ç¼–è¯‘ task åˆ°è¿™ä¸ª task ä¸Š</li>
</ul>
<p><code>compileTestJava</code>:</p>
<ul>
<li><code>JavaCompile</code> ç±»å‹</li>
<li>ä¾èµ–äº <code>classes</code>, å’Œæ‰€æœ‰ç”¨äºæµ‹è¯•ç¼–è¯‘ classpath çš„ task</li>
<li>ä½¿ç”¨ JDK ç¼–è¯‘å™¨ç¼–è¯‘ Java æµ‹è¯•ä»£ç </li>
</ul>
<p><code>processTestResources</code>:</p>
<ul>
<li><code>Copy</code> ç±»å‹</li>
<li>å°†æµ‹è¯•èµ„æº(resources)æ‹·è´åˆ°æµ‹è¯•èµ„æº(resources)ç›®å½•</li>
</ul>
<p><code>testClasses</code>:</p>
<ul>
<li>ä¾èµ–äº <code>compileTestJava</code>, <code>processTestResources</code></li>
<li>è¿™æ˜¯ä¸€ä¸ªèšåˆ task, ä»…ä¾èµ–äºå…¶ä»– task; å…¶ä»–æ’ä»¶å¯èƒ½é™„åŠ é¢å¤–çš„æµ‹è¯•ç¼–è¯‘ task åˆ°è¿™ä¸ª task ä¸Š</li>
</ul>
<p><code>jar</code>:</p>
<ul>
<li><code>Jar</code> ç±»å‹</li>
<li>ä¾èµ–äº <code>classes</code></li>
<li><blockquote>
<p>Assemble the production JAR file, based on the classes and resources attached to the <code>main</code> source set</p>
</blockquote>
</li>
</ul>
<p><code>javadoc</code>:</p>
<ul>
<li><code>Javadoc</code> ç±»å‹</li>
<li>ä¾èµ–äº <code>classes</code></li>
<li>ä½¿ç”¨ Javadoc ä¸º Java ç”Ÿäº§ä»£ç åˆ›å»º API æ–‡æ¡£</li>
</ul>
<p><code>test</code>:</p>
<ul>
<li><code>Test</code> ç±»å‹</li>
<li>ä¾èµ–äº <code>testClasses</code>, å’Œæ‰€æœ‰çš„æä¾›æµ‹è¯•è¿è¡Œæ—¶ classpath çš„ task</li>
<li>ä½¿ç”¨ JUnit å’Œ TestNG æ¥è¿è¡Œå•å…ƒæµ‹è¯•</li>
</ul>
<p><code>clean</code>:</p>
<ul>
<li><code>Delete</code> ç±»å‹</li>
<li>åˆ é™¤é¡¹ç›®çš„ build ç›®å½•</li>
</ul>
<p><code>clean&#123;TaskName&#125;</code>:</p>
<ul>
<li><code>Delete</code> ç±»å‹</li>
<li>åˆ é™¤æŒ‡å®š {TaskName} task ç”Ÿæˆçš„æ–‡ä»¶. ä¾‹å¦‚ <code>cleanJar</code>, <code>cleanTest</code></li>
</ul>
<h3 id="SourceSet-Tasks"><a href="#SourceSet-Tasks" class="headerlink" title="SourceSet Tasks"></a>SourceSet Tasks</h3><p>å¯¹äºä½ æ·»åŠ åˆ°é¡¹ç›®çš„æ¯ä¸ª source set, Java Plugin æ·»åŠ å¦‚ä¸‹ task ç»™ä½ :</p>
<p><code>compile&#123;SourceSet&#125;Java</code>:</p>
<ul>
<li><code>JavaCompile</code> ç±»å‹</li>
<li>ä¾èµ–äºæ‰€æœ‰æä¾› source set çš„ç¼–è¯‘ç±»è·¯å¾„çš„ task</li>
<li>ä½¿ç”¨ JDK ç¼–è¯‘å™¨ç¼–è¯‘æŒ‡å®šçš„ source set çš„ Java æºæ–‡ä»¶</li>
</ul>
<p><code>process&#123;SourceSet&#125;Resources</code>:</p>
<ul>
<li><code>Copy</code> ç±»å‹</li>
<li>å¤åˆ¶æŒ‡å®šçš„ source set çš„èµ„æºæ–‡ä»¶(resources) åˆ°èµ„æºæ–‡ä»¶ç›®å½•</li>
</ul>
<p><code>&#123;sourceSet&#125;Classes</code>:</p>
<ul>
<li><code>Task</code> ç±»å‹</li>
<li>ä¾èµ–äº <code>compile&#123;SourceSet&#125;Java</code>, <code>process&#123;SourceSet&#125;Resources</code></li>
<li>ä¸ºæ‰“åŒ…å’Œæ‰§è¡Œå‡†å¤‡å¥½æŒ‡å®šçš„ source set çš„ classes å’Œ resources. ä¸€äº›æ’ä»¶å¯èƒ½ä¼šæ·»åŠ é¢å¤–çš„ç¼–è¯‘ task åˆ° source set ä¸Š</li>
</ul>
<h3 id="Lifecycle-Tasks"><a href="#Lifecycle-Tasks" class="headerlink" title="Lifecycle Tasks"></a>Lifecycle Tasks</h3><p>Java Plugin å°†ä¸€äº› task é™„åŠ åˆ° Base Plugin å®šä¹‰çš„ç”Ÿå‘½å‘¨æœŸ task ä¸­</p>
<p>Java Plugin è‡ªåŠ¨åº”ç”¨äº† Base Plugin</p>
<p>Java Plugin è¿˜æ·»åŠ äº†ä¸€äº›å…¶ä»–çš„ task</p>
<p><code>assemble</code>:</p>
<ul>
<li>ä¾èµ–äº <code>jar</code>, å’Œå…¶ä»–æ‰€æœ‰åˆ›å»º artifacts çš„å…³è”åˆ° <code>archives configuration</code> çš„ task</li>
<li><blockquote>
<p>Aggregate task that assembles all the archives in the project. This task is added by the Base Plugin</p>
</blockquote>
</li>
</ul>
<p><code>check</code>:</p>
<ul>
<li>ä¾èµ–äº <code>test</code></li>
<li><blockquote>
<p>Aggregate task that performs verification tasks, such as running the tests</p>
</blockquote>
</li>
<li><blockquote>
<p>Some plugins add their own verification tasks to <code>check</code></p>
</blockquote>
</li>
<li><blockquote>
<p>You should also attach any custom <code>Test</code> tasks to this lifecycle task if you want them to execute for a full build</p>
</blockquote>
</li>
<li><blockquote>
<p>This task is added by the Base Plugin</p>
</blockquote>
</li>
</ul>
<p><code>build</code>:</p>
<ul>
<li>ä¾èµ–äº <code>check</code>, <code>assemble</code></li>
<li><blockquote>
<p>Aggregate task that performs a full build of the project. This task is added by the Base Plugin</p>
</blockquote>
</li>
</ul>
<p><code>buildNeeded</code>:</p>
<ul>
<li><blockquote>
<p>Depends on: <code>build</code>, and <code>buildNeeded</code> tasks in all projects that are dependencies in the <code>testRuntimeClasspath</code> configuration</p>
</blockquote>
</li>
<li><blockquote>
<p>Performs a full build of the project and all projects it depends on</p>
</blockquote>
</li>
</ul>
<p><code>buildDependents</code>:</p>
<ul>
<li><blockquote>
<p>Depends on: <code>build</code>, and <code>buildDependents</code> tasks in all projects that have this project as a dependency in their <code>testRuntimeClasspath</code> configurations</p>
</blockquote>
</li>
<li><blockquote>
<p>Performs a full build of the project and all projects which depend upon it</p>
</blockquote>
</li>
</ul>
<p><code>build&#123;ConfigName&#125;</code>:</p>
<ul>
<li><blockquote>
<p>Depends on: all tasks that generate the artifacts attached to the named - ConfigName - configuration</p>
</blockquote>
</li>
<li><blockquote>
<p>Assembles the artifacts for the specified configuration. This rule is added by the Base Plugin</p>
</blockquote>
</li>
</ul>
<p><code>upload&#123;ConfigName&#125;</code>:</p>
<ul>
<li><blockquote>
<p>Depends on: all tasks that generate the artifacts attached to the named - ConfigName - configuration</p>
</blockquote>
</li>
<li><blockquote>
<p>Assembles and uploads the artifacts in the specified configuration. This rule is added by the Base Plugin</p>
</blockquote>
</li>
</ul>
<h3 id="Project-layout-3"><a href="#Project-layout-3" class="headerlink" title="Project layout"></a>Project layout</h3><p><code>src/main/java</code> : Java äº§å“ä»£ç </p>
<p><code>src/main/resources</code> : äº§å“èµ„æº, ä¾‹å¦‚ XML å’Œ properties æ–‡ä»¶</p>
<p><code>src/test/java</code> : Java æµ‹è¯•ä»£ç </p>
<p><code>src/test/resources</code> : æµ‹è¯•èµ„æº</p>
<p><code>src/&#123;sourceSet&#125;/java</code> : æŒ‡å®šåå­—çš„ source set çš„ Java äº§å“ä»£ç </p>
<p><code>src/&#123;sourceSet&#125;/resources</code> : æŒ‡å®šåå­—çš„ source set çš„èµ„æº</p>
<h3 id="Changing-the-project-layout-1"><a href="#Changing-the-project-layout-1" class="headerlink" title="Changing the project layout"></a>Changing the project layout</h3><p>Example - Custom Java source layout:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">sourceSets</span> &#123;</span><br><span class="line">    main &#123;</span><br><span class="line">        java &#123;</span><br><span class="line">            srcDirs = [<span class="string">&#x27;src/java&#x27;</span>]</span><br><span class="line">        &#125;</span><br><span class="line">        resources &#123;</span><br><span class="line">            srcDirs = [<span class="string">&#x27;src/resources&#x27;</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Source-sets"><a href="#Source-sets" class="headerlink" title="Source sets"></a>Source sets</h3><p><code>main</code> : åŒ…å«é¡¹ç›®ä¸­çš„è¢«ç¼–è¯‘å’Œç»„åˆåˆ° JAR ä¸­çš„äº§å“æºä»£ç </p>
<p><code>test</code> : åŒ…å«ç”¨æ¥ç¼–è¯‘ä¸æ‰§è¡Œ JUnit æˆ– TestNG çš„æµ‹è¯•æºä»£ç . è¿™äº›æ˜¯å…¸å‹çš„å•å…ƒæµ‹è¯•, ä½†æ˜¯ä½ å¯ä»¥åœ¨è¿™ä¸ª source set ä¸­åŒ…å«ä»»ä½•æµ‹è¯•, åªè¦å®ƒä»¬å…±äº«ç›¸åŒçš„ç¼–è¯‘æ—¶å’Œè¿è¡Œæ—¶ classpaths</p>
<h3 id="Source-set-properties-1"><a href="#Source-set-properties-1" class="headerlink" title="Source set properties"></a>Source set properties</h3><p>å¦‚ä¸‹æ˜¯ source set ä¸­é‡è¦çš„å±æ€§, å¯ä»¥åœ¨ API æ–‡æ¡£ä¸­æŸ¥çœ‹æ›´å¤šç»†èŠ‚ <a class="link"   target="_blank" rel="noopener" href="https://docs.gradle.org/7.3.3/dsl/org.gradle.api.tasks.SourceSet.html" >SourceSet<i class="fas fa-external-link-alt"></i></a></p>
<ul>
<li>name</li>
<li>output</li>
<li>output.classesDirs</li>
<li>output.resourcesDir</li>
<li>compileClasspath</li>
<li>annotationProcessorPath</li>
<li>runtimeClasspath</li>
<li>java</li>
<li>java.srcDirs</li>
<li>java.destinationDirectory</li>
<li>resources</li>
<li>resources.srcDirs</li>
<li>allJava</li>
<li>allSource</li>
</ul>
<h3 id="Dependency-management-5"><a href="#Dependency-management-5" class="headerlink" title="Dependency management"></a>Dependency management</h3><h4 id="Dependency-configurations"><a href="#Dependency-configurations" class="headerlink" title="Dependency configurations"></a>Dependency configurations</h4><ul>
<li>implementation</li>
<li>compileOnly</li>
<li>compileClasspath extends compileOnly, implementation<ul>
<li>Compile classpath, used when compiling source. Used by task <code>compileJava</code></li>
</ul>
</li>
<li>annotationProcessor<ul>
<li>Annotation processors used during compilation</li>
</ul>
</li>
<li>runtimeOnly</li>
<li>runtimeClasspath extends runtimeOnly, implementation<ul>
<li>Runtime classpath contains elements of the implementation, as well as runtime only elements</li>
</ul>
</li>
<li>testCompileOnly</li>
<li>testCompileClasspath extends testCompileOnly, testImplementation</li>
<li>testRuntimeOnly extends runtimeOnly</li>
<li>testRuntimeClasspath extends testRuntimeOnly, testImplementation</li>
<li>archives</li>
<li>default extends runtimeElements</li>
</ul>
<h4 id="SourceSet-dependency-configurations"><a href="#SourceSet-dependency-configurations" class="headerlink" title="SourceSet dependency configurations"></a>SourceSet dependency configurations</h4><p>å¯¹äºæ¯ä¸ªä½ æ·»åŠ åˆ°é¡¹ç›®çš„ source set, Java Plugin æ·»åŠ äº†å¦‚ä¸‹ dependency configurations</p>
<p>SourceSet dependency configurations</p>
<ul>
<li>{sourceSet}Implementation</li>
<li>{sourceSet}CompileOnly</li>
<li>{sourceSet}CompileClasspath extends {sourceSet}CompileOnly,{sourceSet}Implementation</li>
<li>{sourceSet}AnnotationProcessor</li>
<li>{sourceSet}RuntimeOnly</li>
<li>{sourceSet}RuntimeClasspath extends {sourceSet}RuntimeOnly, {sourceSet}Implementation</li>
</ul>
<h3 id="Contributed-extension"><a href="#Contributed-extension" class="headerlink" title="Contributed extension"></a>Contributed extension</h3><p>Java Plugin æ·»åŠ äº† <code>java extension</code> åˆ°é¡¹ç›®ä¸­</p>
<p>è¿™å…è®¸åœ¨ä¸€ä¸ªä¸“é—¨çš„ DSL å—ä¸­é…ç½®å¤§é‡çš„ Java ç›¸å…³å±æ€§</p>
<p>Example - Using the java extension:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">java &#123;</span><br><span class="line">    toolchain &#123;</span><br><span class="line">        languageVersion = JavaLanguageVersion.of(<span class="number">11</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="The-Java-Library-Plugin"><a href="#The-Java-Library-Plugin" class="headerlink" title="The Java Library Plugin"></a>The Java Library Plugin</h2><blockquote>
<p>The Java Library plugin expands the capabilities of Java Plugin by providing specific knowledge about Java libraries</p>
</blockquote>
<p>Java Library Plugin é€šè¿‡æä¾›å…³äº Java åº“çš„ç‰¹å®šçŸ¥è¯†æ¥æ‰©å±• Java Plugin çš„åŠŸèƒ½</p>
<p>ç‰¹åˆ«æ˜¯, ä¸€ä¸ª Java åº“æš´éœ²äº†ä¸€ä¸ª API ç»™æ¶ˆè´¹è€…</p>
<p>Java Library Plugin æš´éœ²çš„æ‰€æœ‰ source sets, tasks å’Œ configurations åœ¨ä½¿ç”¨è¿™ä¸ªæ’ä»¶æ—¶éƒ½æ˜¯æ˜¾å¼å¯ç”¨çš„</p>
<p>Example - Using the Java Library plugin:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;java-library&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="API-and-implementation-separation"><a href="#API-and-implementation-separation" class="headerlink" title="API and implementation separation"></a>API and implementation separation</h3><p>æ ‡å‡† Java Plugin å’Œ Java Library Plugin çš„å…³é”®åŒºåˆ«æ˜¯æš´éœ² API ç»™æ¶ˆè´¹è€…çš„æ¦‚å¿µ</p>
<p>ä¸€ä¸ª Library æ„å‘³ç€æ˜¯ä¸€ä¸ªæš´éœ²ç»™å…¶ä»–ç»„ä»¶ç”¨çš„ Java component</p>
<p>Java Library Plugin æš´éœ²äº†ä¸¤ä¸ª configurations æ¥å£°æ˜ä¾èµ–: <code>api</code> å’Œ <code>implementation</code></p>
<blockquote>
<p>The <code>api</code> configuration should be used to declare dependencies which are exported by the library API</p>
</blockquote>
<p><code>api configuration</code> åº”è¯¥ç”¨æ¥å£°æ˜é€šè¿‡ library API å¯¼å‡º(exported)çš„ä¾èµ–</p>
<blockquote>
<p>The <code>implementation</code> configuration should be used to declare dependencies which are internal to the component</p>
</blockquote>
<p><code>implementation configuration</code> åº”è¯¥ç”¨æ¥å£°æ˜åœ¨ component å†…éƒ¨çš„ä¾èµ–</p>
<p>Example - Declaring API and implementation dependencies:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    api <span class="string">&#x27;org.apache.httpcomponent:httpclient:4.5.7&#x27;</span></span><br><span class="line">    implementation <span class="string">&#x27;org.apache.commons:commons-lang3:3.5&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Dependencies appearing in the api configurations will be transitively exposed to consumers of the library, and as such will appear on the compile classpath of consumers</p>
</blockquote>
<p>å‡ºç°åœ¨ <code>api configuration</code> ä¸­çš„ä¾èµ–å°†è¢«ä¼ é€’ç»™åº“çš„æ¶ˆè´¹è€…, å› æ­¤ä¾èµ–å°†å‡ºç°åœ¨æ¶ˆè´¹è€…çš„ç¼–è¯‘ classpath ä¸Š</p>
<blockquote>
<p>Dependencies found in the <code>implementation configuration</code> will, on the other hand , not be exposed to consumers, and therefore not leak into the consumersâ€™ compile classpath</p>
</blockquote>
<p>å‡ºç°åœ¨ <code>implementation configuration</code> ä¸­çš„ä¾èµ–, ç›¸ååœ°, ä¸ä¼šæš´éœ²ç»™æ¶ˆè´¹è€…, å› æ­¤ä¸ä¼šæ³„éœ²åˆ°ä½¿ç”¨è€…çš„ç¼–è¯‘ classpath ä¸Š</p>
<p>è¿™å¸¦æ¥äº†è¿™äº›å¥½å¤„:</p>
<ul>
<li>ä¾èµ–ä¸å†æ³„éœ²åˆ°æ¶ˆè´¹è€…çš„ç¼–è¯‘ classpath ä¸Š, æ‰€ä»¥ä½ æ°¸è¿œä¸ä¼šå†æ„å¤–åœ°ä¾èµ–åˆ°ä¸€ä¸ªä¼ é€’æ€§ä¾èµ–</li>
<li>ç”±äºå‡å°‘çš„ classpath å¤§å°, æ‰€ä»¥æ›´å¿«çš„ç¼–è¯‘é€Ÿåº¦</li>
<li>åœ¨ <code>implementation</code> ä¾èµ–æ”¹å˜çš„æ—¶å€™æ›´å°‘çš„é‡æ–°ç¼–è¯‘. æ¶ˆè´¹è€…ä¸å†éœ€è¦é‡æ–°ç¼–è¯‘</li>
<li>æ›´å¹²å‡€çš„å‘å¸ƒ: å½“ä¸æ–°çš„ <code>maven-publish</code> æ’ä»¶ä¸€èµ·ä½¿ç”¨æ—¶, Java åº“ä¼šç”Ÿæˆ POM æ–‡ä»¶, ä»è€Œç²¾ç¡®åŒºåˆ†å“ªäº›éœ€è¦ç¼–è¯‘, å“ªäº›éœ€è¦åœ¨è¿è¡Œæ—¶ä½¿ç”¨è¯¥åº“(æ¢å¥è¯è¯´, å°±æ˜¯ä¸è¦æ··åˆä»€ä¹ˆéœ€è¦ç”¨æ¥ç¼–è¯‘åº“æœ¬èº«å’Œä»€ä¹ˆéœ€è¦æ ¹æ®åº“è¿›è¡Œç¼–è¯‘)</li>
</ul>
<p><code>compile</code> å’Œ <code>runtime</code> configurations ä» Gradle 7.0 å¼€å§‹å·²ç»è¢«åˆ é™¤äº†, è¿ç§»åˆ°ä½¿ç”¨ <code>implementation</code> å’Œ <code>api</code> configurations</p>
<p>å½“ä½ çš„æ„å»ºæ¶ˆè´¹äº†ä¸€ä¸ªé€šè¿‡ POM metadata å‘å¸ƒçš„ module, Java Plugin å’Œ Java Library Plugin éƒ½é€šè¿‡ POM ä¸­çš„ä½œç”¨åŸŸæ¥å®Œæˆ <code>api</code> å’Œ <code>implementation</code> çš„åŒºåˆ†</p>
<p>æ„å‘³ç€ç¼–è¯‘æ—¶ classpath åªåŒ…å« Maven <code>compile</code> ä½œç”¨åŸŸçš„ä¾èµ–, è¿è¡Œæ—¶ classpath åŒ…å« Maven <code>runtime</code> ä½œç”¨åŸŸçš„ä¾èµ–</p>
<p>Maven <code>compile</code> : å‚ä¸ç¼–è¯‘çš„è¿‡ç¨‹çš„ç±»åº“, ä¾‹å¦‚, ä¸€äº› API æ¥å£</p>
<p>Maven <code>runtime</code> : ä¸å‚ä¸ç¼–è¯‘è¿‡ç¨‹çš„ç±»åº“, åªåœ¨è¿è¡Œçš„æ—¶å€™æ·»åŠ åˆ° classpath ä¸Š, ä¾‹å¦‚, ä¸€äº› API æ¥å£çš„å®ç°</p>
<h3 id="Recognizing-API-and-implementation-dependencies"><a href="#Recognizing-API-and-implementation-dependencies" class="headerlink" title="Recognizing API and implementation dependencies"></a>Recognizing API and implementation dependencies</h3><p><code>Recognizing</code> : è¯†åˆ«</p>
<blockquote>
<p>Prefer the <code>implementation</code> configuration over <code>api</code> when possible</p>
</blockquote>
<p>å°½å¯èƒ½åœ°ä½¿ç”¨ <code>implementation configuration</code>, è€Œä¸æ˜¯ <code>api configuration</code>. è¿™ä¿æŒäº†ä¾èµ–ä¸åœ¨æ¶ˆè´¹è€…çš„ç¼–è¯‘ classpath ä¸Š. é™¤æ­¤ä¹‹å¤–, å¦‚æœä»»ä½•å®ç°ç±»å‹æ„å¤–æ³„éœ²åˆ° public API ä¸­, æ¶ˆè´¹è€…å°†ç«‹å³ç¼–è¯‘å¤±è´¥</p>
<p>æ‰€ä»¥ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ <code>api configuration</code>? ä¸€ä¸ª API ä¾èµ–è‡³å°‘åŒ…å«åœ¨åº“äºŒè¿›åˆ¶æ¥å£ä¸­å…¬å¼€çš„ä¸€ç§ç±»å‹, é€šå¸¸ç§°ä¸º ABI(Application Binary Interface). åŒ…æ‹¬ä½†ä¸é™äº:</p>
<ul>
<li>åœ¨çˆ¶ç±»æˆ–æ¥å£ä¸­ä½¿ç”¨çš„ç±»å‹</li>
<li>åœ¨ public çš„æ–¹æ³•çš„å‚æ•°ä¸­ä½¿ç”¨çš„ç±»å‹, åŒ…æ‹¬æ³›å‹å‚æ•°ç±»å‹</li>
<li>public å­—æ®µä¸­ä½¿ç”¨çš„ç±»å‹</li>
<li>public æ³¨è§£ç±»å‹</li>
</ul>
<p>ç›¸ååœ°, ä»¥ä¸‹ç±»å‹å’Œ ABI æ˜¯ç›¸åçš„, å› æ­¤åº”è¯¥å£°æ˜ä¸º <code>implementation</code> ä¾èµ–:</p>
<ul>
<li>åœ¨æ–¹æ³•ä¸»ä½“ä¸­ä¸“ç”¨çš„ç±»å‹</li>
<li>åœ¨ private æˆå‘˜ä¸­ä¸“ç”¨çš„ç±»å‹</li>
<li>åœ¨å†…éƒ¨ç±»ä¸­ä¸“ç”¨çš„ç±»å‹</li>
</ul>
<p>Example - Makingthe difference between API and implementation:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The following types can appear anywhere in the code</span></span><br><span class="line"><span class="comment">// but say nothing about API or implementation usage</span></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.exception.ExceptionUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.HttpEntity;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.HttpResponse;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.HttpStatus;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.HttpClient;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpGet;</span><br><span class="line"><span class="keyword">import</span> java.io.ByteArrayOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HttpClientWraper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> HttpClient client;<span class="comment">// private member: implementation details</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// HttpClient is used as a parameter of a public method</span></span><br><span class="line">    <span class="comment">// so &quot;leaks&quot; into the public API of this component</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">HttpClientWrapper</span><span class="params">(HttpClient client)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.client = client;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// public methods belongs to your API</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">byte</span>[] doRawGet(String url) &#123;</span><br><span class="line">        <span class="type">HttpGet</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HttpGet</span>(url);</span><br><span class="line">        Â  <span class="keyword">try</span> &#123;</span><br><span class="line">            Â  <span class="type">HttpEntity</span> <span class="variable">entity</span> <span class="operator">=</span> doGet(request);</span><br><span class="line">            Â  <span class="type">ByteArrayOutputStream</span> <span class="variable">baos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>();</span><br><span class="line">            Â  entity.writeTo(baos);</span><br><span class="line">            Â  <span class="keyword">return</span> baos.toByteArray();</span><br><span class="line">        Â  &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            Â  ExceptionUtils.rethrow(e); <span class="comment">// this dependency is internal only</span></span><br><span class="line">        Â  &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            Â  request.releaseConnection();</span><br><span class="line">        Â  &#125;</span><br><span class="line">        Â  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// HttpGet and HttpEntity are used in a private method, so they don&#x27;t belong to the API</span></span><br><span class="line">    <span class="keyword">private</span> HttpEntity <span class="title function_">doGet</span><span class="params">(HttpGet get)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">HttpResponse</span> <span class="variable">response</span> <span class="operator">=</span> client.execute(get);</span><br><span class="line">        <span class="keyword">if</span> (response.getStatusList().getStatusCode() != HttpStatus.SC_OK) &#123;</span><br><span class="line">            System.err.println(<span class="string">&quot;Method failed: &quot;</span> + response.getStatusLine());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> response.getEntity()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>HttpClientWrapper</code> çš„ public æ„é€ æ–¹æ³•ä½¿ç”¨äº† <code>HttpClient</code> ä½œä¸ºå‚æ•°, æ‰€ä»¥ <code>HttpClient</code> æš´éœ²ç»™æ¶ˆè´¹è€…, å› æ­¤å®ƒå±äº API</p>
<p><code>HttpGet</code> å’Œ <code>HttpEntity</code> åœ¨ä¸€ä¸ª private çš„æ–¹æ³•ç­¾åä¸­ä½¿ç”¨, å› æ­¤å®ƒä»¬ä¸ä¼šæŠŠ <code>HttpClient</code> ç®—ä½œ API ä¾èµ–</p>
<p>æ¥è‡ª <code>commons-lang</code> åº“çš„ <code>ExceptionUtils</code> ç±»å‹, åªåœ¨æ–¹æ³•ä¸»ä½“ä¸­ä½¿ç”¨(æ²¡æœ‰åœ¨æ–¹æ³•çš„ç­¾åä¸­), æ‰€ä»¥å®ƒæ˜¯ä¸€ä¸ª <code>implementation</code> ä¾èµ–</p>
<p>æ‰€ä»¥, æˆ‘ä»¬å¯ä»¥æ¨æ–­å‡º <code>httpclient</code> æ˜¯ä¸€ä¸ª API ä¾èµ–, <code>commons-lang</code> æ˜¯ä¸€ä¸ª implementation ä¾èµ–. è¿™ä¸ªç»“è®ºç¿»è¯‘æˆæ„å»ºè„šæœ¬ä¸­å¦‚ä¸‹çš„å£°æ˜:</p>
<p>Example - Declaring API and implementation dependencies:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    api <span class="string">&#x27;org.apache.httpcomponents:httpclient:4.5.7&#x27;</span></span><br><span class="line">    implementation <span class="string">&#x27;org.apache.commons:commons-lang3:3.5&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="The-Java-Library-Plugin-configurations"><a href="#The-Java-Library-Plugin-configurations" class="headerlink" title="The Java Library Plugin configurations"></a>The Java Library Plugin configurations</h3><p>é…ç½®ä¹‹é—´çš„ä¾èµ–å…³ç³»è¯·æŸ¥çœ‹æ–‡æ¡£çš„å›¾</p>
<p>ç”¨æ¥å£°æ˜ä¾èµ–çš„ configurations:</p>
<ul>
<li>compileOnlyApi</li>
<li>api</li>
<li>compileOnly</li>
<li>implementation</li>
<li>runtimeOnly</li>
</ul>
<p>ç¼–è¯‘ä¸€ä¸ªç»„ä»¶æ—¶, æˆ–è¿è¡Œè¿™ä¸ªåº“çš„ configurations:</p>
<ul>
<li>apiElements(C)</li>
<li>runtimeElements(C)</li>
</ul>
<p>ç»„ä»¶å†…éƒ¨ä½¿ç”¨çš„ configurations:</p>
<ul>
<li>compileClasspath(R)</li>
<li>runtimeClasspath(R)</li>
</ul>
<p>Table - Java Library Plugin - configurations used to declare dependencies:</p>
<table>
<thead>
<tr>
<th align="left">Configuration name</th>
<th align="left">Role</th>
<th align="left">Consumable?</th>
<th align="left">Resolvable?</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>api</code></td>
<td align="left">å£°æ˜ API ä¾èµ–</td>
<td align="left">no</td>
<td align="left">no</td>
<td align="left">åœ¨è¿™é‡Œå£°æ˜å¯ä¼ é€’æ€§åœ°æš´éœ²ç»™æ¶ˆè´¹è€…çš„ä¾èµ–, ç”¨äºç¼–è¯‘æ—¶å’Œè¿è¡Œæ—¶</td>
</tr>
<tr>
<td align="left"><code>implementation</code></td>
<td align="left">å£°æ˜ implementation ä¾èµ–</td>
<td align="left">no</td>
<td align="left">no</td>
<td align="left">åœ¨è¿™é‡Œå£°æ˜ä»…å†…éƒ¨ä½¿ç”¨, ä¸è¦æš´éœ²ç»™æ¶ˆè´¹è€…çš„ä¾èµ–(è¿™äº›ä¾èµ–åœ¨è¿è¡Œæ—¶è¿˜æ˜¯ä¼šæš´éœ²ç»™æ¶ˆè´¹è€…çš„)</td>
</tr>
<tr>
<td align="left"><code>compileOnly</code></td>
<td align="left">å£°æ˜ compile only ä¾èµ–</td>
<td align="left">no</td>
<td align="left">no</td>
<td align="left">åœ¨è¿™é‡Œå£°æ˜ç¼–è¯‘æ—¶è¦æ±‚çš„,ä¸æ˜¯è¿è¡Œæ—¶è¦æ±‚çš„ä¾èµ–. è¿™é€šå¸¸åŒ…æ‹¬åœ¨è¿è¡Œæ—¶å‘ç°çš„éšè—çš„(shaded)ä¾èµ–</td>
</tr>
<tr>
<td align="left"><code>compileOnlyApi</code></td>
<td align="left">å£°æ˜ compile only API ä¾èµ–</td>
<td align="left">no</td>
<td align="left">no</td>
<td align="left">åœ¨è¿™é‡Œå£°æ˜ä½ çš„ module å’Œä½ çš„æ¶ˆè´¹è€…ç¼–è¯‘æ—¶è¦æ±‚çš„, ä¸æ˜¯è¿è¡Œæ—¶çš„ä¾èµ–. è¿™é€šå¸¸åŒ…æ‹¬åœ¨è¿è¡Œæ—¶å‘ç°çš„éšè—çš„(shaded)ä¾èµ–</td>
</tr>
<tr>
<td align="left"><code>runtimeOnly</code></td>
<td align="left">å£°æ˜ runtime ä¾èµ–</td>
<td align="left">no</td>
<td align="left">no</td>
<td align="left">åœ¨è¿™é‡Œå£°æ˜åªè¦æ±‚åœ¨è¿è¡Œæ—¶çš„ä¾èµ–</td>
</tr>
<tr>
<td align="left"><code>testImplementation</code></td>
<td align="left">æµ‹è¯•ä¾èµ–</td>
<td align="left">no</td>
<td align="left">no</td>
<td align="left">åœ¨è¿™é‡Œå£°æ˜ç”¨æ¥ç¼–è¯‘æµ‹è¯•çš„ä¾èµ–</td>
</tr>
<tr>
<td align="left"><code>testCompileOnly</code></td>
<td align="left">å£°æ˜ test compile only ä¾èµ–</td>
<td align="left">no</td>
<td align="left">no</td>
<td align="left">åœ¨è¿™é‡Œå£°æ˜åªè¦æµ‹è¯•ç¼–è¯‘æ—¶ä½¿ç”¨çš„, ä¸åº”è¯¥æ³„éœ²åˆ°è¿è¡Œæ—¶çš„ä¾èµ–. è¿™é€šå¸¸åŒ…æ‹¬åœ¨è¿è¡Œæ—¶å‘ç°çš„éšè—çš„(shaded)ä¾èµ–</td>
</tr>
<tr>
<td align="left"><code>testRuntimeOnly</code></td>
<td align="left">å£°æ˜ test runtime ä¾èµ–</td>
<td align="left">no</td>
<td align="left">no</td>
<td align="left">åœ¨è¿™é‡Œå£°æ˜åªåœ¨è¿è¡Œæ—¶ä½¿ç”¨çš„, ä¸åœ¨ç¼–è¯‘æ—¶ä½¿ç”¨çš„ä¾èµ–</td>
</tr>
</tbody></table>
<p>Table - Java Library Plugin - configurations used by consumers:</p>
<table>
<thead>
<tr>
<th align="left">Configuration name</th>
<th align="left">Role</th>
<th align="left">Consumable?</th>
<th align="left">Resolvable?</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>apiElements</code></td>
<td align="left">For compiling against(é’ˆå¯¹) this library</td>
<td align="left">yes</td>
<td align="left">no</td>
<td align="left">è¿™ä¸ª configuration çš„ç›®çš„æ˜¯ç»™æ¶ˆè´¹è€…ä½¿ç”¨, ä»¥æ£€ç´¢é’ˆå¯¹æ­¤åº“ç¼–è¯‘æ‰€éœ€çš„æ‰€æœ‰å…ƒç´ . ä¸åƒ <code>default</code> configuration, è¿™ä¸ª configuration ä¸ä¼šæ³„éœ² implementation å’Œ runtime ä¾èµ–</td>
</tr>
<tr>
<td align="left"><code>runtimeElements</code></td>
<td align="left">For executing this library</td>
<td align="left">yes</td>
<td align="left">no</td>
<td align="left">è¿™ä¸ª configuration çš„ç›®çš„æ˜¯ç»™æ¶ˆè´¹è€…ä½¿ç”¨, ä»¥æ£€ç´¢é’ˆå¯¹æ­¤åº“è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰å…ƒç´ </td>
</tr>
</tbody></table>
<p>Table - Java Library Plugin - configurations used by the library itself:</p>
<table>
<thead>
<tr>
<th align="left">Configuration name</th>
<th align="left">Role</th>
<th align="left">Consumable?</th>
<th align="left">Resolvable?</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>compileClasspath</code></td>
<td align="left">For compiling this library</td>
<td align="left">no</td>
<td align="left">yes</td>
<td align="left">è¿™ä¸ª configuration åŒ…å«è¿™ä¸ªåº“çš„ç¼–è¯‘ classpath, æ‰€ä»¥åœ¨è°ƒç”¨ Java ç¼–è¯‘å™¨ç¼–è¯‘å®ƒæ—¶ä½¿ç”¨è¿™ä¸ªé…ç½®</td>
</tr>
<tr>
<td align="left"><code>runtimeClasspath</code></td>
<td align="left">For executing this library</td>
<td align="left">no</td>
<td align="left">yes</td>
<td align="left">è¿™ä¸ª configuration åŒ…å«è¿™ä¸ªåº“çš„è¿è¡Œæ—¶ classpath</td>
</tr>
<tr>
<td align="left"><code>testCompileClasspath</code></td>
<td align="left">For compiling the tests of this library</td>
<td align="left">no</td>
<td align="left">yes</td>
<td align="left">è¿™ä¸ª configuration åŒ…å«è¿™ä¸ªåº“çš„æµ‹è¯•ç¼–è¯‘æ—¶ classpath</td>
</tr>
<tr>
<td align="left"><code>testRuntimeClasspath</code></td>
<td align="left">For executing tests of this library</td>
<td align="left">no</td>
<td align="left">yes</td>
<td align="left">è¿™ä¸ª configuration åŒ…å«è¿™ä¸ªåº“çš„æµ‹è¯•è¿è¡Œæ—¶ classpath</td>
</tr>
</tbody></table>
<h3 id="Using-classes-instead-of-jar-for-compilation"><a href="#Using-classes-instead-of-jar-for-compilation" class="headerlink" title="Using classes instead of jar for compilation"></a>Using classes instead of jar for compilation</h3><p>Java Library Plugin çš„ä¸€ä¸ªç‰¹æ€§æ˜¯, ä½¿ç”¨ library çš„é¡¹ç›®å¯ä»¥åªæ¶ˆè´¹ç±»æ–‡ä»¶æ¥ç¼–è¯‘, è€Œä¸æ˜¯æ•´ä¸ª JAR åŒ…</p>
<p>è¿™å¯ä»¥å‡è½»é¡¹ç›®é—´çš„ä¾èµ–å…³ç³», å› ä¸ºå½“åœ¨å¼€å‘è¿‡ç¨‹ä¸­åªéœ€è¦æ‰§è¡Œ Java ä»£ç ç¼–è¯‘æ—¶, ä¾‹å¦‚èµ„æºå¤„ç†(<code>processResources task</code>)å’Œ archive æ‰“åŒ…(<code>jar task</code>)å¯ä»¥ä¸ç”¨å†æ‰§è¡Œ</p>
<p>æ˜¯å¦ä½¿ç”¨ classes output æ¥ä»£æ›¿ JAR åŒ…æ˜¯æ¶ˆè´¹è€…æ¥å†³å®šçš„</p>
<h4 id="Increased-memory-usage-for-consumers"><a href="#Increased-memory-usage-for-consumers" class="headerlink" title="Increased memory usage for consumers"></a>Increased memory usage for consumers</h4><p>ä¸€ä¸ªé—´æ¥çš„ç»“æœæ˜¯, up-to-date æ£€æŸ¥å°†éœ€è¦æ›´å¤šçš„å†…å­˜, å› ä¸º Gradle ä¼šå¿«ç…§å•ä¸ªç±»æ–‡ä»¶, è€Œä¸æ˜¯å•ä¸ª JAR æ–‡ä»¶</p>
<p>è¿™å¯èƒ½å¯¼è‡´å¤§å‹é¡¹ç›®çš„å†…å­˜æ¶ˆè€—å¢åŠ , åœ¨æ›´å¤šçš„æƒ…å†µä¸‹å¯ä»¥ä½¿ <code>compileJava task</code> ä¿æŒæœ€æ–°(e.g changing resources no longer changes the input for <code>compileJava</code> tasks of upstream projects)</p>
<h4 id="Significant-build-performance-drop-on-Windows-for-huge-multi-projects"><a href="#Significant-build-performance-drop-on-Windows-for-huge-multi-projects" class="headerlink" title="Significant build performance drop on Windows for huge multi-projects"></a>Significant build performance drop on Windows for huge multi-projects</h4><p>å¯¹äºå•ä¸ªç±»æ–‡ä»¶è¿›è¡Œå¿«ç…§çš„å¦ä¸€ä¸ªå‰¯ä½œç”¨æ˜¯, åªå½±å“ Windows ç³»ç»Ÿ, å½“åœ¨ç¼–è¯‘æ—¶ classpath ä¸Šå¤„ç†å¤§é‡çš„ç±»æ–‡ä»¶æ—¶æ€§èƒ½ä¼šæ˜¾è‘—ä¸‹é™</p>
<p>å”¯ä¸€æ¶‰åŠçš„æ˜¯éå¸¸å¤§çš„ multi-projects çš„å¤§éƒ¨åˆ†ç±»ä¼¼é€šè¿‡ <code>api</code> ä¾èµ–æä¾›åˆ° classpath ä¸Š</p>
<p>ä½ å¯ä»¥é€šè¿‡è®¾ç½® <code>org.gradle.java.compile-classpath-packaging</code> ç³»ç»Ÿå±æ€§ä¸º <code>true</code> æ¥å‡è½»è¿™ä¸ªæ€§èƒ½ä¸‹é™, è¿™ä¸ªç³»ç»Ÿå±æ€§å°† Java Library Plugin çš„è¡Œä¸ºä¿®æ”¹ä¸ºåœ¨ç¼–è¯‘æ—¶ classpath ä¸Šä½¿ç”¨ JAR è€Œä¸æ˜¯ä½¿ç”¨ç±»ç›®å½•</p>
<p>é€šè¿‡åœ¨ç¼–è¯‘æ—¶è§¦å‘æ‰€æœ‰ jar tasks, è¿™ä¸ªç³»ç»Ÿå±æ€§ä¼šæœ‰å…¶ä»–çš„æ€§èƒ½å½±å“å’Œæ½œåœ¨çš„å½±å“, å»ºè®®åªæœ‰åœ¨ Windows ç³»ç»Ÿä¸Šé¢çœŸçš„é‡åˆ°æ€§èƒ½é—®é¢˜æ˜¯æ‰ä½¿ç”¨</p>
<h3 id="Distribution-a-library"><a href="#Distribution-a-library" class="headerlink" title="Distribution a library"></a>Distribution a library</h3><p>ä½¿ç”¨ Java Library Distribution Plugin æ¥å‘å¸ƒ library å’Œå®ƒçš„ä¾èµ–</p>
<h2 id="The-Java-Library-Distribution-Plugin"><a href="#The-Java-Library-Distribution-Plugin" class="headerlink" title="The Java Library Distribution Plugin"></a>The Java Library Distribution Plugin</h2><p>Java Library Distribution Plugin æ·»åŠ æ„å»ºä¸€ä¸ª Java library å‘è¡Œç‰ˆ ZIP çš„æ”¯æŒ</p>
<p>å‘è¡Œç‰ˆ(distribution)åŒ…å«åŒ…å« library å’Œå®ƒçš„ä¾èµ–çš„ JAR æ–‡ä»¶</p>
<p>Example - Using the Java Library Distribution Plugin:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;java-library-distribution&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Example - Configure the distribution name:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">distributions &#123;</span><br><span class="line">    main &#123;</span><br><span class="line">        distributionBaseName = <span class="string">&#x27;my-name&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>distribution ä¼šæ‰“åŒ… library çš„è¿è¡Œæ—¶ä¾èµ–</p>
<p>ä¿å­˜åœ¨ <code>src/main/dist</code> ä¸­çš„æ‰€æœ‰æ–‡ä»¶ä¼šè¢«æ·»åŠ åˆ° archive distribution çš„æ ¹ç›®å½•</p>
<p>è¿è¡Œ <code>gradle distZip</code> æ¥åˆ›å»ºä¸€ä¸ªåŒ…å« distribution çš„ ZIP æ–‡ä»¶</p>
<h3 id="Tasks-8"><a href="#Tasks-8" class="headerlink" title="Tasks"></a>Tasks</h3><p><code>distZip</code></p>
<ul>
<li><code>Zip</code> ç±»å‹</li>
<li>ä¾èµ–äº <code>jar</code></li>
<li>åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„ distribution ZIP archive, åŒ…æ‹¬è¿è¡Œæ—¶åº“</li>
</ul>
<h3 id="Including-other-resources-in-the-distribution"><a href="#Including-other-resources-in-the-distribution" class="headerlink" title="Including other resources in the distribution"></a>Including other resources in the distribution</h3><p>æ‰€æœ‰åœ¨ <code>src/dist</code> ç›®å½•ä¸­çš„æ–‡ä»¶éƒ½ä¼šè¢«æ‹·è´</p>
<p>ä¸ºäº†åŒ…å«æ‰€æœ‰é™æ€æ–‡ä»¶åˆ° distribution ä¸­, ç®€å•åœ°å°†å®ƒä»¬æ•´ç†åˆ° <code>src/dist</code> ç›®å½•, æˆ–è€…å°†å®ƒä»¬æ·»åŠ åˆ° distribution çš„å†…å®¹ä¸­</p>
<p>Example - Include files in the distribution:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">distributions &#123;</span><br><span class="line">    main &#123;</span><br><span class="line">        distributionBaseName = <span class="string">&#x27;my-name&#x27;</span></span><br><span class="line">        contents &#123;</span><br><span class="line">            <span class="keyword">from</span> <span class="string">&#x27;src/dist&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="The-Java-Platform-Plugin"><a href="#The-Java-Platform-Plugin" class="headerlink" title="The Java Platform Plugin"></a>The Java Platform Plugin</h2><blockquote>
<p>The Java Platform Plugin brings the ability to declare platforms for the Java ecosystem</p>
</blockquote>
<p>Java Platform Plugin å¸¦æ¥äº†ä¸º Java ç”Ÿæ€ç³»ç»Ÿå£°æ˜å¹³å°çš„èƒ½åŠ›</p>
<blockquote>
<p>A platform can be used for different purpose:</p>
</blockquote>
<ul>
<li>a description of modules which are published together (and for example, share the same version)</li>
<li>a set of recommended versions for heterogeneous libraries. A typical example includes the Spring Boot BOM</li>
<li>sharing a set of dependency versions between subprojects</li>
</ul>
<p>ä¸€ä¸ª Platform å¯ä»¥ç”¨ä½œä¸åŒçš„ç›®çš„:</p>
<ul>
<li>ä¸€èµ·å‘å¸ƒçš„æ¨¡å—çš„æè¿°(ä¾‹å¦‚, å…±äº«åŒä¸€ä¸ªç‰ˆæœ¬å·)</li>
<li>ä¸€ç»„ä¸ºå¼‚æ„åº“(heterogeneous libraries)æ¨èçš„ç‰ˆæœ¬. ä¸€ä¸ªå…¸å‹çš„ä¾‹å­æ˜¯, åŒ…å« Spring Boot BOM</li>
<li>åœ¨ä¸åŒå­é¡¹ç›®ä¹‹é—´å…±äº«ä¸€ç»„ä¾èµ–ç‰ˆæœ¬</li>
</ul>
<blockquote>
<p>A platform is a special kind of software component which doesnâ€™t contain any sources: it is only used to reference other libraries, so that they play well together during dependency resolution</p>
</blockquote>
<p>Platform æ˜¯ä¸€ä¸ªç‰¹åˆ«çš„ä¸åŒ…å«ä»»ä½•æºä»£ç è½¯ä»¶ç»„ä»¶, å®ƒåªç”¨æ¥å¼•ç”¨å…¶ä»–åº“, ä»¥ä¾¿å®ƒä»¬å¯ä»¥åœ¨ä¾èµ–è§£æçš„æ—¶å€™å¯ä»¥å¾ˆå¥½åœ°åˆä½œ</p>
<p>Platform å¯ä»¥ä½œä¸º <code>Gradle Module Metadata</code> å’Œ <code>Maven BOMs</code> æ¥è¿›è¡Œå‘å¸ƒ</p>
<p><code>java-platform</code> æ’ä»¶ä¸èƒ½å’Œ <code>java</code>, <code>java-library</code> æ’ä»¶åœ¨ä¸€ä¸ªç»™å®šé¡¹ç›®ä¸­ç»“åˆèµ·æ¥ä½¿ç”¨</p>
<p>ä»æ¦‚å¿µä¸Šæ¥è¯´, é¡¹ç›®è¦ä¹ˆæ˜¯æ²¡æœ‰äºŒè¿›åˆ¶æ–‡ä»¶çš„ Platform, è¦ä¹ˆæ˜¯ç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶çš„ Platform</p>
<h3 id="Usage-2"><a href="#Usage-2" class="headerlink" title="Usage"></a>Usage</h3><p>Example - Using the Java Platform plugin:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;java-platform&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="API-and-runtime-separation"><a href="#API-and-runtime-separation" class="headerlink" title="API and runtime separation"></a>API and runtime separation</h3><blockquote>
<p>A major difference between a Maven BOM and a Java platform is that in Gradle dependencies and constraints are declared and scoped to a configuration and the ones extending it</p>
</blockquote>
<p><code>Maven BOM</code> å’Œ <code>Java Platform</code> ä¹‹é—´çš„ä¸€ä¸ªä¸»è¦åŒºåˆ«æ˜¯, åœ¨ Gradle, ä¾èµ–å’Œçº¦æŸè¢« å£°æ˜å’Œé™å®š åœ¨ configuration å’Œ configuration çš„æ‰©å±•ä¸Š</p>
<p>è™½ç„¶è®¸å¤šç”¨æˆ·åªå…³å¿ƒä¸ºç¼–è¯‘æ—¶ä¾èµ–å£°æ˜çº¦æŸ, ä»è€Œè®©è¿è¡Œæ—¶å’Œæµ‹è¯•æ—¶ä¾èµ–æ¥ç»§æ‰¿, ä½†å®ƒå…è®¸å£°æ˜ä»…é€‚ç”¨äºè¿è¡Œæ—¶æˆ–æµ‹è¯•æ—¶çš„ä¾èµ–å’Œçº¦æŸ</p>
<p>è¿™ä¸ªæ’ä»¶æš´éœ²äº†ä¸¤ä¸ª configurations æ¥ç”¨æ¥å£°æ˜ä¾èµ–: <code>api</code> å’Œ <code>runtime</code></p>
<p><code>api configuration</code> åº”è¯¥ç”¨æ¥å£°æ˜ ç”¨åœ¨ Platform ç¼–è¯‘æ—¶çš„ çº¦æŸ(constraints)å’Œä¾èµ–(dependencies)</p>
<p><code>runtime configuration</code> åº”è¯¥ç”¨æ¥å£°æ˜ åœ¨è¿è¡Œæ—¶å¯è§çš„ çº¦æŸ(constraints)å’Œä¾èµ–(dependencies)</p>
<p>Example - Declaring API and runtime constraints:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    constraints &#123;</span><br><span class="line">        api <span class="string">&#x27;commons-httpclient:commons-httpclient:3.1&#x27;</span></span><br><span class="line">        <span class="keyword">runtime</span> <span class="string">&#x27;org.postgresql:postgresql:42.2.5&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªä¾‹å­ä½¿ç”¨äº†çº¦æŸ(constraints)è€Œä¸æ˜¯ä¾èµ–(dependencies)</p>
<p>ä¸€èˆ¬è€Œè¨€, è¿™å°±æ˜¯ä½ æƒ³è¦åšçš„: çº¦æŸ(constraints)åªåœ¨è¿™æ ·çš„ç»„ä»¶è¢«æ·»åŠ åˆ°ä¾èµ–å…³ç³»å›¾(dependency graph)æ—¶æ‰ä¼šç”Ÿæ•ˆ, æ— è®ºæ˜¯ç›´æ¥çš„è¿˜æ˜¯ä¼ é€’çš„</p>
<p>è¿™æ„å‘³ç€åœ¨ Platform åˆ—å‡ºçš„æ‰€æœ‰çº¦æŸ(constraints)éƒ½ä¸ä¼šæ·»åŠ ä¾èµ–(dependency), é™¤éå¦ä¸€ä¸ªç»„ä»¶(component)å¼•å…¥å®ƒ, çº¦æŸ(constraints)å¯ä»¥è¢«çœ‹åšæ˜¯ æ¨è(recommendations)</p>
<p>ä¾‹å¦‚, å¦‚æœä¸€ä¸ª Platform å£°æ˜äº†ä¸€ä¸ª <code>org:foo:1.1</code> ä¾èµ–, å¦‚æœæ²¡æœ‰å…¶ä»–ä¸œè¥¿å¼•å…¥ foo ä¾èµ–, foo å°†ä¸ä¼šå‡ºç°åœ¨ graph. ä½†æ˜¯, å¦‚æœ foo å‡ºç°åœ¨ graph ä¸­, é‚£ä¹ˆå†²çªè§£æå°±ä¼šç”Ÿæ•ˆ</p>
<p>å¦‚æœä¸€ä¸ªä¾èµ–å¼•å…¥äº† <code>org:foo:1.0</code>, é‚£ä¹ˆæˆ‘ä»¬å°±ä¼šé€‰æ‹©ä½¿ç”¨ <code>org:foo:1.1</code> æ¥æ»¡è¶³ Platform çš„çº¦æŸ</p>
<p>é»˜è®¤æƒ…å†µä¸‹, ä¸ºäº†é¿å…åœ¨å¹³å°ä¸­æ·»åŠ ä¾èµ–è€Œä¸æ˜¯çº¦æŸçš„å¸¸è§é”™è¯¯, å¦‚æœä½ å°è¯•è¿™æ ·åš, Gradle å°†ä¼š fail. å¦‚æœå› ä¸ºæŸäº›åŸå› ä½ è¿˜æ˜¯æƒ³è¦æ·»åŠ ä¾èµ–è€Œä¸æ˜¯çº¦æŸ, ä½ å¯ä»¥è¿™æ ·åš:</p>
<p>Example - Allowing declaration of dependencies:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">javaPlatform &#123;</span><br><span class="line">    allowDependencies()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Local-project-constraints"><a href="#Local-project-constraints" class="headerlink" title="Local project constraints"></a>Local project constraints</h3><blockquote>
<p>If you have a multi-project build and want to publish a platform that links to subprojects, you can do it by declaring constraints on the subprojects which belong to the platform</p>
</blockquote>
<p>å¦‚æœä½ æœ‰ä¸€ä¸ª multi-project æ„å»º, å¹¶æƒ³è¦å‘å¸ƒä¸€ä¸ªé“¾æ¥åˆ°å­é¡¹ç›®çš„ Platform, ä½ å¯ä»¥é€šè¿‡å£°æ˜å±äºè¯¥ Platform çš„å­é¡¹ç›®çš„çº¦æŸæ¥å®ç°:</p>
<p>Example - Declaring constraints on subprojects:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    constraints &#123;</span><br><span class="line">        api <span class="keyword">project</span>(<span class="string">&quot;:core&quot;</span>)</span><br><span class="line">        api <span class="keyword">project</span>(<span class="string">&quot;:lib&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>The project notation will become a classical <code>group:name:version</code> notation in the published metadata</p>
</blockquote>
<p>é¡¹ç›®è¡¨ç¤ºæ³•å°†æˆä¸ºå‘å¸ƒå…ƒæ•°æ®ä¸­çš„ç»å…¸ <code>group:name:version</code> è¡¨ç¤ºæ³•</p>
<h3 id="Sourcing-constraints-from-another-platform"><a href="#Sourcing-constraints-from-another-platform" class="headerlink" title="Sourcing constraints from another platform"></a>Sourcing constraints from another platform</h3><p>ä¸€ä¸ª Platform ç»§æ‰¿å¦ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ Platform</p>
<p>ä¸ºäº†è®©ä½ çš„ Platform å¼•å…¥ç¬¬ä¸‰æ–¹ Platform çš„çº¦æŸ, éœ€è¦ä½œä¸ºä¸€ä¸ª <code>platform dependency</code> æ¥å¼•å…¥:</p>
<p>Example - Importing a platform:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">javaPlatform &#123;</span><br><span class="line">    allowDependencies()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    api platform(<span class="string">&#x27;com.fasterxml.jackson:jackson-bom:2.9.8&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Publishing-platforms"><a href="#Publishing-platforms" class="headerlink" title="Publishing platforms"></a>Publishing platforms</h3><p>ä½¿ç”¨ <code>maven-plugin</code> æ’ä»¶æ¥å‘å¸ƒ, ä½¿ç”¨ <code>javaPlatform component</code> æ¥é…ç½®ä¸€ä¸ª Maven publication:</p>
<p>Example - Publishing as a BOM:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// build.gradle</span><br><span class="line">publishing &#123;</span><br><span class="line">    publications &#123;</span><br><span class="line">        myPlatform(MavenPublication) &#123;</span><br><span class="line">            from components.javaPlatform</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™å°†ä¼šä¸º Platform åˆ›å»ºä¸€ä¸ª BOM æ–‡ä»¶, ä½¿ç”¨ <code>&lt;dependencyManagement&gt;</code> å—ï¼Œå…¶ä¸­ <code>&lt;dependencies&gt;</code> å¯¹åº”äºå¹³å°æ¨¡å—ä¸­å®šä¹‰çš„çº¦æŸ</p>
<h3 id="Consuming-platforms"><a href="#Consuming-platforms" class="headerlink" title="Consuming platforms"></a>Consuming platforms</h3><p>å› ä¸º Java Platform æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„ç»„ä»¶, Java Platform ä¸Šçš„ä¾èµ–å¿…é¡»ä½¿ç”¨ <code>platform</code> å’Œ <code>enforcedPlatform</code> å…³é”®å­—å£°æ˜</p>
<p>ä¾‹å¦‚, ä½ æƒ³è¦åœ¨å­é¡¹ç›®ä¹‹é—´å…±äº«ä¾èµ–ç‰ˆæœ¬, ä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªå£°æ˜äº†æ‰€æœ‰ç‰ˆæœ¬ platform module:</p>
<p>Example - Recommend versions in a platform module:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    constraints &#123;</span><br><span class="line">        <span class="comment">// Platform declares some versions of libraries used in subprojects</span></span><br><span class="line">        api <span class="string">&#x27;commons-httpclient:commons-httpclient:3.1&#x27;</span></span><br><span class="line">        api <span class="string">&#x27;org.apache.commons:commons-lang3:3.8.1&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åè®©å­é¡¹ç›®ä¾èµ–è¿™ä¸ª Platform æ¥è·å–å®ƒçš„æ¨è:</p>
<p>Example - Get recommendations from a platform:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    <span class="comment">// get recommended versions from the platform project</span></span><br><span class="line">    api platform(<span class="keyword">project</span>(<span class="string">&#x27;:platform&#x27;</span>))</span><br><span class="line">    <span class="comment">// no version required</span></span><br><span class="line">    api <span class="string">&#x27;commons-httpclient:commons-httpclient&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Maven-Publish-Plugin"><a href="#Maven-Publish-Plugin" class="headerlink" title="Maven Publish Plugin"></a>Maven Publish Plugin</h2><p>Example - Applying the Maven Publish Plugin:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;maven-publish&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Maven Plublish Plugin åœ¨é¡¹ç›®ä¸Šä½¿ç”¨ä¸€ä¸ªç±»å‹ä¸º <code>PublishingExtension</code> åç§°ä¸º <code>publishing</code> çš„ extension. è¿™ä¸ª extension æä¾›äº†å‘½åçš„å‘å¸ƒå®¹å™¨å’Œå‘½åçš„ä»“åº“å®¹å™¨</p>
<p>Maven Plublish Plugin å’Œ MavenPublication publications , MavenArtifactRepository repositories ä¸€èµ·å·¥ä½œ</p>
<h3 id="Tasks-9"><a href="#Tasks-9" class="headerlink" title="Tasks"></a>Tasks</h3><p><code>generatePomFileFor&#123;PubName&#125;Publication</code></p>
<ul>
<li><code>GenerateMavenPom</code> ç±»å‹</li>
<li>ä¸ºåç§°ä¸º {PubName} çš„ publication ç”Ÿæˆä¸€ä¸ª POM æ–‡ä»¶, åœ¨æ–‡ä»¶ä¸­å¡«å……å·²çŸ¥çš„å…ƒæ•°æ®ä¾‹å¦‚é¡¹ç›®åç§°, ç‰ˆæœ¬å’Œä¾èµ–. è¿™ä¸ª POM æ–‡ä»¶é»˜è®¤çš„ç”Ÿæˆåœ°å€æ˜¯ <code>build/publications/$pubName/pom-default.xml</code></li>
</ul>
<p><code>publish&#123;PubName&#125;PublicationTo&#123;RepoName&#125;Repository</code></p>
<ul>
<li><code>PublishToMavenRepository</code> ç±»å‹</li>
<li>å‘å¸ƒ {PubName} publication åˆ°åå­—ä¸º {RepoName} çš„ä»“åº“. å¦‚æœæ²¡æœ‰æŒ‡å®šä»“åº“çš„åç§°, åˆ™é»˜è®¤ä¸º {RepoName} ä¸º <code>Maven</code></li>
</ul>
<p><code>publish&#123;PubName&#125;PublicationToMavenLocal</code></p>
<ul>
<li><code>PublishToMavenLocal</code> ç±»å‹</li>
<li>æ‹·è´ {PubName} publication åˆ°æœ¬åœ° Maven ç¼“å­˜. ä¸€èˆ¬æ˜¯ <code>$USER_HOME/.m2/repository</code>, æ‹·è´ publication çš„ POM æ–‡ä»¶å’Œå…¶ä»–å…ƒæ•°æ®</li>
</ul>
<p><code>publish</code></p>
<ul>
<li>ä¾èµ–äºæ‰€æœ‰çš„ <code>publish&#123;PubName&#125;PublicationTo&#123;RepoName&#125;Repository</code> task</li>
<li>ä¸€ä¸ªèšåˆçš„ task, è¿™ä¸ª task ç”¨æ¥å‘å¸ƒæ‰€æœ‰å®šä¹‰å¥½çš„ publications åˆ°æ‰€æœ‰å®šä¹‰å¥½çš„ä»“åº“ä¸­. è¿™ä¸ª task ä¸åŒ…æ‹¬æ‹·è´ publications åˆ°æœ¬åœ° Maven ç¼“å­˜</li>
</ul>
<p><code>publishToMavenLocal</code></p>
<ul>
<li>ä¾èµ–äºæ‰€æœ‰çš„ <code>publish&#123;PubName&#125;PublicationToMavenLocal</code> task</li>
<li>æ‹·è´æ‰€æœ‰å®šä¹‰å¥½çš„ publication åˆ°æœ¬åœ° Maven ç¼“å­˜, åŒ…å«å®ƒä»¬çš„å…ƒæ•°æ®(ä¾‹å¦‚, POM æ–‡ä»¶)</li>
</ul>
<h3 id="Publications"><a href="#Publications" class="headerlink" title="Publications"></a>Publications</h3><p>è¿™ä¸ªæ’ä»¶æä¾›äº†ç±»å‹ä¸º <code>MavenPublication</code> çš„ <code>publications</code></p>
<p>æœ‰å››ä¸ªä¸»è¦çš„ä¸œè¥¿ä½ å¯ä»¥åœ¨ä¸€ä¸ª Maven publication ä¸­é…ç½®:</p>
<ul>
<li>ä¸€ä¸ª component. é€šè¿‡ <code>MavenPublication.from(org.gradle.api.component.SoftwareComponent)</code></li>
<li>è‡ªå®šä¹‰çš„ artifacts. é€šè¿‡ <code>MavenPublication.artifact(java.lang.Object)</code></li>
<li>åŸºç¡€å…ƒæ•°æ®. ä¾‹å¦‚ <code>artifactId</code>, <code>groupId</code>, <code>version</code></li>
<li>å…¶ä»– POM æ–‡ä»¶ä¸­çš„å†…å®¹. é€šè¿‡ <code>MavenPublication.pom(org.gradle.api.Action)</code></li>
</ul>
<h4 id="Identity-values-in-the-generated-POM"><a href="#Identity-values-in-the-generated-POM" class="headerlink" title="Identity values in the generated POM"></a>Identity values in the generated POM</h4><p>ç”Ÿæˆçš„ POM æ–‡ä»¶çš„å±æ€§å°†åŒ…å«ä»ä»¥ä¸‹é¡¹ç›®å±æ€§è·å¾—çš„æ ‡è¯†å€¼:</p>
<ul>
<li><code>groupId</code> - <code>Project.getGroup()</code></li>
<li><code>artifactId</code> - <code>Project.getName()</code></li>
<li><code>version</code> - <code>Project.getVersion()</code></li>
</ul>
<p>Example - Customizing the publication identity:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">publishing &#123;</span><br><span class="line">    publications &#123;</span><br><span class="line">        maven(MavenPublication) &#123;</span><br><span class="line">            groupId = <span class="string">&#x27;org.gradle.sample&#x27;</span></span><br><span class="line">            artifactId = <span class="string">&#x27;library&#x27;</span></span><br><span class="line">            version = <span class="string">&#x27;1.1&#x27;</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">from</span> components.java</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Customizing-the-generated-POM"><a href="#Customizing-the-generated-POM" class="headerlink" title="Customizing the generated POM"></a>Customizing the generated POM</h4><p>å¯ä»¥åœ¨å‘å¸ƒä¹‹å‰è‡ªå®šä¹‰ç”Ÿæˆçš„ POM æ–‡ä»¶</p>
<p>æŸ¥çœ‹ <a class="link"   target="_blank" rel="noopener" href="https://docs.gradle.org/7.3.3/dsl/org.gradle.api.publish.maven.MavenPom.html" >MavenPom<i class="fas fa-external-link-alt"></i></a> è·å–æ›´å¤šå¯ç”¨çš„å±æ€§å’Œæ–¹æ³•</p>
<p>Example - Customizing the POM file:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">publishing &#123;</span><br><span class="line">    publications &#123;</span><br><span class="line">        mavenJava(MavenPublication) &#123;</span><br><span class="line">            pom &#123;</span><br><span class="line">                name = <span class="string">&#x27;My Library&#x27;</span></span><br><span class="line">                <span class="keyword">description</span> = <span class="string">&#x27;A concise description of my library&#x27;</span></span><br><span class="line">                url = <span class="string">&#x27;http://www.example.com/library&#x27;</span></span><br><span class="line">                properties = [</span><br><span class="line">                    myProp: <span class="string">&quot;value&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;prop.with.dots&quot;</span>: <span class="string">&quot;anoterValue&quot;</span></span><br><span class="line">                ]</span><br><span class="line">                licenses &#123;</span><br><span class="line">                    license &#123;</span><br><span class="line">                        name = <span class="string">&#x27;The Apache License, Version 2.0&#x27;</span></span><br><span class="line">                        url = <span class="string">&#x27;http://www.apache.org/licenses/LICENSE-2.0.txt&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                developers &#123;</span><br><span class="line">                    developer &#123;</span><br><span class="line">                        id = <span class="string">&#x27;johnd&#x27;</span></span><br><span class="line">                        name = <span class="string">&#x27;John Doe&#x27;</span></span><br><span class="line">                        email = <span class="string">&#x27;john.doe@example.com&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                scm &#123;</span><br><span class="line">                    connection = <span class="string">&#x27;scm:git:git://example.com/my-library.git&#x27;</span></span><br><span class="line">                    developerConnection = <span class="string">&#x27;scm:git:ssh://example.com/my-library.git&#x27;</span></span><br><span class="line">                    url = <span class="string">&#x27;http://example.com/my-library/</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="Customizing-dependencies-versions"><a href="#Customizing-dependencies-versions" class="headerlink" title="Customizing dependencies versions"></a>Customizing dependencies versions</h4><p>æ”¯æŒä¸¤ç§ç­–ç•¥æ¥å‘å¸ƒä¾èµ–</p>
<h5 id="Declared-versions-é»˜è®¤"><a href="#Declared-versions-é»˜è®¤" class="headerlink" title="Declared versions(é»˜è®¤)"></a>Declared versions(é»˜è®¤)</h5><p>ä½¿ç”¨æ„å»ºè„šæœ¬ä½œè€…ä½¿ç”¨ <code>dependencies &#123;&#125;</code> å£°æ˜çš„ä¾èµ–çš„ç‰ˆæœ¬</p>
<h5 id="Resolved-versions"><a href="#Resolved-versions" class="headerlink" title="Resolved versions"></a>Resolved versions</h5><p>ä½¿ç”¨æ„å»ºè§£æåçš„ç‰ˆæœ¬, å¯èƒ½ä½¿ç”¨äº†è§£æè§„åˆ™å’Œè‡ªåŠ¨å†²çªè§£å†³</p>
<p>è¿™æ ·åšçš„å¥½å¤„æ˜¯, å‘å¸ƒçš„ç‰ˆæœ¬å¯¹åº”äºæµ‹è¯•å‘å¸ƒæ„å»ºæ‰€é’ˆå¯¹çš„ç‰ˆæœ¬</p>
<p>ä½¿ç”¨è§£æç‰ˆæœ¬çš„ä¾‹å­:</p>
<ul>
<li>ä¸€ä¸ªé¡¹ç›®ä½¿ç”¨äº†ä¾èµ–åŠ¨æ€ç‰ˆæœ¬, ä½†æ›´å€¾å‘äºå°†ç»™å®šå‘å¸ƒçš„è§£æç‰ˆæœ¬å…¬å¼€ç»™å…¶ä½¿ç”¨è€…</li>
<li>ç»“åˆ <code>dependency locking</code>, ä½ æƒ³è¦å‘å¸ƒ locked versions</li>
<li>ä¸€ä¸ªé¡¹ç›®åˆ©ç”¨äº†Gradleçš„å¯Œç‰ˆæœ¬çº¦æŸï¼Œå®ƒæœ‰ä¸€ä¸ªåˆ°Mavençš„æœ‰æŸè½¬æ¢. å®ƒå‘å¸ƒå·²è§£æçš„ç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯ä¾èµ–äºè½¬æ¢</li>
</ul>
<p>ä½¿ç”¨ <code>versionMapping</code> DSL æ–¹æ³•æ¥é…ç½® <code>VersionMappingStrategy</code>:</p>
<p>Example - Using resolved versions:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">publishing &#123;</span><br><span class="line">    publications &#123;</span><br><span class="line">        mavenJava(MavenPublication) &#123;</span><br><span class="line">            versionMapping &#123;</span><br><span class="line">                usage(<span class="string">&#x27;java-api&#x27;</span>) &#123;</span><br><span class="line">                    fromResolutionOf(<span class="string">&#x27;runtimeClasspath&#x27;</span>)</span><br><span class="line">                &#125;</span><br><span class="line">                usage(<span class="string">&#x27;java-runtime&#x27;</span>) &#123;</span><br><span class="line">                    fromResolutionResult()</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­, Gradle å°†ä¼šä½¿ç”¨åœ¨ runtimeClasspath ä¸Šè§£æçš„ <code>api</code> ä¸­å£°æ˜çš„ä¾èµ–çš„ç‰ˆæœ¬, è¿™äº›ä¾èµ–è¢«æ˜ å°„åˆ° Maven çš„ <code>compile scope</code></p>
<p>Gradle è¿˜ä¼šä½¿ç”¨åœ¨ <code>runtimeClasspath</code> ä¸Šè§£æçš„ <code>implementation</code> ä¸­å£°æ˜çš„ä¾èµ–çš„ç‰ˆæœ¬, è¿™äº›ä¾èµ–è¢«æ˜ å°„åˆ° Maven çš„ <code>runtime scope</code></p>
<p><code>fromResolutionResult()</code> è¡¨ç¤º Gradle åº”è¯¥ä½¿ç”¨å˜é‡çš„é»˜è®¤ç±»å‹</p>
<p><code>runtimeClasspath</code> æ˜¯ <code>java-runtime</code> çš„é»˜è®¤ classpath</p>
<h3 id="Repositories"><a href="#Repositories" class="headerlink" title="Repositories"></a>Repositories</h3><p>è¿™ä¸ªæ’ä»¶æä¾›äº†ç±»å‹ä¸º <code>MavenArtifactRepository</code> çš„ <code>repositories</code></p>
<p>Example - Declaring repositories to publish to:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">publishing &#123;</span><br><span class="line">    <span class="keyword">repositories</span> &#123;</span><br><span class="line">        maven &#123;</span><br><span class="line">            <span class="comment">// change to point to your repo, e.g. http://my.org/repo</span></span><br><span class="line">            url = layout.buildDirectory.dir(<span class="string">&#x27;repo&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Snapshots-and-release-repositories"><a href="#Snapshots-and-release-repositories" class="headerlink" title="Snapshots and release repositories"></a>Snapshots and release repositories</h4><p>å‘å¸ƒ snapshot å’Œ release ç‰ˆæœ¬åˆ°ä¸åŒçš„ä»“åº“æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å®è·µ</p>
<p>Example - Configuring repository URL based on project version:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">publishing &#123;</span><br><span class="line">    <span class="keyword">repositories</span> &#123;</span><br><span class="line">        maven &#123;</span><br><span class="line">            <span class="keyword">def</span> releasesRepoUrl = layout.buildDirectory.dir(<span class="string">&#x27;repos/releases&#x27;</span>)</span><br><span class="line">            <span class="keyword">def</span> snapshotsRepoUrl = layout.buildDirectory.dir(<span class="string">&#x27;repos/snapshots&#x27;</span>)</span><br><span class="line">            url = version.endsWith(<span class="string">&#x27;SNAPSHOT&#x27;</span>) ? snapshotsRepoUrl : releasesRepoUrl</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½ è¿˜å¯ä»¥ä½¿ç”¨ä¸€ä¸ªé¡¹ç›®å±æ€§æˆ–è€…ç³»ç»Ÿå±æ€§æ¥å†³å®šå‘å¸ƒåˆ°å“ªä¸ªä»“åº“</p>
<p>ä¾‹å¦‚, ä½¿ç”¨ç³»ç»Ÿå±æ€§ <code>release</code> æ¥å‘å¸ƒåˆ° release ä»“åº“: <code>gradle -Prelease publish</code></p>
<p>Example - Configuring repository URL based on project property:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">publishing &#123;</span><br><span class="line">    <span class="keyword">repositories</span> &#123;</span><br><span class="line">        maven &#123;</span><br><span class="line">            <span class="keyword">def</span> releasesRepoUrl = layout.buildDirectory.dir(<span class="string">&#x27;repos/releases&#x27;</span>)</span><br><span class="line">            <span class="keyword">def</span> snapshotsRepoUrl = layout.buildDirectory.dir(<span class="string">&#x27;repos/snapshots&#x27;</span>)</span><br><span class="line">            url = <span class="keyword">project</span>.hasProperty(<span class="string">&#x27;release&#x27;</span>) ? releasesRepoUrl : releasesRepoUrl</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Publishing-to-Maven-Local"><a href="#Publishing-to-Maven-Local" class="headerlink" title="Publishing to Maven Local"></a>Publishing to Maven Local</h4><p>ä½¿ç”¨ <a class="link"   target="_blank" rel="noopener" href="https://docs.gradle.org/7.3.3/javadoc/org/gradle/api/publish/maven/tasks/PublishToMavenLocal.html" >PublishToMavenLocal<i class="fas fa-external-link-alt"></i></a> task æ¥ä¸ºæ¯ä¸ª MavenPublication è¿›è¡Œå‘å¸ƒ</p>
<h3 id="Publishing-Maven-relocation-information"><a href="#Publishing-Maven-relocation-information" class="headerlink" title="Publishing Maven relocation information"></a>Publishing Maven relocation information</h3><p>å½“ä¸€ä¸ªé¡¹ç›®å‘å¸ƒå®ƒæ”¹å˜äº† <code>groupId</code> æˆ–è€… <code>artifactId</code> (the coordinates) çš„æ„ä»¶, è®©æ‰€æœ‰ä½¿ç”¨è¿™ä¸ªé¡¹ç›®çš„ç”¨æˆ·çŸ¥é“å»å“ªå„¿å¯»æ‰¾æ–°çš„æ„ä»¶æ˜¯å¾ˆé‡è¦çš„</p>
<p>Maven å¯ä»¥é€šè¿‡ <code>relocation</code> ç‰¹æ€§æ¥å¸®åŠ©å®Œæˆè¿™ä¸ªæ“ä½œ</p>
<p>å®ƒçš„å·¥ä½œæ–¹å¼æ˜¯, é¡¹ç›®åœ¨æ—§çš„åæ ‡ (the coordinates) ä¸‹å‘å¸ƒä¸€ä¸ªé¢å¤–çš„æ„ä»¶, è¿™ä¸ªåæ ‡ (the coordinates) ä»…ç”±æœ€å°çš„ <code>relocation</code> POM ç»„æˆ</p>
<p>è¿™ä¸ª POM æ–‡ä»¶æŒ‡å®šäº†åœ¨æ–°çš„æ„ä»¶å¯ä»¥åœ¨å“ªå„¿å¯»æ‰¾åˆ°</p>
<p>Maven ä»“åº“å’Œæ„å»ºå·¥å…·å¯ä»¥æé†’ç”¨æˆ·ä¸€ä¸ªæ„ä»¶çš„ <code>the coordinates</code> å·²ç»æ”¹å˜</p>
<p>ä¸ºäº†è¿™ä¸ªåŠŸèƒ½, ä¸€ä¸ªé¡¹ç›®æ·»åŠ ä¸€ä¸ªé¢å¤–çš„ <code>MavenPublication</code> æ¥æŒ‡å®šä¸€ä¸ª <code>MavenPomRelocation</code></p>
<p>Example - Specifying a relocation POM:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">publishing &#123;</span><br><span class="line">    publications &#123;</span><br><span class="line">        <span class="comment">// ... artifact publications</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Specify relocation POM</span></span><br><span class="line">        relocation(MavenPublication) &#123;</span><br><span class="line">            pom &#123;</span><br><span class="line">                <span class="comment">// Old artifact coordinates</span></span><br><span class="line">                groupId = <span class="string">&quot;com.example&quot;</span></span><br><span class="line">                artifactId = <span class="string">&quot;lib&quot;</span></span><br><span class="line">                version = <span class="string">&quot;2.0.0&quot;</span></span><br><span class="line"></span><br><span class="line">                distributionManagement &#123;</span><br><span class="line">                    relocation &#123;</span><br><span class="line">                        <span class="comment">// New artifact coordinates</span></span><br><span class="line">                        groupId = <span class="string">&quot;com.new-example&quot;</span></span><br><span class="line">                        artifactId = <span class="string">&quot;lib&quot;</span></span><br><span class="line">                        version = <span class="string">&quot;2.0.0&quot;</span></span><br><span class="line">                        message = <span class="string">&quot;groupId has been changed&quot;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸€ä¸ª <code>relocation</code> POM åªå¯ä»¥å‘å¸ƒä¸€æ¬¡, ä¸€æ—¦å‘å¸ƒè¿‡äº†, å°±åº”è¯¥ä»æ„å»ºè„šæœ¬ä¸­åˆ é™¤</p>
<p><code>relocation</code> POM å¹¶ä¸é€‚ç”¨äºæ‰€æœ‰åœºæ™¯, å¦‚æœä¸€ä¸ªæ„ä»¶åˆ†æˆäº†ä¸¤ä¸ªæˆ–å¤šä¸ªæ„ä»¶, é‚£ä¹ˆä¸€ä¸ª <code>relocation</code> POM å¯èƒ½å°±æ´¾ä¸ä¸Šç”¨å¤„äº†</p>
<h3 id="Complete-example"><a href="#Complete-example" class="headerlink" title="Complete example"></a>Complete example</h3><p>Example - Publishing a Java library:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;java-library&#x27;</span></span><br><span class="line">    id <span class="string">&#x27;maven-publish&#x27;</span></span><br><span class="line">    id <span class="string">&#x27;signing&#x27;</span>        <span class="comment">// åˆ›å»ºç­¾åä¿¡æ¯</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">group</span> = <span class="string">&#x27;com.example&#x27;</span></span><br><span class="line">version = <span class="string">&#x27;1.0&#x27;</span></span><br><span class="line"></span><br><span class="line">java &#123;</span><br><span class="line">    withJavadocJar()</span><br><span class="line">    withSourcesJar()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">publishing &#123;</span><br><span class="line">    publications &#123;</span><br><span class="line">        mavenJava(MavenPublication) &#123;</span><br><span class="line">            artifactId = <span class="string">&#x27;my-library&#x27;</span></span><br><span class="line">            <span class="keyword">from</span> components.java</span><br><span class="line">            versionMapping &#123;</span><br><span class="line">                usage(<span class="string">&#x27;java-api&#x27;</span>) &#123;</span><br><span class="line">                    fromResolutionOf(<span class="string">&#x27;runtimeClasspath&#x27;</span>)</span><br><span class="line">                &#125;</span><br><span class="line">                usage(<span class="string">&#x27;java-runtime&#x27;</span>) &#123;</span><br><span class="line">                    fromResolutionResult()</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            pom &#123;</span><br><span class="line">                name = <span class="string">&#x27;My Library&#x27;</span></span><br><span class="line">                <span class="keyword">description</span> = <span class="string">&#x27;A concise description of my library&#x27;</span></span><br><span class="line">                url = <span class="string">&#x27;http://www.example.com/library&#x27;</span></span><br><span class="line">                properties = [</span><br><span class="line">                    myProp: <span class="string">&quot;value&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;prop.with.dots&quot;</span>: <span class="string">&quot;anotherValue&quot;</span></span><br><span class="line">                ]</span><br><span class="line">                licenses &#123;</span><br><span class="line">                    license &#123;</span><br><span class="line">                        name = <span class="string">&#x27;The Apache License, Version 2.0&#x27;</span></span><br><span class="line">                        url = <span class="string">&#x27;http://www.apache.com.org/licenses/LICENSE-2.0.txt&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                developers &#123;</span><br><span class="line">                    developer &#123;</span><br><span class="line">                        id = <span class="string">&#x27;john&#x27;</span></span><br><span class="line">                        name = <span class="string">&#x27;John Doe&#x27;</span></span><br><span class="line">                        email = <span class="string">&#x27;john.doe@example.com&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                scm &#123;</span><br><span class="line">                    connection = <span class="string">&#x27;scm:git:git://example.com/my-library.git&#x27;</span></span><br><span class="line">                    developerConnection = <span class="string">&#x27;scm:git:ssh://example-com/my-library.git&#x27;</span></span><br><span class="line">                    url = <span class="string">&#x27;http://example.com/my-library&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">repositories</span> &#123;</span><br><span class="line">        maven &#123;</span><br><span class="line">            <span class="comment">// change URLs to point to your repos, e.g http://my.org/repo</span></span><br><span class="line">            <span class="keyword">def</span> releasesRepoUrl = layout.buildDirectory.dir(<span class="string">&#x27;repos/releases&#x27;</span>)</span><br><span class="line">            <span class="keyword">def</span> snapshotsRepoUrl = layout.buildDirectory.dir(<span class="string">&#x27;repos/snapshots&#x27;</span>)</span><br><span class="line">            url = version.endsWith(<span class="string">&#x27;SNAPSHOT&#x27;</span>) ? snapshotsRepoUrl : releaseRepoUrl</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">signing &#123;</span><br><span class="line">    sign publishing.publications.mavenJava</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">javadoc &#123;</span><br><span class="line">    <span class="keyword">if</span> (JavaVersion.current().isJava9Compatible()) &#123;</span><br><span class="line">        <span class="keyword">options</span>.addBooleanOption(<span class="string">&#x27;html5&#x27;</span>, <span class="keyword">true</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»“æœæ˜¯å¦‚ä¸‹çš„æ„ä»¶å°†ä¼šè¢«å‘å¸ƒ:</p>
<ul>
<li>POM æ–‡ä»¶: <code>my-library-1.0.pom</code></li>
<li>Java component çš„ä¸»è¦ JAR æ„ä»¶æ–‡ä»¶: <code>my-library-1.0.jar</code></li>
<li>è¢«æ˜¾å¼é…ç½®çš„æºæ–‡ä»¶ JAR æ„ä»¶æ–‡ä»¶: <code>my-library-1.0-sources.jar</code></li>
<li>è¢«æ˜¾å¼é…ç½®çš„ Javadoc JAR æ„ä»¶æ–‡ä»¶: <code>my-library-1.0-javadoc.jar</code></li>
</ul>
<p><code>Signing Plugin</code> æ’ä»¶ç”¨æ¥ä¸ºæ¯ä¸ªæ„ä»¶ç”Ÿæˆä¸€ä¸ªç­¾åæ–‡ä»¶, é™¤æ­¤ä¹‹å¤–, è¿˜ä¼šä¸ºæ‰€æœ‰çš„æ„ä»¶æ–‡ä»¶å’Œç­¾åæ–‡ä»¶ç”Ÿæˆæ ¡éªŒæ–‡ä»¶ (<code>checksum files</code>)</p>
<h2 id="The-PMD-Plugin"><a href="#The-PMD-Plugin" class="headerlink" title="The PMD Plugin"></a>The PMD Plugin</h2><p>PMD Plugin åœ¨é¡¹ç›®çš„ Java æºæ–‡ä»¶ä¸Šä½¿ç”¨ PMD æ‰§è¡Œè´¨é‡æ£€æŸ¥å¹¶ä»æ£€æŸ¥ä¸­ç”ŸæˆæŠ¥å‘Š</p>
<p>Example - Using the PMD plugin:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;pmd&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>PMD Plugin ä¼šæ·»åŠ ä¸€äº› <code>task</code> åˆ°é¡¹ç›®ä¸­æ¥æ‰§è¡Œè´¨é‡æ£€æŸ¥, å¯ä»¥é€šè¿‡è¿è¡Œ <code>gradle check</code> æ¥æ‰§è¡Œæ£€æŸ¥</p>
<h3 id="Tasks-10"><a href="#Tasks-10" class="headerlink" title="Tasks"></a>Tasks</h3><p><code>pmdMain</code>:</p>
<ul>
<li><code>Pmd</code> ç±»å‹</li>
<li>åœ¨ Java äº§å“ä»£ç ä¸Šè¿è¡Œ PMD</li>
</ul>
<p><code>pmdTest</code>:</p>
<ul>
<li><code>Pmd</code> ç±»å‹</li>
<li>åœ¨ Java æµ‹è¯•ä»£ç ä¸Šè¿è¡Œ PMD</li>
</ul>
<p><code>pmd&#123;SourceSet&#125;</code>:</p>
<ul>
<li><code>Pmd</code> ç±»å‹</li>
<li>åœ¨æŒ‡å®š source set ä¸Šçš„ Java æºæ–‡ä»¶ä¸Šè¿è¡Œ PMD</li>
</ul>
<p>PMD Plugin æ·»åŠ å¦‚ä¸‹ä¾èµ–åˆ° Java Plugin å®šä¹‰çš„ task ä¸­:</p>
<p>Table - PMD Plugin - additional task dependencies:</p>
<table>
<thead>
<tr>
<th align="left">Task name</th>
<th align="left">Depends on</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>check</code></td>
<td align="left">All PMD tasks, including <code>pmdMain</code> and <code>pmdTest</code></td>
</tr>
</tbody></table>
<h3 id="Dependency-management-6"><a href="#Dependency-management-6" class="headerlink" title="Dependency management"></a>Dependency management</h3><p>PMD Plugin æ·»åŠ å¦‚ä¸‹ä¾èµ–é…ç½®:</p>
<p>Table - PMD Plugin - dependency configurations:</p>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Meaning</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>pmd</code></td>
<td align="left">The PMD libraries to use</td>
</tr>
<tr>
<td align="left"><code>pmdAux</code></td>
<td align="left">The additional libraries that are available for type resolution during analysis. This might be useful if PMD complains about missing classes</td>
</tr>
</tbody></table>
<h3 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">pmd &#123;</span><br><span class="line">    consoleOutput = <span class="keyword">true</span></span><br><span class="line">    toolVersion = <span class="string">&quot;6.21.0&quot;</span></span><br><span class="line">    rulesMinimumPriority = <span class="number">5</span></span><br><span class="line">    ruleSets = [</span><br><span class="line">        <span class="string">&quot;category/java/errorprone.xml&quot;</span>,</span><br><span class="line">        <span class="string">&quot;category/java/bestpractices.xml&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a class="link"   target="_blank" rel="noopener" href="https://docs.gradle.org/7.3.3/dsl/org.gradle.api.plugins.quality.PmdExtension.html" >PmdExtension<i class="fas fa-external-link-alt"></i></a></p>

        </div>

        
            <div class="post-copyright-info">
                <div class="article-copyright-info-container">
    <ul>
        <li>æœ¬æ–‡æ ‡é¢˜ï¼šPlugins</li>
        <li>æœ¬æ–‡ä½œè€…ï¼šæ—å¨ç¾½</li>
        <li>åˆ›å»ºæ—¶é—´ï¼š2022-05-05 14:13:23</li>
        <li>
            æœ¬æ–‡é“¾æ¥ï¼šhttps://linweiyu21.github.io/gradle/gradle-plugins/
        </li>
        <li>
            ç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
        </li>
    </ul>
</div>

            </div>
        

        
            <ul class="post-tags-box">
                
                    <li class="tag-item">
                        <a href="/tags/Gradle/">#Gradle</a>&nbsp;
                    </li>
                
                    <li class="tag-item">
                        <a href="/tags/User-Guides/">#User Guides</a>&nbsp;
                    </li>
                
            </ul>
        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/elasticsearch/elasticsearch-guide/elasticsearch-delaying-allocation-when-a-node-leaves/"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Elasticsearch Delaying allocation when a node leaves</span>
                                <span class="post-nav-item">ä¸Šä¸€ç¯‡</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/gradle/gradle-the-directories-and-files-gradle-uses/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">The Directories and Files Gradle Uses</span>
                                <span class="post-nav-item">ä¸‹ä¸€ç¯‡</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
            <div class="comment-container">
                <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fas fa-comments">&nbsp;è¯„è®º</i>
    </div>
    

        
            
    <div class="valine-container">
        <script data-pjax
                src="//cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js"></script>
        <div id="vcomments"></div>
        <script data-pjax>
            function loadValine() {
                new Valine({
                    el: '#vcomments',
                    appId: '8xWQ0WFbKUNN4h8ixIO12etk-gzGzoHsz',
                    appKey: '7cLjTvkIsF6aIuIVSd0um89m',
                    meta: ['nick', 'mail', 'link'],
                    avatar: 'wavatar',
                    enableQQ: true,
                    placeholder: 'è¯·å¼€å§‹ä½ çš„è¡¨æ¼”',
                    lang: 'zh-CN'.toLowerCase()
                });

                function getAuthor(language) {
                    switch (language) {
                        case 'en':
                            return 'Author';
                        case 'zh-CN':
                            return 'åšä¸»';
                        default:
                            return 'Master';
                    }
                }

                // Add "Author" identify
                const getValineDomTimer = setInterval(() => {
                    const vcards = document.querySelectorAll('#vcomments .vcards .vcard');
                    if (vcards.length > 0) {
                        let author = 'æ—å¨ç¾½';

                        if (author) {
                            for (let vcard of vcards) {
                                const vnick_dom = vcard.querySelector('.vhead .vnick');
                                const vnick = vnick_dom.innerHTML;
                                if (vnick === author) {
                                    vnick_dom.innerHTML = `${vnick} <span class="author">${getAuthor(KEEP.hexo_config.language)}</span>`
                                }
                            }
                        }
                        clearInterval(getValineDomTimer);
                    } else {
                        clearInterval(getValineDomTimer);
                    }
                }, 2000);
            }

            if ('true') {
                const loadValineTimeout = setTimeout(() => {
                    loadValine();
                    clearTimeout(loadValineTimeout);
                }, 1000);
            } else {
                window.addEventListener('DOMContentLoaded', loadValine);
            }
        </script>
    </div>



        
    
</div>

            </div>
        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
            2022&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">æ—å¨ç¾½</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv">
                        è®¿é—®äººæ•°&nbsp;<span id="busuanzi_value_site_uv"></span>&ensp;
                    </span>
                
                
                    <span id="busuanzi_container_site_pv">
                        æ€»è®¿é—®é‡&nbsp;<span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            ç”± <a target="_blank" href="https://hexo.io">Hexo</a> é©±åŠ¨&nbsp;|&nbsp;ä¸»é¢˜&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.5</a>
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fas fa-comment"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Plugins"><span class="nav-number">1.</span> <span class="nav-text">Plugins</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#The-Application-Plugin"><span class="nav-number">1.1.</span> <span class="nav-text">The Application Plugin</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Building-JVM-applicatoins"><span class="nav-number">1.1.1.</span> <span class="nav-text">Building JVM applicatoins</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Building-applications-using-the-Java-Module-System"><span class="nav-number">1.1.2.</span> <span class="nav-text">Building applications using the Java Module System</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Building-a-distribution"><span class="nav-number">1.1.3.</span> <span class="nav-text">Building a distribution</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Customizing-start-script-generation"><span class="nav-number">1.1.4.</span> <span class="nav-text">Customizing start script generation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Tasks"><span class="nav-number">1.1.5.</span> <span class="nav-text">Tasks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Application-extension"><span class="nav-number">1.1.6.</span> <span class="nav-text">Application extension</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#The-Base-Plugin"><span class="nav-number">1.2.</span> <span class="nav-text">The Base Plugin</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Usage"><span class="nav-number">1.2.1.</span> <span class="nav-text">Usage</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Task"><span class="nav-number">1.2.2.</span> <span class="nav-text">Task</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Dependency-management"><span class="nav-number">1.2.3.</span> <span class="nav-text">Dependency management</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#default"><span class="nav-number">1.2.3.1.</span> <span class="nav-text">default</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#archives"><span class="nav-number">1.2.3.2.</span> <span class="nav-text">archives</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Contributed-extensions"><span class="nav-number">1.2.4.</span> <span class="nav-text">Contributed extensions</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Build-Init-Plugin"><span class="nav-number">1.3.</span> <span class="nav-text">Build Init Plugin</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Supported-Gradle-build-types"><span class="nav-number">1.3.1.</span> <span class="nav-text">Supported Gradle build types</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Tasks-1"><span class="nav-number">1.3.2.</span> <span class="nav-text">Tasks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#What-to-create"><span class="nav-number">1.3.3.</span> <span class="nav-text">What to create</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Build-init-types"><span class="nav-number">1.3.4.</span> <span class="nav-text">Build init types</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#pom-build-type-Maven-conversion"><span class="nav-number">1.3.4.1.</span> <span class="nav-text">pom build type (Maven conversion)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#java-application-build-type"><span class="nav-number">1.3.4.2.</span> <span class="nav-text">java-application build type</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#java-library-build-type"><span class="nav-number">1.3.4.3.</span> <span class="nav-text">java-library build type</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#java-gradle-plugin-build-type"><span class="nav-number">1.3.4.4.</span> <span class="nav-text">java-gradle-plugin build type</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#groovy-library-build-type"><span class="nav-number">1.3.4.5.</span> <span class="nav-text">groovy-library build type</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#groovy-application-build-type"><span class="nav-number">1.3.4.6.</span> <span class="nav-text">groovy-application build type</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#groovy-gradle-plugin-build-type"><span class="nav-number">1.3.4.7.</span> <span class="nav-text">groovy-gradle-plugin build type</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#basic-build-type"><span class="nav-number">1.3.4.8.</span> <span class="nav-text">basic build type</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#The-Checkstyle-Plugin"><span class="nav-number">1.4.</span> <span class="nav-text">The Checkstyle Plugin</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Tasks-2"><span class="nav-number">1.4.1.</span> <span class="nav-text">Tasks</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#checkstyleMain"><span class="nav-number">1.4.1.1.</span> <span class="nav-text">checkstyleMain</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#checkstyleTest"><span class="nav-number">1.4.1.2.</span> <span class="nav-text">checkstyleTest</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#checkstyleSourceSet"><span class="nav-number">1.4.1.3.</span> <span class="nav-text">checkstyleSourceSet</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Dependencies-added-to-other-tasks"><span class="nav-number">1.4.2.</span> <span class="nav-text">Dependencies added to other tasks</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#check"><span class="nav-number">1.4.2.1.</span> <span class="nav-text">check</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Project-layout"><span class="nav-number">1.4.3.</span> <span class="nav-text">Project layout</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Dependency-management-1"><span class="nav-number">1.4.4.</span> <span class="nav-text">Dependency management</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#The-CodeNarc-Plugin"><span class="nav-number">1.5.</span> <span class="nav-text">The CodeNarc Plugin</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Tasks-3"><span class="nav-number">1.5.1.</span> <span class="nav-text">Tasks</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#codenarcMain"><span class="nav-number">1.5.1.1.</span> <span class="nav-text">codenarcMain</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#codenarcTest"><span class="nav-number">1.5.1.2.</span> <span class="nav-text">codenarcTest</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#codenarcSourceSet"><span class="nav-number">1.5.1.3.</span> <span class="nav-text">codenarcSourceSet</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Dependencies-added-to-other-tasks-1"><span class="nav-number">1.5.2.</span> <span class="nav-text">Dependencies added to other tasks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Project-layout-1"><span class="nav-number">1.5.3.</span> <span class="nav-text">Project layout</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Dependency-management-2"><span class="nav-number">1.5.4.</span> <span class="nav-text">Dependency management</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#The-Distribution-Plugin"><span class="nav-number">1.6.</span> <span class="nav-text">The Distribution Plugin</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Tasks-4"><span class="nav-number">1.6.1.</span> <span class="nav-text">Tasks</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#distZip"><span class="nav-number">1.6.1.1.</span> <span class="nav-text">distZip</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#distTar"><span class="nav-number">1.6.1.2.</span> <span class="nav-text">distTar</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#assembleDist"><span class="nav-number">1.6.1.3.</span> <span class="nav-text">assembleDist</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Distribution-contents"><span class="nav-number">1.6.2.</span> <span class="nav-text">Distribution contents</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Publishing"><span class="nav-number">1.6.3.</span> <span class="nav-text">Publishing</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#The-Groovy-Plugin"><span class="nav-number">1.7.</span> <span class="nav-text">The Groovy Plugin</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Tasks-5"><span class="nav-number">1.7.1.</span> <span class="nav-text">Tasks</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#compileGroovy"><span class="nav-number">1.7.1.1.</span> <span class="nav-text">compileGroovy</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#compileTestGroovy"><span class="nav-number">1.7.1.2.</span> <span class="nav-text">compileTestGroovy</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#compile-SourceSet-Groovy"><span class="nav-number">1.7.1.3.</span> <span class="nav-text">compile{SourceSet}Groovy</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#groovydoc"><span class="nav-number">1.7.1.4.</span> <span class="nav-text">groovydoc</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Dependency-management-3"><span class="nav-number">1.7.2.</span> <span class="nav-text">Dependency management</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Project-layout-2"><span class="nav-number">1.7.3.</span> <span class="nav-text">Project layout</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#src-main-java"><span class="nav-number">1.7.3.1.</span> <span class="nav-text">src&#x2F;main&#x2F;java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#src-main-resources"><span class="nav-number">1.7.3.2.</span> <span class="nav-text">src&#x2F;main&#x2F;resources</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#src-main-groovy"><span class="nav-number">1.7.3.3.</span> <span class="nav-text">src&#x2F;main&#x2F;groovy</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#src-test-java"><span class="nav-number">1.7.3.4.</span> <span class="nav-text">src&#x2F;test&#x2F;java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#src-test-resources"><span class="nav-number">1.7.3.5.</span> <span class="nav-text">src&#x2F;test&#x2F;resources</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#src-test-groovy"><span class="nav-number">1.7.3.6.</span> <span class="nav-text">src&#x2F;test&#x2F;groovy</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#src-sourceSet-java"><span class="nav-number">1.7.3.7.</span> <span class="nav-text">src&#x2F;{sourceSet}&#x2F;java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#src-sourceSet-resources"><span class="nav-number">1.7.3.8.</span> <span class="nav-text">src&#x2F;{sourceSet}&#x2F;resources</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#src-sourceSet-groovy"><span class="nav-number">1.7.3.9.</span> <span class="nav-text">src&#x2F;{sourceSet}&#x2F;groovy</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Changing-the-project-layout"><span class="nav-number">1.7.4.</span> <span class="nav-text">Changing the project layout</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Dependency-management-4"><span class="nav-number">1.7.5.</span> <span class="nav-text">Dependency management</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Automatic-configuration-of-groovyClasspath"><span class="nav-number">1.7.6.</span> <span class="nav-text">Automatic configuration of groovyClasspath</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Convention-properties"><span class="nav-number">1.7.7.</span> <span class="nav-text">Convention properties</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Source-set-properties"><span class="nav-number">1.7.8.</span> <span class="nav-text">Source set properties</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#source-set-properties-groovy"><span class="nav-number">1.7.8.1.</span> <span class="nav-text">source set properties groovy</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#source-set-properties-groovy-srcDirs"><span class="nav-number">1.7.8.2.</span> <span class="nav-text">source set properties groovy.srcDirs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#source-set-properties-allGroovy"><span class="nav-number">1.7.8.3.</span> <span class="nav-text">source set properties allGroovy</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#modified-source-set-properties"><span class="nav-number">1.7.8.4.</span> <span class="nav-text">modified source set properties</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GroovyCompile"><span class="nav-number">1.7.9.</span> <span class="nav-text">GroovyCompile</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Compiling-and-testing-for-Java-6-or-Java-7"><span class="nav-number">1.7.10.</span> <span class="nav-text">Compiling and testing for Java 6 or Java 7</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#The-IDEA-Plugin"><span class="nav-number">1.8.</span> <span class="nav-text">The IDEA Plugin</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Usage-1"><span class="nav-number">1.8.1.</span> <span class="nav-text">Usage</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Tasks-6"><span class="nav-number">1.8.2.</span> <span class="nav-text">Tasks</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#The-JaCoco-Plugin"><span class="nav-number">1.9.</span> <span class="nav-text">The JaCoco Plugin</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Configuring-the-JaCoCo-Plugin"><span class="nav-number">1.9.1.</span> <span class="nav-text">Configuring the JaCoCo Plugin</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JaCoCo-Report-configuration"><span class="nav-number">1.9.2.</span> <span class="nav-text">JaCoCo Report configuration</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#The-Java-Plugin"><span class="nav-number">1.10.</span> <span class="nav-text">The Java Plugin</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Tasks-7"><span class="nav-number">1.10.1.</span> <span class="nav-text">Tasks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SourceSet-Tasks"><span class="nav-number">1.10.2.</span> <span class="nav-text">SourceSet Tasks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Lifecycle-Tasks"><span class="nav-number">1.10.3.</span> <span class="nav-text">Lifecycle Tasks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Project-layout-3"><span class="nav-number">1.10.4.</span> <span class="nav-text">Project layout</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Changing-the-project-layout-1"><span class="nav-number">1.10.5.</span> <span class="nav-text">Changing the project layout</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Source-sets"><span class="nav-number">1.10.6.</span> <span class="nav-text">Source sets</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Source-set-properties-1"><span class="nav-number">1.10.7.</span> <span class="nav-text">Source set properties</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Dependency-management-5"><span class="nav-number">1.10.8.</span> <span class="nav-text">Dependency management</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Dependency-configurations"><span class="nav-number">1.10.8.1.</span> <span class="nav-text">Dependency configurations</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SourceSet-dependency-configurations"><span class="nav-number">1.10.8.2.</span> <span class="nav-text">SourceSet dependency configurations</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Contributed-extension"><span class="nav-number">1.10.9.</span> <span class="nav-text">Contributed extension</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#The-Java-Library-Plugin"><span class="nav-number">1.11.</span> <span class="nav-text">The Java Library Plugin</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#API-and-implementation-separation"><span class="nav-number">1.11.1.</span> <span class="nav-text">API and implementation separation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Recognizing-API-and-implementation-dependencies"><span class="nav-number">1.11.2.</span> <span class="nav-text">Recognizing API and implementation dependencies</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#The-Java-Library-Plugin-configurations"><span class="nav-number">1.11.3.</span> <span class="nav-text">The Java Library Plugin configurations</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-classes-instead-of-jar-for-compilation"><span class="nav-number">1.11.4.</span> <span class="nav-text">Using classes instead of jar for compilation</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Increased-memory-usage-for-consumers"><span class="nav-number">1.11.4.1.</span> <span class="nav-text">Increased memory usage for consumers</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Significant-build-performance-drop-on-Windows-for-huge-multi-projects"><span class="nav-number">1.11.4.2.</span> <span class="nav-text">Significant build performance drop on Windows for huge multi-projects</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Distribution-a-library"><span class="nav-number">1.11.5.</span> <span class="nav-text">Distribution a library</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#The-Java-Library-Distribution-Plugin"><span class="nav-number">1.12.</span> <span class="nav-text">The Java Library Distribution Plugin</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Tasks-8"><span class="nav-number">1.12.1.</span> <span class="nav-text">Tasks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Including-other-resources-in-the-distribution"><span class="nav-number">1.12.2.</span> <span class="nav-text">Including other resources in the distribution</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#The-Java-Platform-Plugin"><span class="nav-number">1.13.</span> <span class="nav-text">The Java Platform Plugin</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Usage-2"><span class="nav-number">1.13.1.</span> <span class="nav-text">Usage</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#API-and-runtime-separation"><span class="nav-number">1.13.2.</span> <span class="nav-text">API and runtime separation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Local-project-constraints"><span class="nav-number">1.13.3.</span> <span class="nav-text">Local project constraints</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Sourcing-constraints-from-another-platform"><span class="nav-number">1.13.4.</span> <span class="nav-text">Sourcing constraints from another platform</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Publishing-platforms"><span class="nav-number">1.13.5.</span> <span class="nav-text">Publishing platforms</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Consuming-platforms"><span class="nav-number">1.13.6.</span> <span class="nav-text">Consuming platforms</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Maven-Publish-Plugin"><span class="nav-number">1.14.</span> <span class="nav-text">Maven Publish Plugin</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Tasks-9"><span class="nav-number">1.14.1.</span> <span class="nav-text">Tasks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Publications"><span class="nav-number">1.14.2.</span> <span class="nav-text">Publications</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Identity-values-in-the-generated-POM"><span class="nav-number">1.14.2.1.</span> <span class="nav-text">Identity values in the generated POM</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Customizing-the-generated-POM"><span class="nav-number">1.14.2.2.</span> <span class="nav-text">Customizing the generated POM</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Customizing-dependencies-versions"><span class="nav-number">1.14.2.3.</span> <span class="nav-text">Customizing dependencies versions</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Declared-versions-%E9%BB%98%E8%AE%A4"><span class="nav-number">1.14.2.3.1.</span> <span class="nav-text">Declared versions(é»˜è®¤)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Resolved-versions"><span class="nav-number">1.14.2.3.2.</span> <span class="nav-text">Resolved versions</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Repositories"><span class="nav-number">1.14.3.</span> <span class="nav-text">Repositories</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Snapshots-and-release-repositories"><span class="nav-number">1.14.3.1.</span> <span class="nav-text">Snapshots and release repositories</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Publishing-to-Maven-Local"><span class="nav-number">1.14.3.2.</span> <span class="nav-text">Publishing to Maven Local</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Publishing-Maven-relocation-information"><span class="nav-number">1.14.4.</span> <span class="nav-text">Publishing Maven relocation information</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Complete-example"><span class="nav-number">1.14.5.</span> <span class="nav-text">Complete example</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#The-PMD-Plugin"><span class="nav-number">1.15.</span> <span class="nav-text">The PMD Plugin</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Tasks-10"><span class="nav-number">1.15.1.</span> <span class="nav-text">Tasks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Dependency-management-6"><span class="nav-number">1.15.2.</span> <span class="nav-text">Dependency management</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Configuration"><span class="nav-number">1.15.3.</span> <span class="nav-text">Configuration</span></a></li></ol></li></ol></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="æœç´¢..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>



<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/dark-light-toggle.js"></script>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/local-search.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/code-copy.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/lazyload.js"></script>


<div class="post-scripts pjax">
    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/left-side-toggle.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/libs/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/toc.js"></script>
    
</div>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/libs/pjax.min.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            KEEP.refresh();
        });
    });
</script>



</body>
</html>
