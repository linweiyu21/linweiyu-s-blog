<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Micronaut,Groovy,Gradle,Java,ÊñáÊ°£,‰∏≠Êñá">
    <meta name="description" content="Micronaut Groovy Gradle Java ÊñáÊ°£ ‰∏≠Êñá">
    <meta name="author" content="ÊûóÂ®ÅÁæΩ">
    
    <title>
        
            Micronaut ‰∏≠ÊñáÊñáÊ°£ The HTTP Server |
        
        ÊûóÂ®ÅÁæΩÁöÑÁ¨îËÆ∞
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/logo.svg">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/css/font-awesome.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"zh-CN","path":"search.json"};
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":true,"init_open":true},"style":{"primary_color":"rgb(153,153,0)","avatar":"/images/avatar.jpg","favicon":"/images/logo.svg","article_img_align":"left","left_side_width":"400px","content_max_width":"920px","hover":{"shadow":true,"scale":true},"first_screen":{"enable":true,"background_img":null,"description":"def containsüöÄ = ['Micronaut', 'Groovy', 'Gradle', 'etc']"},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":true}}},"local_search":{"enable":true,"preload":true},"code_copy":{"enable":true,"style":"mac"},"pjax":{"enable":true},"lazyload":{"enable":true},"version":"3.4.5"};
    KEEP.language_ago = {"second":"%s ÁßíÂâç","minute":"%s ÂàÜÈíüÂâç","hour":"%s Â∞èÊó∂Ââç","day":"%s Â§©Ââç","week":"%s Âë®Ââç","month":"%s ‰∏™ÊúàÂâç","year":"%s Âπ¥Ââç"};
  </script>
<meta name="generator" content="Hexo 6.1.0"></head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fas fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                ÊûóÂ®ÅÁæΩÁöÑÁ¨îËÆ∞
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                È¶ñÈ°µ
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/categories"
                            >
                                ÂàÜÁ±ª
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/tags"
                            >
                                Ê†áÁ≠æ
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                ÂΩíÊ°£
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >
                                ÂÖ≥‰∫é
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">È¶ñÈ°µ</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/categories">ÂàÜÁ±ª</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/tags">Ê†áÁ≠æ</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">ÂΩíÊ°£</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about">ÂÖ≥‰∫é</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

    <a target="_blank" rel="noopener" href="https://github.com/linweiyu21/" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80"
        viewBox="0 0 250 250" style="fill:#64CEAA; color:#fff; position: absolute; top: 0; border: 0; right: 0;"
        aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path
          d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
          fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path
          d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
          fill="currentColor" class="octo-body"></path>
      </svg></a>
    <style>
      .github-corner:hover .octo-arm {
        animation: octocat-wave 560ms ease-in-out
      }

      @keyframes octocat-wave {

        0%,
        100% {
          transform: rotate(0)
        }

        20%,
        60% {
          transform: rotate(-25deg)
        }

        40%,
        80% {
          transform: rotate(10deg)
        }
      }

      @media (max-width:500px) {
        .github-corner:hover .octo-arm {
          animation: none
        }

        .github-corner .octo-arm {
          animation: octocat-wave 560ms ease-in-out
        }
      }
    </style>
</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">Micronaut ‰∏≠ÊñáÊñáÊ°£ The HTTP Server</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/avatar.jpg">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">ÊûóÂ®ÅÁæΩ</span>
                        
                            <span class="author-label">Lv8</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;
        <span class="pc">2022-04-29 09:43:17</span>
        <span class="mobile">2022-04-29 09:43</span>
    </span>
    
        <span class="article-categories article-meta-item">
            <i class="fas fa-folder"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/Micronaut-%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3/">Micronaut ‰∏≠ÊñáÊñáÊ°£</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/Micronaut/">Micronaut</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/Groovy/">Groovy</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/%E4%B8%AD%E6%96%87/">‰∏≠Êñá</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
        <span class="article-pv article-meta-item">
            <i class="fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <!-- TOC -->

<ul>
<li><a href="#the-http-server">The HTTP Server</a><ul>
<li><a href="#running-the-embedded-server-%E8%BF%90%E8%A1%8C%E5%86%85%E5%B5%8C%E7%9A%84-server">Running the Embedded Server (ËøêË°åÂÜÖÂµåÁöÑ Server)</a></li>
<li><a href="#running-server-on-a-specific-port-%E5%9C%A8%E6%8C%87%E5%AE%9A%E7%AB%AF%E5%8F%A3%E4%B8%8A%E8%BF%90%E8%A1%8C-server">Running Server on a Specific Port (Âú®ÊåáÂÆöÁ´ØÂè£‰∏äËøêË°å Server)</a></li>
<li><a href="#http-routing-http-%E8%B7%AF%E7%94%B1">HTTP Routing (HTTP Ë∑ØÁî±)</a><ul>
<li><a href="#uri-paths-uri-%E8%B7%AF%E5%BE%84">URI Paths (URI Ë∑ØÂæÑ)</a></li>
<li><a href="#uri-path-variables-uri-%E8%B7%AF%E5%BE%84%E5%8F%98%E9%87%8F">URI Path Variables (URI Ë∑ØÂæÑÂèòÈáè)</a></li>
<li><a href="#uri-reserved-character-matching-uri-%E4%BF%9D%E7%95%99%E5%AD%97%E7%AC%A6%E5%8C%B9%E9%85%8D">URI Reserved Character Matching (URI ‰øùÁïôÂ≠óÁ¨¶ÂåπÈÖç)</a></li>
<li><a href="#routing-annotations-%E8%B7%AF%E7%94%B1%E6%B3%A8%E8%A7%A3">Routing Annotations (Ë∑ØÁî±Ê≥®Ëß£)</a></li>
<li><a href="#multiple-uris-%E5%A4%9A%E4%B8%AA-uri">Multiple URIs (Â§ö‰∏™ URI)</a></li>
<li><a href="#building-routes-programmatically-%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%9C%B0%E6%9E%84%E5%BB%BA%E8%B7%AF%E7%94%B1">Building Routes Programmatically (ÁºñÁ®ãÂºèÂú∞ÊûÑÂª∫Ë∑ØÁî±)</a></li>
<li><a href="#route-compile-time-validation-%E8%B7%AF%E7%94%B1%E7%BC%96%E8%AF%91%E6%97%B6%E6%A0%A1%E9%AA%8C">Route Compile-Time Validation (Ë∑ØÁî±ÁºñËØëÊó∂Ê†°È™å)</a></li>
<li><a href="#routing-non-standard-http-methods-%E8%B7%AF%E7%94%B1%E9%9D%9E%E6%A0%87%E5%87%86-http-%E6%96%B9%E6%B3%95">Routing non-standard HTTP methods (Ë∑ØÁî±ÈùûÊ†áÂáÜ HTTP ÊñπÊ≥ï)</a></li>
</ul>
</li>
<li><a href="#simple-request-binding-%E7%AE%80%E5%8D%95%E8%AF%B7%E6%B1%82%E7%BB%91%E5%AE%9A">Simple Request Binding (ÁÆÄÂçïËØ∑Ê±ÇÁªëÂÆö)</a><ul>
<li><a href="#binding-annotations-%E7%BB%91%E5%AE%9A%E6%B3%A8%E8%A7%A3">Binding Annotations (ÁªëÂÆöÊ≥®Ëß£)</a></li>
<li><a href="#stream-support-stream-%E6%94%AF%E6%8C%81">Stream Support (Stream ÊîØÊåÅ)</a></li>
<li><a href="#binding-from-multiple-query-values-%E4%BD%BF%E7%94%A8%E5%A4%9A%E4%B8%AA%E8%AF%B7%E6%B1%82%E5%80%BC%E8%BF%9B%E8%A1%8C%E7%BB%91%E5%AE%9A">Binding from Multiple Query values (‰ΩøÁî®Â§ö‰∏™ËØ∑Ê±ÇÂÄºËøõË°åÁªëÂÆö)</a></li>
<li><a href="#binding-from-multiple-bindable-values-%E4%BB%8E%E5%A4%9A%E4%B8%AA%E5%8F%AF%E7%BB%91%E5%AE%9A%E5%80%BC%E4%B8%AD%E8%BF%9B%E8%A1%8C%E7%BB%91%E5%AE%9A">Binding from Multiple Bindable values (‰ªéÂ§ö‰∏™ÂèØÁªëÂÆöÂÄº‰∏≠ËøõË°åÁªëÂÆö)</a></li>
<li><a href="#bindable-types-%E5%8F%AF%E7%BB%91%E5%AE%9A%E7%B1%BB%E5%9E%8B">Bindable Types (ÂèØÁªëÂÆöÁ±ªÂûã)</a></li>
<li><a href="#type-based-binding-parameters-%E5%9F%BA%E4%BA%8E%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8F%82%E6%95%B0%E7%BB%91%E5%AE%9A">Type-Based Binding Parameters (Âü∫‰∫éÁ±ªÂûãÁöÑÂèÇÊï∞ÁªëÂÆö)</a></li>
<li><a href="#variable-resolution-%E5%8F%98%E9%87%8F%E8%A7%A3%E6%9E%90">Variable resolution (ÂèòÈáèËß£Êûê)</a></li>
</ul>
</li>
<li><a href="#custom-argument-binding-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%82%E6%95%B0%E7%BB%91%E5%AE%9A">Custom Argument Binding (Ëá™ÂÆö‰πâÂèÇÊï∞ÁªëÂÆö)</a><ul>
<li><a href="#annotatedrequestargumentbinder-%E6%B3%A8%E8%A7%A3%E4%BF%AE%E9%A5%B0%E7%9A%84%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E7%BB%91%E5%AE%9A">AnnotatedRequestArgumentBinder (Ê≥®Ëß£‰øÆÈ•∞ÁöÑËØ∑Ê±ÇÂèÇÊï∞ÁªëÂÆö)</a></li>
<li><a href="#typedrequestargumentbinder-%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E7%B1%BB%E5%9E%8B%E7%BB%91%E5%AE%9A">TypedRequestArgumentBinder (ËØ∑Ê±ÇÂèÇÊï∞Á±ªÂûãÁªëÂÆö)</a></li>
</ul>
</li>
<li><a href="#host-resolution-host-%E8%A7%A3%E6%9E%90">Host Resolution (Host Ëß£Êûê)</a></li>
<li><a href="#locale-resolution-%E6%9C%AC%E5%9C%B0%E5%8C%96%E8%A7%A3%E6%9E%90">Locale Resolution (Êú¨Âú∞ÂåñËß£Êûê)</a></li>
<li><a href="#client-ip-address-%E5%AE%A2%E6%88%B7%E7%AB%AF-ip-%E5%9C%B0%E5%9D%80">Client IP Address (ÂÆ¢Êà∑Á´Ø IP Âú∞ÂùÄ)</a></li>
<li><a href="#the-httprequest-and-httpresponse-httprequest-%E5%92%8C-httpresponse">The HttpRequest and HttpResponse (HttpRequest Âíå HttpResponse)</a></li>
<li><a href="#response-status-%E5%93%8D%E5%BA%94%E7%8A%B6%E6%80%81">Response Status (ÂìçÂ∫îÁä∂ÊÄÅ)</a></li>
<li><a href="#response-content-type-%E5%93%8D%E5%BA%94%E7%9A%84-content-type">Response Content-Type (ÂìçÂ∫îÁöÑ Content-Type)</a></li>
<li><a href="#accepted-request-content-type-%E5%8F%AF%E6%8E%A5%E5%8F%97%E7%9A%84%E8%AF%B7%E6%B1%82-content-type">Accepted Request Content-Type (ÂèØÊé•ÂèóÁöÑËØ∑Ê±Ç Content-Type)</a><ul>
<li><a href="#customing-processed-content-types-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%A4%84%E7%90%86%E7%9A%84-content-type">Customing Processed Content Types (Ëá™ÂÆö‰πâÂ§ÑÁêÜÁöÑ Content-Type)</a></li>
</ul>
</li>
<li><a href="#reactive-http-request-processing-%E5%93%8D%E5%BA%94%E5%BC%8F-http-%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86">Reactive HTTP Request Processing (ÂìçÂ∫îÂºè HTTP ËØ∑Ê±ÇÂ§ÑÁêÜ)</a><ul>
<li><a href="#using-the-body-annotation-%E4%BD%BF%E7%94%A8-body-%E6%B3%A8%E8%A7%A3">Using the <code>@Body</code> Annotation (‰ΩøÁî® <code>@Body</code> Ê≥®Ëß£)</a></li>
<li><a href="#reactive-responses-%E5%93%8D%E5%BA%94%E5%BC%8F%E5%93%8D%E5%BA%94">Reactive Responses (ÂìçÂ∫îÂºèÂìçÂ∫î)</a></li>
</ul>
</li>
<li><a href="#json-binding-with-jackson-%E4%BD%BF%E7%94%A8-jackson-%E8%BF%9B%E8%A1%8C-json-%E7%BB%91%E5%AE%9A">JSON Binding with Jackson (‰ΩøÁî® Jackson ËøõË°å JSON ÁªëÂÆö)</a><ul>
<li><a href="#binding-using-reactive-frameworks-%E4%BD%BF%E7%94%A8%E5%93%8D%E5%BA%94%E5%BC%8F%E6%A1%86%E6%9E%B6%E8%BF%9B%E8%A1%8C%E7%BB%91%E5%AE%9A">Binding using Reactive Frameworks (‰ΩøÁî®ÂìçÂ∫îÂºèÊ°ÜÊû∂ËøõË°åÁªëÂÆö)</a></li>
<li><a href="#binding-using-completablefuture-%E4%BD%BF%E7%94%A8-completablefuture-%E8%BF%9B%E8%A1%8C%E7%BB%91%E5%AE%9A">Binding Using CompletableFuture (‰ΩøÁî® CompletableFuture ËøõË°åÁªëÂÆö)</a></li>
<li><a href="#binding-using-pojos-%E4%BD%BF%E7%94%A8-pojo-%E8%BF%9B%E8%A1%8C%E7%BB%91%E5%AE%9A">Binding using POJOs (‰ΩøÁî® POJO ËøõË°åÁªëÂÆö)</a></li>
<li><a href="#jackson-configuration-jackson-%E9%85%8D%E7%BD%AE">Jackson Configuration (Jackson ÈÖçÁΩÆ)</a><ul>
<li><a href="#features-%E7%89%B9%E6%80%A7">Features (ÁâπÊÄß)</a></li>
<li><a href="#further-customing-jsonfactory-%E6%9B%B4%E6%B7%B1%E5%85%A5%E8%87%AA%E5%AE%9A%E4%B9%89-jsonfactory-">Further customing <code>JsonFactory</code> (Êõ¥Ê∑±ÂÖ•Ëá™ÂÆö‰πâ <code>JsonFactory</code> )</a></li>
<li><a href="#support-for-jsonview-jsonview-%E7%9A%84%E6%94%AF%E6%8C%81">Support for <code>@JsonView</code> (<code>@JsonView</code> ÁöÑÊîØÊåÅ)</a></li>
<li><a href="#beans-beans">Beans (Beans)</a></li>
<li><a href="#service-loader-service-%E5%8A%A0%E8%BD%BD%E5%99%A8">Service Loader (Service Âä†ËΩΩÂô®)</a></li>
<li><a href="#number-precision-%E6%95%B0%E5%80%BC%E7%B2%BE%E7%A1%AE%E6%80%A7">Number Precision (Êï∞ÂÄºÁ≤æÁ°ÆÊÄß)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#data-validation-%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C">Data Validation (Êï∞ÊçÆÊ†°È™å)</a></li>
<li><a href="#serving-static-resources-%E6%8F%90%E4%BE%9B%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90">Serving Static Resources (Êèê‰æõÈùôÊÄÅËµÑÊ∫ê)</a></li>
<li><a href="#error-handling-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86">Error Handling (ÈîôËØØÂ§ÑÁêÜ)</a><ul>
<li><a href="#status-handlers-%E7%8A%B6%E6%80%81%E5%A4%84%E7%90%86%E5%99%A8">Status Handlers (Áä∂ÊÄÅÂ§ÑÁêÜÂô®)</a></li>
<li><a href="#local-error-handling-%E6%9C%AC%E5%9C%B0%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86">Local Error Handling (Êú¨Âú∞ÂºÇÂ∏∏Â§ÑÁêÜ)</a></li>
<li><a href="#global-error-handling-%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86">Global Error Handling (ÂÖ®Â±ÄÂºÇÂ∏∏Â§ÑÁêÜ)</a></li>
<li><a href="#exceptionhandler-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%99%A8">ExceptionHandler (ÂºÇÂ∏∏Â§ÑÁêÜÂô®)</a></li>
<li><a href="#built-in-exception-handlers-%E5%86%85%E7%BD%AE%E7%9A%84%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%99%A8">Built-In Exception Handlers (ÂÜÖÁΩÆÁöÑÂºÇÂ∏∏Â§ÑÁêÜÂô®)</a><ul>
<li><a href="#custom-exception-handler-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%99%A8">Custom Exception Handler (Ëá™ÂÆö‰πâÂºÇÂ∏∏Â§ÑÁêÜÂô®)</a></li>
</ul>
</li>
<li><a href="#error-formatting-%E9%94%99%E8%AF%AF%E6%A0%BC%E5%BC%8F">Error Formatting (ÈîôËØØÊ†ºÂºè)</a></li>
</ul>
</li>
<li><a href="#api-versioning-api-%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6">API Versioning (API ÁâàÊú¨ÊéßÂà∂)</a><ul>
<li><a href="#default-version-%E9%BB%98%E8%AE%A4%E7%89%88%E6%9C%AC">Default Version (ÈªòËÆ§ÁâàÊú¨)</a></li>
<li><a href="#versioning-client-requests-%E7%89%88%E6%9C%AC%E5%8C%96%E7%9A%84%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%AF%B7%E6%B1%82">Versioning Client Requests (ÁâàÊú¨ÂåñÁöÑÂÆ¢Êà∑Á´ØËØ∑Ê±Ç)</a></li>
</ul>
</li>
<li><a href="#handling-form-data-%E5%A4%84%E7%90%86%E8%A1%A8%E5%8D%95%E6%95%B0%E6%8D%AE">Handling Form Data (Â§ÑÁêÜË°®ÂçïÊï∞ÊçÆ)</a></li>
<li><a href="#writing-response-data-%E7%BC%96%E5%86%99%E5%93%8D%E5%BA%94%E6%95%B0%E6%8D%AE">Writing Response Data (ÁºñÂÜôÂìçÂ∫îÊï∞ÊçÆ)</a><ul>
<li><a href="#performing-blocking-io-%E8%BF%90%E8%A1%8C%E9%98%BB%E5%A1%9E-io">Performing Blocking I&#x2F;O (ËøêË°åÈòªÂ°û I&#x2F;O)</a><ul>
<li><a href="#writable-%E5%8F%AF%E5%86%99%E7%9A%84">Writable (ÂèØÂÜôÁöÑ)</a></li>
<li><a href="#inputstream-%E8%BE%93%E5%85%A5%E6%B5%81">InputStream (ËæìÂÖ•ÊµÅ)</a></li>
<li><a href="#404-responses-404-%E5%93%8D%E5%BA%94">404 Responses (404 ÂìçÂ∫î)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#file-uploads-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0">File Uploads (Êñá‰ª∂‰∏ä‰º†)</a><ul>
<li><a href="#route-arguments-%E8%B7%AF%E7%94%B1%E5%8F%82%E6%95%B0">Route Arguments (Ë∑ØÁî±ÂèÇÊï∞)</a><ul>
<li><a href="#chunk-data-types-%E5%9D%97%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">Chunk Data Types (ÂùóÊï∞ÊçÆÁ±ªÂûã)</a></li>
<li><a href="#whole-data-types-%E5%AE%8C%E6%95%B4%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">Whole Data Types (ÂÆåÊï¥Êï∞ÊçÆÁ±ªÂûã)</a></li>
</ul>
</li>
<li><a href="#multiple-uploads-%E5%A4%9A%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0">Multiple Uploads (Â§öÊñá‰ª∂‰∏ä‰º†)</a><ul>
<li><a href="#different-names-%E4%B8%8D%E5%90%8C%E7%9A%84%E5%90%8D%E5%AD%97">Different Names (‰∏çÂêåÁöÑÂêçÂ≠ó)</a></li>
<li><a href="#same-name-%E7%9B%B8%E5%90%8C%E7%9A%84%E5%90%8D%E5%AD%97">Same name (Áõ∏ÂêåÁöÑÂêçÂ≠ó)</a></li>
</ul>
</li>
<li><a href="#whole-body-binding-%E5%AE%8C%E6%95%B4-body-%E7%BB%91%E5%AE%9A">Whole Body Binding (ÂÆåÊï¥ Body ÁªëÂÆö)</a></li>
</ul>
</li>
<li><a href="#file-transfers-%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93">File Transfers (Êñá‰ª∂‰º†Ëæì)</a><ul>
<li><a href="#sending-file-objects-%E5%8F%91%E9%80%81%E6%96%87%E4%BB%B6%E5%AF%B9%E8%B1%A1">Sending File Objects (ÂèëÈÄÅÊñá‰ª∂ÂØπË±°)</a></li>
<li><a href="#sending-an-inputstream-%E5%8F%91%E9%80%81%E4%B8%80%E4%B8%AA-inputstream">Sending an InputStream (ÂèëÈÄÅ‰∏Ä‰∏™ InputStream)</a></li>
<li><a href="#cache-configuration-%E7%BC%93%E5%AD%98%E9%85%8D%E7%BD%AE">Cache Configuration (ÁºìÂ≠òÈÖçÁΩÆ)</a></li>
</ul>
</li>
<li><a href="#http-filters-http-%E8%BF%87%E6%BB%A4%E5%99%A8">HTTP Filters (HTTP ËøáÊª§Âô®)</a><ul>
<li><a href="#writing-a-filter-%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E8%BF%87%E6%BB%A4%E5%99%A8">Writing a Filter (ÁºñÂÜô‰∏Ä‰∏™ËøáÊª§Âô®)</a></li>
</ul>
</li>
<li><a href="#http-sessions-http-%E4%BC%9A%E8%AF%9D">HTTP Sessions (HTTP ‰ºöËØù)</a><ul>
<li><a href="#enabling-sessions-%E5%BC%80%E5%90%AF%E4%BC%9A%E8%AF%9D">Enabling Sessions (ÂºÄÂêØ‰ºöËØù)</a><ul>
<li><a href="#redis-sessions-redis-%E4%BC%9A%E8%AF%9D">Redis Sessions (Redis ‰ºöËØù)</a></li>
</ul>
</li>
<li><a href="#configuring-session-resolution-%E9%85%8D%E7%BD%AE%E4%BC%9A%E8%AF%9D%E8%A7%A3%E6%9E%90">Configuring Session Resolution (ÈÖçÁΩÆ‰ºöËØùËß£Êûê)</a></li>
<li><a href="#working-with-sessions-%E4%BD%BF%E7%94%A8%E4%BC%9A%E8%AF%9D">Working with Sessions (‰ΩøÁî®‰ºöËØù)</a></li>
<li><a href="#session-clients-%E4%BC%9A%E8%AF%9D%E5%AE%A2%E6%88%B7%E7%AB%AF">Session Clients (‰ºöËØùÂÆ¢Êà∑Á´Ø)</a></li>
<li><a href="#using-sessionvalue-%E4%BD%BF%E7%94%A8-sessionvalue-%E6%B3%A8%E8%A7%A3">Using <code>@SessionValue</code> (‰ΩøÁî® <code>@SessionValue</code> Ê≥®Ëß£)</a></li>
<li><a href="#session-events-%E4%BC%9A%E8%AF%9D%E4%BA%8B%E4%BB%B6">Session Events (‰ºöËØù‰∫ã‰ª∂)</a></li>
</ul>
</li>
<li><a href="#server-sent-events-server-%E5%8F%91%E9%80%81%E4%BA%8B%E4%BB%B6">Server Sent Events (Server ÂèëÈÄÅ‰∫ã‰ª∂)</a></li>
<li><a href="#websocket-support-websocket-%E6%94%AF%E6%8C%81">WebSocket Support (WebSocket ÊîØÊåÅ)</a><ul>
<li><a href="#using-serverwebsocket%E4%BD%BF%E7%94%A8-serverwebsocket-%E6%B3%A8%E8%A7%A3">Using <code>@ServerWebSocket</code>(‰ΩøÁî® <code>@ServerWebSocket</code> Ê≥®Ëß£)</a><ul>
<li><a href="#the-onclose-method-onclose-%E6%96%B9%E6%B3%95">The <code>@OnClose</code> Method (<code>@OnClose</code> ÊñπÊ≥ï)</a></li>
<li><a href="#the-onmessage-method-onmessage-%E6%96%B9%E6%B3%95">The <code>@OnMessage</code> Method (<code>@OnMessage</code> ÊñπÊ≥ï)</a></li>
<li><a href="#the-onerror-method-onerror-%E6%96%B9%E6%B3%95">The <code>@OnError</code> Method (<code>@OnError</code> ÊñπÊ≥ï)</a></li>
<li><a href="#non-blocking-message-handling-%E9%9D%9E%E9%98%BB%E5%A1%9E%E5%BC%8F%E4%BF%A1%E6%81%AF%E5%A4%84%E7%90%86">Non-Blocking Message Handling (ÈùûÈòªÂ°ûÂºè‰ø°ÊÅØÂ§ÑÁêÜ)</a></li>
<li><a href="#serverwebsocket-and-scopes-serverwebsocket-%E5%92%8C%E4%BD%9C%E7%94%A8%E5%9F%9F"><code>@ServerWebSocket</code> and Scopes (<code>@ServerWebSocket</code> Âíå‰ΩúÁî®Âüü)</a></li>
<li><a href="#sharing-sessions-with-the-http-session-%E5%92%8C-http-session-%E5%85%B1%E4%BA%AB-session">Sharing Sessions with the HTTP Session (Âíå HTTP session ÂÖ±‰∫´ session)</a></li>
<li><a href="#using-the-cli-%E4%BD%BF%E7%94%A8-cli">Using the CLI (‰ΩøÁî® CLI)</a></li>
<li><a href="#connection-timeouts-%E8%BF%9E%E6%8E%A5%E8%B6%85%E6%97%B6">Connection Timeouts (ËøûÊé•Ë∂ÖÊó∂)</a></li>
</ul>
</li>
<li><a href="#using-clientwebsocket-%E4%BD%BF%E7%94%A8-clientwebsocket">Using <code>@ClientWebSocket</code> (‰ΩøÁî® <code>@ClientWebSocket</code>)</a><ul>
<li><a href="#using-the-cli-%E4%BD%BF%E7%94%A8-cli-1">Using the CLI (‰ΩøÁî® CLI)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#http2-support-http2-%E6%94%AF%E6%8C%81">HTTP&#x2F;2 Support (HTTP&#x2F;2 ÊîØÊåÅ)</a><ul>
<li><a href="#configuring-the-server-for-http2-%E4%B8%BA-http2-%E9%85%8D%E7%BD%AE-server">Configuring the Server for HTTP&#x2F;2 (‰∏∫ HTTP&#x2F;2 ÈÖçÁΩÆ Server)</a></li>
<li><a href="#http2-server-push-support-http2-server-%E6%8E%A8%E9%80%81%E6%94%AF%E6%8C%81">HTTP&#x2F;2 Server Push Support (HTTP&#x2F;2 Server Êé®ÈÄÅÊîØÊåÅ)</a></li>
</ul>
</li>
<li><a href="#server-events-server-%E4%BA%8B%E4%BB%B6">Server Events (Server ‰∫ã‰ª∂)</a></li>
<li><a href="#configuring-the-http-server-%E9%85%8D%E7%BD%AE-http-server">Configuring the HTTP Server (ÈÖçÁΩÆ HTTP Server)</a><ul>
<li><a href="#using-native-transports-%E4%BD%BF%E7%94%A8%E5%8E%9F%E7%94%9F%E4%BC%A0%E8%BE%93">Using Native Transports (‰ΩøÁî®ÂéüÁîü‰º†Ëæì)</a></li>
<li><a href="#configuring-server-thread-pools-%E9%85%8D%E7%BD%AE-server-%E7%BA%BF%E7%A8%8B%E6%B1%A0">Configuring Server Thread Pools (ÈÖçÁΩÆ Server Á∫øÁ®ãÊ±†)</a><ul>
<li><a href="#blocking-operations-%E9%98%BB%E5%A1%9E%E5%BC%8F%E6%93%8D%E4%BD%9C">Blocking Operations (ÈòªÂ°ûÂºèÊìç‰Ωú)</a></li>
</ul>
</li>
<li><a href="#configuring-the-netty-pipeline-%E9%85%8D%E7%BD%AE-netty-%E7%AE%A1%E9%81%93">Configuring the Netty Pipeline (ÈÖçÁΩÆ Netty ÁÆ°ÈÅì)</a></li>
<li><a href="#configuring-cors-%E9%85%8D%E7%BD%AE%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82">Configuring CORS (ÈÖçÁΩÆË∑®ÂüüËØ∑Ê±Ç)</a><ul>
<li><a href="#allowed-origins-%E5%85%81%E8%AE%B8%E7%9A%84%E6%BA%90">Allowed Origins (ÂÖÅËÆ∏ÁöÑÊ∫ê)</a></li>
<li><a href="#allowed-methods-%E5%85%81%E8%AE%B8%E7%9A%84%E6%96%B9%E6%B3%95">Allowed Methods (ÂÖÅËÆ∏ÁöÑÊñπÊ≥ï)</a></li>
<li><a href="#allowed-headers-%E5%85%81%E8%AE%B8%E7%9A%84%E8%AF%B7%E6%B1%82%E5%A4%B4">Allowed Headers (ÂÖÅËÆ∏ÁöÑËØ∑Ê±ÇÂ§¥)</a></li>
<li><a href="#exposed-headers-%E6%9A%B4%E9%9C%B2%E7%9A%84%E8%AF%B7%E6%B1%82%E5%A4%B4">Exposed Headers (Êö¥Èú≤ÁöÑËØ∑Ê±ÇÂ§¥)</a></li>
<li><a href="#allow-credentials-%E5%85%81%E8%AE%B8-credentials">Allow Credentials (ÂÖÅËÆ∏ Credentials)</a></li>
<li><a href="#max-age-%E6%9C%80%E5%A4%A7-age">Max age (ÊúÄÂ§ß age)</a></li>
<li><a href="#multiple-header-values-%E5%A4%9A%E4%B8%AA-header-%E5%80%BC">Multiple Header Values (Â§ö‰∏™ Header ÂÄº)</a></li>
</ul>
</li>
<li><a href="#securing-the-server-with-https-%E4%BD%BF%E7%94%A8-https-%E4%BF%9D%E6%8A%A4-server">Securing the Server with HTTPS (‰ΩøÁî® HTTPS ‰øùÊä§ Server)</a><ul>
<li><a href="#using-a-valid-x509-certificate-%E4%BD%BF%E7%94%A8%E4%B8%80%E4%B8%AA%E6%9C%89%E6%95%88%E7%9A%84-x509-%E8%AF%81%E4%B9%A6">Using a valid x509 certificate (‰ΩøÁî®‰∏Ä‰∏™ÊúâÊïàÁöÑ x509 ËØÅ‰π¶)</a></li>
</ul>
</li>
<li><a href="#using-java-keystore-%E4%BD%BF%E7%94%A8-java-keystore-jks">Using Java Keystore (‰ΩøÁî® Java Keystore (JKS))</a><ul>
<li><a href="#refreshingreloading-https-certificates-%E5%88%B7%E6%96%B0%E9%87%8D%E8%BD%BD-https-%E8%AF%81%E4%B9%A6">Refreshing&#x2F;Reloading HTTPS Certificates (Âà∑Êñ∞&#x2F;ÈáçËΩΩ HTTPS ËØÅ‰π¶)</a></li>
</ul>
</li>
<li><a href="#enabling-http-and-https-%E5%90%8C%E6%97%B6%E5%BC%80%E5%90%AF-http-%E5%92%8C-https">Enabling HTTP and HTTPS (ÂêåÊó∂ÂºÄÂêØ HTTP Âíå HTTPS)</a></li>
<li><a href="#enabling-access-logger-%E5%BC%80%E5%90%AF%E8%AE%BF%E9%97%AE%E6%97%A5%E5%BF%97">Enabling Access Logger (ÂºÄÂêØËÆøÈóÆÊó•Âøó)</a><ul>
<li><a href="#filtering-access-logs-%E8%BF%87%E6%BB%A4%E8%AE%BF%E9%97%AE%E6%97%A5%E5%BF%97">Filtering access logs (ËøáÊª§ËÆøÈóÆÊó•Âøó)</a></li>
<li><a href="#logback-configuration-logback-%E9%85%8D%E7%BD%AE">Logback Configuration (Logback ÈÖçÁΩÆ)</a></li>
<li><a href="#log-format-%E6%97%A5%E5%BF%97%E6%A0%BC%E5%BC%8F">Log Format (Êó•ÂøóÊ†ºÂºè)</a></li>
</ul>
</li>
<li><a href="#starting-secondary-servers-%E5%BC%80%E5%90%AF%E4%BA%8C%E7%BA%A7%E6%9C%8D%E5%8A%A1">Starting Secondary Servers (ÂºÄÂêØ‰∫åÁ∫ßÊúçÂä°)</a></li>
</ul>
</li>
<li><a href="#server-side-view-rendering-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E8%A7%86%E5%9B%BE%E6%B8%B2%E6%9F%93">Server Side View Rendering (ÊúçÂä°Âô®Á´ØËßÜÂõæÊ∏≤Êüì)</a></li>
<li><a href="#openapi--swagger-support-openapi--swagger-%E6%94%AF%E6%8C%81">OpenAPI &#x2F; Swagger Support (OpenAPI &#x2F; Swagger ÊîØÊåÅ)</a></li>
<li><a href="#graphql-support-graphql-%E6%94%AF%E6%8C%81">GraphQL Support (GraphQL ÊîØÊåÅ)</a></li>
</ul>
</li>
</ul>
<!-- /TOC -->

<h1 id="The-HTTP-Server"><a href="#The-HTTP-Server" class="headerlink" title="The HTTP Server"></a>The HTTP Server</h1><p><strong>Â£∞Êòé</strong>:</p>
<ul>
<li>Êú¨ÊñáÁî±Êú¨‰∫∫ÁøªËØëËá™<a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide" >ÂÆòÊñπÊñáÊ°£<i class="fas fa-external-link-alt"></i></a></li>
<li>ÈÉ®ÂàÜÂÜÖÂÆπÂèØËÉΩ‰ºöÊúâ‰øÆÊîπÊàñÂà†Âáè, ‰∏ÄÂàá‰ª•ÂÆòÊñπÊñáÊ°£‰∏∫ÂáÜ.</li>
<li>Êú¨ÊñáÁøªËØëÊó∂ Micronaut ÁâàÊú¨‰∏∫ 3.4.2</li>
</ul>
<p>Â¶ÇÊûú‰ΩøÁî® <code>create-app</code> ÂëΩ‰ª§ÂàõÂª∫È°πÁõÆ, ÈÇ£‰πàÈªòËÆ§ÂåÖÂê´ <code>http-server</code> ‰æùËµñ</p>
<p>Micronaut ÂåÖÂê´‰∫ÜÂü∫‰∫é Netty ÁöÑÈùûÈòªÂ°û HTTP Server Âíå Client API</p>
<p>Micronaut ‰∏≠ HTTP Server ÁöÑËÆæËÆ°ÊòØ‰∏∫‰∫ÜÂú®ÂæÆÊúçÂä°‰πãÈó¥‰∫§Êç¢‰ø°ÊÅØËÄå‰ºòÂåñÁöÑ, ÁâπÂà´ÊòØ‰ΩøÁî® JSON</p>
<p>Micronaut ‰∏çÊòØ‰∏∫‰∫ÜÊàê‰∏∫‰∏Ä‰∏™ÂÆåÂÖ®ÁöÑÊúçÂä°Á´Ø MVC Ê°ÜÊû∂</p>
<p>HTTP Server ÁöÑÁõÆÊ†áÊòØÂ∞ΩÂèØËÉΩÂÆπÊòìÂú∞Êö¥Èú≤‰æõ HTTP ÂÆ¢Êà∑Á´Ø‰ΩøÁî®ÁöÑ API, ‰∏çÁÆ°ÂÆÉ‰ª¨ÊòØÁî®‰ªÄ‰πàËØ≠Ë®ÄÂÜôÁöÑ</p>
<p>Ë¶Å‰ΩøÁî® HTTP Server ‰Ω†ÈúÄË¶ÅÂú®ÊûÑÂª∫‰∏≠Ê∑ªÂä† <code>http-server-netty</code> ‰æùËµñ:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation(<span class="string">&quot;io.micronaut:micronaut-http-server-netty&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="Running-the-Embedded-Server-ËøêË°åÂÜÖÂµåÁöÑ-Server"><a href="#Running-the-Embedded-Server-ËøêË°åÂÜÖÂµåÁöÑ-Server" class="headerlink" title="Running the Embedded Server (ËøêË°åÂÜÖÂµåÁöÑ Server)"></a>Running the Embedded Server (ËøêË°åÂÜÖÂµåÁöÑ Server)</h2><p>‰∏∫‰∫ÜËøêË°å Server, ÂàõÂª∫‰∏Ä‰∏™Êúâ <code>static void main</code> ÊñπÊ≥ïÁöÑ <code>Application</code> Á±ª:</p>
<p>Example - Micronaut Application Class:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.runtime.Micronaut</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">void</span> main(String... args) &#123;</span><br><span class="line">        Micronaut.run Application</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Ë¶ÅÂú®ÂçïÂÖÉÊµãËØï‰∏≠ËøêË°åÂ∫îÁî®Á®ãÂ∫è, ‰ΩøÁî® <code>EmbeddedServer</code> Êé•Âè£:</p>
<p>Example - Micronaut Test Case:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.http.HttpRequest</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.client.HttpClient</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.client.annotation.Client</span><br><span class="line"><span class="keyword">import</span> io.micronaut.runtime.server.EmbeddedServer</span><br><span class="line"><span class="keyword">import</span> io.micronaut.test.extensions.spock.annotation.MicronautTest</span><br><span class="line"><span class="keyword">import</span> spock.lang.Specification</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.inject.Inject</span><br><span class="line"></span><br><span class="line"><span class="meta">@MicronautTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HelloControllerSpec</span> <span class="keyword">extends</span> <span class="title class_">Specification</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Inject</span></span><br><span class="line">    <span class="meta">@AutoCleanup</span></span><br><span class="line">    EmbeddedServer embeddedServer   <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Inject</span></span><br><span class="line">    <span class="meta">@Client</span>(<span class="string">&quot;/&quot;</span>)</span><br><span class="line">    HttpClient client               <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line">    <span class="type">void</span> <span class="string">&#x27;test hello world response&#x27;</span>() &#123;</span><br><span class="line">        <span class="symbol">expect:</span></span><br><span class="line">            client.toBlocking()     <span class="comment">// 3</span></span><br><span class="line">                  .retrieve(HttpRequest.GET(<span class="string">&#x27;/hello&#x27;</span>)) == <span class="string">&#x27;Hello World&#x27;</span> <span class="comment">// 4</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>1</code> : The <code>EmbeddedServer</code> is run and the Spock <code>@AutoCleanup</code> annotation ensures the server is stopped after the specification completes</p>
<p><code>2</code> : The <code>EmbeddedServer</code> interface provides the <code>URL</code> of the server under test which runs on a random port</p>
<p><code>3</code> : The test uses the Micronaut HTTP client to make the call</p>
<p><code>4</code> : The <code>retrieve</code> method returns the response of the controller as a <code>String</code></p>
<p>Â¶ÇÊûúÊ≤°ÊúâÊòéÁ°ÆÁöÑÁ´ØÂè£ÈÖçÁΩÆ, ÈÇ£‰πàÁ´ØÂè£Âè∑ÈªòËÆ§‰∏∫ <code>8080</code></p>
<p>Â¶ÇÊûúÊòØÂú® <code>test</code> ÁéØÂ¢É‰∏ãËøêË°åÂ∫îÁî®, Á´ØÂè£Âè∑Â∞Ü‰ºöÊòØÈöèÊú∫ÁöÑ</p>
<p>ÂΩìÂ∫îÁî®Á®ãÂ∫è‰∏ä‰∏ãÊñá‰ªéÊµãËØïÁ±ªÁöÑ‰∏ä‰∏ãÊñáÂêØÂä®Êó∂, <code>test</code> ÁéØÂ¢ÉÂ∞Ü‰ºöËá™Âä®Ê∑ªÂä†</p>
<h2 id="Running-Server-on-a-Specific-Port-Âú®ÊåáÂÆöÁ´ØÂè£‰∏äËøêË°å-Server"><a href="#Running-Server-on-a-Specific-Port-Âú®ÊåáÂÆöÁ´ØÂè£‰∏äËøêË°å-Server" class="headerlink" title="Running Server on a Specific Port (Âú®ÊåáÂÆöÁ´ØÂè£‰∏äËøêË°å Server)"></a>Running Server on a Specific Port (Âú®ÊåáÂÆöÁ´ØÂè£‰∏äËøêË°å Server)</h2><p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ã, Server ËøêË°åÂú® <code>8080</code> Á´ØÂè£</p>
<p>ÈÄöËøáÂ¶Ç‰∏ãÈÖçÁΩÆÊåáÂÆöËøêË°åÁöÑÁ´ØÂè£Âè∑:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">server:</span></span><br><span class="line">        <span class="attr">port:</span> <span class="number">8086</span></span><br></pre></td></tr></table></figure>

<p>‰πüÂèØ‰ª•ÈÄöËøáÁéØÂ¢ÉÂèòÈáèÊù•ÈÖçÁΩÆ: <code>MICRONAUT_SERVER_PORT=8086</code></p>
<p>ÈÖçÁΩÆËøêË°åÂú®ÈöèÊú∫Á´ØÂè£:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">server:</span></span><br><span class="line">        <span class="attr">port:</span> <span class="number">-1</span></span><br></pre></td></tr></table></figure>

<p>Â¶ÇÊûúÂ§ö‰∏™ Server ÂêåÊó∂ÂêØÂä®Âú®Âêå‰∏Ä‰∏™Á´ØÂè£, ËÆæÁΩÆ‰∏Ä‰∏™ÊòéÁ°ÆÁöÑÁ´ØÂè£ÂèØËÉΩÂØºËá¥ÊµãËØïÂ§±Ë¥•, ‰∏∫‰∫ÜÈò≤Ê≠¢ËøôÊ†∑, Âú® <code>test</code> ÁéØÂ¢ÉÈÖçÁΩÆÂ£∞Êòé‰∏Ä‰∏™ÈöèÊú∫Á´ØÂè£</p>
<h2 id="HTTP-Routing-HTTP-Ë∑ØÁî±"><a href="#HTTP-Routing-HTTP-Ë∑ØÁî±" class="headerlink" title="HTTP Routing (HTTP Ë∑ØÁî±)"></a>HTTP Routing (HTTP Ë∑ØÁî±)</h2><h3 id="URI-Paths-URI-Ë∑ØÂæÑ"><a href="#URI-Paths-URI-Ë∑ØÂæÑ" class="headerlink" title="URI Paths (URI Ë∑ØÂæÑ)"></a>URI Paths (URI Ë∑ØÂæÑ)</h3><blockquote>
<p>The value of the @Controller annotation is a RFC-6570 URI template, so you can embed URI variables within the path using the syntax defined by the URI template specification.</p>
</blockquote>
<p><code>@Controller</code> Ê≥®Ëß£ÁöÑÂÄºÊòØ‰∏Ä‰∏™ <code>RFC-6570 URI template</code>, ÊâÄ‰ª•‰Ω†ÂèØ‰ª•‰ΩøÁî® <code>URI template</code> ËßÑËåÉÂÆö‰πâÁöÑËØ≠Ê≥ïÊù•ÂÜÖÂµå URI ÂèòÈáèÂà∞Ë∑ØÂæÑ‰∏≠</p>
<p>ËÆ∏Â§öÂÖ∂‰ªñÁöÑÊ°ÜÊû∂, ÂåÖÊã¨ Spring, ÂÆûÁé∞‰∫Ü <code>URI template</code> ËßÑËåÉ</p>
<p>ÂÆûÈôÖÁöÑÂÆûÁé∞ÊòØÁî± <code>UriMatchTemplate</code> Á±ªÂ§ÑÁêÜÁöÑ, ËØ•Á±ªÊâ©Â±ï‰∫Ü <code>UriTemplate</code></p>
<p>‰Ω†ÂèØ‰ª•Âú®Â∫îÁî®‰∏≠‰ΩøÁî®Ëøô‰∏™Á±ªÊù•ÊûÑÂª∫ URI, ‰æãÂ¶Ç:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">given:</span></span><br><span class="line">UriMatchTemplate template = UriMatchTemplate.of(<span class="string">&quot;/hello/&#123;name&#125;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="attr">expect:</span></span><br><span class="line">template.match(<span class="string">&quot;/hello/John&quot;</span>).isPresent()           <span class="comment">// 1</span></span><br><span class="line">template.expand([<span class="string">&quot;name&quot;</span>: <span class="string">&quot;John&quot;</span>]) == <span class="string">&quot;/hello/John&quot;</span>  <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<p><code>1</code> : Use the <code>match</code> method to match a path</p>
<p><code>2</code> : Use the <code>expand</code> method to expand a template into a URI</p>
<p>ÂèØ‰ª•‰ΩøÁî® <code>UriTemplate</code> Á±ªÊù•ÊûÑÂª∫Ë∑ØÂæÑ, Áî®Êù•ÂåÖÂê´Âà∞ÂìçÂ∫î‰∏≠</p>
<h3 id="URI-Path-Variables-URI-Ë∑ØÂæÑÂèòÈáè"><a href="#URI-Path-Variables-URI-Ë∑ØÂæÑÂèòÈáè" class="headerlink" title="URI Path Variables (URI Ë∑ØÂæÑÂèòÈáè)"></a>URI Path Variables (URI Ë∑ØÂæÑÂèòÈáè)</h3><p>URI ÂèòÈáèÂèØ‰ª•ÈÄöËøáÊñπÊ≥ïÂèÇÊï∞Êù•ÂºïÁî®</p>
<p>Example - URI Variables:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Controller</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Get</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.PathVariable</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&#x27;/issues&#x27;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">IssuesController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Get</span>(<span class="string">&#x27;/&#123;number&#125;&#x27;</span>)   <span class="comment">// a URI variables embedded in the URI named `number`</span></span><br><span class="line">    String issue(<span class="meta">@PathVariable</span> Integer number) &#123;    <span class="comment">// The method argument can optionally be annotated with @PathVariable</span></span><br><span class="line">        <span class="string">&quot;Issue # $number !&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Example - Testing URI Variables:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.context.ApplicationContext</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.client.HttpClient</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.client.exceptions.HttpClientResponseException</span><br><span class="line"><span class="keyword">import</span> io.micronaut.runtime.server.EmbeddedServer</span><br><span class="line"><span class="keyword">import</span> spock.lang.AutoCleanup</span><br><span class="line"><span class="keyword">import</span> spock.lang.Shared</span><br><span class="line"><span class="keyword">import</span> spock.lang.Specification</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">IssuesControllerTest</span> <span class="keyword">extends</span> <span class="title class_">Specification</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Shared</span></span><br><span class="line">    <span class="meta">@AutoCleanup</span> <span class="comment">// The server is cleaned up after the tests finish</span></span><br><span class="line">    EmbeddedServer embeddedServer = ApplicationContext.run(EmbeddedServer) <span class="comment">// The embedded server is started</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Shared</span></span><br><span class="line">    <span class="meta">@AutoCleanup</span> <span class="comment">// The client is cleaned up after the test finish</span></span><br><span class="line">    HttpClient client = HttpClient.create(embeddedServer.URL) <span class="comment">// The HTTP client is started</span></span><br><span class="line"></span><br><span class="line">    <span class="type">void</span> <span class="string">&quot;test issue&quot;</span>() &#123;</span><br><span class="line">        <span class="symbol">when:</span></span><br><span class="line">        String body = client.toBlocking().retrieve(<span class="string">&quot;/issues/12&quot;</span>) <span class="comment">// The tests send a request to the URI `/issues/12`</span></span><br><span class="line"></span><br><span class="line">        <span class="symbol">then:</span></span><br><span class="line">        body != <span class="literal">null</span></span><br><span class="line">        body == <span class="string">&quot;Issue # 12!&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">void</span> <span class="string">&quot;/issues/&#123;number&#125; with an invalid Integer number responds 400&quot;</span>() &#123;</span><br><span class="line">        <span class="symbol">when:</span></span><br><span class="line">        client.toBlocking().exchange(<span class="string">&quot;/issues/hello&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="symbol">then:</span></span><br><span class="line">        <span class="keyword">def</span> e = thrown(HttpClientResponseException)</span><br><span class="line">        e.status.code == <span class="number">400</span> <span class="comment">// Another test asserts a 400 response is returned when an invalid number is sent in the URL</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">void</span> <span class="string">&quot;/issues/&#123;number&#125; without number responds 404&quot;</span>() &#123;</span><br><span class="line">        <span class="symbol">when:</span></span><br><span class="line">        client.toBlocking().exchange(<span class="string">&quot;/issues/&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="symbol">then:</span></span><br><span class="line">        <span class="keyword">def</span> e = thrown(HttpClientResponseException)</span><br><span class="line">        e.status.code == <span class="number">404</span> <span class="comment">// The variables being present is required for the route to be executed</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>‰∏äÈù¢ÁöÑ URI template ‰æãÂ≠ê‰∏≠ÁöÑ <code>number</code> ÂèòÈáèÊòØÂøÖÈÄâÁöÑ</p>
<p>ÂèØ‰ª•‰ΩøÁî®Â¶Ç‰∏ãËØ≠Ê≥ïÊåáÂÆöÂèØÈÄâÁöÑ URI template: <code>/issues&#123;/number&#125;</code>, Âπ∂‰ΩøÁî® <code>@Nullable</code> Ê≥®Ëß£‰øÆÈ•∞ <code>number</code> ÊñπÊ≥ïÂèÇÊï∞</p>
<p>Table - URI Template Matching:</p>
<table>
<thead>
<tr>
<th align="left">Template</th>
<th align="left">Description</th>
<th align="left">Matching URI</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>/books/&#123;id&#125;</code></td>
<td align="left">Simple match</td>
<td align="left"><code>/books/1</code></td>
</tr>
<tr>
<td align="left"><code>/books/&#123;id:2&#125;</code></td>
<td align="left">A variable of two characters max</td>
<td align="left"><code>/books/10</code></td>
</tr>
<tr>
<td align="left"><code>/books&#123;/id&#125;</code></td>
<td align="left">An optional URI variable</td>
<td align="left"><code>/books/10</code> or <code>/books</code></td>
</tr>
<tr>
<td align="left"><code>/book&#123;/id:[a-zA-Z]+&#125;</code></td>
<td align="left">An optional URI variable with regex</td>
<td align="left"><code>/books/foo</code></td>
</tr>
<tr>
<td align="left"><code>/books&#123;?max,offset&#125;</code></td>
<td align="left">Optional query parameters</td>
<td align="left"><code>/books?max=10&amp;offset=10</code></td>
</tr>
<tr>
<td align="left"><code>/books&#123;/path:.*&#125;&#123;.ext&#125;</code></td>
<td align="left">Regex path match with extension</td>
<td align="left"><code>/books/foo/bar.xml</code></td>
</tr>
</tbody></table>
<h3 id="URI-Reserved-Character-Matching-URI-‰øùÁïôÂ≠óÁ¨¶ÂåπÈÖç"><a href="#URI-Reserved-Character-Matching-URI-‰øùÁïôÂ≠óÁ¨¶ÂåπÈÖç" class="headerlink" title="URI Reserved Character Matching (URI ‰øùÁïôÂ≠óÁ¨¶ÂåπÈÖç)"></a>URI Reserved Character Matching (URI ‰øùÁïôÂ≠óÁ¨¶ÂåπÈÖç)</h3><p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ã, <code>RFC-6570 URI template</code> ËßÑËåÉÂÆö‰πâÁöÑ URI ÂèòÈáè‰∏çËÉΩÂåÖÂê´‰øùÁïôÂ≠óÁ¨¶, ‰æãÂ¶Ç <code>/</code>, <code>?</code>Á≠â</p>
<blockquote>
<p>you can use reserved expansion or matching using the + operator.</p>
</blockquote>
<p>‰Ω†ÂèØ‰ª•‰ΩøÁî®‰øùÁïôÂ±ïÂºÄÊàñ‰ΩøÁî®Êìç‰ΩúÁ¨¶ÂåπÈÖç</p>
<p>‰æãÂ¶Ç URI (<code>/books/&#123;+path&#125;</code>) ÂêåÊó∂ÂåπÈÖç <code>/books/foo</code> Âíå <code>/books/foo/bar</code>, Âõ†‰∏∫ <code>+</code> Ë°®ÊòéÂèòÈáè <code>path</code> Â∫îËØ•ÂåÖÊã¨‰øùÁïôÂ≠óÁ¨¶</p>
<h3 id="Routing-Annotations-Ë∑ØÁî±Ê≥®Ëß£"><a href="#Routing-Annotations-Ë∑ØÁî±Ê≥®Ëß£" class="headerlink" title="Routing Annotations (Ë∑ØÁî±Ê≥®Ëß£)"></a>Routing Annotations (Ë∑ØÁî±Ê≥®Ëß£)</h3><p>Table - HTTP Routing Annotations:</p>
<table>
<thead>
<tr>
<th align="left">Annotation</th>
<th align="left">HTTP Method</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>@Delete</code></td>
<td align="left">DELETE</td>
</tr>
<tr>
<td align="left"><code>@Get</code></td>
<td align="left">GET</td>
</tr>
<tr>
<td align="left"><code>@Head</code></td>
<td align="left">HEAD</td>
</tr>
<tr>
<td align="left"><code>@Options</code></td>
<td align="left">OPTIONS</td>
</tr>
<tr>
<td align="left"><code>@Patch</code></td>
<td align="left">PATCH</td>
</tr>
<tr>
<td align="left"><code>@Put</code></td>
<td align="left">PUT</td>
</tr>
<tr>
<td align="left"><code>@Post</code></td>
<td align="left">POST</td>
</tr>
<tr>
<td align="left"><code>@Trace</code></td>
<td align="left">TRACE</td>
</tr>
</tbody></table>
<blockquote>
<p>All the method annotations default to <code>/</code></p>
</blockquote>
<p>ÊâÄÊúâÁöÑÊñπÊ≥ïÊ≥®Ëß£ÈªòËÆ§‰∏∫ <code>/</code></p>
<h3 id="Multiple-URIs-Â§ö‰∏™-URI"><a href="#Multiple-URIs-Â§ö‰∏™-URI" class="headerlink" title="Multiple URIs (Â§ö‰∏™ URI)"></a>Multiple URIs (Â§ö‰∏™ URI)</h3><p>ÊØè‰∏™Ë∑ØÁî±Ê≥®Ëß£ÈÉΩÊîØÊåÅÂ§ö‰∏™ URI template</p>
<p>ÂØπ‰∫éÊØè‰∏™ template, ‰ºöÂàõÂª∫‰∏Ä‰∏™Ë∑ØÁî±</p>
<p>Ëøô‰∏™ÁâπÊÄßÂØπ‰∫éË¶Å‰øÆÊîπ API ÁöÑË∑ØÂæÑÈùûÂ∏∏ÊúâÁî®, ËøôÂèØ‰ª•‰øùÊåÅÂ∑≤ÊúâË∑ØÂæÑ‰Ωú‰∏∫ÂêëÂêéÂÖºÂÆπ</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Controller</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Get</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&quot;/hello&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BackwardCompatibleController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Get</span>(uris = [<span class="string">&quot;/&#123;name&#125;&quot;</span>, <span class="string">&quot;/person/&#123;name&#125;&quot;</span>])</span><br><span class="line">    String hello(String name) &#123;</span><br><span class="line">        <span class="string">&quot;Hello, $name&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Route validation is more complicated with multiple templates. If a variable that would normally be required does not exist in all templates, that variable is considered optional since it may not exist for every execution of the method.</p>
</blockquote>
<p>Âú®Â§ö‰∏™ template ÁöÑÊÉÖÂÜµ‰∏ãË∑ØÁî±Ê†°È™å‰ºöÊõ¥Âä†Â§çÊùÇ. Â¶ÇÊûú‰∏Ä‰∏™ÂèòÈáèÈÄöÂ∏∏Â∫îËØ•ÊòØÂøÖÈÄâÁöÑ‰ΩÜÊòØÂèà‰∏çÂ≠òÂú®‰∫éÊâÄÊúâÁöÑ template ‰∏≠, ÈÇ£Ëøô‰∏™ÂèòÈáèË¢´ËÆ§‰∏∫ÊòØÂèØÈÄâÁöÑ, Âõ†‰∏∫ÂÆÉÂèØËÉΩ‰∏çÊòØÂú®ÊØèÊ¨°ÊâßË°åÊñπÊ≥ïÊó∂ÈÉΩÂ≠òÂú®</p>
<h3 id="Building-Routes-Programmatically-ÁºñÁ®ãÂºèÂú∞ÊûÑÂª∫Ë∑ØÁî±"><a href="#Building-Routes-Programmatically-ÁºñÁ®ãÂºèÂú∞ÊûÑÂª∫Ë∑ØÁî±" class="headerlink" title="Building Routes Programmatically (ÁºñÁ®ãÂºèÂú∞ÊûÑÂª∫Ë∑ØÁî±)"></a>Building Routes Programmatically (ÁºñÁ®ãÂºèÂú∞ÊûÑÂª∫Ë∑ØÁî±)</h3><p>Â¶ÇÊûú‰Ω†‰∏çÂñúÊ¨¢‰ΩøÁî®Ê≥®Ëß£, ËÄåÊòØÂñúÊ¨¢Âú®‰ª£Á†Å‰∏≠Â£∞ÊòéÊâÄÊúâË∑ØÁî±, ÈÇ£‰πà‰∏çÁî®ÊãÖÂøÉ, Micronaut Êúâ‰∏Ä‰∏™ÁÅµÊ¥ªÁöÑ <code>RouteBuilder</code> API ÂèØ‰ª•ËΩªÊùæÂú∞ÈÄöËøáÁºñÁ®ãÂÆö‰πâË∑ØÁî±</p>
<p>ÁªßÊâø <code>DefaultRouteBuilder</code> Âπ∂Ê≥®ÂÖ•Ë¶ÅËøõË°åË∑ØÁî±ÁöÑ Controller Âà∞ÊñπÊ≥ï‰∏≠, ÁÑ∂ÂêéÂÆö‰πâË∑ØÁî±:</p>
<p>Example - URI Variables:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.context.ExecutionHandleLocator</span><br><span class="line"><span class="keyword">import</span> io.micronaut.core.convert.ConversionService</span><br><span class="line"><span class="keyword">import</span> io.micronaut.web.router.GroovyRouteBuilder</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.inject.Inject</span><br><span class="line"><span class="keyword">import</span> jakarta.inject.Singleton</span><br><span class="line"></span><br><span class="line"><span class="meta">@Singleton</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyRoutes</span> <span class="keyword">extends</span> <span class="title class_">GroovyRouteBuilder</span> &#123;     <span class="comment">// Ë∑ØÁî±ÂÆö‰πâÂøÖÈ°ªÊòØ DefaultRouteBuilder ÁöÑÂ≠êÁ±ª</span></span><br><span class="line"></span><br><span class="line">    MyRoutes(ExecutionHandleLocator executionHandleLocator,</span><br><span class="line">             UriNamingStrategy uriNamingStrategy,</span><br><span class="line">             ConversionService conversionService) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(executionHandleLocator, uriNamingStrategy, conversionService)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Inject</span>     <span class="comment">// ‰ΩøÁî® @Inject Ê≥®Ëß£Ê≥®ÂÖ• Controller Âà∞ÊñπÊ≥ïÂèÇÊï∞‰∏≠</span></span><br><span class="line">    <span class="type">void</span> issuesRoutes(IssuesController issuesController) &#123;</span><br><span class="line">        GET(<span class="string">&quot;/issues/show/&#123;number&#125;&quot;</span>, issuesController.&amp;issue)      <span class="comment">// ÂøÖÈ°ª‰ΩøÁî®ÂÖ®Ë∑ØÂæÑ, Âõ†‰∏∫Âú®ËøôÈáåÂπ∂‰∏çÁü•ÈÅì @Controller Ê≥®Ëß£‰∏≠ÂÆö‰πâÁöÑÂÄº</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>‰∏çÂπ∏ÁöÑÊòØ, Âõ†‰∏∫Á±ªÂûãÊì¶Èô§, ‰∏Ä‰∏™ Java ÊñπÊ≥ï lambda ÂºïÁî®‰∏çËÉΩÂíå API ‰∏ÄËµ∑‰ΩøÁî®, ÊâÄ‰ª•Âú® Java ‰∏≠Ëøô‰∏™‰æãÂ≠êÊòØËøôÊ†∑ÁöÑ: <code>GET(&quot;/issues/show/&#123;number&#125;&quot;, issuesController, &quot;issue&quot;, Integer.class);</code></p>
<p>Âú® Groovy ‰∏≠Êúâ‰∏Ä‰∏™ <code>GroovyRouteBuilder</code> Á±ªÂèØ‰ª•Ë¢´ÁªßÊâø, Âπ∂ÂÖÅËÆ∏‰º†ÈÄí Groovy ÊñπÊ≥ïÂ∫îÁî®</p>
<h3 id="Route-Compile-Time-Validation-Ë∑ØÁî±ÁºñËØëÊó∂Ê†°È™å"><a href="#Route-Compile-Time-Validation-Ë∑ØÁî±ÁºñËØëÊó∂Ê†°È™å" class="headerlink" title="Route Compile-Time Validation (Ë∑ØÁî±ÁºñËØëÊó∂Ê†°È™å)"></a>Route Compile-Time Validation (Ë∑ØÁî±ÁºñËØëÊó∂Ê†°È™å)</h3><p>Micronaut ÊîØÊåÅ‰ΩøÁî®Ê†°È™åÂ∫ìÂú®ÁºñËØëÊó∂Ê†°È™åË∑ØÁî±ÂèÇÊï∞</p>
<p>È¶ñÂÖà, Âú®‰Ω†ÁöÑÊûÑÂª∫‰∏≠Ê∑ªÂä† <code>validation</code> ‰æùËµñ:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">annotationProccessor <span class="string">&quot;io.micronaut:micronaut-validation&quot;</span>    <span class="comment">// Java Only</span></span><br><span class="line">kapt <span class="string">&quot;io.micronaut:micronaut-validation&quot;</span>                    <span class="comment">// Kotlin Only</span></span><br><span class="line">implementation <span class="string">&quot;io.micronaut:micronaut-validation&quot;</span></span><br></pre></td></tr></table></figure>

<p>Êúâ‰∫ÜÊ≠£Á°ÆÁöÑ‰æùËµñÂú® classpath ‰∏ä, Ë∑ØÁî±ÂèÇÊï∞Â∞Ü‰ºöÂú®ÁºñËØëÊó∂Ë¢´Ëá™Âä®Ê†°È™å</p>
<p>Âú®Â¶Ç‰∏ãÊÉÖÂÜµ‰∏≠, ÁºñËØëÂ∞Ü‰ºöÂ§±Ë¥•:</p>
<ul>
<li>URI template ‰∏≠ÂåÖÂê´‰∫Ü‰∏Ä‰∏™ÂèØÈÄâÁöÑÂèòÈáè, ‰ΩÜÊòØÊñπÊ≥ïÂèÇÊï∞Ê≤°Êúâ‰ΩøÁî® <code>@Nullable</code> Ê≥®Ëß£‰øÆÈ•∞ÊàñËÄÖ‰ΩøÁî® <code>java.util.Optional</code> ÂåÖË£Ö</li>
<li>URI template ÂåÖÂê´‰∏Ä‰∏™ÊñπÊ≥ï‰∏≠Ê≤°ÊúâÂØπÂ∫îÂèÇÊï∞ÁöÑÂèòÈáè</li>
</ul>
<h3 id="Routing-non-standard-HTTP-methods-Ë∑ØÁî±ÈùûÊ†áÂáÜ-HTTP-ÊñπÊ≥ï"><a href="#Routing-non-standard-HTTP-methods-Ë∑ØÁî±ÈùûÊ†áÂáÜ-HTTP-ÊñπÊ≥ï" class="headerlink" title="Routing non-standard HTTP methods (Ë∑ØÁî±ÈùûÊ†áÂáÜ HTTP ÊñπÊ≥ï)"></a>Routing non-standard HTTP methods (Ë∑ØÁî±ÈùûÊ†áÂáÜ HTTP ÊñπÊ≥ï)</h3><p><code>@CustomHttpMethod</code> Ê≥®Ëß£ÊîØÊåÅÈùûÊ†áÂáÜ HTTP ÊñπÊ≥ï, Âπ∂ÂèØ‰ΩøÁî®‰∫é Client Êàñ Server</p>
<p>‰æãÂ¶Ç, <code>RFC-4918 Webadv</code> ËßÑËåÉË¶ÅÊ±ÇÈ¢ùÂ§ñÁöÑÊñπÊ≥ï, Â¶Ç <code>REPORT</code> Êàñ <code>LOCK</code>:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CustomHttpMethod</span>(method = <span class="string">&quot;LOCK&quot;</span>, value = <span class="string">&quot;/&#123;name&#125;&quot;</span>)</span><br><span class="line">String lock(String name)</span><br></pre></td></tr></table></figure>

<p><code>@CustomHttpMethod</code> Ê≥®Ëß£ÂèØ‰ª•‰ΩøÁî®Âú®‰ªª‰ΩïÂü∫Á°ÄÊñπÊ≥ïÊ≥®Ëß£ÂèØ‰ª•‰ΩøÁî®ÁöÑÂú∞Êñπ, ÂåÖÊã¨ Controller ÂíåÂ£∞ÊòéÂºè HTTP ÂÆ¢Êà∑Á´Ø</p>
<h2 id="Simple-Request-Binding-ÁÆÄÂçïËØ∑Ê±ÇÁªëÂÆö"><a href="#Simple-Request-Binding-ÁÆÄÂçïËØ∑Ê±ÇÁªëÂÆö" class="headerlink" title="Simple Request Binding (ÁÆÄÂçïËØ∑Ê±ÇÁªëÂÆö)"></a>Simple Request Binding (ÁÆÄÂçïËØ∑Ê±ÇÁªëÂÆö)</h2><h3 id="Binding-Annotations-ÁªëÂÆöÊ≥®Ëß£"><a href="#Binding-Annotations-ÁªëÂÆöÊ≥®Ëß£" class="headerlink" title="Binding Annotations (ÁªëÂÆöÊ≥®Ëß£)"></a>Binding Annotations (ÁªëÂÆöÊ≥®Ëß£)</h3><blockquote>
<p>All binding annotations support customization of the name of the variable being bound from with their name member.</p>
</blockquote>
<p>ÊâÄÊúâÁöÑÁªëÂÆöÊ≥®Ëß£ÈÉΩÊîØÊåÅÂ∞ÜË¢´ÁªëÂÆöÁöÑÂèòÈáè‰ΩøÁî®ÂÆÉ‰ª¨ÁöÑ <code>name</code> ÊàêÂëòÂ±ûÊÄßÊù•ËøõË°åÂêçÁß∞Ëá™ÂÆö‰πâ</p>
<p>Table - Parameter Binding Annotations:</p>
<table>
<thead>
<tr>
<th align="left">Annotation</th>
<th align="left">Description</th>
<th align="left">Example</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>@Body</code></td>
<td align="left">Binds from the body of the request</td>
<td align="left"><code>@Body</code> String body</td>
</tr>
<tr>
<td align="left"><code>@CookieValue</code></td>
<td align="left">Binds a parameter from a cookie</td>
<td align="left"><code>@CookieValue</code> String myCookie</td>
</tr>
<tr>
<td align="left"><code>@Header</code></td>
<td align="left">Binds a parameter from an HTTP header</td>
<td align="left"><code>@Header</code> String requestId</td>
</tr>
<tr>
<td align="left"><code>@QueryValue</code></td>
<td align="left">Binds from a request query parameter</td>
<td align="left"><code>@QueryValue</code> String myParam</td>
</tr>
<tr>
<td align="left"><code>@Part</code></td>
<td align="left">Binds from a part of a multiple request</td>
<td align="left"><code>@Part</code> CompletedFileUpload file</td>
</tr>
<tr>
<td align="left"><code>@RequestAttribute</code></td>
<td align="left">Binds from an attribute of the request. Attributes are typically created in filters</td>
<td align="left"><code>@RequestAttribute</code> String myAttribute</td>
</tr>
<tr>
<td align="left"><code>@PathVariable</code></td>
<td align="left">Binds from the path of the request</td>
<td align="left"><code>@PathVariable</code> String id</td>
</tr>
<tr>
<td align="left"><code>@RequestBean</code></td>
<td align="left">Binds any Bindable value to single Bean object</td>
<td align="left"><code>@RequestBean</code> MyBean bean</td>
</tr>
</tbody></table>
<p>Âú®‰∏Ä‰∏™ÁªëÂÆöÊ≥®Ëß£‰∏≠Ê≤°ÊúâÊåáÂÆö‰∏Ä‰∏™ <code>value</code> Êó∂, Â∞Ü‰ºö‰ΩøÁî®ÊñπÊ≥ïÂèÇÊï∞ÂêçÁß∞:</p>
<p>Example - ‰∏ãÈù¢‰æãÂ≠ê‰∏≠‰∏§‰∏™ÂèÇÊï∞ÁªëÂÆöÈÉΩÊòØ‰∏ÄÊ†∑ÁöÑÊïàÊûú:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Get</span>(<span class="string">&quot;/cookieName&quot;</span>)</span><br><span class="line">String cookieName(<span class="meta">@CookieValue</span>(<span class="string">&quot;myCookie&quot;</span>) String myCookie) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Get</span>(<span class="string">&quot;/cookieInferred&quot;</span>)</span><br><span class="line">String cookieInferred(<span class="meta">@CookieValue</span> String myCookie)</span><br></pre></td></tr></table></figure>

<p>Áî±‰∫éËøûÂ≠óÁ¨¶‰∏çÂèØ‰ª•‰ΩøÁî®Âú®ÂèòÈáèÂêçÁß∞‰∏≠, ÊâÄ‰ª•ÊúâÂøÖË¶ÅÂú®Ê≥®Ëß£‰∏≠ËÆæÁΩÆÂêçÁß∞:</p>
<p>Example - The following definitions are equivalent:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Get</span>(<span class="string">&quot;/headerName&quot;</span>)</span><br><span class="line">String headerName(<span class="meta">@Header</span>(<span class="string">&quot;Content-Type&quot;</span>) String contentType) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Get</span>(<span class="string">&quot;/headerInferred&quot;</span>)</span><br><span class="line">String headerInferred(<span class="meta">@Header</span> String contentType)</span><br></pre></td></tr></table></figure>

<h3 id="Stream-Support-Stream-ÊîØÊåÅ"><a href="#Stream-Support-Stream-ÊîØÊåÅ" class="headerlink" title="Stream Support (Stream ÊîØÊåÅ)"></a>Stream Support (Stream ÊîØÊåÅ)</h3><p>Micronaut ËøòÊîØÊåÅÁªëÂÆö body Âà∞‰∏Ä‰∏™ <code>InputStream</code> ‰∏≠</p>
<p>Â¶ÇÊûúÊñπÊ≥ïÊòØËØªÂèñËøô‰∏™ Stream, ÈÇ£‰πàËøô‰∏™ÊñπÊ≥ïÁöÑÊâßË°åË¶ÅÂç∏ËΩΩ(offloaded)Âà∞Âè¶‰∏Ä‰∏™Á∫øÁ®ãÊ±†‰∏≠, ÈÅøÂÖçÈòªÂ°û event loop</p>
<p>Example - Performing Blocking I&#x2F;O With InputStream:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Post</span>(value = <span class="string">&quot;/read&quot;</span>, processes = MediaType.TEXT_PLAIN)</span><br><span class="line"><span class="meta">@ExecuteOn</span>(TaskExecutors.IO)    <span class="comment">// 1</span></span><br><span class="line">String read(<span class="meta">@Body</span> InputStream inputStream) <span class="keyword">throws</span> IOException &#123;     <span class="comment">// 2</span></span><br><span class="line">    IOUtils.readText(<span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(inputStream)))        <span class="comment">// 3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>1</code> : The controller method is executed on the IO thread pool</p>
<p><code>2</code> : The body is passed to the method as an input stream</p>
<p><code>3</code> : The stream is read</p>
<h3 id="Binding-from-Multiple-Query-values-‰ΩøÁî®Â§ö‰∏™ËØ∑Ê±ÇÂÄºËøõË°åÁªëÂÆö"><a href="#Binding-from-Multiple-Query-values-‰ΩøÁî®Â§ö‰∏™ËØ∑Ê±ÇÂÄºËøõË°åÁªëÂÆö" class="headerlink" title="Binding from Multiple Query values (‰ΩøÁî®Â§ö‰∏™ËØ∑Ê±ÇÂÄºËøõË°åÁªëÂÆö)"></a>Binding from Multiple Query values (‰ΩøÁî®Â§ö‰∏™ËØ∑Ê±ÇÂÄºËøõË°åÁªëÂÆö)</h3><p>‰∏éÂÖ∂‰ªéËØ∑Ê±ÇÁöÑÂçï‰∏™ÈÉ®ÂàÜÁªëÂÆö, ‰∏çÂ¶ÇÂ∞ÜÊâÄÊúâÊü•ËØ¢ÂÄº(‰æãÂ¶Ç)ÁªëÂÆöÂà∞ POJO</p>
<p>ÂèØ‰ª•ÈÄöËøáÂú® URI template ‰∏≠‰ΩøÁî®ÂàÜËß£Êìç‰ΩúÁ¨¶ <code>?pojo*</code> Êù•ÂÆûÁé∞</p>
<p>Example - Binding Request parameters to POJO:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.http.HttpStatus</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Controller</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Get</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Nullable</span><br><span class="line"><span class="keyword">import</span> javax.validation.Valid</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&quot;/api&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BookmarkController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Get</span>(<span class="string">&quot;/bookmarks/list&#123;?paginationCommand*&#125;&quot;</span>)</span><br><span class="line">    HttpStatus list(<span class="meta">@Valid</span> <span class="meta">@Nullable</span> PaginationCommond paginationCommand) &#123;</span><br><span class="line">        HttpStatus.OK</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Binding-from-Multiple-Bindable-values-‰ªéÂ§ö‰∏™ÂèØÁªëÂÆöÂÄº‰∏≠ËøõË°åÁªëÂÆö"><a href="#Binding-from-Multiple-Bindable-values-‰ªéÂ§ö‰∏™ÂèØÁªëÂÆöÂÄº‰∏≠ËøõË°åÁªëÂÆö" class="headerlink" title="Binding from Multiple Bindable values (‰ªéÂ§ö‰∏™ÂèØÁªëÂÆöÂÄº‰∏≠ËøõË°åÁªëÂÆö)"></a>Binding from Multiple Bindable values (‰ªéÂ§ö‰∏™ÂèØÁªëÂÆöÂÄº‰∏≠ËøõË°åÁªëÂÆö)</h3><p>Èô§‰∫Ü‰ªÖ‰ªÖÁªëÂÆöÊü•ËØ¢ÂÄº, ËøòÂèØ‰ª•ÁªëÂÆö‰ªª‰Ωï ÂèØÁªëÂÆöÂÄº Âà∞‰∏Ä‰∏™ POJO ‰∏≠(‰æãÂ¶Ç, ÁªëÂÆö <code>HttpRequest</code>,<code>@PathVariable</code>,<code>@QueryValue</code>,<code>@Header</code> Âà∞‰∏Ä‰∏™ POJO ‰∏≠)</p>
<p>ËøôÂèØ‰ª•ÈÄöËøá‰ΩøÁî® <code>@RequestBean</code> Ê≥®Ëß£Âíå‰∏Ä‰∏™Ëá™ÂÆö‰πâÁöÑ Êã•ÊúâÂèØÁªëÂÆöÊ≥®Ëß£ÁöÑÂ≠óÊÆµÁöÑ Êàñ Â≠óÊÆµÂèØÈÄöËøáÁ±ªÂûã(‰æãÂ¶Ç, <code>HttpRequest</code>,<code>BasicAuth</code>,<code>Authentication</code>)ËøõË°åÁªëÂÆöÁöÑ Bean Á±ªÊù•ÂÆûÁé∞</p>
<p>Example - Binding Bindable values to POJO:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span>(<span class="string">&quot;/api&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MovieTicketController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Get</span>(<span class="string">&quot;/movie/ticket/&#123;movieId&#125;&#123;?minPrice,maxPrice&#125;&quot;</span>)</span><br><span class="line">    HttpStatus list(<span class="meta">@Valid</span> <span class="meta">@RequestBean</span> MovieTicketBean bean) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Bean definition</span></span><br><span class="line"><span class="meta">@Introspected</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MovieTicketBean</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> HttpRequest&lt;?&gt; httpRequest</span><br><span class="line"></span><br><span class="line">    @PathVariable</span><br><span class="line">    String movieId</span><br><span class="line"></span><br><span class="line">    @Nullable</span><br><span class="line">    @QueryValue</span><br><span class="line">    @PositiveOrZero</span><br><span class="line">    Double minPrice</span><br><span class="line"></span><br><span class="line">    @Nullable</span><br><span class="line">    @QueryValue</span><br><span class="line">    @PositiveOrZero</span><br><span class="line">    Double maxPrice</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Bean Á±ªÂøÖÈ°ª‰ΩøÁî® <code>@Introspected</code> Ê≥®Ëß£ËøõË°å‰øÆÈ•∞</p>
<p>Bean ÂèØ‰ª•ÊòØÂ¶Ç‰∏ã‰πã‰∏Ä:</p>
<ul>
<li>Êã•Êúâ setter&#x2F;getter ÊñπÊ≥ïÁöÑÂèØÂèòÁ±ª</li>
<li>Êã•Êúâ getter ÊñπÊ≥ïÂíå‰∏Ä‰∏™ÂåÖÂê´ÊâÄÊúâÂ≠óÊÆµÂÖ•ÂèÇÁöÑÊûÑÈÄ†ÊñπÊ≥ï(ÊàñËÄÖ <code>@Creator</code> Ê≥®Ëß£‰øÆÈ•∞ÁöÑÊûÑÈÄ†ÊñπÊ≥ïÂíåÈùôÊÄÅÊñπÊ≥ï). ÊûÑÈÄ†ÊñπÊ≥ïÁöÑÂÖ•ÂèÇÂøÖÈ°ª‰∏éÂ≠óÊÆµÂêçÁß∞ÂåπÈÖç, ‰ª•‰ΩøÂØπË±°ÂèØ‰ª•‰∏çÈÄöËøáÂèçÂ∞ÑËøõË°åÂÆû‰æãÂåñ</li>
</ul>
<p>Âõ†‰∏∫ Java Ê≤°ÊúâÂåÖÂê´ÂèÇÊï∞ÂêçÁß∞Âú®Â≠óËäÇÁ†Å‰∏≠, ‰Ω†Âú®‰ΩøÁî®‰∏Ä‰∏™Êù•Ëá™ÂÖ∂‰ªñ Jar Êñá‰ª∂‰∏≠ÁöÑ‰∏çÂèØÂèò Bean Á±ªÊó∂ÂøÖÈ°ª‰ΩøÁî® <code>-parameters</code> ÂèÇÊï∞Êù•ÁºñËØë‰ª£Á†Å. Âè¶‰∏Ä‰∏™ÈÄâÈ°πÊòØÂú®‰Ω†ÁöÑÊ∫ê‰ª£Á†Å‰∏≠ÁªßÊâøËøô‰∏™ Bean Á±ª</p>
<h3 id="Bindable-Types-ÂèØÁªëÂÆöÁ±ªÂûã"><a href="#Bindable-Types-ÂèØÁªëÂÆöÁ±ªÂûã" class="headerlink" title="Bindable Types (ÂèØÁªëÂÆöÁ±ªÂûã)"></a>Bindable Types (ÂèØÁªëÂÆöÁ±ªÂûã)</h3><p>ÈÄöÂ∏∏, ‰ªª‰ΩïÂèØ‰ª•ÈÄöËøá <code>ConversionService API</code> ‰ªéÂ≠óÁ¨¶‰∏≤Ë°®Á§∫ËΩ¨Êç¢‰∏∫ Java Á±ªÂûãÁöÑÁ±ªÈÉΩÂèØ‰ª•ËøõË°åÁªëÂÆö</p>
<p>ËøôÂåÖÂê´‰∫ÜÂ§ßÂ§öÊï∞Â∏∏Áî® Java Á±ªÂûã</p>
<p>ÂèØ‰ª•ÈÄöËøáÊ∑ªÂä†‰ΩøÁî® <code>@Singleton</code> Ê≥®Ëß£‰øÆÈ•∞ÁöÑ <code>TypeConverter</code> Êé•Âè£ÂÆûÁé∞ Bean Êù•Ê≥®ÂÜåÈ¢ùÂ§ñÁöÑÁ±ªÂûãËΩ¨Êç¢ÈÄªËæë</p>
<p>Null ÂÄºÂ§ÑÁêÜÈúÄË¶ÅÁâπÂà´Ê≥®ÊÑè:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Get</span>(<span class="string">&quot;/headerInferred&quot;</span>)</span><br><span class="line">String headerInferred(<span class="meta">@Header</span> String contentType) &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>Âú®ËøôÈáå‰æãÂ≠ê‰∏≠,  Â¶ÇÊûú HTTP ËØ∑Ê±ÇÁöÑËØ∑Ê±ÇÂ§¥‰∏≠Ê≤°ÊúâÂåÖÂê´ <code>Content-Type</code>, ÊâÄ‰ª•Ëøô‰∏™Ë∑ØÁî±Ë¢´ËÆ§‰∏∫ÊòØÊó†ÊïàÁöÑ, Âõ†Ê≠§Â∞Ü‰ºöËøîÂõû HTTP 400 <code>BAD REQUEST</code></p>
<p>ÁÆÄÂçïÂú∞ËØ¥, <code>contentTyp</code> ÊòØÂøÖ‰º†ÁöÑ</p>
<p>‰∏∫‰∫Ü‰Ωø <code>Content-Type</code> ËØ∑Ê±ÇÂ§¥ÊòØÂèØÈÄâÁöÑ, ÂèØ‰ª•‰ΩøÁî® <code>@Nullable</code> Ê≥®Ëß£Êù•ËøõË°åÂ£∞Êòé:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Get</span>(<span class="string">&quot;/headerInferred&quot;</span>)</span><br><span class="line">String headerInferred(<span class="meta">@Nullable</span> <span class="meta">@Header</span> String contentType) &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>Èô§Ê≠§‰πãÂ§ñ, ‰ªª‰ΩïÊª°Ë∂≥ <code>RFC-1123</code> ËßÑËåÉÁöÑ <code>DateTime</code> ÈÉΩÂèØ‰ª•ÁªëÂÆöÂà∞‰∏Ä‰∏™ÂÖ•ÂèÇ‰∏ä. ÂèØ‰ª•‰ΩøÁî® <code>@Format</code> Ê≥®Ëß£Êù•ÊåáÂÆöËá™ÂÆö‰πâÁöÑÊó∂Èó¥Ê†ºÂºè:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Get</span>(<span class="string">&quot;/date&quot;</span>)</span><br><span class="line">String date(<span class="meta">@Header</span> ZonedDateTime date) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Get</span>(<span class="string">&quot;/dateFormat&quot;</span>)</span><br><span class="line">String dateFormat(<span class="meta">@Format</span>(<span class="string">&quot;dd/MM/yyyy hh:mm:ss a z&quot;</span>) <span class="meta">@Header</span> ZonedDateTime date) &#123;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Type-Based-Binding-Parameters-Âü∫‰∫éÁ±ªÂûãÁöÑÂèÇÊï∞ÁªëÂÆö"><a href="#Type-Based-Binding-Parameters-Âü∫‰∫éÁ±ªÂûãÁöÑÂèÇÊï∞ÁªëÂÆö" class="headerlink" title="Type-Based Binding Parameters (Âü∫‰∫éÁ±ªÂûãÁöÑÂèÇÊï∞ÁªëÂÆö)"></a>Type-Based Binding Parameters (Âü∫‰∫éÁ±ªÂûãÁöÑÂèÇÊï∞ÁªëÂÆö)</h3><p>Êúâ‰∫õÂèÇÊï∞Âè™ËÄÉËôëÂÆÉ‰ª¨ÁöÑÁ±ªÂûãËÄå‰∏çÊòØÂÆÉ‰ª¨ÁöÑÊ≥®Ëß£</p>
<table>
<thead>
<tr>
<th align="left">Type</th>
<th align="left">Description</th>
<th align="left">Example</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>BasicAuth</code></td>
<td align="left">Allows binding of basic authorization credentials</td>
<td align="left"><code>BasicAuth basicAuth</code></td>
</tr>
</tbody></table>
<h3 id="Variable-resolution-ÂèòÈáèËß£Êûê"><a href="#Variable-resolution-ÂèòÈáèËß£Êûê" class="headerlink" title="Variable resolution (ÂèòÈáèËß£Êûê)"></a>Variable resolution (ÂèòÈáèËß£Êûê)</h3><p>Micronaut Â∞ùËØïÈÄöËøáÂ¶Ç‰∏ãÈ°∫Â∫èÊù•Â°´ÂÖÖÊñπÊ≥ïÂèÇÊï∞:</p>
<ol>
<li>URI ÂèòÈáè, ‰æãÂ¶Ç <code>/&#123;id&#125;</code></li>
<li>Â¶ÇÊûúËØ∑Ê±ÇÊòØ‰∏Ä‰∏™ <code>GET</code> ËØ∑Ê±Ç, ‰ªéËØ∑Ê±ÇÂèÇÊï∞‰∏≠Ëé∑Âèñ, ‰æãÂ¶Ç <code>?foo=bar</code></li>
<li>Â¶ÇÊûúÊúâ‰∏Ä‰∏™ <code>@Body</code> Ê≥®Ëß£Âπ∂‰∏îËØ∑Ê±ÇÂÖÅËÆ∏Ëøô‰∏™ body, ÈÇ£‰πàÁªëÂÆöËøô‰∏™ body Âà∞ <code>@Body</code> Ê≥®Ëß£‰øÆÈ•∞ÁöÑÂèÇÊï∞‰∏ä</li>
<li>Â¶ÇÊûúËØ∑Ê±ÇÂèØ‰ª•Êúâ body ‰ΩÜÊòØÊ≤°Êúâ‰ΩøÁî® <code>@Body</code> Ê≥®Ëß£‰øÆÈ•∞ÂèÇÊï∞, ÈÇ£‰πàÂ∞±Â∞ùËØïËß£Êûê body(JSON Êàñ form data), Â∞ÜÊñπÊ≥ïÂèÇÊï∞ÁªëÂÆöÂà∞ body</li>
<li>ÊúÄÂêé, Â¶ÇÊûúÊñπÊ≥ïÂèÇÊï∞Êó†Ê≥ïË¢´Â°´ÂÖÖ, ÈÇ£‰πàÂ∞±ËøîÂõû <code>400 BAD REQUEST</code></li>
</ol>
<h2 id="Custom-Argument-Binding-Ëá™ÂÆö‰πâÂèÇÊï∞ÁªëÂÆö"><a href="#Custom-Argument-Binding-Ëá™ÂÆö‰πâÂèÇÊï∞ÁªëÂÆö" class="headerlink" title="Custom Argument Binding (Ëá™ÂÆö‰πâÂèÇÊï∞ÁªëÂÆö)"></a>Custom Argument Binding (Ëá™ÂÆö‰πâÂèÇÊï∞ÁªëÂÆö)</h2><blockquote>
<p>Micronaut uses an ArgumentBinderRegistry to look up ArgumentBinder beans capable of binding to the arguments in controller methods.</p>
</blockquote>
<p>Micronaut ‰ΩøÁî®‰∏Ä‰∏™ <code>ArgumentBinderRegistry</code> Êù•Êü•ÊâæËÉΩÂ§üÁªëÂÆöÂà∞ Controller ÊñπÊ≥ï‰∏≠ÁöÑÂèÇÊï∞ÁöÑ <code>ArgumentBinder</code> Bean</p>
<blockquote>
<p>The default implementation looks for an annotation on the argument that is meta-annotated with @Bindable.</p>
</blockquote>
<p>ÈªòËÆ§ÁöÑÂÆûÁé∞ÊòØÂÖàÂØªÊâæ‰øÆÈ•∞ÂèÇÊï∞ÁöÑ ‰ΩøÁî®‰∫Ü<code>@Bindable</code>Ê≥®Ëß£‰øÆÈ•∞ÁöÑ Ê≥®Ëß£</p>
<blockquote>
<p>If one exists the argument binder registry searches for an argument binder that supports that annotation.</p>
</blockquote>
<p>Â¶ÇÊûúÊâæÂà∞‰∏Ä‰∏™‰ΩøÁî®‰∫Ü <code>@Bindable</code> Ê≥®Ëß£‰øÆÈ•∞ÁöÑÊ≥®Ëß£, ÈÇ£‰πà <code>argument binder registry</code> Â∞Ü‰ºöÂØªÊâæ‰∏Ä‰∏™ÊîØÊåÅËøô‰∏™Ê≥®Ëß£ÁöÑ <code>argument binder</code></p>
<blockquote>
<p>If no fitting annotation is found Micronaut tries to find an argument binder that supports the argument type.</p>
</blockquote>
<p>Â¶ÇÊûúÊ≤°ÊúâÊâæÂà∞‰ΩøÁî® <code>@Bindable</code> Ê≥®Ëß£‰øÆÈ•∞ÁöÑÊ≥®Ëß£, ÈÇ£‰πà Micronaut Â∞Ü‰ºöÂ∞ùËØïÂØªÊâæ‰∏Ä‰∏™ÊîØÊåÅÂèÇÊï∞Á±ªÂûãÁöÑ <code>argument binder</code></p>
<blockquote>
<p>An argument binder returns a ArgumentBinder.BindingResult.</p>
</blockquote>
<p>‰∏Ä‰∏™ <code>argument binder</code> ËøîÂõû‰∏Ä‰∏™ <code>ArgumentBinder.BindingResult</code></p>
<blockquote>
<p>The binding result gives Micronaut more information than just the value.</p>
</blockquote>
<p>Ëøô‰∏™ <code>BindingResult</code> Áªô Micronaut Êèê‰æõ‰∫ÜÊõ¥Â§öÁöÑ‰ø°ÊÅØËÄå‰∏ç‰ªÖ‰ªÖÊòØÂÄº</p>
<blockquote>
<p>Binding results are either satisfied or unsatisfied, and either empty or not empty.</p>
</blockquote>
<p><code>BindingResult</code> ‰∏çÊòØ satisfied Â∞±ÊòØ unsatisfied ÁöÑ, ‰∏çÊòØ empty Â∞±ÊòØ not empty ÁöÑ</p>
<blockquote>
<p>If an argument binder returns an unsatisfied result, the binder may be called again at different times in request processing.</p>
</blockquote>
<p>Â¶ÇÊûú‰∏Ä‰∏™ <code>argument binder</code> ËøîÂõû‰∏Ä‰∏™ unsatisfied ÁªìÊûú, Ëøô‰∏™ binder ÂèØËÉΩ‰ºöÂú®Â§ÑÁêÜËØ∑Ê±ÇÁöÑ‰∏çÂêåÊó∂ÂÄôË¢´ÂÜçÊ¨°Ë∞ÉÁî®</p>
<blockquote>
<p>Argument binders are initially called before the body is read and before any filters are executed.</p>
</blockquote>
<p><code>argument binders</code> Âú® body Ë¢´ËØªÂèñÂíåÂú®‰ªª‰Ωï filter Ë¢´ÊâßË°å‰πãÂâçË¢´ÂàùÂßãÂåñË∞ÉÁî®</p>
<blockquote>
<p>If a binder relies on any of that data and it is not present, return a ArgumentBinder.BindingResult#UNSATISFIED result.</p>
</blockquote>
<p>Â¶ÇÊûú‰∏Ä‰∏™ binder ‰æùËµñ‰∫éÂÖ∂‰∏≠ÁöÑ‰ªª‰ΩïÊï∞ÊçÆ, ËÄåËØ•Êï∞ÊçÆ‰∏çÂ≠òÂú®, ÂàôËøîÂõû‰∏Ä‰∏™ <code>ArgumentBinder.BindingResult#UNSATISFIED</code></p>
<blockquote>
<p>Returning an ArgumentBinder.BindingResult#EMPTY or satisfied result will be the final result and the binder will not be called again for that request.</p>
</blockquote>
<p>ËøîÂõû‰∏Ä‰∏™ <code>ArgumentBinder.BindingResult#EMPTY</code> ÊàñËÄÖ satisfied result Â∞ÜÊòØÊúÄÁªàÁöÑ result, Âú®Ëøô‰∏™ËØ∑Ê±Ç‰∏≠ binder ‰∏ç‰ºöÂÜçÊ¨°Ë¢´Ë∞ÉÁî®</p>
<blockquote>
<p>At the end of processing if the result is still ArgumentBinder.BindingResult#UNSATISFIED, it is considered ArgumentBinder.BindingResult#EMPTY.</p>
</blockquote>
<p>Âú®Â§ÑÁêÜÁöÑÊúÄÂêéÂ¶ÇÊûúÁªìÊûú‰ªçÁÑ∂ÊòØ <code>ArgumentBinder.BindingResult#UNSATISFIED</code>, ËøôË¢´ËÆ§‰∏∫ÊòØ <code>ArgumentBinder.BindingResult#EMPTY</code></p>
<h3 id="AnnotatedRequestArgumentBinder-Ê≥®Ëß£‰øÆÈ•∞ÁöÑËØ∑Ê±ÇÂèÇÊï∞ÁªëÂÆö"><a href="#AnnotatedRequestArgumentBinder-Ê≥®Ëß£‰øÆÈ•∞ÁöÑËØ∑Ê±ÇÂèÇÊï∞ÁªëÂÆö" class="headerlink" title="AnnotatedRequestArgumentBinder (Ê≥®Ëß£‰øÆÈ•∞ÁöÑËØ∑Ê±ÇÂèÇÊï∞ÁªëÂÆö)"></a>AnnotatedRequestArgumentBinder (Ê≥®Ëß£‰øÆÈ•∞ÁöÑËØ∑Ê±ÇÂèÇÊï∞ÁªëÂÆö)</h3><blockquote>
<p>Argument binders that bind based on the presence of an annotation must implement AnnotatedRequestArgumentBinder, and can be used by creating an annotation that is annotated with Bindable.</p>
</blockquote>
<p>Âü∫‰∫éÊ≥®Ëß£ÊòØÂê¶Â≠òÂú®ËøõË°åÁªëÂÆöÁöÑ <code>argument binder</code> ÂøÖÈ°ªÂÆûÁé∞ <code>AnnotatedRequestArgumentBinder</code>, ÂèØ‰ª•ÈÄöËøáÂàõÂª∫‰∏Ä‰∏™Ë¢´ <code>@Bindable</code> Ê≥®Ëß£‰øÆÈ•∞ÁöÑÊ≥®Ëß£Êù•ÂÆûÁé∞</p>
<p>Example - An example of a binding annotation:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> groovy.transform.CompileStatic</span><br><span class="line"><span class="keyword">import</span> io.micronaut.context.annotation.AliasFor</span><br><span class="line"><span class="keyword">import</span> io.micronaut.core.bind.annotation.Bindable</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Retention</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.annotation.ElementType.ANNOTATION_TYPE</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.annotation.ElementType.FIELD</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.annotation.ElementType.PARAMETER</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.annotation.RetentionPolicy.RUNTIME</span><br><span class="line"></span><br><span class="line"><span class="meta">@CompileStatic</span></span><br><span class="line"><span class="meta">@Target</span>([FIELD, PARAMETER, ANNOTATION_TYPE])</span><br><span class="line"><span class="meta">@Retention</span>(RUNTIME)</span><br><span class="line"><span class="meta">@Bindable</span> <span class="comment">// The bingding annotation must itself be annotated as Bindable</span></span><br><span class="line"><span class="meta">@interface</span> ShoppingCart &#123;</span><br><span class="line">    <span class="meta">@AliasFor</span>(annotation = Bindable, member = <span class="string">&quot;value&quot;</span>)</span><br><span class="line">    String value() <span class="keyword">default</span> <span class="string">&quot;&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Example - Example of annotated data binding:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> groovy.transform.CompileStatic</span><br><span class="line"><span class="keyword">import</span> io.micronaut.core.convert.ArgumentConversionContext</span><br><span class="line"><span class="keyword">import</span> io.micronaut.core.convert.ConversionService</span><br><span class="line"><span class="keyword">import</span> io.micronaut.core.type.Argument</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.HttpRequest</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.bind.binders.AnnotatedRequestArgumentBinder</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.cookie.Cookie</span><br><span class="line"><span class="keyword">import</span> io.micronaut.jackson.serialize.JacksonObjectSerializer</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.inject.Singleton</span><br><span class="line"></span><br><span class="line"><span class="meta">@CompileStatic</span></span><br><span class="line"><span class="meta">@Singleton</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ShoppingCartRequestArgumentBinder</span></span><br><span class="line">        <span class="keyword">implements</span> <span class="title class_">AnnotatedRequestArgumentBinder</span>&lt;ShoppingCart, Object&gt; &#123; <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ConversionService&lt;?&gt; conversionService</span><br><span class="line">    private final JacksonObjectSerializer objectSerializer</span><br><span class="line"></span><br><span class="line">    ShoppingCartRequestArgumentBinder(</span><br><span class="line">            ConversionService&lt;?&gt; conversionService,</span><br><span class="line">            JacksonObjectSerializer objectSerializer) &#123;</span><br><span class="line">        this.conversionService = conversionService</span><br><span class="line">        this.objectSerializer = objectSerializer</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    Class&lt;ShoppingCart&gt; getAnnotationType() &#123;</span><br><span class="line">        ShoppingCart</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    BindingResult&lt;Object&gt; bind(</span><br><span class="line">            ArgumentConversionContext&lt;Object&gt; context,</span><br><span class="line">            HttpRequest&lt;?&gt; source) &#123; <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line">        String parameterName = context.annotationMetadata</span><br><span class="line">                .stringValue(ShoppingCart)</span><br><span class="line">                .orElse(context.argument.name)</span><br><span class="line"></span><br><span class="line">        Cookie cookie = source.cookies.get(<span class="string">&quot;shoppingCart&quot;</span>)</span><br><span class="line">        if (!cookie) &#123;</span><br><span class="line">            return BindingResult.EMPTY</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Optional&lt;Map&lt;String, Object&gt;&gt; cookieValue = objectSerializer.deserialize(</span><br><span class="line">                cookie.value.bytes,</span><br><span class="line">                Argument.mapOf(String, Object))</span><br><span class="line"></span><br><span class="line">        return (BindingResult) &#123; -&gt;</span><br><span class="line">            cookieValue.flatMap(&#123;value -&gt;</span><br><span class="line">                conversionService.convert(value.get(parameterName), context)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>1</code> : The custom argument binder must implement <code>AnnotatedRequestArgumentBinder</code>, including both the annotation type to trigger binder and the type of the argument expected</p>
<p><code>2</code> : Ovrride the <code>bind</code> method with the custom argument binding logic</p>
<p>Example - A controller operation with this annotated binding:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Get</span>(<span class="string">&quot;/annotated&quot;</span>)</span><br><span class="line">HttpResponse&lt;String&gt; checkSession(<span class="meta">@ShoppingCart</span> Long sessionId) &#123;&#125; <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<p><code>1</code> : The parameter is bound with the binder associated with <code>@ShoppingCart</code>. This takes precedence over a type-based binder, if applicable</p>
<h3 id="TypedRequestArgumentBinder-ËØ∑Ê±ÇÂèÇÊï∞Á±ªÂûãÁªëÂÆö"><a href="#TypedRequestArgumentBinder-ËØ∑Ê±ÇÂèÇÊï∞Á±ªÂûãÁªëÂÆö" class="headerlink" title="TypedRequestArgumentBinder (ËØ∑Ê±ÇÂèÇÊï∞Á±ªÂûãÁªëÂÆö)"></a>TypedRequestArgumentBinder (ËØ∑Ê±ÇÂèÇÊï∞Á±ªÂûãÁªëÂÆö)</h3><blockquote>
<p>Argument binders that bind based on the type of the argument must implement TypedRequestArgumentBinder.</p>
</blockquote>
<p>Âü∫‰∫éÂèÇÊï∞Á±ªÂûãËøõË°åÁªëÂÆöÁöÑ <code>argument binder</code> ÂøÖÈ°ªÂÆûÁé∞ <code>TypedRequestArgumentBinder</code></p>
<p>Example - The POJO:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.core.annotation.Introspected</span><br><span class="line"></span><br><span class="line"><span class="meta">@Introspected</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ShoppingCart</span> &#123;</span><br><span class="line">    String sessionId</span><br><span class="line">    Integer total</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Example - The argument binder:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.core.convert.ArgumentConversionContext</span><br><span class="line"><span class="keyword">import</span> io.micronaut.core.type.Argument</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.HttpRequest</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.bind.binders.TypedRequestArgumentBinder</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.cookie.Cookie</span><br><span class="line"><span class="keyword">import</span> io.micronaut.jackson.serialize.JacksonObjectSerializer</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.inject.Singleton</span><br><span class="line"></span><br><span class="line"><span class="meta">@Singleton</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ShoppingCartRequestArgumentBinder</span> <span class="keyword">implements</span> <span class="title class_">TypedRequestArgumentBinder</span>&lt;ShoppingCart&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> JacksonObjectSerializer objectSerializer</span><br><span class="line"></span><br><span class="line">    ShoppingCartRequestArgumentBinder(JacksonObjectSerializer objectSerializer) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.objectSerializer = objectSerializer</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    BindingResult&lt;ShoppingCart&gt; bind(ArgumentConversionContext&lt;ShoppingCart&gt; context,</span><br><span class="line">                                     HttpRequest&lt;?&gt; source) &#123; <span class="comment">//</span></span><br><span class="line"></span><br><span class="line">        Cookie cookie = source.cookies.get(<span class="string">&quot;shoppingCart&quot;</span>)</span><br><span class="line">        if (!cookie) &#123;</span><br><span class="line">            return BindingResult.EMPTY</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return () -&gt; objectSerializer.deserialize( <span class="comment">//</span></span><br><span class="line">                cookie.value.bytes,</span><br><span class="line">                ShoppingCart)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    Argument&lt;ShoppingCart&gt; argumentType() &#123;</span><br><span class="line">        Argument.of(ShoppingCart) <span class="comment">//</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Example - Usage:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Get</span>(<span class="string">&quot;/typed&quot;</span>)</span><br><span class="line">HttpResponse&lt;Map&lt;String, Object&gt;&gt; loadCart(ShoppingCart shoppingCart) &#123; <span class="comment">//</span></span><br><span class="line">    HttpResponse.ok(</span><br><span class="line">            <span class="symbol">sessionId:</span> shoppingCart.sessionId,</span><br><span class="line">            <span class="symbol">total:</span> shoppingCart.total)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Host-Resolution-Host-Ëß£Êûê"><a href="#Host-Resolution-Host-Ëß£Êûê" class="headerlink" title="Host Resolution (Host Ëß£Êûê)"></a>Host Resolution (Host Ëß£Êûê)</h2><p>Micronaut Êèê‰æõ‰∫Ü‰∏Ä‰∏™ <code>HttpHostResolver</code> Êé•Âè£ÂÆûÁé∞Êù•Ëß£ÊûêÂΩìÂâç Server ÁöÑ host ÂêçÁß∞</p>
<p>Ëøô‰∏™ÈªòËÆ§ÂÆûÁé∞ÈÄöËøáÂ¶Ç‰∏ãÂú∞ÊñπÊåâÈ°∫Â∫èÊù•ÂØªÊâæ host ‰ø°ÊÅØ:</p>
<ol>
<li>Êèê‰æõÁöÑÈÖçÁΩÆ</li>
<li><code>Forwarded</code> header</li>
<li><code>X-Forwarded-</code> headers. Â¶ÇÊûú <code>X-Forwarded-Host</code> header Ê≤°ÊúâÊèê‰æõ, Âè¶Â§ñÁöÑ <code>X-Forwarded</code> headers Ë¢´ÂøΩÁï•</li>
<li><code>Host</code> header</li>
<li>Âú®ËØ∑Ê±ÇÁöÑ URI ‰∏äÁöÑÂ±ûÊÄß</li>
<li>Âú®ÂÜÖÂµåÁöÑ server URI ‰∏äÁöÑÂ±ûÊÄß</li>
</ol>
<blockquote>
<p>The behavior of which headers to pull the relevant data can be changed with the following configuration</p>
</blockquote>
<p>‰ªé Header ‰∏≠Ëé∑ÂèñÁõ∏ÂÖ≥Êï∞ÊçÆÁöÑË°å‰∏∫ÂèØ‰ª•ÈÄöËøáÂ¶Ç‰∏ãÈÖçÁΩÆËøõË°åÊõ¥Êîπ:</p>
<p>Table - Configuration Properties for <code>HostResolutionConfiguration</code>:</p>
<table>
<thead>
<tr>
<th align="left">Property</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>micronaut.server.host-resolution</code></td>
<td align="left"><code>HttpServerConfiguration$HostResolutionConfiguration</code></td>
<td align="left">The host resolution configuration</td>
</tr>
<tr>
<td align="left"><code>micronaut.server.host-resolution.host-header</code></td>
<td align="left"><code>java.lang.String</code></td>
<td align="left">The header name that stores the host</td>
</tr>
<tr>
<td align="left"><code>micronaut.server.host-resolution.protocol-header</code></td>
<td align="left"><code>java.lang.String</code></td>
<td align="left">The header name that stores the protocol</td>
</tr>
<tr>
<td align="left"><code>micronaut.server.host-resolution.port-header</code></td>
<td align="left"><code>java.lang.String</code></td>
<td align="left">The header name that stores the port</td>
</tr>
<tr>
<td align="left"><code>micronaut.server.host-resolution.port-in-host</code></td>
<td align="left"><code>boolean</code></td>
<td align="left">True if the host header supports a port</td>
</tr>
<tr>
<td align="left"><code>micronaut.server.host-resolution.allowed-hosts</code></td>
<td align="left"><code>java.util.List</code></td>
<td align="left">The list of allowed host regex patterns. Any resolved</td>
</tr>
</tbody></table>
<blockquote>
<p>The above configuration also supports an allowed host list.</p>
</blockquote>
<p>‰∏äÈù¢ÁöÑÈÖçÁΩÆ‰∏≠ËøòÊèê‰æõ‰∫Ü‰∏Ä‰∏™ÊîæË°å host ÂàóË°®</p>
<blockquote>
<p>Configuring this list ensures any resolved host matches one of the supplied regular expression patterns.</p>
</blockquote>
<p>ÈÖçÁΩÆËøô‰∏™ÂàóË°®Á°Æ‰øù‰ªª‰ΩïË¢´Ëß£ÊûêÁöÑ host ÂåπÈÖç‰∏äÊèê‰æõÁöÑÊ≠£ÂàôË°®ËææÂºè‰∏≠ÁöÑ‰∏Ä‰∏™</p>
<blockquote>
<p>That is useful to prevent host cache poisoning attacks and is recommended to be configured.</p>
</blockquote>
<p>ËøôÂú®Èò≤Ê≠¢ host ÁºìÂ≠ò <code>poisoning attacks</code> ÊòØÂæàÊúâÁî®ÁöÑ, Âª∫ËÆÆËøõË°åËøô‰∏™ÈÖçÁΩÆ</p>
<h2 id="Locale-Resolution-Êú¨Âú∞ÂåñËß£Êûê"><a href="#Locale-Resolution-Êú¨Âú∞ÂåñËß£Êûê" class="headerlink" title="Locale Resolution (Êú¨Âú∞ÂåñËß£Êûê)"></a>Locale Resolution (Êú¨Âú∞ÂåñËß£Êûê)</h2><p>Micronaut ÊîØÊåÅÂ§öÁßçÁ≠ñÁï•Êù•Âú®‰∏Ä‰∏™ËØ∑Ê±Ç‰∏≠Ëß£Êûê locales</p>
<p>ÂèØ‰ª•Âú®ËØ∑Ê±Ç‰∏ä‰ΩøÁî® <code>getLocale--</code> ÊñπÊ≥ï, ‰ΩÜÊòØËøôÂè™ÊîØÊåÅËß£Êûê <code>Accept-Language</code> header</p>
<p>Âú®ÂÖ∂‰ªñÂú∫ÊôØ‰∏≠, locale ÂèØËÉΩÂ≠òÂú®‰∫é cookie, user‚Äôs session, ÊàñËÄÖË¢´ËÆæÁΩÆ‰∏∫‰∏Ä‰∏™Âõ∫ÂÆöÂÄº</p>
<p><code>HttpLocaleResolver</code> ÂèØ‰ª•Áî®Êù•ÊåáÊòéÂΩìÂâçÁöÑ locale</p>
<p>‰∏çÈúÄË¶ÅÁõ¥Êé•‰ΩøÁî® <code>LocaleResolver</code> API</p>
<p>ÁÆÄÂçïÂú∞Âú® Controller ÊñπÊ≥ï‰∏≠ÂÆö‰πâ‰∏Ä‰∏™Á±ªÂûã‰∏∫ <code>java.util.Locale</code> ÁöÑÂèÇÊï∞, Ëøô‰∏™ÂèÇÊï∞Â∞Ü‰ºöËá™Âä®Ë¢´Ëß£ÊûêÂπ∂Ê≥®ÂÖ•</p>
<p>Example - ÊéßÂà∂ÊÄéÊ†∑Ëß£Êûê locale ÁöÑÈÖçÁΩÆÈÄâÈ°π- Configuration Properties for <code>HttpLocaleResolutionConfigurationProperties</code>:</p>
<table>
<thead>
<tr>
<th align="left">Property</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>micronaut.server.locale-resolution</code></td>
<td align="left"><code>HttpServerConfiguration$HttpLocaleResolutionConfigurationProperties</code></td>
<td align="left">The locale resolution configuration; locale Ëß£ÊûêÈÖçÁΩÆ</td>
</tr>
<tr>
<td align="left"><code>micronaut.server.locale-resolution.fixed</code></td>
<td align="left"><code>java.util.Locale</code></td>
<td align="left">Set the language tag for the locale. Supports BCP 47 language tags (e.g. ‚Äúen-US‚Äù) and ISO standard (e.g ‚Äúen_US‚Äù); ‰∏∫ locale ËÆæÁΩÆËØ≠Ë®ÄÊ†áÁ≠æ. ÊîØÊåÅ BCP 47 ËØ≠Ë®ÄÊ†áÁ≠æ(‰æãÂ¶Ç, ‚Äúen-US‚Äù) Âíå ISO Ê†áÂáÜ(‰æãÂ¶Ç, ‚Äúen_US‚Äù)</td>
</tr>
<tr>
<td align="left"><code>micronaut.server.locale-resolution.session-attribute</code></td>
<td align="left"><code>java.lang.String</code></td>
<td align="left">Sets the key in the session to look for the locale; ËÆæÁΩÆÂú® session ‰∏≠ÂØªÊâæ locale ÁöÑ key ÂÄº</td>
</tr>
<tr>
<td align="left"><code>micronaut.server.locale-resolution.cookie-name</code></td>
<td align="left"><code>java.lang.String</code></td>
<td align="left">Sets the name of the cookie that is used to store the locale; ËÆæÁΩÆ‰øùÂ≠ò locale ÁöÑ Cookie ÁöÑÂêçÁß∞</td>
</tr>
<tr>
<td align="left"><code>micronaut.server.locale-resolution.header</code></td>
<td align="left"><code>boolean</code></td>
<td align="left">Set to true if the locale should be resolved from the Accept-Language header. Default value (true); ËÆæÁΩÆ‰∏∫ true Âàô locale Â∫îËØ•‰ªé Accept-Language header ‰∏≠Ëß£Êûê, ÈªòËÆ§‰∏∫ true</td>
</tr>
<tr>
<td align="left"><code>micronaut.server.locale-resolution.default-locale</code></td>
<td align="left"><code>java.util.Locale</code></td>
<td align="left">Sets the locale that will be used if the locale cannot be resolved through any means. Defaults to the system default; ËÆæÁΩÆÈªòËÆ§ÁöÑ locale, ÈªòËÆ§‰∏∫Á≥ªÁªüÈªòËÆ§ÂÄº</td>
</tr>
</tbody></table>
<blockquote>
<p>If multiple methods are configured, the fixed locale takes precedence, followed by session&#x2F;cookie, then header.</p>
</blockquote>
<p>Â¶ÇÊûúÊúâÈÖçÁΩÆ‰∫ÜÂ§ö‰∏™ÊñπÊ≥ï, ÂàôÈÇ£‰∏™Âõ∫ÂÆöÂÄº‰ºòÂÖàÁ∫ßÊúÄÈ´ò, Êåâ session&#x2F;cookie, header ÁöÑÈ°∫Â∫è</p>
<h2 id="Client-IP-Address-ÂÆ¢Êà∑Á´Ø-IP-Âú∞ÂùÄ"><a href="#Client-IP-Address-ÂÆ¢Êà∑Á´Ø-IP-Âú∞ÂùÄ" class="headerlink" title="Client IP Address (ÂÆ¢Êà∑Á´Ø IP Âú∞ÂùÄ)"></a>Client IP Address (ÂÆ¢Êà∑Á´Ø IP Âú∞ÂùÄ)</h2><p>Micronaut Êèê‰æõ‰∫Ü‰∏Ä‰∏™ <code>HttpClientAddressResolver</code> ÂÆûÁé∞Êù•Ëß£Êûê‰∏Ä‰∏™ HTTP ËØ∑Ê±ÇÁöÑËµ∑Âßã IP Âú∞ÂùÄ</p>
<p>ÈªòËÆ§ÂÆûÁé∞Âú®Â¶Ç‰∏ãÂú∞Êñπ‰∏≠ÊåâÈ°∫Â∫èËß£ÊûêÂÆ¢Êà∑Á´ØÂú∞ÂùÄ:</p>
<ol>
<li>ÈÖçÁΩÆÁöÑ header</li>
<li><code>Forwarded</code> header</li>
<li><code>X-Forwarded-For</code> header</li>
<li>ËØ∑Ê±Ç‰∏äÈù¢ÁöÑËøúÁ®ãÂú∞ÂùÄ</li>
</ol>
<p>Á¨¨‰∏Ä‰∏™‰ºòÂÖàÁ∫ß header ÂêçÁß∞ÂèØ‰ª•‰ΩøÁî® <code>micronaut-server.client-address-header</code> Êù•ÈÖçÁΩÆ</p>
<h2 id="The-HttpRequest-and-HttpResponse-HttpRequest-Âíå-HttpResponse"><a href="#The-HttpRequest-and-HttpResponse-HttpRequest-Âíå-HttpResponse" class="headerlink" title="The HttpRequest and HttpResponse (HttpRequest Âíå HttpResponse)"></a>The HttpRequest and HttpResponse (HttpRequest Âíå HttpResponse)</h2><p>Â¶ÇÊûú‰Ω†ÈúÄË¶ÅÂØπËØ∑Ê±ÇÂ§ÑÁêÜÊúâÊõ¥Â§öÁöÑÊéßÂà∂, ‰Ω†ÂèØ‰ª•ÁºñÂÜô‰∏Ä‰∏™ÊñπÊ≥ïÊé•Âèó‰∏Ä‰∏™ÂÆåÊï¥ÁöÑ <code>HttpRequest</code></p>
<p>‰∫ãÂÆû‰∏ä, Êúâ‰∏Ä‰∫õÈ´òÁ∫ßÊé•Âè£ÂèØ‰ª•ÁªëÂÆöÂà∞ Controller ÊñπÊ≥ïÂèÇÊï∞‰∏ä:</p>
<p>Table - Bindable Micronaut Interfaces:</p>
<table>
<thead>
<tr>
<th align="left">Interface</th>
<th align="left">Description</th>
<th align="left">Example</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>HttpRequest</code></td>
<td align="left">The full HttpRequest</td>
<td align="left"><code>String hello(HttpRequest request)</code></td>
</tr>
<tr>
<td align="left"><code>HttpHeaders</code></td>
<td align="left">All HTTP headers present in the request</td>
<td align="left"><code>String hello(HttpHeaders headers)</code></td>
</tr>
<tr>
<td align="left"><code>HttpParameters</code></td>
<td align="left">All HTTP parameters (either from URI variables or request parameters) present in the request</td>
<td align="left"><code>String hello(HttpParameters params)</code></td>
</tr>
<tr>
<td align="left"><code>Cookies</code></td>
<td align="left">All Cookies present in the request</td>
<td align="left"><code>String hello(Cookies cookies)</code></td>
</tr>
</tbody></table>
<p>Â¶ÇÊûúÈúÄË¶ÅËØ∑Ê±ÇÁöÑ body, <code>HttpRequest</code> Â∫îËØ•‰ΩøÁî®‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑÊ≥õÂûãÊù•ËøõË°åÂÆö‰πâ, ‰æãÂ¶Ç <code>HttpRequest&lt;MyClass&gt; request</code>. Âê¶Âàô, ËØ∑Ê±ÇÁöÑ body ÂèØËÉΩÊòØ‰∏çÂèØÁî®ÁöÑ</p>
<p>Èô§Ê≠§‰πãÂ§ñ, ‰∏∫‰∫ÜÂÆåÂÖ®ÊéßÂà∂ËæìÂá∫ÁöÑ HTTP ÂìçÂ∫î, ‰Ω†ÂèØ‰ª•‰ΩøÁî® <code>HttpResponse</code> ÁöÑÈùôÊÄÅÂ∑•ÂéÇÊñπÊ≥ïÊù•ËøîÂõû‰∏Ä‰∏™ <code>MutableHttpResponse</code></p>
<p>Example - Request and Response:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.http.HttpRequest</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.HttpResponse</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Controller</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Get</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.context.ServerRequestContext</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Mono</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&quot;/request&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MessageController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Get</span>(<span class="string">&quot;/hello&quot;</span>) </span><br><span class="line">    HttpResponse&lt;String&gt; hello(HttpRequest&lt;?&gt; request) &#123;</span><br><span class="line">        String name = request.parameters</span><br><span class="line">                             .getFirst(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">                             .orElse(<span class="string">&quot;Nobody&quot;</span>)</span><br><span class="line"></span><br><span class="line">        HttpResponse.ok(<span class="string">&quot;Hello $name !&quot;</span>)</span><br><span class="line">                    .header(<span class="string">&quot;X-My-Header&quot;</span>, <span class="string">&quot;Foo&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ËøòÂèØ‰ª•‰ªé‰∏Ä‰∏™ÈùôÊÄÅ‰∏ä‰∏ãÊñá <code>ServerRequestContext</code> ‰∏≠Ëé∑Âèñ <code>HttpRequest</code>:</p>
<p>Example - Using the ServerRequestContext:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.http.HttpRequest</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.HttpResponse</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Controller</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Get</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.context.ServerRequestContext</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Mono</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&quot;/request&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MessageController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Get</span>(<span class="string">&quot;/hello-static&quot;</span>) <span class="comment">// </span></span><br><span class="line">    HttpResponse&lt;String&gt; helloStatic() &#123;</span><br><span class="line">        HttpRequest&lt;?&gt; request = ServerRequestContext.currentRequest()</span><br><span class="line">                                                     .orElseThrow(() -&gt; new RuntimeException(<span class="string">&quot;No request present&quot;</span>))</span><br><span class="line">        String name = request.parameters</span><br><span class="line">                             .getFirst(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">                             .orElse(<span class="string">&quot;Nobody&quot;</span>)</span><br><span class="line"></span><br><span class="line">        HttpResponse.ok(<span class="string">&quot;Hello $name !&quot;</span>)</span><br><span class="line">                    .header(<span class="string">&quot;X-My-Header&quot;</span>, <span class="string">&quot;Foo&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Micronaut Ê°ÜÊû∂‰ΩøÁî® <code>Project Reactor</code> ‰Ωú‰∏∫ÈªòËÆ§ÁöÑÂìçÂ∫îÂºèÊµÅÂÆûÁé∞</p>
<p>Example - Using the Project Reactor context:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.http.HttpRequest</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.HttpResponse</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Controller</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Get</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.context.ServerRequestContext</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Mono</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&quot;/request&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MessageController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Get</span>(<span class="string">&quot;/hello-reactor&quot;</span>)</span><br><span class="line">    Mono&lt;HttpResponse&lt;String&gt;&gt; helloReactor() &#123;</span><br><span class="line">        Mono.deferContextual(ctx -&gt; &#123; <span class="comment">// </span></span><br><span class="line">            HttpRequest&lt;?&gt; request = ctx.get(ServerRequestContext.KEY) <span class="comment">// </span></span><br><span class="line">            String name = request.parameters</span><br><span class="line">                    .getFirst(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">                    .orElse(<span class="string">&quot;Nobody&quot;</span>)</span><br><span class="line"></span><br><span class="line">            Mono.just(HttpResponse.ok(<span class="string">&quot;Hello &quot;</span> + name + <span class="string">&quot;!!&quot;</span>)</span><br><span class="line">                    .header(<span class="string">&quot;X-My-Header&quot;</span>, <span class="string">&quot;Foo&quot;</span>))</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Response-Status-ÂìçÂ∫îÁä∂ÊÄÅ"><a href="#Response-Status-ÂìçÂ∫îÁä∂ÊÄÅ" class="headerlink" title="Response Status (ÂìçÂ∫îÁä∂ÊÄÅ)"></a>Response Status (ÂìçÂ∫îÁä∂ÊÄÅ)</h2><p>Micronaut Controller ÈªòËÆ§‰ΩøÁî® <code>200</code> HTTP Áä∂ÊÄÅËøõË°åÂìçÂ∫î</p>
<p>Â¶ÇÊûú Controller ÊñπÊ≥ïËøîÂõû‰∏Ä‰∏™ <code>HttpResponse</code>, ‰ΩøÁî® <code>status()</code> ÊñπÊ≥ïÊù•ÈÖçÁΩÆÂìçÂ∫îÁöÑÁä∂ÊÄÅÁ†Å:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Get</span>(value = <span class="string">&#x27;/http-response&#x27;</span>, produces = MediaType.TEXT_PLAIN)</span><br><span class="line">HttpResponse httpResponse() &#123;</span><br><span class="line">    HttpResponse.status(HttpStatus.CREATED).body(<span class="string">&quot;success&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ËøòÂèØ‰ª•‰ΩøÁî® <code>@Status</code> Ê≥®Ëß£:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Status</span>(HttpStatus.CREATED)</span><br><span class="line"><span class="meta">@Get</span>(produces = MediaType.TEXT_PLAIN)</span><br><span class="line">String index() &#123; <span class="string">&quot;success&quot;</span> &#125;</span><br></pre></td></tr></table></figure>

<p>ÊàñËÄÖ‰ΩøÁî®‰∏Ä‰∏™ <code>HttpStatus</code> ‰Ωú‰∏∫ÊñπÊ≥ïËøîÂõûÂÄº:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Get</span>(<span class="string">&quot;/http-status&quot;</span>)</span><br><span class="line">HttpStatus httpStatus() &#123;</span><br><span class="line">    HttpStatus.CREATED</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Response-Content-Type-ÂìçÂ∫îÁöÑ-Content-Type"><a href="#Response-Content-Type-ÂìçÂ∫îÁöÑ-Content-Type" class="headerlink" title="Response Content-Type (ÂìçÂ∫îÁöÑ Content-Type)"></a>Response Content-Type (ÂìçÂ∫îÁöÑ Content-Type)</h2><p>Micronaut ÁöÑ Controller ÁöÑË°å‰∏∫ÈªòËÆ§ËøîÂõû <code>applicatin/json</code> ÁöÑ <code>Content-Type</code></p>
<p>ÂèØ‰ª•‰ΩøÁî® <code>@Produces</code> Ê≥®Ëß£ÊåáÂÆöËøîÂõûÁöÑ <code>Content-Type</code>: <code>@Produces(MediaType.TEXT_HTML)</code></p>
<p>‰πüÂèØ‰ª•‰ΩøÁî® HTTP ÊñπÊ≥ïÊ≥®Ëß£ÁöÑ <code>produces</code> ÊàêÂëòÂ±ûÊÄßÊù•ÊåáÂÆöËøîÂõûÁöÑ <code>Context-Type</code>: <code>@Get(value = &#39;/xml&#39;, produces = MediaType.TEXT_XML)</code></p>
<h2 id="Accepted-Request-Content-Type-ÂèØÊé•ÂèóÁöÑËØ∑Ê±Ç-Content-Type"><a href="#Accepted-Request-Content-Type-ÂèØÊé•ÂèóÁöÑËØ∑Ê±Ç-Content-Type" class="headerlink" title="Accepted Request Content-Type (ÂèØÊé•ÂèóÁöÑËØ∑Ê±Ç Content-Type)"></a>Accepted Request Content-Type (ÂèØÊé•ÂèóÁöÑËØ∑Ê±Ç Content-Type)</h2><p>Micronaut ÁöÑ Controller ÁöÑË°å‰∏∫ÈªòËÆ§Ê∂àË¥π <code>application/json</code> ÁöÑ <code>Content-Type</code></p>
<p>ÂèØ‰ª•‰ΩøÁî® <code>@Consumes</code> Ê≥®Ëß£ÊàñËÄÖ HTTP ÊñπÊ≥ïÊ≥®Ëß£ÁöÑ <code>consumes</code> ÊàêÂëòÂ±ûÊÄßÊù•ÊåáÂÆöË¶ÅÊ∂àË¥πÁöÑ <code>Content-Type</code></p>
<p><code>@Consumes([MediaType.APPLICATION_FORM_URLENCODED, MediaType.APPLICATION_JSON])</code></p>
<p><code>@Post(value = &quot;/member&quot;, consumes = MediaType.TEXT_PLAIN)</code></p>
<h3 id="Customing-Processed-Content-Types-Ëá™ÂÆö‰πâÂ§ÑÁêÜÁöÑ-Content-Type"><a href="#Customing-Processed-Content-Types-Ëá™ÂÆö‰πâÂ§ÑÁêÜÁöÑ-Content-Type" class="headerlink" title="Customing Processed Content Types (Ëá™ÂÆö‰πâÂ§ÑÁêÜÁöÑ Content-Type)"></a>Customing Processed Content Types (Ëá™ÂÆö‰πâÂ§ÑÁêÜÁöÑ Content-Type)</h3><p>ÊôÆÈÄöÁöÑ JSON Ëß£ÊûêÂè™ÊúâÂú® Content-Type ÊòØ <code>application/json</code> ÁöÑÊó∂ÂÄôÊâç‰ºöÂèëÁîü</p>
<p>ÂÖ∂‰ªñ <code>MediaTypeCodec</code> Á±ª‰πüÊòØ‰∏ÄÊ†∑ÁöÑË°å‰∏∫, ÂÆÉ‰ª¨ÊúâÈ¢ÑÂÆö‰πâÂ•ΩÁöÑÂèØ‰ª•Â§ÑÁêÜÁöÑ Content-Type</p>
<p>‰∏∫‰∫ÜÊâ©Â±ïÁªôÂÆö codec ÂèØ‰ª•Â§ÑÁêÜÁöÑÂ™í‰ΩìÁ±ªÂûãÂàóË°®, Êèê‰æõÂ≠òÂÇ®Âú® <code>CodecConfiguration</code> ÁöÑÈÖçÁΩÆ:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">codec:</span></span><br><span class="line">        <span class="attr">json:</span></span><br><span class="line">            <span class="attr">additionalTypes:</span></span><br><span class="line">                <span class="bullet">-</span> <span class="string">text/javascript</span></span><br></pre></td></tr></table></figure>

<p>ÂΩìÂâçÊîØÊåÅÁöÑÈÖçÁΩÆÂâçÁºÄÊòØ <code>json</code>,<code>json-stream</code>,<code>text-stream</code></p>
<h2 id="Reactive-HTTP-Request-Processing-ÂìçÂ∫îÂºè-HTTP-ËØ∑Ê±ÇÂ§ÑÁêÜ"><a href="#Reactive-HTTP-Request-Processing-ÂìçÂ∫îÂºè-HTTP-ËØ∑Ê±ÇÂ§ÑÁêÜ" class="headerlink" title="Reactive HTTP Request Processing (ÂìçÂ∫îÂºè HTTP ËØ∑Ê±ÇÂ§ÑÁêÜ)"></a>Reactive HTTP Request Processing (ÂìçÂ∫îÂºè HTTP ËØ∑Ê±ÇÂ§ÑÁêÜ)</h2><p>Micronaut Âª∫Á´ãÂú® Netty ‰∏ä, Netty Ë¢´ËÆæËÆ°‰∏∫Âõ¥Áªï‰∏Ä‰∏™ Event loop Ê®°ÂûãÂíåÈùûÈòªÂ°û I&#x2F;O</p>
<p>Micronaut Âú®‰∏éËØ∑Ê±ÇÁ∫øÁ®ã(‰∏Ä‰∏™ Event Loop Á∫øÁ®ã)Áõ∏ÂêåÁöÑÁ∫øÁ®ã‰∏≠ÊâßË°å <code>@Controller</code> Bean ‰∏≠ÂÆö‰πâÁöÑ‰ª£Á†Å</p>
<p>Â¶ÇÊûú‰Ω†ÊâßË°å‰ªª‰ΩïÈòªÂ°û I&#x2F;O Êìç‰Ωú(‰æãÂ¶ÇÂíå Hibernate&#x2F;JPA&#x2F;JDBC ‰∫§‰∫í), ËøôÂ∞±ÈùûÂ∏∏ÈáçË¶Å‰∫Ü, ‰Ω†ÂèØ‰ª•Â∞ÜËøô‰∫õÊìç‰ΩúÂç∏ËΩΩÂà∞‰∏Ä‰∏™Áã¨Á´ãÁöÑÁ∫øÁ®ãÊ±†, Ëøô‰∏™Á∫øÁ®ãÊ±†‰∏ç‰ºöÈòªÂ°û Event loop</p>
<p>ÊØîÂ¶Ç‰∏ãÈù¢ÁöÑÈÖçÁΩÆ‰∏≠ÈÖçÁΩÆ‰∫Ü‰∏Ä‰∏™Âõ∫ÂÆö 75 ‰∏™Á∫øÁ®ãÁöÑ I&#x2F;O Á∫øÁ®ãÊ±†(Á±ª‰ºº‰º†ÁªüÈòªÂ°û Server, ‰æãÂ¶Ç Tomcat Â∞ÜËøô‰∏™Á∫øÁ®ãÊ±†Áî®Âú® thread-pre-request Ê®°Âûã‰∏≠):</p>
<p>Example - Configuring the IO thread pool:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="symbol">executors:</span></span><br><span class="line">        <span class="symbol">io:</span></span><br><span class="line">            <span class="symbol">type:</span> fixed</span><br><span class="line">            <span class="symbol">nThreads:</span> <span class="number">75</span></span><br></pre></td></tr></table></figure>

<p>Âú® <code>@Controller</code> Bean ‰∏≠ÊúâÂ§ö‰∏™ÊñπÂºè‰ΩøÁî®Ëøô‰∏™Á∫øÁ®ãÊ±†, ÊúÄÁÆÄÂçïÁöÑÊñπÂºèÊòØ‰ΩøÁî® <code>@ExecuteOn</code> Ê≥®Ëß£</p>
<p><code>@ExecuteOn</code> Ê≥®Ëß£ÂèØ‰ª•Â£∞ÊòéÂú®Á±ªÁ∫ßÂà´ÂíåÊñπÊ≥ïÁ∫ßÂà´, Áî®Êù•ÊåáÊòé Controller ÁöÑÊñπÊ≥ïË¶ÅËøêË°åÂú®Âì™‰∏™ÈÖçÁΩÆÁöÑÁ∫øÁ®ãÊ±†‰∏äÈù¢:</p>
<p>Example - Using <code>@ExecuteOn</code></p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.docs.http.server.reactive.PersonService</span><br><span class="line"><span class="keyword">import</span> io.micronaut.docs.ioc.beans.Person</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Controller</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Get</span><br><span class="line"><span class="keyword">import</span> io.micronaut.scheduling.TaskExecutors</span><br><span class="line"><span class="keyword">import</span> io.micronaut.scheduling.annotation.ExecuteOn</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&quot;/executeOn/people&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PersonController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> PersonService personService</span><br><span class="line"></span><br><span class="line">    PersonController(PersonService personService) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.personService = personService</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Get</span>(<span class="string">&quot;/&#123;name&#125;&quot;</span>)</span><br><span class="line">    <span class="meta">@ExecuteOn</span>(TaskExecutors.IO)    <span class="comment">// The @ExecuteOn annotation is used to execute the operation on the I/O thread pool</span></span><br><span class="line">    Person byName(String name) &#123;</span><br><span class="line">        personService.findByName(name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>@ExecuteOn</code> Ê≥®Ëß£ÁöÑÂÄºÂèØ‰ª•ÊòØ‰ªª‰ΩïÂÆö‰πâÂú® <code>micronaut.executors</code> ‰∏ãÂëΩÂêçÁöÑ executor</p>
<p>‰∏ÄËà¨ËÄåË®Ä, ÂØπ‰∫éÊï∞ÊçÆÂ∫ìÊìç‰Ωú, ‰Ω†Â∏åÊúõÈÖçÁΩÆ‰∏Ä‰∏™‰∏éÊï∞ÊçÆÂ∫ìËøûÊé•Ê±†‰∏≠ÊåáÂÆöÁöÑÊúÄÂ§ßËøûÊé•Êï∞Áõ∏ÂåπÈÖçÁöÑÁ∫øÁ®ãÊ±†</p>
<p>Èô§‰∫Ü‰ΩøÁî® <code>@ExecuteOn</code> Ê≥®Ëß£ÁöÑ, Âè¶‰∏Ä‰∏™ÈÄâÈ°πÊòØ‰ΩøÁî®‰Ω†ÈÄâÊã©ÁöÑÂìçÂ∫îÂºèÂ∫ìÊèê‰æõÁöÑÂäüËÉΩ</p>
<p>ÂìçÂ∫îÂºèÂÆûÁé∞‰æãÂ¶Ç <code>Project Reactor</code> Êàñ <code>RxJava</code> Êèê‰æõ‰∫Ü‰∏Ä‰∏™ <code>subscribeOn</code> ÊñπÊ≥ïÊù•ËÆ©‰Ω†ÂèØ‰ª•‰øÆÊîπ‰ΩøÁî®Âì™‰∏™Á∫øÁ®ãÊù•ÊâßË°åÁî®Êà∑‰ª£Á†Å:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.docs.ioc.beans.Person</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Controller</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Get</span><br><span class="line"><span class="keyword">import</span> io.micronaut.scheduling.TaskExecutors</span><br><span class="line"><span class="keyword">import</span> jakarta.inject.Named</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Mono</span><br><span class="line"><span class="keyword">import</span> reactor.core.scheduler.Scheduler</span><br><span class="line"><span class="keyword">import</span> reactor.core.scheduler.Schedulers</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&quot;/subscribeOn/people&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PersonController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Scheduler scheduler</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> PersonService personService</span><br><span class="line"></span><br><span class="line">    PersonController(</span><br><span class="line">        <span class="meta">@Named</span>(TaskExecutors.IO) ExecutorService executorService,   <span class="comment">// The configured I/O executor service is injected</span></span><br><span class="line">        PersonService personService</span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.scheduler = Schedulers.fromExecutorService(executorService)</span><br><span class="line">        <span class="variable language_">this</span>.personService = personService</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Get</span>(<span class="string">&quot;/&#123;name&#125;&quot;</span>)</span><br><span class="line">    Mono&lt;Person&gt; byName(String name) &#123;</span><br><span class="line">        <span class="keyword">return</span> Mono.fromCallable(&#123;-&gt; personService.findByName(name)&#125;)   <span class="comment">// The Mono::fromCallable method wraps the blocking operation</span></span><br><span class="line">                   .subscribeOn(scheduler)  <span class="comment">// The Project Reactor subscribeOn method schedules the operation on the I/O thread poll</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Using-the-Body-Annotation-‰ΩøÁî®-Body-Ê≥®Ëß£"><a href="#Using-the-Body-Annotation-‰ΩøÁî®-Body-Ê≥®Ëß£" class="headerlink" title="Using the @Body Annotation (‰ΩøÁî® @Body Ê≥®Ëß£)"></a>Using the <code>@Body</code> Annotation (‰ΩøÁî® <code>@Body</code> Ê≥®Ëß£)</h3><p>‰∏∫‰∫ÜËß£ÊûêËØ∑Ê±Ç body, È¶ñÂÖàÁî® <code>@Body</code> Ê≥®Ëß£Âêë Micronaut ÊåáÁ§∫Âì™‰∏™ÂèÇÊï∞Êù•Êé•Êî∂Êï∞ÊçÆ</p>
<p>Example - Using the <code>@Body</code> annotation:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.http.HttpResponse</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.MediaType</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Body</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Controller</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Post</span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.Size</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&quot;/receive&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MessageController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Post</span>(value = <span class="string">&quot;/echo&quot;</span>, consumes = MediaType.TEXT_PLAIN) <span class="comment">// 1</span></span><br><span class="line">    String echo(<span class="meta">@Size</span>(max = <span class="number">1024</span>) <span class="meta">@Body</span> String text) &#123;      <span class="comment">// 2</span></span><br><span class="line">        text</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>1</code> : <code>@Post</code> Ê≥®Ëß£Âíå <code>text/plain</code> Á±ªÂûãÁöÑ <code>MediaType</code> ‰∏ÄËµ∑‰ΩøÁî® (ÈªòËÆ§ÊòØ <code>applicatoin/json</code>)</p>
<p><code>2</code> : <code>@Body</code> Ê≥®Ëß£Âíå <code>javax.validation.constraints.Size</code> ‰∏ÄËµ∑‰ΩøÁî®, <code>@Size</code> Ê≥®Ëß£ÈôêÂà∂‰∫Ü body ÁöÑÊúÄÂ§ßÂ§ßÂ∞è‰∏∫ 1KB, Ëøô‰∏™Á∫¶Êùü‰∏ç‰ºöÈôêÂà∂ Server ÁöÑ read&#x2F;buffered Êï∞ÊçÆÁöÑÂ§ßÂ∞è</p>
<blockquote>
<p>Note that reading the request body is done in a non-blocking manner in that the request contents are read as the data becomes available and accumulated into the String passed to the method.</p>
</blockquote>
<p>Ë¶ÅÊ≥®ÊÑè, ËØªÂèñËØ∑Ê±Ç body ÊòØ‰ª•ÈùûÈòªÂ°ûÊñπÂºèÂÆåÊàêÁöÑ, Âõ†‰∏∫ËØ∑Ê±ÇÂÜÖÂÆπÊòØÂú®Êï∞ÊçÆÂèØÁî®Âπ∂Á¥ØËÆ°Âà∞ ‰º†ÈÄíÁªôÊñπÊ≥ïÁöÑÂ≠óÁ¨¶‰∏≤ ‰∏≠Êó∂ËØªÂèñÁöÑ</p>
<p>Âú® <code>application.yml</code> ‰∏≠ËÆæÁΩÆÁöÑ <code>micronaut.server.maxRequestSize</code> ÈôêÂà∂‰∫Ü Server read&#x2F;buffered ÁöÑÊï∞ÊçÆÂ§ßÂ∞è, ÈªòËÆ§ÊúÄÂ§ßËØ∑Ê±ÇÂ§ßÂ∞èÊòØ 10MB, <code>@Size</code> ‰∏çÊòØËøô‰∏™ËøôÈÖçÁΩÆÁöÑ‰ª£Êõø</p>
<blockquote>
<p>Regardless of the limit, for a large amount of data accumulating the data into a String in-memory may lead to memory strain on the server.</p>
</blockquote>
<p>‰∏çÁÆ°ÈôêÂà∂Â¶Ç‰Ωï, ÂØπ‰∫éÂ§ßÈáèÊï∞ÊçÆ, Â∞ÜÊï∞ÊçÆÁ¥ØËÆ°Âà∞ÂÜÖÂ≠ò‰∏≠ÁöÑÂ≠óÁ¨¶‰∏≤ÂèØËÉΩ‰ºöÂØºËá¥ Server ÂÜÖÂ≠òÁ¥ßÂº†</p>
<p>‰∏Ä‰∏™Êõ¥Â•ΩÂÅöÊ≥ïÊòØÂåÖÂê´‰∏Ä‰∏™ Reactive Â∫ìÂà∞‰Ω†ÁöÑÈ°πÁõÆ‰∏≠, ‰æãÂ¶Ç Reactor, RxJava, Akka, Ëøô‰∫õÂ∫ìÊîØÊåÅÂìçÂ∫îÂºèÊµÅÂÆûÁé∞, Âπ∂Âú®Êï∞ÊçÆÂèØÁî®Êó∂Â∞ÜÂÖ∂ÊµÅÂåñ</p>
<p>Example - Using Reactive Streams to Read the request body:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.http.HttpResponse</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.MediaType</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Body</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Controller</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Post</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.Size</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.reactivestrams.Publisher</span><br><span class="line"><span class="keyword">import</span> io.micronaut.core.async.annotation.SingleResult</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Flux</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&quot;/receive&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MessageController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Post</span>(value = <span class="string">&quot;/echo-publisher&quot;</span>, consumes = MediaType.TEXT_PLAIN)   <span class="comment">// 1</span></span><br><span class="line">    <span class="meta">@SingleResult</span></span><br><span class="line">    Publisher&lt;HttpResponse&lt;String&gt;&gt; echoFlow(<span class="meta">@Body</span> Publisher&lt;String&gt; text) &#123;    <span class="comment">// 2</span></span><br><span class="line">        <span class="keyword">return</span> Flux.from(text)</span><br><span class="line">                   .collect(    <span class="comment">// 3</span></span><br><span class="line">                       &#123; x -&gt; <span class="keyword">new</span> StringBuffer() &#125;,</span><br><span class="line">                       &#123; StringBuffer sb, String s -&gt; sb.append(s) &#125;</span><br><span class="line">                   )</span><br><span class="line">                   .map(</span><br><span class="line">                       &#123; buffer -&gt; HttpResponse.ok(buffer.toString()) &#125;</span><br><span class="line">                   )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>1</code> : In this case the method is altered to receive and return an <code>Publisher</code> type</p>
<p><code>2</code> : This example uses <code>Project Reactor</code> and returns a single item. Because of that the response type is annotated also with <code>SingleResult</code>. Micronaut only emits the response once the operation completes without blocking</p>
<p><code>3</code> : The <code>collect</code> method is used to accumulate the date in this simulated example, but it could for example write the data to a logging service, database, etc. chunk by chunk</p>
<blockquote>
<p>Body arguments of types that do not require conversion cause Micronaut to skip decoding of the request.</p>
</blockquote>
<p>‰∏çÈúÄË¶ÅËΩ¨Êç¢ÁöÑ Body ÂèÇÊï∞Á±ªÂûã‰ºöÂØºËá¥ Micronaut Ë∑≥ËøáÂØπËØ∑Ê±ÇÁöÑËß£Á†Å</p>
<h3 id="Reactive-Responses-ÂìçÂ∫îÂºèÂìçÂ∫î"><a href="#Reactive-Responses-ÂìçÂ∫îÂºèÂìçÂ∫î" class="headerlink" title="Reactive Responses (ÂìçÂ∫îÂºèÂìçÂ∫î)"></a>Reactive Responses (ÂìçÂ∫îÂºèÂìçÂ∫î)</h3><blockquote>
<p>Micronaut supports returning common reactive types such as Mono (or Single Maybe Observable types from RxJava), an instance of Publisher or CompletableFuture from any controller method.</p>
</blockquote>
<p>Micronaut ÊîØÊåÅËøîÂõûÊôÆÈÄöÂìçÂ∫îÂºèÁ±ªÂûã, ‰æãÂ¶Ç <code>Mono</code> (ÊàñËÄÖ RxJava ‰∏≠ÁöÑ <code>Single</code>,<code>Maybe</code>,<code>Observable</code>), Controller ÊñπÊ≥ïËøîÂõûÁöÑ‰∏Ä‰∏™ <code>Publisher</code> Êàñ <code>CompletableFuture</code> ÂÆû‰æã</p>
<p>Ë¶Å‰ΩøÁî® Project Reactor ÁöÑ <code>Flux</code> Êàñ <code>Mono</code>, Ë¶ÅÊ∑ªÂä† Micronaut Reactor ‰æùËµñÂà∞È°πÁõÆ‰∏≠, Êù•Ê∑ªÂä†ÂøÖË¶ÅÁöÑËΩ¨Êç¢Âô®</p>
<p>Ë¶Å‰ΩøÁî® RxJava ÁöÑ <code>Flowable</code>,<code>Single</code>,<code>Maybe</code>, Ë¶ÅÊ∑ªÂä† Micronaut RxJava ‰æùËµñÂà∞È°πÁõÆ‰∏≠, Êù•Ê∑ªÂä†ÂøÖË¶ÅÁöÑËΩ¨Êç¢Âô®</p>
<blockquote>
<p>The argument designated as the body of the request using the Body annotation can also be a reactive type or a CompletableFuture</p>
</blockquote>
<p>‰ΩøÁî® <code>@Body</code> Ê≥®Ëß£ÊåáÂÆö‰∏∫ËØ∑Ê±Ç body ÁöÑÂèÇÊï∞‰πüÂèØ‰ª•ÊòØÂìçÂ∫îÂºèÁ±ªÂûãÊàñ‰∏Ä‰∏™ <code>CompletableFuture</code></p>
<blockquote>
<p>When returning a reactive type, Micronaut subscribes to the returned reactive type on the same thread as the request (a Netty Event Loop thread).</p>
</blockquote>
<p>ÂΩìËøîÂõû‰∏Ä‰∏™ÂìçÂ∫îÂºèÁ±ªÂûãÊó∂, Micronaut Âú®‰∏éËØ∑Ê±ÇÁõ∏ÂêåÁöÑÁ∫øÁ®ã(‰∏Ä‰∏™ Netty Event Loop Á∫øÁ®ã)‰∏äËÆ¢ÈòÖËøîÂõûÁöÑÂìçÂ∫îÁ±ªÂûã</p>
<blockquote>
<p>It is therefore important that if you perform any blocking operations, you offload those operations to an appropriately configured thread pool, for example using the Project Reactor or RxJava subscribeOn(..) facility or @ExecuteOn.</p>
</blockquote>
<p>Âõ†Ê≠§, ÈáçË¶ÅÁöÑÊòØ, Â¶ÇÊûú‰Ω†ÊâßË°å‰ªª‰ΩïÈòªÂ°ûÊìç‰Ωú, ËØ∑Â∞ÜËøô‰∫õÊìç‰ΩúÂç∏ËΩΩÂà∞ÈÄÇÂΩìÈÖçÁΩÆÁöÑÁ∫øÁ®ãÊ±†, ‰æãÂ¶Ç‰ΩøÁî® Project Reactor Êàñ RxJava <code>subscribeOn(..)</code> Â∑•ÂÖ∑, ÊàñËÄÖ <code>@ExecuteOn</code></p>
<p>Table - ‰∏Ä‰∫õÂ∏∏Áî®ËøîÂõûÁ±ªÂûãÂíåÂÆÉ‰ª¨ÁöÑÂ§ÑÁêÜ - Micronaut Response Types:</p>
<table>
<thead>
<tr>
<th align="left">Type</th>
<th align="left">Description</th>
<th align="left">Example Signature</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>Publisher</code></td>
<td align="left">Any type that implements the <code>Publisher</code> interface</td>
<td align="left"><code>Publisher&lt;String&gt; hello()</code></td>
</tr>
<tr>
<td align="left"><code>CompletableFuture</code></td>
<td align="left">A Java <code>CompletableFuture</code> instance</td>
<td align="left"><code>CompletableFuture&lt;String&gt; hello()</code></td>
</tr>
<tr>
<td align="left"><code>HttpResponse</code></td>
<td align="left">An <code>HttpResponse</code> and optional response body</td>
<td align="left"><code>HttpResponse&lt;Publisher&lt;String&gt;&gt; hello()</code></td>
</tr>
<tr>
<td align="left"><code>CharSequence</code></td>
<td align="left">Any implementation of <code>CharSequence</code></td>
<td align="left"><code>String hello()</code></td>
</tr>
<tr>
<td align="left"><code>T</code></td>
<td align="left">Any simple POJO type</td>
<td align="left"><code>Book show()</code></td>
</tr>
</tbody></table>
<h2 id="JSON-Binding-with-Jackson-‰ΩøÁî®-Jackson-ËøõË°å-JSON-ÁªëÂÆö"><a href="#JSON-Binding-with-Jackson-‰ΩøÁî®-Jackson-ËøõË°å-JSON-ÁªëÂÆö" class="headerlink" title="JSON Binding with Jackson (‰ΩøÁî® Jackson ËøõË°å JSON ÁªëÂÆö)"></a>JSON Binding with Jackson (‰ΩøÁî® Jackson ËøõË°å JSON ÁªëÂÆö)</h2><blockquote>
<p>In fact, the defaults in the Controller annotation specify that the controllers in Micronaut consume and produce JSON by default.</p>
</blockquote>
<p>ÂÆûÈôÖ‰∏ä, <code>@Controller</code> Ê≥®Ëß£‰∏≠ÈªòËÆ§ÊåáÂÆö Micronaut ‰∏≠ÁöÑ Controller ÈªòËÆ§Ê∂àË¥πÂíåÁîüÊàê JSON</p>
<blockquote>
<p>To do so in a non-blocking manner, Micronaut builds on the Jackson Asynchronous JSON parsing API and Netty, such that the reading of incoming JSON is done in a non-blocking manner.</p>
</blockquote>
<p>‰∏∫‰∫Ü‰ª•ÈùûÈòªÂ°ûÁöÑÊñπÂºèÊâßË°åÊ≠§Êìç‰Ωú, Micronaut ÊûÑÂª∫Âú® Jackson ÂºÇÊ≠• JSON Ëß£Êûê APIÂíå Netty ‰πã‰∏ä, ‰ª•‰æø‰ª•ÈùûÈòªÂ°ûÁöÑÊñπÂºèËØªÂèñ‰º†ÂÖ•ÁöÑ JSON</p>
<h3 id="Binding-using-Reactive-Frameworks-‰ΩøÁî®ÂìçÂ∫îÂºèÊ°ÜÊû∂ËøõË°åÁªëÂÆö"><a href="#Binding-using-Reactive-Frameworks-‰ΩøÁî®ÂìçÂ∫îÂºèÊ°ÜÊû∂ËøõË°åÁªëÂÆö" class="headerlink" title="Binding using Reactive Frameworks (‰ΩøÁî®ÂìçÂ∫îÂºèÊ°ÜÊû∂ËøõË°åÁªëÂÆö)"></a>Binding using Reactive Frameworks (‰ΩøÁî®ÂìçÂ∫îÂºèÊ°ÜÊû∂ËøõË°åÁªëÂÆö)</h3><p>‰ªéÂºÄÂèë‰∫∫ÂëòÁöÑËßíÂ∫¶Êù•Áúã, ‰Ω†ÈÄöÂ∏∏ÂèØ‰ª•‰ªÖ‰ªÖ‰ΩøÁî® POJO ÂíåÂèØÈÄâÂú∞‰ΩøÁî®‰∏Ä‰∏™ÂìçÂ∫îÂºèÊ°ÜÊû∂, ‰æãÂ¶Ç RxJava Âíå Project Reactor</p>
<p>Example - A Controller that reads and saves incoming POJO in a non-blocking way from JSON - Using Reactive Streams to Read the JSON:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span>(<span class="string">&quot;/people&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PersonController</span> &#123;</span><br><span class="line"></span><br><span class="line">    Map&lt;String, Person&gt; inMemoryDatastore = <span class="keyword">new</span> ConcurrentHashMap&lt;&gt;()</span><br><span class="line"></span><br><span class="line">    Publisher&lt;HttpResponse&lt;Person&gt;&gt; save(<span class="meta">@Body</span> Publisher&lt;Person&gt; person) &#123;  <span class="comment">// 1</span></span><br><span class="line">        Mono.from(person)</span><br><span class="line">            .map(</span><br><span class="line">                &#123; p -&gt;</span><br><span class="line">                    inMemoryDatastore.put(p.getFirstName)   <span class="comment">// 2</span></span><br><span class="line">                    HttpResponse.created(p)                 <span class="comment">// 3</span></span><br><span class="line">                &#125;</span><br><span class="line">            )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>1</code> : The method receives a <code>Publisher</code> which emits the POJO once the JSON has been read</p>
<p><code>2</code> : The <code>map</code> method stores the instance in a <code>Map</code></p>
<p><code>3</code> : An <code>HttpResponse</code> is returned</p>
<h3 id="Binding-Using-CompletableFuture-‰ΩøÁî®-CompletableFuture-ËøõË°åÁªëÂÆö"><a href="#Binding-Using-CompletableFuture-‰ΩøÁî®-CompletableFuture-ËøõË°åÁªëÂÆö" class="headerlink" title="Binding Using CompletableFuture (‰ΩøÁî® CompletableFuture ËøõË°åÁªëÂÆö)"></a>Binding Using CompletableFuture (‰ΩøÁî® CompletableFuture ËøõË°åÁªëÂÆö)</h3><p>‰∏äÈù¢ÁöÑ‰æãÂ≠êÂèØ‰ª•‰ΩøÁî® <code>CompletableFuture</code> API Êù•ÊîπÂÜô:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span>(<span class="string">&quot;/people&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PersonController</span> &#123;</span><br><span class="line"></span><br><span class="line">    Map&lt;String, Person&gt; inMemoryDatastore = <span class="keyword">new</span> ConcurrentHashMap&lt;&gt;()</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Post</span>(<span class="string">&quot;/saveFuture&quot;</span>)</span><br><span class="line">    CompletableFuture&lt;HttpRespnose&lt;Person&gt;&gt; save(<span class="meta">@Body</span> CompletableFuture&lt;Person&gt; person) &#123;</span><br><span class="line">        person.thenApply(</span><br><span class="line">            &#123; p -&gt;</span><br><span class="line">                inMemoryDatastore.put(p.getFirstName(), p)</span><br><span class="line">                HttpResponse.created(p)</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Binding-using-POJOs-‰ΩøÁî®-POJO-ËøõË°åÁªëÂÆö"><a href="#Binding-using-POJOs-‰ΩøÁî®-POJO-ËøõË°åÁªëÂÆö" class="headerlink" title="Binding using POJOs (‰ΩøÁî® POJO ËøõË°åÁªëÂÆö)"></a>Binding using POJOs (‰ΩøÁî® POJO ËøõË°åÁªëÂÆö)</h3><p>Example - Binding JSON POJOs:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span>(<span class="string">&quot;/people&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PersonController</span> &#123;</span><br><span class="line"></span><br><span class="line">    Map&lt;String, Person&gt; inMemoryDatastore = <span class="keyword">new</span> ConcurrentHashMap&lt;&gt;()</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Post</span></span><br><span class="line">    HttpResponse&lt;Person&gt; save(<span class="meta">@Body</span> Person person) &#123;</span><br><span class="line">        inMemoryDatastore.put(person.getFirstName(), person)</span><br><span class="line">        HttpResponse.created(person)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Micronaut only executes your method once the data has been read in a non-blocking manner.</p>
</blockquote>
<p>Micronaut ‰ªÖÂú®‰ª•ÈùûÈòªÂ°ûÊñπÂºèËØªÂèñÊï∞ÊçÆÂêéÊâçÊâßË°å‰Ω†ÁöÑÊñπÊ≥ï</p>
<p>Jackson ÁîüÊàêÁöÑËæìÂá∫ÂèØ‰ª•ÈÄöËøáÂ§öÁßçÊñπÂºèËøõË°åÂÆöÂà∂, ‰ªéÂÆö‰πâ Jackson Ê®°ÂùóÂà∞‰ΩøÁî® Jackson Ê≥®Èáä</p>
<h3 id="Jackson-Configuration-Jackson-ÈÖçÁΩÆ"><a href="#Jackson-Configuration-Jackson-ÈÖçÁΩÆ" class="headerlink" title="Jackson Configuration (Jackson ÈÖçÁΩÆ)"></a>Jackson Configuration (Jackson ÈÖçÁΩÆ)</h3><p>ÂèØ‰ª•ÈÄöËøáÈÖçÁΩÆ <code>JacksonConfiguration</code> Á±ªÊù•ÈÖçÁΩÆ Jackson <code>ObjectMapper</code></p>
<p>ÊâÄÊúâÁöÑ Jackson ÈÖçÁΩÆ key ÈÉΩÊòØ‰ª• <code>jackson</code> ÂºÄÂ§¥:</p>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">dataFormat</td>
<td align="left">String</td>
<td align="left">The data format</td>
</tr>
<tr>
<td align="left">locale</td>
<td align="left">String</td>
<td align="left">Uses <code>Locale.forLanguageTag</code>. Example: en-US</td>
</tr>
<tr>
<td align="left">timeZone</td>
<td align="left">String</td>
<td align="left">Uses <code>TimeZone.getTimeZone</code>. Example: <code>PST</code></td>
</tr>
<tr>
<td align="left">serializationInclusion</td>
<td align="left">String</td>
<td align="left">One of <code>JsonInclude.Include</code>. Example: ALWAYS</td>
</tr>
<tr>
<td align="left">propertyNamingStrategy</td>
<td align="left">String</td>
<td align="left">Name of an instance of <code>PropertyNamingStrategy</code>. Example: <code>SNAKE_CASE</code></td>
</tr>
<tr>
<td align="left">defaultTyping</td>
<td align="left">String</td>
<td align="left">The global for polymorphic(Â§öÊÄÅ) type handling from enum <code>ObjectMapper.DefaultTypeing</code>. Example: NON_FINAL</td>
</tr>
</tbody></table>
<p>Example:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jackson:</span></span><br><span class="line">    <span class="attr">serializationInclusion:</span> <span class="string">ALWAYS</span></span><br></pre></td></tr></table></figure>

<h4 id="Features-ÁâπÊÄß"><a href="#Features-ÁâπÊÄß" class="headerlink" title="Features (ÁâπÊÄß)"></a>Features (ÁâπÊÄß)</h4><p>ÊâÄÊúâÁöÑÁâπÊÄßÈÉΩÂèØ‰ª•ÈÄöËøáÈÖçÁΩÆÂÆÉ‰ª¨ÁöÑÂêçÁß∞‰Ωú‰∏∫ key, ‰∏Ä‰∏™ boolean ÂÄº‰Ωú‰∏∫ value Êù•ÊåáÊòéÊòØÂê¶ÂºÄÂêØËøô‰∏™ÁâπÊÄß:</p>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Type</th>
<th align="left">Meaning</th>
</tr>
</thead>
<tbody><tr>
<td align="left">serialization</td>
<td align="left">Map</td>
<td align="left"><code>SerializationFeature</code></td>
</tr>
<tr>
<td align="left">deserialization</td>
<td align="left">Map</td>
<td align="left"><code>DeserializationFeature</code></td>
</tr>
<tr>
<td align="left">mapper</td>
<td align="left">Map</td>
<td align="left"><code>MapperFeature</code></td>
</tr>
<tr>
<td align="left">parser</td>
<td align="left">Map</td>
<td align="left"><code>JsonParser.Feature</code></td>
</tr>
<tr>
<td align="left">generator</td>
<td align="left">Map</td>
<td align="left"><code>JsonGenerator.Feature</code></td>
</tr>
<tr>
<td align="left">factory</td>
<td align="left">Map</td>
<td align="left"><code>JsonFactory.Feature</code></td>
</tr>
</tbody></table>
<p>Example:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jackson:</span></span><br><span class="line">    <span class="attr">serialization:</span></span><br><span class="line">        <span class="attr">indentOutput:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">writeDatesAsTimestamps:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">deserialization:</span></span><br><span class="line">        <span class="attr">useBigIntegerForInts:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">failOnUnknownProperties:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h4 id="Further-customing-JsonFactory-Êõ¥Ê∑±ÂÖ•Ëá™ÂÆö‰πâ-JsonFactory"><a href="#Further-customing-JsonFactory-Êõ¥Ê∑±ÂÖ•Ëá™ÂÆö‰πâ-JsonFactory" class="headerlink" title="Further customing JsonFactory (Êõ¥Ê∑±ÂÖ•Ëá™ÂÆö‰πâ JsonFactory )"></a>Further customing <code>JsonFactory</code> (Êõ¥Ê∑±ÂÖ•Ëá™ÂÆö‰πâ <code>JsonFactory</code> )</h4><p>‰ΩøÁî®Ëá™ÂÆö‰πâÁöÑ <code>JsonFactory</code> Bean, ÈÄöËøáÊèê‰æõ‰∏Ä‰∏™ <code>BeanCreatedEventListener&lt;JsonFactory&gt;</code> Êù•Âú®ÂêØÂä®Êó∂ÈÖçÁΩÆÈªòËÆ§ÁöÑ Bean</p>
<h4 id="Support-for-JsonView-JsonView-ÁöÑÊîØÊåÅ"><a href="#Support-for-JsonView-JsonView-ÁöÑÊîØÊåÅ" class="headerlink" title="Support for @JsonView (@JsonView ÁöÑÊîØÊåÅ)"></a>Support for <code>@JsonView</code> (<code>@JsonView</code> ÁöÑÊîØÊåÅ)</h4><p>Â¶ÇÊûúÂú® <code>application.yml</code> ‰∏≠ÈÖçÁΩÆ‰∫Ü <code>jackson.json-view.enabled</code> ‰∏∫ <code>true</code></p>
<p>ÈÇ£‰πàÂèØ‰ª•Âú® Controller ÊñπÊ≥ï‰∏ä‰ΩøÁî® <code>@JsonView</code> Ê≥®Ëß£</p>
<p>Jackson ÁöÑ <code>@JsonView</code> Ê≥®Ëß£ËÆ©‰Ω†ÂèØ‰ª•Âú®ÊØè‰∏™ÂìçÂ∫î‰∏äÊéßÂà∂Âì™‰∫õÂ±ûÊÄßË¶ÅËøõË°åÊö¥Èú≤</p>
<h4 id="Beans-Beans"><a href="#Beans-Beans" class="headerlink" title="Beans (Beans)"></a>Beans (Beans)</h4><p>Èô§‰∫ÜÈÄöËøáÈÖçÁΩÆÁöÑÊñπÂºè, ËøòÂèØ‰ª•ÈÄöËøáÊ≥®ÂÜå Bean ÁöÑÊñπÂºèÊù•Ëá™ÂÆö‰πâ Jackson</p>
<p>ÊâÄÊúâÁªßÊâøÂ¶Ç‰∏ãÂÖ∂‰∏≠‰∏Ä‰∏™Á±ªÁöÑ Bean ÈÉΩË¢´Ê≥®ÂÜåÂà∞ <code>object mapper</code> ‰∏≠:</p>
<ul>
<li><code>Module</code></li>
<li><code>JsonDeserializer</code></li>
<li><code>JsonSerializer</code></li>
<li><code>KeyDeserializer</code></li>
<li><code>BeanDeserializerModifier</code></li>
<li><code>BeanSerializerModifier</code></li>
</ul>
<h4 id="Service-Loader-Service-Âä†ËΩΩÂô®"><a href="#Service-Loader-Service-Âä†ËΩΩÂô®" class="headerlink" title="Service Loader (Service Âä†ËΩΩÂô®)"></a>Service Loader (Service Âä†ËΩΩÂô®)</h4><p>‰ªª‰ΩïÈÄöËøá service loader Âä†ËΩΩÁöÑ module ÈÉΩ‰ºöË¢´Ê∑ªÂä†Âà∞ÈªòËÆ§ object mapper</p>
<h4 id="Number-Precision-Êï∞ÂÄºÁ≤æÁ°ÆÊÄß"><a href="#Number-Precision-Êï∞ÂÄºÁ≤æÁ°ÆÊÄß" class="headerlink" title="Number Precision (Êï∞ÂÄºÁ≤æÁ°ÆÊÄß)"></a>Number Precision (Êï∞ÂÄºÁ≤æÁ°ÆÊÄß)</h4><p>Âú® JSON Ëß£ÊûêÊó∂, Ê°ÜÊû∂ÂèØËÉΩ‰ºöËΩ¨Êç¢‰ªª‰ΩïËæìÂÖ•ÁöÑÊï∞ÊçÆÂà∞‰∏Ä‰∏™‰∏≠Èó¥ÂØπË±°Ê®°Âûã‰∏≠</p>
<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ã, Ëøô‰∏™Ê®°Âûã‰ΩøÁî® <code>BigInteger</code>,<code>long</code>,<code>double</code> Êù•Ë°®Á§∫Êï∞ÂÄº</p>
<p>‰æãÂ¶Ç, Âç≥‰ΩøÂèçÂ∫èÂàóÂåñÁöÑÁõÆÊ†áÁ±ªÂûã‰ΩøÁî®‰∫Ü <code>BigDecimal</code>, ‰πüÂèØËÉΩ‰ºöÊà™Êñ≠Êó†Ê≥ï‰ΩøÁî® <code>double</code> Ë°®Á§∫ÁöÑÂÖ∑ÊúâËÆ∏Â§öÂ∞èÊï∞‰ΩçÁöÑÊï∞Â≠ó</p>
<blockquote>
<p>Metadata on the number of trailing zeroes (BigDecimal.precision()), e.g. the difference between 0.12 and 0.120, is also discarded</p>
</blockquote>
<p>ÂÖ≥‰∫éÂ∞æÈÉ®ÁöÑ0ÁöÑÂÖÉÊï∞ÊçÆ(<code>BigDecimal.precision()</code>), ‰æãÂ¶Ç <code>0.12</code> Âíå <code>0.120</code> ‰πãÈó¥ÁöÑÂå∫Âà´‰πüË¢´‰∏¢ÂºÉ</p>
<p>Â¶ÇÊûú‰Ω†ÈúÄË¶ÅÂÆåÊï¥Á≤æÁ°ÆÁöÑÊï∞ÂÄºÁ±ªÂûã, ‰ΩøÁî®Â¶Ç‰∏ãÈÖçÁΩÆ:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jackson:</span></span><br><span class="line">    <span class="attr">deserialization:</span></span><br><span class="line">        <span class="attr">useBigIntegerForInts:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">useBigDecimalForFloats:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h2 id="Data-Validation-Êï∞ÊçÆÊ†°È™å"><a href="#Data-Validation-Êï∞ÊçÆÊ†°È™å" class="headerlink" title="Data Validation (Êï∞ÊçÆÊ†°È™å)"></a>Data Validation (Êï∞ÊçÆÊ†°È™å)</h2><p>Micronaut ÈÄöËøá <code>micronaut-validation</code> ‰æùËµñÂØπ <code>javax.validation</code> Ê≥®Ëß£Êèê‰æõÊú¨Âú∞ÊîØÊåÅ</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation(<span class="string">&quot;io.micronaut:micronaut-validation&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>ÊàñËÄÖÈÄöËøá <code>micronaut-hibernate-validator</code> ‰æùËµñÊèê‰æõÂÆåÊï¥ÁöÑ JSR 380 ÂÆûÁé∞:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation(<span class="string">&quot;io.micronaut.beanvalidation:micronaut-hibernate-validator&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>Êàë‰ª¨ÂèØ‰ª•‰ΩøÁî® <code>javax.validation</code> Ê≥®Ëß£Ê†°È™åÂèÇÊï∞Âπ∂Âú®Á±ªÁ∫ßÂà´‰∏ä‰ΩøÁî® <code>Validated</code> Ê≥®Ëß£:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.http.HttpResponse</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Controller</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Get</span><br><span class="line"><span class="keyword">import</span> io.micronaut.validation.Validated</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.NotBlank</span><br><span class="line"></span><br><span class="line"><span class="meta">@Validated</span>  <span class="comment">// Annotate controller with Validated</span></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&quot;/email&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EmailController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Get</span>(<span class="string">&quot;/send&quot;</span>)</span><br><span class="line">    HttpResponse send(<span class="meta">@NotBlank</span> String recipient,</span><br><span class="line">                      <span class="meta">@NotBlank</span> String subject) &#123;</span><br><span class="line">                          HttpResponse.ok(<span class="attr">msg:</span> <span class="string">&#x27;ok&#x27;</span>)</span><br><span class="line">                      &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Â¶ÇÊûúÂèëÁîüÊ†°È™åÂºÇÂ∏∏ÊäõÂá∫‰∫Ü‰∏Ä‰∏™ <code>javax.validation.ConstraintViolationException</code> ÂºÇÂ∏∏, ÈªòËÆ§‰ΩøÁî®ÂÜÖÁΩÆÁöÑ <code>io.micronaut.validation.exception.ConstraintExceptionHandler</code> Êù•Â§ÑÁêÜËøô‰∏™ÂºÇÂ∏∏</p>
<p>Â¶ÇÊûúË¶Å‰ΩøÁî®‰Ω†Ëá™Â∑±ÁöÑ <code>ExceptionHandler</code> Êù•Â§ÑÁêÜÈôêÂà∂ÂºÇÂ∏∏(constraint exception), ‰ΩøÁî® <code>@Replaces(ConstraintExceptionHandler.class)</code> Â∏¶ÊõøÊç¢ÈªòËÆ§ÁöÑÂºÇÂ∏∏Â§ÑÁêÜÂô®</p>
<p>Â¶ÇÊûúÂú® Controller ÊñπÊ≥ï‰∏≠‰ΩøÁî® POJO Êù•Êé•Êî∂ÂèÇÊï∞, ÈÇ£‰πàÂÉèËøôÊ†∑ËøõË°åÊ†°È™å:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.core.annotation.Introspected</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.NotBlank</span><br><span class="line"></span><br><span class="line"><span class="meta">@Introspected</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Email</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotBlank</span>   <span class="comment">// ÂèØ‰ª•Âú®‰Ω†ÁöÑ POJO ‰∏≠‰ΩøÁî® javax.validation Ê≥®Ëß£</span></span><br><span class="line">    String subject</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotBlank</span>   <span class="comment">// ÂèØ‰ª•Âú®‰Ω†ÁöÑ POJO ‰∏≠‰ΩøÁî® javax.validation Ê≥®Ëß£</span></span><br><span class="line">    String recipient</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÁÑ∂ÂêéÂú®‰Ω†ÁöÑ Controller ‰∏ä‰ΩøÁî® <code>@Validated</code> Ê≥®Ëß£, Âú®ÁªëÂÆöÁöÑ POJO ‰∏ä‰ΩøÁî® <code>@Valid</code> Ê≥®Ëß£:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.http.HttpResponse</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Body</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Controller</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Post</span><br><span class="line"><span class="keyword">import</span> io.micronaut.validation.Validated</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.validation.Valid</span><br><span class="line"></span><br><span class="line"><span class="meta">@Validated</span> <span class="comment">// Annotate the controller with @Validated</span></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&quot;/email&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EmailController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Post</span>(<span class="string">&quot;/send&quot;</span>)</span><br><span class="line">    HttpResponse send(<span class="meta">@Body</span> <span class="meta">@Valid</span> Email email) &#123; <span class="comment">// Annotate the POJO to validate with @Valid</span></span><br><span class="line">        HttpResponse.ok(<span class="attr">msg:</span> <span class="string">&quot;OK&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Bean Ê≥®ÂÖ•ÊîØÊåÅÈÄöËøá Hibernate Validator configuration ‰ΩøÁî®Ëá™ÂÆö‰πâÈôêÂà∂(constraints)</p>
<h2 id="Serving-Static-Resources-Êèê‰æõÈùôÊÄÅËµÑÊ∫ê"><a href="#Serving-Static-Resources-Êèê‰æõÈùôÊÄÅËµÑÊ∫ê" class="headerlink" title="Serving Static Resources (Êèê‰æõÈùôÊÄÅËµÑÊ∫ê)"></a>Serving Static Resources (Êèê‰æõÈùôÊÄÅËµÑÊ∫ê)</h2><p>ÈùôÊÄÅËµÑÊ∫êËß£ÊûêÊòØÈªòËÆ§ÂºÄÂêØÁöÑ. Micronaut ÊîØÊåÅ‰ªé classpath Êàñ Êñá‰ª∂Á≥ªÁªü ‰∏≠Ëß£ÊûêËµÑÊ∫ê</p>
<p>Table - Configuration Properties for <code>StaticResourceConfiguration</code>:</p>
<table>
<thead>
<tr>
<th align="left">Property</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>micronaut.router.static-resources.*.enabled</code></td>
<td align="left"><code>boolean</code></td>
<td align="left">Sets whether this specific mapping is enabled. Default value <code>true</code></td>
</tr>
<tr>
<td align="left"><code>micronaut.router.static-resources.*.paths</code></td>
<td align="left"><code>java.util.List</code></td>
<td align="left">A list of paths either starting with <code>classpath:</code> or <code>file:</code>. You can serve files from anywhere on disk or the classpath. ‰æãÂ¶Ç <code>src/main/resources/public</code> ÂØπÂ∫î <code>classpath:public</code></td>
</tr>
<tr>
<td align="left"><code>micronaut.router.static-resources.*.mapping</code></td>
<td align="left"><code>java.lang.String</code></td>
<td align="left">The path resources should be served from. Uses ant path matching. Default value <code>/**</code></td>
</tr>
</tbody></table>
<h2 id="Error-Handling-ÈîôËØØÂ§ÑÁêÜ"><a href="#Error-Handling-ÈîôËØØÂ§ÑÁêÜ" class="headerlink" title="Error Handling (ÈîôËØØÂ§ÑÁêÜ)"></a>Error Handling (ÈîôËØØÂ§ÑÁêÜ)</h2><h3 id="Status-Handlers-Áä∂ÊÄÅÂ§ÑÁêÜÂô®"><a href="#Status-Handlers-Áä∂ÊÄÅÂ§ÑÁêÜÂô®" class="headerlink" title="Status Handlers (Áä∂ÊÄÅÂ§ÑÁêÜÂô®)"></a>Status Handlers (Áä∂ÊÄÅÂ§ÑÁêÜÂô®)</h3><p><code>@Error</code> Ê≥®Ëß£ÊîØÊåÅÂÆö‰πâ‰∏Ä‰∏™ÂºÇÂ∏∏Á±ªÊàñ‰∏Ä‰∏™ HTTP Áä∂ÊÄÅ</p>
<p>‰ΩøÁî®Ê≥®Ëß£ <code>@Error</code> ‰øÆÈ•∞ÁöÑÊñπÊ≥ïÂøÖÈ°ªÂÆö‰πâÂú®‰∏Ä‰∏™‰ΩøÁî® <code>@Controller</code> Ê≥®Ëß£‰øÆÈ•∞ÁöÑÁ±ª‰∏≠</p>
<p><code>@Error</code> Ê≥®Ëß£ËøòÊîØÊåÅÊåáÂÆö global Êàñ local, ÈªòËÆ§ÊòØ local</p>
<blockquote>
<p>Local error handlers only respond to exceptions thrown as a result of the route being matched to another method in the same controller.</p>
</blockquote>
<p>Êú¨Âú∞ÂºÇÂ∏∏Â§ÑÁêÜÂô®Âè™ËÉΩÂ§ÑÁêÜÂêå‰∏Ä‰∏™ Controller ‰∏≠Âè¶Â§ñ‰∏Ä‰∏™ÂåπÈÖçË∑ØÁî±ÁªìÊûúÁöÑÊñπÊ≥ï</p>
<p>ÂÖ®Â±ÄÂºÇÂ∏∏Â§ÑÁêÜÂô®ÂèØ‰ª•ÂìçÂ∫îÊâÄÊúâÊäõÂá∫ÁöÑÂºÇÂ∏∏</p>
<p>Âú®Ëß£ÊûêÂì™‰∏™Â§ÑÁêÜÂô®ËøõË°åÂ§ÑÁêÜÊó∂, ‰ºòÂÖà‰ΩøÁî®Êú¨Âú∞ÂºÇÂ∏∏Â§ÑÁêÜÂô®Êù•Â§ÑÁêÜÂºÇÂ∏∏</p>
<p>Âú®ÂÆö‰πâ‰∏Ä‰∏™ÂºÇÂ∏∏ÁöÑÂºÇÂ∏∏Â§ÑÁêÜÂô®Êó∂, ‰Ω†ÂèØ‰ª•ÂÆö‰πâÂºÇÂ∏∏ÂÆû‰æã‰Ωú‰∏∫ÊñπÊ≥ïÁöÑÂèÇÊï∞ËøõË°å‰º†ÂÖ•, ÁÑ∂ÂêéÂèØ‰ª•Âà†Èô§ÊéâÊ≥®Ëß£‰∏≠ÁöÑÂºÇÂ∏∏Â±ûÊÄß</p>
<h3 id="Local-Error-Handling-Êú¨Âú∞ÂºÇÂ∏∏Â§ÑÁêÜ"><a href="#Local-Error-Handling-Êú¨Âú∞ÂºÇÂ∏∏Â§ÑÁêÜ" class="headerlink" title="Local Error Handling (Êú¨Âú∞ÂºÇÂ∏∏Â§ÑÁêÜ)"></a>Local Error Handling (Êú¨Âú∞ÂºÇÂ∏∏Â§ÑÁêÜ)</h3><p>Example - Local exception handler:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Error</span></span><br><span class="line">HttpResponse&lt;JsonError&gt; jsonError(HttpRequest request, JsonParseException e) &#123;</span><br><span class="line">    JsonError error = <span class="keyword">new</span> JsonError(<span class="string">&quot;Invalid JSON: $e.message&quot;</span>).link(Link.SELF, Link.of(request.uri))</span><br><span class="line"></span><br><span class="line">    HttpResponse.&lt;JsonError&gt;status(HttpStatus.BAD_REQUEST, <span class="string">&quot;Fix Your JSON&quot;</span>).body(error)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Example - Local status handler:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Error</span>(status = HttpStatus.NOT_FOUND)</span><br><span class="line">HttpResponse&lt;JsonError&gt; notFound(HttpRequest request) &#123;</span><br><span class="line">    JsonError error = <span class="keyword">new</span> JsonError(<span class="string">&quot;Person Not Found&quot;</span>)</span><br><span class="line">    .link(Link.SELF, Link.of(request.uri))</span><br><span class="line"></span><br><span class="line">    HttpResponse.&lt;JsonError&gt;notFound().body(error)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Global-Error-Handling-ÂÖ®Â±ÄÂºÇÂ∏∏Â§ÑÁêÜ"><a href="#Global-Error-Handling-ÂÖ®Â±ÄÂºÇÂ∏∏Â§ÑÁêÜ" class="headerlink" title="Global Error Handling (ÂÖ®Â±ÄÂºÇÂ∏∏Â§ÑÁêÜ)"></a>Global Error Handling (ÂÖ®Â±ÄÂºÇÂ∏∏Â§ÑÁêÜ)</h3><p>Example - Global error handler:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Error</span>(global = <span class="literal">true</span>)</span><br><span class="line">HttpResponse&lt;JsonError&gt; error(HttpRequest request, Throwable e) &#123;</span><br><span class="line">    JsonError error = <span class="keyword">new</span> JsonError(<span class="string">&quot;Bad Things Happend: $e.message&quot;</span>).link(Link.SELF, Link.of(request.uri))</span><br><span class="line"></span><br><span class="line">    HttpResponse.&lt;JsonError&gt;serverError().body(error)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Example - Global status handler:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Error</span>(status = HttpStatus.NOT_FOUND)</span><br><span class="line">HttpResponse&lt;JsonError&gt; notFound(HttpRequest request) &#123;</span><br><span class="line">    JsonError error = <span class="keyword">new</span> JsonError(<span class="string">&quot;Person Not Found&quot;</span>).link(Link.SELF, Link.of(request.uri))</span><br><span class="line">    HttpResponse.&lt;JsonError&gt;notFound().body(error)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ExceptionHandler-ÂºÇÂ∏∏Â§ÑÁêÜÂô®"><a href="#ExceptionHandler-ÂºÇÂ∏∏Â§ÑÁêÜÂô®" class="headerlink" title="ExceptionHandler (ÂºÇÂ∏∏Â§ÑÁêÜÂô®)"></a>ExceptionHandler (ÂºÇÂ∏∏Â§ÑÁêÜÂô®)</h3><p>ÊàñËÄÖ, ‰Ω†ÂèØ‰ª•ÂÆûÁé∞‰∏Ä‰∏™ <code>ExceptionHandler</code>, ‰∏Ä‰∏™Áî®‰∫éÂ§ÑÁêÜÂú®ÊâßË°å HTTP ËØ∑Ê±ÇÊúüÈó¥ÂèëÁîüÁöÑÂºÇÂ∏∏ÁöÑÈÄöÁî®Èí©Â≠ê</p>
<h3 id="Built-In-Exception-Handlers-ÂÜÖÁΩÆÁöÑÂºÇÂ∏∏Â§ÑÁêÜÂô®"><a href="#Built-In-Exception-Handlers-ÂÜÖÁΩÆÁöÑÂºÇÂ∏∏Â§ÑÁêÜÂô®" class="headerlink" title="Built-In Exception Handlers (ÂÜÖÁΩÆÁöÑÂºÇÂ∏∏Â§ÑÁêÜÂô®)"></a>Built-In Exception Handlers (ÂÜÖÁΩÆÁöÑÂºÇÂ∏∏Â§ÑÁêÜÂô®)</h3><p>Micronaut ÂÜÖÁΩÆ‰∫ÜËøô‰∫õÂºÇÂ∏∏Â§ÑÁêÜÂô®:</p>
<table>
<thead>
<tr>
<th align="left">Exception</th>
<th align="left">Handler</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>javax.validation.ConstraintViolationException</code></td>
<td align="left"><code>ConstraintExceptionHandler</code></td>
</tr>
<tr>
<td align="left"><code>ContentLengthExceededException</code></td>
<td align="left"><code>ContentLengthExceededHandler</code></td>
</tr>
<tr>
<td align="left"><code>ConversionErroException</code></td>
<td align="left"><code>ConversionErrorHandler</code></td>
</tr>
<tr>
<td align="left"><code>DuplicateRoute</code></td>
<td align="left"><code>DuplicateRouteHandler</code></td>
</tr>
<tr>
<td align="left"><code>HttpStatusException</code></td>
<td align="left"><code>httpStatusHandler</code></td>
</tr>
<tr>
<td align="left"><code>com.fasterxml.jackson.core.JsonProcessingException</code></td>
<td align="left"><code>JsonExceptionHandler</code></td>
</tr>
<tr>
<td align="left"><code>java.net.URISyntaxException</code></td>
<td align="left"><code>URISyntaxHandler</code></td>
</tr>
<tr>
<td align="left"><code>UnsatisfiedArgumentException</code></td>
<td align="left"><code>UnsatisfiedArgumentHandler</code></td>
</tr>
<tr>
<td align="left"><code>UnsatisfiedRouteException</code></td>
<td align="left"><code>UnsatisfiedRouteHandler</code></td>
</tr>
<tr>
<td align="left"><code>org.grails.datasource.mapping.validation.ValidationException</code></td>
<td align="left"><code>ValidationExceptionHandler</code></td>
</tr>
</tbody></table>
<h4 id="Custom-Exception-Handler-Ëá™ÂÆö‰πâÂºÇÂ∏∏Â§ÑÁêÜÂô®"><a href="#Custom-Exception-Handler-Ëá™ÂÆö‰πâÂºÇÂ∏∏Â§ÑÁêÜÂô®" class="headerlink" title="Custom Exception Handler (Ëá™ÂÆö‰πâÂºÇÂ∏∏Â§ÑÁêÜÂô®)"></a>Custom Exception Handler (Ëá™ÂÆö‰πâÂºÇÂ∏∏Â§ÑÁêÜÂô®)</h4><p>ÂÅáËÆæ‰Ω†ÊäõÂá∫‰∏Ä‰∏™Ëá™ÂÆö‰πâÂºÇÂ∏∏: <code>class OutOfStockException extends RuntimeException &#123;&#125;</code></p>
<p>Ë¶ÅÂÅöÂà∞ÂΩìÊäõÂá∫Ëøô‰∏™ <code>OutOfStockException</code> Êó∂ÂìçÂ∫î 400, ÂèØ‰ª•Ê≥®ÂÜå‰∏Ä‰∏™ <code>ExceptionHandler</code>:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Produces</span></span><br><span class="line"><span class="meta">@Singleton</span></span><br><span class="line"><span class="meta">@Requires</span>(classes = [OutOfStockException, ExceptionHandler])</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">OutOfStockExceptionHandler</span> <span class="keyword">implements</span> <span class="title class_">ExceptionHandler</span>&lt;OutOfStockException, HttpResponse&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ErrorResponseProcessor&lt;?&gt; errorResponseProcessor</span><br><span class="line"></span><br><span class="line">    OutOfStockExceptionHandler(ErrorResponseProcessor&lt;?&gt; errorResponseProcessor) &#123;</span><br><span class="line">        this.errorResponseProcessor = errorResponseProcessor</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    HttpResponse handle(HttpRequest request, OutOfStockException e) &#123;</span><br><span class="line">        errorResponseProcessor.processResponse(ErrorContext.builder(request)</span><br><span class="line">        .cause(e)</span><br><span class="line">        .errorMessage(<span class="string">&quot;No Stock available&quot;</span>)</span><br><span class="line">        .build(), HttpResponse.badRequest())</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Error-Formatting-ÈîôËØØÊ†ºÂºè"><a href="#Error-Formatting-ÈîôËØØÊ†ºÂºè" class="headerlink" title="Error Formatting (ÈîôËØØÊ†ºÂºè)"></a>Error Formatting (ÈîôËØØÊ†ºÂºè)</h3><p>Micronaut ÈÄöËøáÁ±ªÂûã‰∏∫ <code>ErrorResponseProcessor</code> Á±ªÂûãÁöÑ Bean Êù•Êèê‰æõÈîôËØØÂìçÂ∫î‰Ωì</p>
<p>ÈªòËÆ§ÁöÑÂìçÂ∫î‰ΩìÊòØ <code>vnd.error</code>, ÂèØ‰ª•ÈÄöËøáÂÆûÁé∞ <code>ErrorResponseProcessor</code> Êù•ÊéßÂà∂ÂìçÂ∫î</p>
<blockquote>
<p>If customization of the response other than items related to the errors is desired, the exception handler that is handling the exception needs to be overridden.</p>
</blockquote>
<p>Â¶ÇÊûúÈúÄË¶ÅËá™ÂÆö‰πâÂìçÂ∫îËÄå‰∏çÊòØÈúÄË¶Å‰∏éÈîôËØØÁõ∏ÂÖ≥ÁöÑÈ°πÁõÆ, ÂàôÈúÄË¶ÅË¶ÜÁõñÂ§ÑÁêÜÂºÇÂ∏∏ÁöÑÂºÇÂ∏∏Â§ÑÁêÜÂô®</p>
<h2 id="API-Versioning-API-ÁâàÊú¨ÊéßÂà∂"><a href="#API-Versioning-API-ÁâàÊú¨ÊéßÂà∂" class="headerlink" title="API Versioning (API ÁâàÊú¨ÊéßÂà∂)"></a>API Versioning (API ÁâàÊú¨ÊéßÂà∂)</h2><p>Micronaut ÈÄöËøá‰∏ìÁî®ÁöÑ <code>@Version</code> Ê≥®Ëß£Êù•ÊîØÊåÅ API ÁâàÊú¨ÊéßÂà∂</p>
<p>Example - Versioning an API:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.core.version.annotation.Version</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Controller</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Get</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&quot;/versioned&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VersionedController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Version</span>(<span class="string">&quot;1&quot;</span>)</span><br><span class="line">    <span class="meta">@Get</span>(<span class="string">&quot;/hello&quot;</span>)</span><br><span class="line">    String helloV1() &#123;</span><br><span class="line">        <span class="string">&quot;helloV1&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Version</span>(<span class="string">&quot;2&quot;</span>)</span><br><span class="line">    <span class="meta">@Get</span>(<span class="string">&quot;/hello&quot;</span>)</span><br><span class="line">    String helloV2() &#123;</span><br><span class="line">        <span class="string">&quot;helloV2&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÁÑ∂ÂêéÂú® <code>application.yml</code> ‰∏≠ÈÄöËøáËÆæÁΩÆ <code>micronaut.router.versioning.enabled</code> ‰∏∫ <code>true</code> Êù•ÂºÄÂêØÁâàÊú¨ÊéßÂà∂:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">router:</span></span><br><span class="line">        <span class="attr">versioning:</span></span><br><span class="line">            <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ã Micronaut Âü∫‰∫é‰∏§ÁßçÁ≠ñÁï•Êù•Ëß£ÊûêÁâàÊú¨ÂÄº:</p>
<ul>
<li>Âü∫‰∫é‰∏Ä‰∏™ÂêçÁß∞‰∏∫ <code>X-API-VERSION</code> ÁöÑ HTTP header</li>
<li>Âü∫‰∫é‰∏Ä‰∏™ÂêçÁß∞‰∏∫ <code>api-version</code> ÁöÑËØ∑Ê±ÇÂèÇÊï∞</li>
</ul>
<p>ÂèØ‰ª•ÈÄöËøáÂ¶Ç‰∏ãÊñπÂºèÂØπËøô‰∏™Á≠ñÁï•ËøõË°åÈÖçÁΩÆ:</p>
<p>Example - Configuring Versioning:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">router:</span></span><br><span class="line">        <span class="attr">versioning:</span></span><br><span class="line">            <span class="attr">enabled:</span> <span class="literal">true</span>                   <span class="string">//</span> <span class="string">Enables</span> <span class="string">versioning</span></span><br><span class="line">            <span class="attr">parameter:</span></span><br><span class="line">                <span class="attr">enabled:</span> <span class="literal">false</span>              <span class="string">//</span> <span class="string">Enables</span> <span class="string">or</span> <span class="string">disables</span> <span class="string">parameter-based</span> <span class="string">versioning</span></span><br><span class="line">                <span class="attr">names:</span> <span class="string">&#x27;v,api-version&#x27;</span>      <span class="string">//</span> <span class="string">Specify</span> <span class="string">the</span> <span class="string">parameter</span> <span class="string">names</span> <span class="string">as</span> <span class="string">a</span> <span class="string">comma-separated</span> <span class="string">list</span></span><br><span class="line">            <span class="attr">header:</span></span><br><span class="line">                <span class="attr">enabled:</span> <span class="literal">true</span>               <span class="string">//</span> <span class="string">Enables</span> <span class="string">or</span> <span class="string">disables</span> <span class="string">header-based</span> <span class="string">versioning</span></span><br><span class="line">                <span class="attr">names:</span>                      <span class="string">//</span> <span class="string">Specify</span> <span class="string">the</span> <span class="string">header</span> <span class="string">names</span> <span class="string">as</span> <span class="string">a</span> <span class="string">list</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="string">&#x27;X-API-VERSION&#x27;</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="string">&#x27;Accept-Version&#x27;</span></span><br></pre></td></tr></table></figure>

<p>ËøòÂèØ‰ª•ÈÄöËøáÂÆûÁé∞ <code>RequestVersionResolver</code> Êé•Âè£Êù•Êé•Êî∂‰∏Ä‰∏™ <code>HttpRequest</code>, ÂÆûÁé∞‰ªª‰ΩïÊÉ≥Ë¶ÅÁöÑÁ≠ñÁï•</p>
<h3 id="Default-Version-ÈªòËÆ§ÁâàÊú¨"><a href="#Default-Version-ÈªòËÆ§ÁâàÊú¨" class="headerlink" title="Default Version (ÈªòËÆ§ÁâàÊú¨)"></a>Default Version (ÈªòËÆ§ÁâàÊú¨)</h3><p>ÂèØ‰ª•ÈÄöËøáÈÖçÁΩÆÊù•Êèê‰æõ‰∏Ä‰∏™ÈªòËÆ§ÁâàÊú¨:</p>
<p>Example - Configuring Default Version:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">router:</span></span><br><span class="line">        <span class="attr">versioning:</span></span><br><span class="line">            <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">            <span class="attr">default-version:</span> <span class="number">3</span></span><br></pre></td></tr></table></figure>

<p>Â¶ÇÊûúÊª°Ë∂≥‰ª•‰∏ãÁöÑÊù°‰ª∂, ÈÇ£‰πà‰∏Ä‰∏™Ë∑ØÁî±Â∞±ÊòØ‰∏çÂåπÈÖçÁöÑ:</p>
<ul>
<li>ÈÖçÁΩÆ‰∫ÜÈªòËÆ§ÁöÑÁâàÊú¨</li>
<li>ËØ∑Ê±Ç‰∏≠Ê≤°ÊúâÁâàÊú¨ÂÄº</li>
<li>Ë∑ØÁî±ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ÁâàÊú¨</li>
<li>Ë∑ØÁî±ÁâàÊú¨Ê≤°ÊúâÂåπÈÖçÈªòËÆ§ÁöÑÁâàÊú¨</li>
</ul>
<p>Â¶ÇÊûú‰º†ÂÖ•ÁöÑËØ∑Ê±ÇÊåáÂÆö‰∫Ü‰∏Ä‰∏™ÁâàÊú¨, ÈÇ£‰πàÈªòËÆ§ÁöÑÁâàÊú¨Â∞±‰∏çÁîüÊïà</p>
<h3 id="Versioning-Client-Requests-ÁâàÊú¨ÂåñÁöÑÂÆ¢Êà∑Á´ØËØ∑Ê±Ç"><a href="#Versioning-Client-Requests-ÁâàÊú¨ÂåñÁöÑÂÆ¢Êà∑Á´ØËØ∑Ê±Ç" class="headerlink" title="Versioning Client Requests (ÁâàÊú¨ÂåñÁöÑÂÆ¢Êà∑Á´ØËØ∑Ê±Ç)"></a>Versioning Client Requests (ÁâàÊú¨ÂåñÁöÑÂÆ¢Êà∑Á´ØËØ∑Ê±Ç)</h3><p>Micronaut ÁöÑÂìçÂ∫îÂºè HTTP ÂÆ¢Êà∑Á´ØËøòÊîØÊåÅÈÄöËøá <code>@Version</code> Ê≥®Ëß£ÂØπÂ§ñÂêëËØ∑Ê±ÇËøõË°åËá™Âä®ÁâàÊú¨ÊéßÂà∂</p>
<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ã ,Â¶ÇÊûú‰Ω†‰ΩøÁî® <code>@Version</code> Ê≥®Ëß£‰øÆÈ•∞‰∏Ä‰∏™ÂÆ¢Êà∑Á´ØÊé•Âè£, ÈÇ£ <code>@Version</code> Ê≥®Ëß£‰∏äÁöÑÂÄºÂ∞Ü‰ºöË¢´ÂåÖÂê´Âà∞ <code>X-API-VERSION</code> ËØ∑Ê±ÇÂ§¥‰∏≠</p>
<p>Example:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.core.version.annotation.Version</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Get</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.client.annotation.Client</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Mono</span><br><span class="line"></span><br><span class="line"><span class="meta">@Client</span>(<span class="string">&quot;/hello&quot;</span>)</span><br><span class="line"><span class="meta">@Version</span>(<span class="string">&quot;1&quot;</span>)           <span class="comment">// 1</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">HelloClient</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Get</span>(<span class="string">&quot;/greeting/&#123;name&#125;&quot;</span>)</span><br><span class="line">    String sayHello(String name)</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Version</span>(<span class="string">&quot;2&quot;</span>)       <span class="comment">// 2</span></span><br><span class="line">    <span class="meta">@Get</span>(<span class="string">&quot;/greeting/&#123;name&#125;&quot;</span>)</span><br><span class="line">    Mono&lt;String&gt; sayHelloTwo(String name)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>1</code> : The <code>@Version</code> annotation can be used at the type level to specify the version to use for all methods</p>
<p><code>2</code> : When defined at the method level it is used only for that method</p>
<p>ÁâàÊú¨ÊÄéÊ†∑Âú®ÊØè‰∏™ËØ∑Ê±Ç‰∏≠ÂèëÈÄÅÁöÑÈªòËÆ§Ë°å‰∏∫ÂèØ‰ª•ÈÄöËøá <code>DefaultClientVersioningConfiguration</code> ËøõË°åÈÖçÁΩÆ:</p>
<p>Table - Configuration Properties for <code>DefaultClientVersioningConfiguration</code>:</p>
<table>
<thead>
<tr>
<th align="left">Property</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>micronaut.http.client.versioning.default.headers</code></td>
<td align="left"><code>java.util.List</code></td>
<td align="left">The list of request header names</td>
</tr>
<tr>
<td align="left"><code>micronaut.http.client.versioning.default.parameters</code></td>
<td align="left"><code>java.util.list</code></td>
<td align="left">The list of request query parameter names</td>
</tr>
</tbody></table>
<p>‰æãÂ¶Ç, Ë¶Å‰ΩøÁî® <code>Accept-Version</code> ‰Ωú‰∏∫ËØ∑Ê±ÇÂ§¥ÂêçÁß∞:</p>
<p>Example - Configuring Client Versioning:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">http:</span></span><br><span class="line">        <span class="attr">client:</span></span><br><span class="line">            <span class="attr">versioning:</span></span><br><span class="line">                <span class="attr">default:</span></span><br><span class="line">                    <span class="attr">headers:</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">&#x27;Accept-Version&#x27;</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">&#x27;X-API-VERSION&#x27;</span></span><br></pre></td></tr></table></figure>

<p><code>default</code> key ÂÖ≥ËÅîÂà∞ÈªòËÆ§ÁöÑÈÖçÁΩÆ</p>
<p>ÂèØ‰ª•ÊåáÂÆö ÁâπÂÆöÂÆ¢Êà∑Á´Ø ÁöÑÈÖçÁΩÆ, ÈÄöËøá‰ΩøÁî®‰º†ÈÄíÁªô <code>@Client</code> Ê≥®Ëß£ÁöÑÂÄº(ÈÄöÂ∏∏ÊòØ service ID):</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">http:</span></span><br><span class="line">        <span class="attr">client:</span></span><br><span class="line">            <span class="attr">versioning:</span></span><br><span class="line">                <span class="attr">greeting-service:</span></span><br><span class="line">                    <span class="attr">headers:</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">&#x27;Accept-Version&#x27;</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">&#x27;X-API-VERSION&#x27;</span></span><br></pre></td></tr></table></figure>

<p>‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰ΩøÁî® <code>greeting-service</code> Êù•‰Ωú‰∏∫ key ÂêçÁß∞, Ëøô‰∏™ÂêçÁß∞ÂèØ‰ª•Áî®Êù•ÈÖçÁΩÆ‰∏Ä‰∏™‰ΩøÁî® <code>@Client(&#39;greeting-service&#39;)</code> ‰øÆÈ•∞ÁöÑÂÆ¢Êà∑Á´Ø</p>
<h2 id="Handling-Form-Data-Â§ÑÁêÜË°®ÂçïÊï∞ÊçÆ"><a href="#Handling-Form-Data-Â§ÑÁêÜË°®ÂçïÊï∞ÊçÆ" class="headerlink" title="Handling Form Data (Â§ÑÁêÜË°®ÂçïÊï∞ÊçÆ)"></a>Handling Form Data (Â§ÑÁêÜË°®ÂçïÊï∞ÊçÆ)</h2><p>‰∏∫‰∫Ü‰ΩøË°®ÂçïÊï∞ÊçÆÂíå JSON ‰πãÈó¥ÁöÑËá™ÂÆö‰πâÊï∞ÊçÆÁªëÂÆöÊ®°Âûã‰øùÊåÅ‰∏ÄËá¥, Micronaut ‰ΩøÁî® Jackson Êù•ÂÆûÁé∞Êù•Ëá™Ë°®ÂçïÊèê‰∫§ÁöÑÁªëÂÆöÊï∞ÊçÆ</p>
<p>Ëøô‰∏™ÂÅöÊ≥ïÁöÑÂ•ΩÂ§ÑÊòØÂêåÊ†∑ÁöÑÁî®‰∫éËá™ÂÆö‰πâ JSON ÁªëÂÆöÁöÑ Jackson Ê≥®Ëß£‰πüÂèØ‰ª•Áî®‰∫éË°®ÂçïÊèê‰∫§</p>
<p>ÂÆûÈôÖ‰∏ä, ËøôÊÑèÂë≥ÁùÄË¶ÅÁªëÂÆöÂ∏∏ËßÑË°®ÂçïÊï∞ÊçÆ, ÂØπÂÖàÂâç JSON ÁªëÂÆö‰ª£Á†ÅÁöÑÁöÑÂîØ‰∏ÄÊõ¥ÊîπÊòØÊõ¥Êñ∞ÊâÄ‰ΩøÁî®ÁöÑ <code>MediaType</code></p>
<p>Example - Binding Form Data to POJOs:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Post</span>(consumes = <span class="string">&#x27;application/form-data&#x27;</span>)</span><br><span class="line">HttpResponse&lt;Person&gt; save(<span class="meta">@Body</span> Person person) &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>‰∏∫‰∫ÜÈÅøÂÖç ÊúçÂä°ÊãíÁªù ÊîªÂáª, Âú®ÁªëÂÆöÊúüÈó¥ÂàõÂª∫ÁöÑÈõÜÂêàÁ±ªÂûãÊï∞ÊçÆÂíåÊï∞ÁªÑÁ±ªÂûãÊï∞ÊçÆÂ∫îËØ•Ë¢´ÈôêÂà∂, ÈÄöËøáÂú® <code>application.yml</code> ‰∏≠ÈÖçÁΩÆ <code>jackson.arraySizeThreshold</code></p>
<p>Example - ÁªëÂÆöÂà∞ÊñπÊ≥ïÁöÑÂçï‰∏™ÂèÇÊï∞‰∏ä; ËøòÊîØÊåÅ‰ΩøÁî® <code>Optional</code> ÂåÖË£ÖÂèÇÊï∞:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Post</span>(consumes = <span class="string">&#x27;application/form-data&#x27;</span>)</span><br><span class="line">HttpResponse&lt;Person&gt; save(String firstName,</span><br><span class="line">                          String lastName,</span><br><span class="line">                          Optional&lt;Integer&gt; age) &#123;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Writing-Response-Data-ÁºñÂÜôÂìçÂ∫îÊï∞ÊçÆ"><a href="#Writing-Response-Data-ÁºñÂÜôÂìçÂ∫îÊï∞ÊçÆ" class="headerlink" title="Writing Response Data (ÁºñÂÜôÂìçÂ∫îÊï∞ÊçÆ)"></a>Writing Response Data (ÁºñÂÜôÂìçÂ∫îÊï∞ÊçÆ)</h2><blockquote>
<p>Micronaut‚Äôs HTTP server supports writing chunks of response data by returning a Publisher that emits objects that can be encoded to the HTTP response.</p>
</blockquote>
<p>Micronaut ÁöÑ HTTP server ÈÄöËøáËøîÂõû‰∏Ä‰∏™ ÂèëÂ∏ÉËÄÖ(Publisher) Êù•ÊîØÊåÅÂÜôÂÖ•ÂìçÂ∫îÊï∞ÊçÆÂùó, ËØ• ÂèëÂ∏ÉËÄÖ(Publisher) ËæìÂá∫ÂèØ‰ª•ÁºñÁ†Å‰∏∫ HTTP ÂìçÂ∫îÁöÑÂØπË±°</p>
<p>‰∏ãË°®ÊÄªÁªì‰∫ÜËøîÂõûÁ±ªÂûãÁ≠æÂêçÁ§∫‰æã‰∏é server ‰∏∫‰∫ÜÂ§ÑÁêÜÂÆÉ‰ª¨ËÄåË°®Áé∞Âá∫Êù•ÁöÑË°å‰∏∫:</p>
<table>
<thead>
<tr>
<th align="left">Return Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>Publisher&lt;String&gt;</code></td>
<td align="left">A <code>Publisher</code> that emits each chunk of content as a String</td>
</tr>
<tr>
<td align="left"><code>Flux&lt;byte[]&gt;</code></td>
<td align="left">A <code>Flux</code> that emits each chunk of content as a <code>byte[]</code> without blocking</td>
</tr>
<tr>
<td align="left"><code>Flux&lt;ByteBuf&gt;</code></td>
<td align="left">A Reactor <code>Flux</code> that emits each chunk as a Netty <code>ByteBuf</code></td>
</tr>
<tr>
<td align="left"><code>Flux&lt;Book&gt;</code></td>
<td align="left">When emitting a POJO, each emitted object is encoded as JSON by default without blocking</td>
</tr>
<tr>
<td align="left"><code>Flowable&lt;byte[]&gt;</code></td>
<td align="left">A <code>Flux</code> that emits each chunk of content as a <code>byte[]</code> without blocking</td>
</tr>
<tr>
<td align="left"><code>Flowable&lt;ByteBuf&gt;</code></td>
<td align="left">A Reactor <code>Flux</code> that emits each chunk as a Netty <code>ByteBuf</code></td>
</tr>
<tr>
<td align="left"><code>Flowable&lt;Book&gt;</code></td>
<td align="left">When emitting a POJO, each emitted object is encoded as JSON by default without blocking</td>
</tr>
</tbody></table>
<p>ÂΩìËøîÂõû‰∏Ä‰∏™ÂìçÂ∫îÂºèÁ±ªÂûãÊó∂, server ‰ΩøÁî®ÂÄº‰∏∫ <code>chunked</code> ÁöÑ <code>Transfer-Encoding</code> Âπ∂‰øùÊåÅÂÜôÂÖ•Êï∞ÊçÆ, Áõ¥Âà∞ <code>Publisher</code> ÁöÑ <code>onComplete</code> ÊñπÊ≥ïË¢´Ë∞ÉÁî®‰∏∫Ê≠¢</p>
<p>server ‰ªé <code>Publisher</code> ‰∏≠ËØ∑Ê±Ç‰∏Ä‰∏™ item, ËøõË°åÂÜôÂÖ•(write), ÁÑ∂ÂêéÂÜçËØ∑Ê±Ç‰∏ã‰∏Ä‰∏™ item, ‰ª•Ê≠§Êù•ÊéßÂà∂ËÉåÂéã(back pressure)</p>
<blockquote>
<p>It is up to the implementation of the Publisher to schedule any blocking I&#x2F;O work that may be done as a result of subscribing to the publisher.</p>
</blockquote>
<p>Áî± <code>Publisher</code> ÁöÑÂÆûÁé∞Êù•Ë∞ÉÂ∫¶ÊâÄÊúâÈòªÂ°û I&#x2F;O Â∑•‰Ωú, Ëøô‰∫õÈòªÂ°ûÂ∑•‰ΩúÂèØËÉΩ‰Ωú‰∏∫‰∏Ä‰∏™ËÆ¢ÈòÖ <code>Publisher</code> ÁöÑÁªìÊûúÊù•ÂÆåÊàê</p>
<h3 id="Performing-Blocking-I-x2F-O-ËøêË°åÈòªÂ°û-I-x2F-O"><a href="#Performing-Blocking-I-x2F-O-ËøêË°åÈòªÂ°û-I-x2F-O" class="headerlink" title="Performing Blocking I&#x2F;O (ËøêË°åÈòªÂ°û I&#x2F;O)"></a>Performing Blocking I&#x2F;O (ËøêË°åÈòªÂ°û I&#x2F;O)</h3><p>Âú®‰∏Ä‰∫õÊÉÖÂÜµ‰∏ã, ‰Ω†ÂèØËÉΩÂ∏åÊúõÈõÜÊàê‰∏Ä‰∏™‰∏çÊîØÊåÅ non-blocking I&#x2F;O ÁöÑÂ∫ì</p>
<h4 id="Writable-ÂèØÂÜôÁöÑ"><a href="#Writable-ÂèØÂÜôÁöÑ" class="headerlink" title="Writable (ÂèØÂÜôÁöÑ)"></a>Writable (ÂèØÂÜôÁöÑ)</h4><p>Âú®Ëøô‰∏™Âú∫ÊôØ‰∏ã, ‰Ω†ÂèØ‰ª•Âú®‰ªª‰Ωï Controller ÊñπÊ≥ï‰∏≠ËøîÂõû‰∏Ä‰∏™ <code>io.micronaut.core.io.Writable</code> ÂØπË±°</p>
<p><code>Writable</code> Êé•Âè£ÊúâÂ§ö‰∏™Á≠æÂêçÊù•ÂÖÅËÆ∏ÂÜôÂÖ•Êï∞ÊçÆÂà∞‰º†ÁªüÁöÑÈòªÂ°ûÊµÅ, ‰æãÂ¶Ç <code>Writer</code> Âíå <code>OutputStream</code></p>
<p>ÂΩìËøîÂõû‰∏Ä‰∏™ <code>Writable</code> Êó∂, ÈòªÂ°ûÁöÑ I&#x2F;O Êìç‰ΩúË¢´ËΩ¨ÁßªÂà∞ I&#x2F;O Á∫øÁ®ãÊ±†‰∏≠, ÊâÄ‰ª• Netty ÁöÑ event loop ‰∏ç‰ºöË¢´ÈòªÂ°û</p>
<p>Example - Performing Blocking I&#x2F;O With Writable:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> groovy.text.SimpleTemplateEngine</span><br><span class="line"><span class="keyword">import</span> groovy.text.Template</span><br><span class="line"><span class="keyword">import</span> io.micronaut.core.io.Writable</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.MediaType</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Controller</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Get</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.server.exceptions.HttpServerException</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&quot;/template&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TemplateController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> SimpleTemplateEngine templateEngine = <span class="keyword">new</span> SimpleTemplateEngine()</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Template template = initTemplate()</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Get</span>(value = <span class="string">&#x27;/welcome&#x27;</span>, produces = MediaType.TEXT_PLAIN)</span><br><span class="line">    Writable render() &#123;     <span class="comment">// 2</span></span><br><span class="line">        &#123;</span><br><span class="line">            writer -&gt;</span><br><span class="line">            template.make(<span class="attr">firstName:</span> <span class="string">&quot;Fred&quot;</span>, <span class="attr">lastName:</span> <span class="string">&quot;Flintstone&quot;</span>)        <span class="comment">// 3</span></span><br><span class="line">                    .writeTo(writer)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Template initTemplate() &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> templateEngine.createTemplate(<span class="string">&#x27;Dear $firstname $lastname. Nice to meet you.&#x27;</span>)</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> HttpServerException(<span class="string">&#x27;Cannot create template&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>2</code> : The Controller method returns a <code>Writable</code></p>
<p><code>3</code> : The returned function receives a <code>Writer</code> and calls <code>writeTo</code> on the template</p>
<h4 id="InputStream-ËæìÂÖ•ÊµÅ"><a href="#InputStream-ËæìÂÖ•ÊµÅ" class="headerlink" title="InputStream (ËæìÂÖ•ÊµÅ)"></a>InputStream (ËæìÂÖ•ÊµÅ)</h4><p>Âè¶‰∏Ä‰∏™ÈÄâÈ°πÊòØËøîÂõû‰∏Ä‰∏™ËæìÂÖ•ÊµÅ. ËøôÂú®ËÆ∏Â§öÂíåÂÖ∂‰ªñÊö¥Èú≤‰∏Ä‰∏™ÊµÅÁöÑ API ‰∫§‰∫íÁöÑÂú∫ÊôØ‰∏ãÊòØÂæàÊúâÁî®ÁöÑ</p>
<p>Example - Performing Blocking I&#x2F;O With InputStream:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Get</span>(value = <span class="string">&#x27;/write&#x27;</span>, produces = MediaType.TEXT_PLAIN)</span><br><span class="line">InputStream write() &#123;</span><br><span class="line">    <span class="type">byte</span>[] bytes = <span class="string">&quot;test&quot;</span>.getBytes(StandardCharsets.UTF_8)</span><br><span class="line">    <span class="keyword">new</span> ByteArrayInputStream(bytes) <span class="comment">// The input stream is returned and its contents will be the response body</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>The reading of the stream will be offloaded to the IO thread pool if the controller method is executed on the event loop.</p>
</blockquote>
<p>Â¶ÇÊûú Controller ÊñπÊ≥ïÊòØÊâßË°åÂú® event loop ‰∏äÊó∂, ÊµÅÁöÑËØªÂèñÂ∫îËØ•Âç∏ËΩΩÂà∞ IO Á∫øÁ®ãÊ±†‰∏≠</p>
<h4 id="404-Responses-404-ÂìçÂ∫î"><a href="#404-Responses-404-ÂìçÂ∫î" class="headerlink" title="404 Responses (404 ÂìçÂ∫î)"></a>404 Responses (404 ÂìçÂ∫î)</h4><p>Âú®ÊåÅ‰πÖÂ±ÇÊâæ‰∏çÂà∞‰∏Ä‰∏™È°πÁõÆÊàñÁ±ª‰ººÁöÑÂú∫ÊôØÊó∂, ËøîÂõû‰∏Ä‰∏™ 404 ÂìçÂ∫î:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span>(<span class="string">&quot;/books&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BooksController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Get</span>(<span class="string">&quot;/stock/&#123;isbn&#125;&quot;</span>)</span><br><span class="line">    Map stock(String isbn) &#123;</span><br><span class="line">        <span class="literal">null</span> <span class="comment">// Returning null triggers a 404(Not Found) response</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Get</span>(<span class="string">&quot;/maybestock/&#123;isbn&#125;&quot;</span>)</span><br><span class="line">    Mono&lt;Map&gt; maybestock(String isbn) &#123;</span><br><span class="line">        Mono.empty() <span class="comment">// Returning an empty Mono triggers a 404(Not Found) response</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Responding with an empty Publisher or Flux results in an empty array being returned if the content type is JSON.</p>
</blockquote>
<p>Â¶ÇÊûú Content-Type ‰∏∫ JSON, ‰ΩøÁî®Á©∫ÁöÑ <code>Publisher</code> Êàñ <code>Flux</code> ËøõË°åÂìçÂ∫î‰ºöÂØºËá¥ËøîÂõû‰∏Ä‰∏™Á©∫ÁöÑÊï∞ÁªÑ</p>
<h2 id="File-Uploads-Êñá‰ª∂‰∏ä‰º†"><a href="#File-Uploads-Êñá‰ª∂‰∏ä‰º†" class="headerlink" title="File Uploads (Êñá‰ª∂‰∏ä‰º†)"></a>File Uploads (Êñá‰ª∂‰∏ä‰º†)</h2><p>Êñá‰ª∂‰∏ä‰º†Â§ÑÁêÜÂú® Micronaut ‰∏≠ÊúâÁâπÊÆäÁöÑÂ§ÑÁêÜ</p>
<blockquote>
<p>Support is provided for streaming of uploads in a non-blocking manner through streaming uploads or completed uploads.</p>
</blockquote>
<p>ÈÄöËøáÊµÅÂºè‰∏ä‰º†ÊàñÂ∑≤ÂÆåÊàêÁöÑ‰∏ä‰º†, ‰ª•ÈùûÈòªÂ°ûÁöÑÊñπÂºèÊèê‰æõÂØπ‰∏ä‰º†ÁöÑÊµÅÂºèÊîØÊåÅ</p>
<p>‰∏∫‰∫Ü‰ªé‰∏Ä‰∏™ multipart request Êé•Êî∂Êï∞ÊçÆ, ËÆæÁΩÆÊñπÊ≥ïÊ≥®Ëß£ÁöÑ <code>consumes</code> ÂèÇÊï∞‰∏∫ <code>MULTIPART_FORM_DATA</code>:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Post</span>(consumes = MediaType.MULTIPART_FORM_DATA)</span><br><span class="line">HttpResponse upload() &#123;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Route-Arguments-Ë∑ØÁî±ÂèÇÊï∞"><a href="#Route-Arguments-Ë∑ØÁî±ÂèÇÊï∞" class="headerlink" title="Route Arguments (Ë∑ØÁî±ÂèÇÊï∞)"></a>Route Arguments (Ë∑ØÁî±ÂèÇÊï∞)</h3><p>ÊñπÊ≥ïÂèÇÊï∞Á±ªÂûãÂÜ≥ÂÆö‰∫ÜÊÄéÊ†∑Êé•Êî∂‰∏Ä‰∏™Êñá‰ª∂</p>
<blockquote>
<p>Data can be received a chunk at a time or when an upload is completed.</p>
</blockquote>
<p>ÂèØ‰ª•‰∏ÄÊ¨°Êé•Êî∂‰∏Ä‰∏™Êï∞ÊçÆÂùó, ‰πüÂèØ‰ª•Âú®‰∏ä‰º†ÂÆåÊàêÊó∂Êé•Êî∂Êï∞ÊçÆ</p>
<p>Â¶ÇÊûúË∑ØÁî±ÂèÇÊï∞ÂêçÁß∞‰∏çËÉΩÊàñËÄÖ‰∏çÂ∫îËØ•‰∏éËØ∑Ê±Ç‰∏≠ÁöÑ part ÂêçÁß∞ÂåπÈÖçÁöÑËØù, Ê∑ªÂä† <code>@Part</code> Ê≥®Ëß£Âà∞ÂèÇÊï∞‰∏≠Âπ∂ÊåáÂÆöËØ∑Ê±Ç‰∏≠ÊÉ≥Ë¶ÅÁöÑÂêçÁß∞</p>
<h4 id="Chunk-Data-Types-ÂùóÊï∞ÊçÆÁ±ªÂûã"><a href="#Chunk-Data-Types-ÂùóÊï∞ÊçÆÁ±ªÂûã" class="headerlink" title="Chunk Data Types (ÂùóÊï∞ÊçÆÁ±ªÂûã)"></a>Chunk Data Types (ÂùóÊï∞ÊçÆÁ±ªÂûã)</h4><blockquote>
<p>PartData represents a chunk of data received in a multipart request.</p>
</blockquote>
<p><code>PartData</code> ‰ª£Ë°®ÁùÄ multipart request ‰∏≠Êé•Êî∂Âà∞ÁöÑÊï∞ÊçÆÂùó</p>
<p><code>PartData</code> Êé•Âè£ÊñπÊ≥ïËΩ¨Êç¢Êï∞ÊçÆ‰∏∫‰∏Ä‰∏™ <code>byte[]</code>,<code>InputStream</code>,<code>ByteBuffer</code></p>
<p>Âè™ËÉΩ‰ªé <code>PartData</code> ‰∏≠Ëé∑ÂèñÊï∞ÊçÆ‰∏ÄÊ¨°. Â∫ïÂ±Ç buffer Â∑≤ÁªèË¢´ÈáäÊîæ‰∫Ü, ÂØºËá¥‰πãÂêéÁöÑËé∑ÂèñÂ§±Ë¥•</p>
<blockquote>
<p>Route arguments of type Publisher are treated as intended to receive a single file, and each chunk of the received file will be sent downstream.</p>
</blockquote>
<p><code>Publisher</code> Á±ªÂûãÁöÑË∑ØÁî±ÂèÇÊï∞Ë¢´ËßÜ‰∏∫Êó®Âú®Êé•Êî∂Âçï‰∏™Êñá‰ª∂, Âπ∂‰∏îÊé•Êî∂Âà∞ÁöÑÊñá‰ª∂ÁöÑÊØè‰∏™ÂùóÈÉΩÂ∞ÜË¢´ÂèëÈÄÅÂà∞‰∏ãÊ∏∏</p>
<p>Â¶ÇÊûúÊ≥õÂûãÁ±ªÂûã‰∏çÊòØ <code>PartData</code>, Â∞ÜÂ∞ùËØï‰ΩøÁî® Micronaut ËΩ¨Êç¢ÊúçÂä°ËøõË°åËΩ¨Êç¢</p>
<p>ÈªòËÆ§ÊîØÊåÅËΩ¨Êç¢‰∏∫ <code>String</code> Âíå <code>byte[]</code></p>
<p>Â¶ÇÊûú‰Ω†ÈúÄË¶ÅÂÖ≥‰∫é‰∏Ä‰∏™‰∏ä‰º†ÁöÑÊñá‰ª∂ÁöÑÂÖÉÊï∞ÊçÆ‰ø°ÊÅØ, ÂèØ‰ª•‰ΩøÁî® <code>StreamingFileUpload</code> Á±ª, Ëøô‰∏™Á±ªÁªßÊâø‰∫Ü <code>Publisher</code>, Êã•ÊúâÂÖ≥‰∫éÊñá‰ª∂ÁöÑ‰ø°ÊÅØ, ‰æãÂ¶Ç <code>content type</code> ÂíåÊñá‰ª∂ÂêçÁß∞</p>
<p>Example - Streaming file upload:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.http.HttpResponse</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Controller</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Post</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.multipart.StreamFileUpload</span><br><span class="line"><span class="keyword">import</span> org.reactivestreams.Publisher</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Mono</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> io.micronaut.http.HttpStatus.CONFLICT</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> io.micronaut.http.MediaType.MULTIPART_FORM_DATA</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> io.micronaut.http.MediaType.TEXT_PLAIN</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&quot;/upload&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UploadController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Post</span>(value = <span class="string">&quot;/&quot;</span>, consumes = MULTIPART_FORM_DATA, produces = TEXT_PLAIN)       <span class="comment">// 1</span></span><br><span class="line">    Mono&lt;HttpResponse&lt;String&gt;&gt; upload(StreamingFileUpload file) &#123;       <span class="comment">// 2</span></span><br><span class="line">        File tempFile = File.createTempFile(file.filename, <span class="string">&quot;temp&quot;</span>)</span><br><span class="line">        Publisher&lt;Boolean&gt; uploadPublisher = file.transferTo(tempFile)      <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line">        Mono.from(uploadPublisher)      <span class="comment">// 4</span></span><br><span class="line">            .map(&#123; success -&gt;</span><br><span class="line">                <span class="keyword">if</span> (success) &#123;</span><br><span class="line">                    HttpResponse.ok(<span class="string">&quot;Uploaded&quot;</span>)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    HttpResponse.&lt;String&gt;status(CONFLICT).body(<span class="string">&quot;Upload Failed&quot;</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>1</code> : The method consumes <code>MULTIPART_FORM_DATA</code></p>
<p><code>2</code> : The method parameters match from attribute names. In this case <code>file</code> will match for example an <code>&lt;input type=&quot;file&quot; name=&quot;file&quot;&gt;</code></p>
<p><code>3</code> : The <code>StreamingFileUpload.transferTo(File)</code> method transfers the file to the server. The method returns a <code>Publisher</code></p>
<p><code>4</code> : The returned <code>Mono</code> subscribes to the <code>Publisher</code> and outputs a response once the the uplaod is complete, without blocking</p>
<p>ËøòÂèØ‰ª•‰º†ÈÄí‰∏Ä‰∏™ outupt stream Âà∞ <code>transferTo</code> ÊñπÊ≥ï</p>
<blockquote>
<p>The reading of the file or stream will be offloaded to the IO thread pool to prevent the possibility of blocking the event loop</p>
</blockquote>
<p>Êñá‰ª∂ÊàñÊµÅÁöÑËØªÂèñÂ∞Ü‰ºöÂç∏ËΩΩÂà∞ IO Á∫øÁ®ãÊ±†, ÈÅøÂÖçÂèØËÉΩÁöÑÂØπ event loop ÁöÑÈòªÂ°û</p>
<p>Example - Streaming file upload:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Post</span>(value = <span class="string">&quot;/&quot;</span>, consumes = MULTIPART_FORM_DATA, produces = TEXT_PLAIN)</span><br><span class="line">    Mono&lt;HttpResponse&lt;String&gt;&gt; upload(StreamingFileUpload file) &#123;</span><br><span class="line">        OutputStream outputStream = <span class="keyword">new</span> ByteArrayOutputStream()     <span class="comment">// 3</span></span><br><span class="line">        </span><br><span class="line">        Publisher&lt;Boolean&gt; uploadPublisher = file.transferTo(outputStream)      <span class="comment">// 4</span></span><br><span class="line"></span><br><span class="line">        Mono.from(uploadPublisher)</span><br><span class="line">            .map(&#123; success -&gt;</span><br><span class="line">                <span class="keyword">if</span> (success) &#123;</span><br><span class="line">                    HttpResponse.ok(<span class="string">&quot;Uploaded&quot;</span>)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    HttpResponse.&lt;String&gt;status(CONFLICT).body(<span class="string">&quot;Upload Failed&quot;</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><code>3</code> : A stream is created to output the data to. In real world scenarios this would come from some other source</p>
<p><code>4</code> : The <code>StreamingFileUpload.transferTo(OutputStream)</code> method transfer the file to the server. The method returns a <code>Publisher</code></p>
<h4 id="Whole-Data-Types-ÂÆåÊï¥Êï∞ÊçÆÁ±ªÂûã"><a href="#Whole-Data-Types-ÂÆåÊï¥Êï∞ÊçÆÁ±ªÂûã" class="headerlink" title="Whole Data Types (ÂÆåÊï¥Êï∞ÊçÆÁ±ªÂûã)"></a>Whole Data Types (ÂÆåÊï¥Êï∞ÊçÆÁ±ªÂûã)</h4><p>‰∏çÊòØ <code>Publisher</code> Á±ªÂûãÁöÑË∑ØÁî±ÂèÇÊï∞ÂØºËá¥Ë∑ØÁî±ÊâßË°åÂª∂ËøüÂà∞‰∏ä‰º†ÁªìÊùü</p>
<p>Â∞Ü‰ºöÂ∞ùËØïÂ∞ÜÊé•Êî∂Âà∞ÁöÑÊï∞ÊçÆËΩ¨Êç¢‰∏∫ËØ∑Ê±ÇÁöÑÁ±ªÂûã</p>
<p>ÈªòËÆ§ÊîØÊåÅËΩ¨Êç¢‰∏∫ <code>String</code>, <code>byte[]</code></p>
<p>Èô§Ê≠§‰πãÂ§ñ, Â¶ÇÊûú‰∏Ä‰∏™ÊîØÊåÅÊñá‰ª∂ÁöÑ media type ÁöÑ media type codec Â∑≤ÁªèÊ≥®ÂÜå, ÈÇ£‰πàÊñá‰ª∂ÂèØ‰ª•ËΩ¨Êç¢‰∏∫‰∏Ä‰∏™ POJO</p>
<p>ÈªòËÆ§ÂåÖÂê´‰∫Ü‰∏Ä‰∏™ media type codec, Ëøô‰∏™ codec ÂÖÅËÆ∏Â∞Ü JSON Êñá‰ª∂ËΩ¨Êç¢‰∏∫ POJO</p>
<p>Example - Receiving a byte array:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.http.HttpResponse</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Controller</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Post</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.nio.file.Files</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Path</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Paths</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> io.micronaut.http.MediaType.MULTIPART_FORM_DATA</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> io.micronaut.http.MediaType.TEXT_PLAIN</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&quot;/upload&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BytesUploadController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Post</span>(value = <span class="string">&quot;/bytes&quot;</span>, consumes = MULTIPART_FORM_DATA, produces = TEXT_PLAIN)</span><br><span class="line">    HttpResponse&lt;String&gt; uploadBytes(<span class="type">byte</span>[] file, String fileName) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            File tempFile = File.createTempFile(fileName, <span class="string">&quot;temp&quot;</span>)</span><br><span class="line">            Path path = Paths.get(tempFile.absolutePath)</span><br><span class="line">            Files.write(path, file)</span><br><span class="line">            HttpResponse.ok(<span class="string">&quot;Uploaded&quot;</span>)</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            HttpResponse.badRequest(<span class="string">&quot;Upload Failed&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Â¶ÇÊûú‰Ω†ÈúÄË¶ÅÁü•ÈÅì‰∏Ä‰∏™‰∏ä‰º†ÁöÑÊñá‰ª∂ÁöÑÂÖÉÊï∞ÊçÆ‰ø°ÊÅØ, ‰ΩøÁî® <code>CompletedFileUpload</code> Á±ªÊã•ÊúâÊñπÊ≥ïÊù•Ëé∑ÂèñÊñá‰ª∂ÁöÑÊï∞ÊçÆ, Êñá‰ª∂ÁöÑ‰ø°ÊÅØ, ‰æãÂ¶Ç content type ÂíåÊñá‰ª∂Âêç</p>
<p>Example - File upload with metadata:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Post</span>(value = <span class="string">&quot;/bytes&quot;</span>, consumes = MULTIPART_FORM_DATA, produces = TEXT_PLAIN)</span><br><span class="line">HttpResponse&lt;String&gt; uploadBytes(CompletedFileUpload file) &#123;        <span class="comment">// 2</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        File tempFile = File.createTempFile(file.filename, <span class="string">&quot;temp&quot;</span>)</span><br><span class="line">        Path path = Paths.get(tempFile.absolutePath)</span><br><span class="line">        Files.write(path, file.bytes)       <span class="comment">// 3</span></span><br><span class="line">        HttpResponse.ok(<span class="string">&quot;Uploaded&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        HttpResponse.badRequest(<span class="string">&quot;Upload Failed&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>2</code> : The method parameters match form attribute names. In this case the <code>file</code> will match for example an <code>&lt;input type=&quot;file&quot; name=&quot;file&quot;&gt;</code></p>
<p><code>3</code> : The <code>CompletedFileUpload</code> instance gives access to metadata about the upload as well as access to the file contents</p>
<p>Â¶ÇÊûúÊñá‰ª∂‰∏ç‰ºöË¢´ËØªÂèñ, ÈÇ£‰πàÊñá‰ª∂ÂØπË±°‰∏äÈù¢ÁöÑ <code>discard</code> ÊñπÊ≥ïÂøÖÈ°ªË¢´Ë∞ÉÁî®, ‰ª•Èò≤Ê≠¢ÂÜÖÂ≠òÊ≥ÑÈú≤</p>
<h3 id="Multiple-Uploads-Â§öÊñá‰ª∂‰∏ä‰º†"><a href="#Multiple-Uploads-Â§öÊñá‰ª∂‰∏ä‰º†" class="headerlink" title="Multiple Uploads (Â§öÊñá‰ª∂‰∏ä‰º†)"></a>Multiple Uploads (Â§öÊñá‰ª∂‰∏ä‰º†)</h3><h4 id="Different-Names-‰∏çÂêåÁöÑÂêçÂ≠ó"><a href="#Different-Names-‰∏çÂêåÁöÑÂêçÂ≠ó" class="headerlink" title="Different Names (‰∏çÂêåÁöÑÂêçÂ≠ó)"></a>Different Names (‰∏çÂêåÁöÑÂêçÂ≠ó)</h4><p>Â¶ÇÊûú‰∏Ä‰∏™ multipart request ÊúâÂ§ö‰∏™ÂÖ∑Êúâ‰∏çÂêå part name ÁöÑ‰∏ä‰º†, Âú®‰Ω†ÁöÑË∑ØÁî±‰∏äÂàõÂª∫‰∏Ä‰∏™ÂèÇÊï∞Êù•Êé•Êî∂ÊØè‰∏™ part: <code>HttpResponse upload(String title, String name)</code></p>
<p>ÂÉè‰∏äÈù¢‰æãÂ≠ê‰∏≠Â±ïÁ§∫ÁöÑ, ‰∏Ä‰∏™Ë∑ØÁî±ÊñπÊ≥ïÁ≠æÂêçÊúüÊúõÊé•Êî∂‰∏§‰∏™ part, ‰∏Ä‰∏™ÂêçÂ≠ó‰∏∫ <code>title</code>, Âè¶‰∏Ä‰∏™ÂêçÂ≠ó‰∏∫ <code>name</code></p>
<h4 id="Same-name-Áõ∏ÂêåÁöÑÂêçÂ≠ó"><a href="#Same-name-Áõ∏ÂêåÁöÑÂêçÂ≠ó" class="headerlink" title="Same name (Áõ∏ÂêåÁöÑÂêçÂ≠ó)"></a>Same name (Áõ∏ÂêåÁöÑÂêçÂ≠ó)</h4><p>‰ΩøÁî®Áõ∏ÂêåÁöÑ part name Êù•Êé•Êî∂Â§ö‰∏™ part, ÂèÇÊï∞Á±ªÂûãÂøÖÈ°ªÊòØ <code>Publisher</code></p>
<p>ÂΩì‰ª•‰∏ãÊñπÂºè‰πã‰∏Ä‰ΩøÁî®Êó∂, <code>Publisher</code> ‰ºö‰∏∫ÊâæÂà∞ÁöÑÂÖ∑ÊúâÊåáÂÆöÂêçÁß∞ÁöÑ part ËæìÂá∫‰∏Ä‰∏™ item</p>
<p><code>Publisher</code> ÂøÖÈ°ªÊé•ÂèóÂ¶Ç‰∏ãÁ±ªÂûã‰πã‰∏Ä:</p>
<ul>
<li><code>StreamingFileUpload</code></li>
<li><code>CompletedFileUpload</code></li>
<li><code>CompletedPart</code> for attributes</li>
<li>Any POJO, assuming a media codec that supports the content type exists</li>
<li>Another <code>Publiser</code> that accepts one of the chunked data types described above</li>
</ul>
<p>Example:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">HttpResponse upload(Publisher&lt;StreamingFileUpload&gt; files)</span><br><span class="line">HttpResponse upload(Publisher&lt;CompletedFileUpload&gt; files)</span><br><span class="line">HttpResponse upload(Publisher&lt;MyObject&gt; files)</span><br><span class="line">HttpResponse upload(Publisher&lt;Publisher&lt;PartData&gt;&gt; files)</span><br><span class="line">HttpResponse upload(Publisher&lt;CompletedPart&gt; attributes)</span><br></pre></td></tr></table></figure>

<h3 id="Whole-Body-Binding-ÂÆåÊï¥-Body-ÁªëÂÆö"><a href="#Whole-Body-Binding-ÂÆåÊï¥-Body-ÁªëÂÆö" class="headerlink" title="Whole Body Binding (ÂÆåÊï¥ Body ÁªëÂÆö)"></a>Whole Body Binding (ÂÆåÊï¥ Body ÁªëÂÆö)</h3><blockquote>
<p>When request part names aren‚Äôt known ahead of time, or to read the entire body, a special type can be used to indicate the entire body is desired.</p>
</blockquote>
<p>ÂΩì‰∏Ä‰∏™ request part ÁöÑÂêçÂ≠ó‰∏çËÉΩÊèêÂâçÁü•ÈÅìÊó∂, ÊàñËÄÖÈúÄË¶ÅËØªÂèñÊï¥‰∏™ body, Â∞±ÈúÄË¶Å‰∏Ä‰∏™ÂèØ‰ª•Áî®Êù•ÊåáÂêëÊï¥‰∏™ body ÁöÑÁâπÊÆäÁ±ªÂûã</p>
<p>Â¶ÇÊûú‰∏Ä‰∏™Ë∑ØÁî±ÁöÑÂèÇÊï∞Á±ªÂûã‰∏∫ <code>MultipartBody</code> , ÂêåÊó∂‰ΩøÁî® <code>@Body</code> Ê≥®Ëß£, request ÁöÑÊØè‰∏™ part ÈÉΩ‰ºöÈÄöËøáËøô‰∏™ÂèÇÊï∞Êù•ËæìÂá∫</p>
<p>‰∏Ä‰∏™ <code>MultipartBody</code> ÊòØ‰∏Ä‰∏™<code>CompletedPart</code> ÁöÑÂÆû‰æãÁöÑ <code>Publisher</code></p>
<p>Example - Binding to the entire multipart body:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Body</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Controller</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Post</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.multipart.CompletedFileUpload</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.multipart.CompletedPart</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.server.multipart.MultipartBody</span><br><span class="line"><span class="keyword">import</span> org.reactivestreams.Subscriber</span><br><span class="line"><span class="keyword">import</span> org.reactivestreams.Subscription</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Mono</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> io.micronaut.http.MediaType.MULTIPART_FORM_DATA</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> io.micronaut.http.MediaType.TEXT_PLAIN</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&#x27;/upload&#x27;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">WholeBodyUploadController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Post</span>(value = <span class="string">&#x27;/whole-body&#x27;</span>, consumes = MULTIPART_FORM_DATA, produces = TEXT_PLAIN)</span><br><span class="line">    Mono&lt;String&gt; uploadBytes(<span class="meta">@Body</span> MultipartBody body) &#123;</span><br><span class="line">        Mono.&lt;String&gt;create(&#123; emitter -&gt;</span><br><span class="line">            body.subscribe(<span class="keyword">new</span> Subscriber&lt;CompletedPart&gt;()&#123;</span><br><span class="line">                <span class="keyword">private</span> Subscription s</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="type">void</span> onSubscribe(Subscription s) &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.s = s</span><br><span class="line">                    s.request(<span class="number">1</span>)</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="type">void</span> onNext(CompletedPart completedPart) &#123;</span><br><span class="line">                    String partName = completedPart.name</span><br><span class="line">                    <span class="keyword">if</span> (completedPart <span class="keyword">instanceof</span> CompletedFileUpload) &#123;</span><br><span class="line">                        String originalFileName = completedPart.filename</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="type">void</span> onError(Throwable t) &#123; emitter.error(t) &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="type">void</span> onComplete() &#123; emitter.success(<span class="string">&quot;Uploaded) &#125;</span></span><br><span class="line"><span class="string">            &#125;)</span></span><br><span class="line"><span class="string">        &#125;)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="File-Transfers-Êñá‰ª∂‰º†Ëæì"><a href="#File-Transfers-Êñá‰ª∂‰º†Ëæì" class="headerlink" title="File Transfers (Êñá‰ª∂‰º†Ëæì)"></a>File Transfers (Êñá‰ª∂‰º†Ëæì)</h2><p>Micronaut ÊîØÊåÅÈÄöËøáÂ§öÁßçÊñπÂºè‰º†ÈÄíÊñá‰ª∂ÁªôÂÆ¢Êà∑Á´Ø</p>
<h3 id="Sending-File-Objects-ÂèëÈÄÅÊñá‰ª∂ÂØπË±°"><a href="#Sending-File-Objects-ÂèëÈÄÅÊñá‰ª∂ÂØπË±°" class="headerlink" title="Sending File Objects (ÂèëÈÄÅÊñá‰ª∂ÂØπË±°)"></a>Sending File Objects (ÂèëÈÄÅÊñá‰ª∂ÂØπË±°)</h3><p>ÂèØ‰ª•Âú® Controller ÊñπÊ≥ï‰∏≠ËøîÂõû‰∏Ä‰∏™ <code>File</code> ÂØπË±°, Êï∞ÊçÆÂ∞Ü‰ºöËøîÂõûÁªôÂÆ¢Êà∑Á´Ø</p>
<blockquote>
<p>The Content-Type header of file responses is calculated based on the name of the file.</p>
</blockquote>
<p>Êñá‰ª∂ÂìçÂ∫îÁöÑ Content-Type header ÊòØÊ†πÊçÆÊñá‰ª∂ÂêçËÆ°ÁÆóÁöÑ</p>
<blockquote>
<p>To control either the media type of the file being sent, or to set the file to be downloaded (i.e. using the Content-Disposition header), instead construct a SystemFile with the file to use.</p>
</blockquote>
<p>Ë¶ÅÊéßÂà∂Ê≠£Âú®ÂèëÈÄÅÁöÑÊñá‰ª∂ÁöÑ media type, ÊàñËÆæÁΩÆË¶Å‰∏ãËΩΩÁöÑÊñá‰ª∂(Âç≥‰ΩøÁî® <code>Content-Disposition</code> header), ËØ∑ÊûÑÈÄ†‰∏Ä‰∏™Â∏¶ÊúâË¶Å‰ΩøÁî®ÁöÑÊñá‰ª∂ÁöÑ <code>SystemFile</code></p>
<p>Example - Sending a SystemFile:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Get</span></span><br><span class="line"><span class="keyword">public</span> SystemFile download() &#123;</span><br><span class="line">    File file</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> SystemFile(file).attach(<span class="string">&quot;myfile.txt&quot;</span>)</span><br><span class="line">    <span class="comment">// or new SystemFile(file, MediaType.TEXT_HTML_PLAIN)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Sending-an-InputStream-ÂèëÈÄÅ‰∏Ä‰∏™-InputStream"><a href="#Sending-an-InputStream-ÂèëÈÄÅ‰∏Ä‰∏™-InputStream" class="headerlink" title="Sending an InputStream (ÂèëÈÄÅ‰∏Ä‰∏™ InputStream)"></a>Sending an InputStream (ÂèëÈÄÅ‰∏Ä‰∏™ InputStream)</h3><p>Âú®‰∏çËÉΩÂºïÁî®‰∏Ä‰∏™ <code>File</code> ÂØπË±°ÁöÑÊÉÖÂÜµ‰∏ã, ‰æãÂ¶Ç JAR Êñá‰ª∂‰∏≠ÁöÑËµÑÊ∫ê, Micronaut ÊîØÊåÅ‰º†Ëæì input streams</p>
<p>‰∏∫‰∫ÜÂú® Controller ÊñπÊ≥ï‰∏≠ËøîÂõû‰∏Ä‰∏™Êï∞ÊçÆÊµÅ, ÊûÑÈÄ†‰∏Ä‰∏™ <code>StreamedFile</code></p>
<p><code>StreamedFile</code> ÁöÑÊûÑÈÄ†ÊñπÊ≥ïËøòÊîØÊåÅÊé•Âèó‰∏Ä‰∏™ <code>java.net.URL</code></p>
<p>Example - Sending a StreamedFile:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Get</span></span><br><span class="line"><span class="keyword">public</span> StreamedFile download() &#123;</span><br><span class="line">    InputStream inputStream</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> StreamedFile(inputStream, MediaType.TEXT_PLAIN_TYPE)</span><br><span class="line">    <span class="comment">// An attach(String filename) method is also available to set the Content-Disposition</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Â¶ÇÊûúË¶Å‰º†ËæìÁöÑÊñá‰ª∂Ê≤°Êúâ‰øÆÊîπËøáÂπ∂‰∏îËØ∑Ê±ÇÂåÖÂê´ÈÄÇÂΩìÁöÑ header , server ÊîØÊåÅËøîÂõû <code>304</code> (Not Modified) ÂìçÂ∫î</p>
<p>Èô§Ê≠§, Â¶ÇÊûúÂÆ¢Êà∑Á´ØÂèØ‰ª•Êé•Âèó encoded responses, Micronaut Âú®ÂêàÈÄÇÁöÑÊÉÖÂÜµ‰∏ã encodes Êñá‰ª∂</p>
<p>Encoding ÂèëÁîüÂú®Êñá‰ª∂ÊòØÂü∫‰∫éÊñáÊú¨ÁöÑÂπ∂Â§ß‰∫é 1KB</p>
<p>Ë¶Å encoded ÁöÑÊï∞ÊçÆÁöÑÈòàÂÄºÊòØÂèØ‰ª•ÈÖçÁΩÆ</p>
<blockquote>
<p>To use a custom data source to send data through an input stream, construct a PipedInputStream and PipedOutputStream to write data from the output stream to the input. Make sure to do the work on a separate thread so the file can be returned immediately.</p>
</blockquote>
<p>Ë¶Å‰ΩøÁî®‰∏Ä‰∏™Ëá™ÂÆö‰πâÊï∞ÊçÆÊ∫ê(data source)Êù•‰ªé‰∏Ä‰∏™ËæìÂÖ•ÊµÅ‰∏≠ÂèëÈÄÅÊï∞ÊçÆ, ÊûÑÈÄ†‰∏Ä‰∏™ <code>PipedInputStream</code> Âíå <code>PipedOutputStream</code> Êù•‰ªéËæìÂá∫ÊµÅÂÜôÊï∞ÊçÆÂà∞ËæìÂÖ•ÊµÅ. Á°Æ‰øùÂú®Âè¶‰∏Ä‰∏™Á∫øÁ®ã‰∏≠ÂÆåÊàêËøô‰∏™Â∑•‰Ωú, ‰ª•‰ΩøÊñá‰ª∂ÂèØ‰ª•È©¨‰∏äË¢´ËøîÂõû</p>
<h3 id="Cache-Configuration-ÁºìÂ≠òÈÖçÁΩÆ"><a href="#Cache-Configuration-ÁºìÂ≠òÈÖçÁΩÆ" class="headerlink" title="Cache Configuration (ÁºìÂ≠òÈÖçÁΩÆ)"></a>Cache Configuration (ÁºìÂ≠òÈÖçÁΩÆ)</h3><p>ÈªòËÆ§Âú∞, Êñá‰ª∂ÂìçÂ∫îÂåÖÂê´‰∫ÜÁºìÂ≠ò headers</p>
<p>‰∏ãÈù¢ÁöÑÈÄâÈ°πË°®Êòé‰∫Ü <code>Cache-Control</code> header ÊòØÊÄéÊ†∑ÊûÑÂª∫ÁöÑ</p>
<p>Table - Configuration Properties for <code>FileTypeHandlerConfiguration</code>:</p>
<table>
<thead>
<tr>
<th align="left">Property</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>netty.responses.file.cache-seconds</code></td>
<td align="left"><code>int</code></td>
<td align="left">Cache Seconds. Default value 60</td>
</tr>
</tbody></table>
<p>Table - Configuration Properties for <code>CacheControlConfiguration</code>:</p>
<table>
<thead>
<tr>
<th align="left">Property</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>netty.responses.file.cache-control</code></td>
<td align="left"><code>FileTypeHandlerConfiguration$CacheControlConfiguration</code></td>
<td align="left">Sets the cache control configuration</td>
</tr>
<tr>
<td align="left"><code>netty.responses.file.cache-control.public</code></td>
<td align="left"><code>boolean</code></td>
<td align="left">Sets whether the cache control is public. Default value false</td>
</tr>
</tbody></table>
<h2 id="HTTP-Filters-HTTP-ËøáÊª§Âô®"><a href="#HTTP-Filters-HTTP-ËøáÊª§Âô®" class="headerlink" title="HTTP Filters (HTTP ËøáÊª§Âô®)"></a>HTTP Filters (HTTP ËøáÊª§Âô®)</h2><p>Micronaut HTTP Server ÊîØÊåÅ‰ª•‰∏é Java Â∫îÁî®Á®ãÂ∫è‰∏≠ÁöÑ Servlet ËøáÊª§Âô®Áõ∏‰ºº(‰ΩÜÂìçÂ∫îÂºè)ÁöÑÊñπÂºèÂ∞ÜËøáÊª§Âô®Â∫îÁî®‰∫é ËØ∑Ê±Ç&#x2F;ÂìçÂ∫î Â§ÑÁêÜ</p>
<p>ËøáÊª§Âô®ÊîØÊåÅÂ¶Ç‰∏ãÂú∫ÊôØ:</p>
<ul>
<li>Ë£ÖÈ•∞‰º†ÂÖ•ÁöÑ <code>HttpRequest</code></li>
<li>‰øÆÊîπÂà†Èô§ÁöÑ <code>HttpResponse</code></li>
<li>ÂÆûÁé∞Ê®™ÂàáÂÖ≥Ê≥®ÁÇπ(cross-cutting concerns), ‰æãÂ¶ÇÂÆâÂÖ®(security), ËøΩË∏™(tracing)</li>
</ul>
<p>ÂØπ‰∫é‰∏Ä‰∏™ server Â∫îÁî®, ÂèØ‰ª•ÂÆûÁé∞ <code>HttpServerFilter</code> Êé•Âè£ÁöÑ <code>doFilter</code> ÊñπÊ≥ï</p>
<p><code>doFilter</code> ÊñπÊ≥ïÊé•Êî∂ <code>HttpRequest</code> Âíå‰∏Ä‰∏™ <code>ServerFilterChain</code> ÂÆû‰æã</p>
<blockquote>
<p>The <code>ServerFilterChain</code> interface contains a resolved chain of filters where the final entry in the chain is the matched route. The <code>ServerFilterChain.proceed(io.micronaut.http.HttpRequest)</code> method resumes processing of the request.</p>
</blockquote>
<p><code>ServerFilterChain</code> Êé•Âè£ÂåÖÂê´‰∏Ä‰∏™ËøáÊª§Âô®ÁöÑËß£ÊûêÈìæ, ÈìæÁöÑÊúÄÂêé‰∏Ä‰∏™ËäÇÁÇπÊòØÂåπÈÖçÁöÑË∑ØÁî±. <code>ServerFilterChain.proceed(io.micronaut.http.HttpRequest)</code> ÊñπÊ≥ïÊÅ¢Â§çÂØπËØ∑Ê±ÇÁöÑÂ§ÑÁêÜ</p>
<p><code>proceed()</code> ÊñπÊ≥ïËøîÂõû‰∏Ä‰∏™ÂìçÂ∫îÂºèÊµÅ <code>Publisher</code> Êù•ËæìÂá∫Ë¶ÅËøîÂõûÁªôÂÆ¢Êà∑Á´ØÁöÑÂìçÂ∫î</p>
<blockquote>
<p>Implementors of filters can subscribe to the <code>Publisher</code> and mutate the emitted <code>MutableHttpResponse</code> to modify the response prior to returning the response to the client.</p>
</blockquote>
<p>ËøáÊª§Âô®ÁöÑÂÆûÁé∞ËÄÖÂèØ‰ª•ËÆ¢ÈòÖ <code>Publisher</code> Âπ∂ÊîπÂèòËæìÂá∫ÁöÑ <code>MutableHttpResponse</code> ‰ª•Âú®Â∞ÜÂìçÂ∫îËøîÂõûÁªôÂÆ¢Êà∑Á´Ø‰πãÂâç‰øÆÊîπÂìçÂ∫î</p>
<p>ËøáÊª§Âô®ÊâßË°åÂú® event loop ‰∏≠, ÊâÄ‰ª•ÈòªÂ°ûÊìç‰ΩúÂøÖÈ°ªÂç∏ËΩΩÂà∞Âè¶Â§ñ‰∏Ä‰∏™Á∫øÁ®ãÊ±†‰∏≠</p>
<h3 id="Writing-a-Filter-ÁºñÂÜô‰∏Ä‰∏™ËøáÊª§Âô®"><a href="#Writing-a-Filter-ÁºñÂÜô‰∏Ä‰∏™ËøáÊª§Âô®" class="headerlink" title="Writing a Filter (ÁºñÂÜô‰∏Ä‰∏™ËøáÊª§Âô®)"></a>Writing a Filter (ÁºñÂÜô‰∏Ä‰∏™ËøáÊª§Âô®)</h3><p>‰∏çË¶ÅÂú®‰Ω†ÁöÑËøáÊª§Âô®‰∏≠ÈòªÂ°ûÂ∫ïÂ±ÇÁöÑ Netty event loop</p>
<p>Áõ∏Âèç, ‰∏ÄÊó¶‰ªª‰Ωï I&#x2F;O ÂÆåÊàê, ËøáÊª§Âô®Â∞±Â∫îËØ•ÁªßÁª≠ÊâßË°å</p>
<p>Example - A TraceService Example using Reactive Streams:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.http.HttpRequest</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.inject.Singleton</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Flux</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Mono</span><br><span class="line"><span class="keyword">import</span> reactor.core.scheduler.Schedulers</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Callable</span><br><span class="line"></span><br><span class="line"><span class="meta">@Singleton</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TraceService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger LOG = LoggerFactory.getLogger(TraceService.<span class="keyword">class</span>)</span><br><span class="line"></span><br><span class="line">    Flux&lt;Boolean&gt; trace(HttpRequest&lt;?&gt; request) &#123;</span><br><span class="line">        Mono.fromCallable(() -&gt; &#123;                               <span class="comment">// 1</span></span><br><span class="line">            LOG.debug(<span class="string">&#x27;Tracing request: &#123;&#125;&#x27;</span>, request.uri)</span><br><span class="line">            <span class="comment">// trace logic here, potentially performing I/O     // 2</span></span><br><span class="line">            return true</span><br><span class="line">        &#125;)</span><br><span class="line">        .flux()</span><br><span class="line">        .subscribeOn(Schedulers.boundedElastic())               <span class="comment">// 3</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>1</code> : The <code>Mono</code> type creates logic that executes potentially blocking operations to write the trace data from the request</p>
<p><code>2</code> : Since this is just an example, the logic does nothing yet</p>
<p><code>3</code> : The <code>Schedulers.boundedElastic</code> executes the logic</p>
<p>ÁÑ∂ÂêéÂ∞ÜËøô‰∏™ÂÆûÁé∞Ê≥®ÂÖ•Âà∞ËøáÊª§Âô®‰∏≠</p>
<p>Example - HttpServerFilter:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.http.HttpRequest</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.MutableHttpResponse</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Filter</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.filter.HttpServerFilter</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.ServerFilterChain</span><br><span class="line"><span class="keyword">import</span> org.reactivestreams.Publisher</span><br><span class="line"></span><br><span class="line"><span class="meta">@Filter</span>(<span class="string">&#x27;/hello/*&#x27;</span>)     <span class="comment">// The Filter annotation defines the URI pattern(s) the filter matches</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TraceFilter</span> <span class="keyword">implements</span> <span class="title class_">HttpServerFilter</span> &#123;     <span class="comment">// The class implements the HttpServerFilter interface</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> TraceService traceService</span><br><span class="line"></span><br><span class="line">    TraceFilter(TraceService traceService) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.traceService = traceService</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    Publisher&lt;MutableHttpResponse&lt;?&gt;&gt; doFilter(HttpRequest&lt;?&gt; request,</span><br><span class="line">                                               ServerFilterChain chain) &#123;</span><br><span class="line">        traceService.trace(request)</span><br><span class="line">                    .switchMap(&#123;chain.proceed(request)&#125;)                    <span class="comment">// 2</span></span><br><span class="line">                    .doOnNext(&#123;it.headers.add(<span class="string">&quot;X-Trace-Enabled&quot;</span>, <span class="string">&quot;true&quot;</span>)&#125;)      <span class="comment">// 3</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>2</code> : If the call succeeds, the filter resumes request processing using <code>Project Reactor</code>‚Äòs <code>switchMap</code> method, which invokes the <code>proceed</code> method of the <code>ServerFilterChain</code></p>
<p><code>3</code> : Finally, the <code>Project Reactor</code>‚Äòs <code>doOnNext</code> method adds a <code>X-Trace-Enabled</code> header to the response</p>
<p>‰Ω†ÂèØ‰ª•‰ΩøÁî®‰ªª‰ΩïÊîØÊåÅ Reactive streams ËßÑËåÉÁöÑÂìçÂ∫îÂºèÊ°ÜÊû∂</p>
<p><code>Filter</code> ÈÄöËøáËÆæÁΩÆ <code>patternStyle</code> Êù•‰ΩøÁî®‰∏çÂêåÈ£éÊ†ºÁöÑÊ®°Âºè(pattern)Êù•ËøõË°åË∑ØÂæÑÂåπÈÖç</p>
<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ã, <code>Filter</code> ‰ΩøÁî® <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/core/util/AntPathMatcher.html" >AntPathMatcher<i class="fas fa-external-link-alt"></i></a> ËøõË°åË∑ØÂæÑÂåπÈÖç</p>
<p>ÂΩì‰ΩøÁî® Ant Êó∂, Êò†Â∞ÑÂåπÈÖçË∑ØÂæÑ‰ΩøÁî®Â¶Ç‰∏ãËßÑÂàô:</p>
<ul>
<li><code>?</code> ÂåπÈÖç‰∏Ä‰∏™Â≠óÁ¨¶</li>
<li><code>*</code> ÂåπÈÖç 0 Êàñ Â§ö‰∏™ Â≠óÁ¨¶</li>
<li><code>**</code> ÂåπÈÖçË∑ØÂæÑ‰∏≠ÁöÑ 0 Êàñ Â§ö‰∏™ Â≠êÁõÆÂΩï</li>
</ul>
<p>Table - <code>@Filter</code> Annotation Path Matching:</p>
<table>
<thead>
<tr>
<th align="left">Pattern</th>
<th align="left">Example Matched Paths</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>/**</code></td>
<td align="left">any path</td>
</tr>
<tr>
<td align="left"><code>customer/j?y</code></td>
<td align="left">customer&#x2F;joy, customer&#x2F;jay</td>
</tr>
<tr>
<td align="left"><code>customer/*/id</code></td>
<td align="left">customer&#x2F;adam&#x2F;id, customer&#x2F;amy&#x2F;id</td>
</tr>
<tr>
<td align="left"><code>customer/**</code></td>
<td align="left">customer&#x2F;adam, customer&#x2F;adam&#x2F;id, customer&#x2F;adam&#x2F;name</td>
</tr>
<tr>
<td align="left"><code>customer/*/.html</code></td>
<td align="left">customer&#x2F;index.html, customer&#x2F;adam&#x2F;profile.html, customer&#x2F;adam&#x2F;job&#x2F;description.html</td>
</tr>
</tbody></table>
<p>Âè¶‰∏Ä‰∏™ÈÄâÊã©ÊòØÂü∫‰∫éÊ≠£ÂàôË°®ËææÂºèËøõË°åÂåπÈÖç. Ë¶Å‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºè, ËÆæÁΩÆ <code>patternStyle = FilterPatternStyle.REGEX</code></p>
<p><code>pattern</code> Â±ûÊÄßÊé•Âèó‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèÊù•ÂåπÈÖçÊèê‰æõÁöÑ URLs (‰ΩøÁî® <code>Matcher#matches</code>)</p>
<p>Êõ¥Êé®Ëçê‰ΩøÁî® <code>FilterPatternStyle.ANT</code> Êù•ËøõË°åÊ®°ÂºèÂåπÈÖç, Âõ†‰∏∫ËøôÊØî‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºèÊÄßËÉΩÊõ¥Â•Ω. Âè™ÊúâÂú®‰ΩøÁî® Ant ÁöÑ pattern Êó†Ê≥ïÊª°Ë∂≥ÈúÄÊ±ÇÊó∂Êâç‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºè</p>
<p>‰ªé <code>chain.proceed</code> ËøîÂõûÁöÑ <code>Publisher</code> Ê∞∏Ëøú‰∏çË¶ÅËæìÂá∫‰∏Ä‰∏™ error</p>
<p>Âú®‰∏äÊ∏∏ËøáÊª§Âô®ËæìÂá∫‰∏Ä‰∏™ error ÊàñËÄÖË∑ØÁî±Êú¨Ë∫´ÊäõÂá∫ÂºÇÂ∏∏ÁöÑÊÉÖÂÜµ‰∏ã, Â∫îËØ•ËæìÂá∫ error responses ËÄå‰∏çÊòØ exception</p>
<blockquote>
<p>In some cases it may be desirable to know the cause of the error response and for this purpose an attribute exists on the response if it was created as a result of an exception being emitted or thrown.</p>
</blockquote>
<p>Âú®Êüê‰∫õÊÉÖÂÜµ‰∏ã, ÂèØËÉΩÈúÄË¶ÅÁü•ÈÅìÂØºËá¥ error response ÁöÑÂéüÂõ†, ‰∏∫Ê≠§, Â¶ÇÊûúÂìçÂ∫îÁî±‰∫éËæìÂá∫ÊàñÊäõÂá∫ÂºÇÂ∏∏ËÄåÂª∫Á´ãÁöÑ, ÂàôÂú®ÂìçÂ∫î‰∏≠ÂåÖÂê´‰∏Ä‰∏™Â±ûÊÄß</p>
<blockquote>
<p>The original cause is stored as the attribute EXCEPTION.</p>
</blockquote>
<p>ÂéüÂßãÁöÑÂéüÂõ†‰Ωú‰∏∫ <code>EXCEPTION</code> attribute ‰øùÂ≠ò</p>
<h2 id="HTTP-Sessions-HTTP-‰ºöËØù"><a href="#HTTP-Sessions-HTTP-‰ºöËØù" class="headerlink" title="HTTP Sessions (HTTP ‰ºöËØù)"></a>HTTP Sessions (HTTP ‰ºöËØù)</h2><p>Micronaut ÈªòËÆ§ÊòØ‰∏Ä‰∏™Êó†Áä∂ÊÄÅÁöÑ HTTP server</p>
<p>Ê†πÊçÆ‰Ω†ÁöÑÂ∫îÁî®Ë¶ÅÊ±Ç, ‰Ω†ÂèØËÉΩÈúÄË¶Å HTTP Sessions ÁöÑÊ¶ÇÂøµ</p>
<p>Micronaut ÂåÖÂê´‰∏Ä‰∏™ <code>session</code> Ê®°Âùó, Áé∞Âú®Êúâ‰∏§‰∏™ÂÆûÁé∞:</p>
<ul>
<li>Âü∫‰∫éÂÜÖÂ≠òÁöÑ sessions : Â¶ÇÊûú‰Ω†ËÆ°ÂàíËøêË°åÂ§ö‰∏™ÂÆû‰æã, ÈÇ£‰πà‰Ω†Â∫îËØ•Â∞ÜÂÖ∂‰∏é‰∏Ä‰∏™ sticky ÁöÑ session ‰ª£ÁêÜÁªìÂêà‰ΩøÁî®</li>
<li>Redis sessions : ‰ΩøÁî® Redis Êù•Â≠òÂÇ® sessions, ‰ΩøÁî®ÈùûÈòªÂ°û I&#x2F;O Êù•ËØªÂÜô sessions Âà∞ Redis</li>
</ul>
<h3 id="Enabling-Sessions-ÂºÄÂêØ‰ºöËØù"><a href="#Enabling-Sessions-ÂºÄÂêØ‰ºöËØù" class="headerlink" title="Enabling Sessions (ÂºÄÂêØ‰ºöËØù)"></a>Enabling Sessions (ÂºÄÂêØ‰ºöËØù)</h3><p>ÂºÄÂêØÂü∫‰∫éÂÜÖÂ≠òÁöÑ sessions, Âè™ÈúÄË¶ÅÊ∑ªÂä† <code>session</code> ‰æùËµñ:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation(<span class="string">&quot;io.micronaut:micronaut-session&quot;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="Redis-Sessions-Redis-‰ºöËØù"><a href="#Redis-Sessions-Redis-‰ºöËØù" class="headerlink" title="Redis Sessions (Redis ‰ºöËØù)"></a>Redis Sessions (Redis ‰ºöËØù)</h4><p>‰∏∫‰∫ÜÂ≠òÂÇ® <code>Session</code> Âà∞ Redis ‰∏≠, ‰ΩøÁî® <code>Micronaut Redis</code> Ê®°Âùó</p>
<p>Ê∑ªÂä† <code>redis-lettuce</code> ‰æùËµñÂà∞ÊûÑÂª∫‰∏≠:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">compile</span> <span class="string">&quot;io.micronaut:micronaut-session&quot;</span></span><br><span class="line"><span class="keyword">compile</span> <span class="string">&quot;io.micronaut.redis:micronaut-redis-lettuce&quot;</span></span><br></pre></td></tr></table></figure>

<p>ÁÑ∂ÂêéÂú® <code>application.yml</code> ‰∏≠ÈÖçÁΩÆÂºÄÂêØ Redis sessions:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">redis:</span></span><br><span class="line">    <span class="attr">uri:</span> <span class="string">redis://localhost:6379</span></span><br><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">session:</span></span><br><span class="line">        <span class="attr">http:</span></span><br><span class="line">            <span class="attr">redis:</span></span><br><span class="line">                <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h3 id="Configuring-Session-Resolution-ÈÖçÁΩÆ‰ºöËØùËß£Êûê"><a href="#Configuring-Session-Resolution-ÈÖçÁΩÆ‰ºöËØùËß£Êûê" class="headerlink" title="Configuring Session Resolution (ÈÖçÁΩÆ‰ºöËØùËß£Êûê)"></a>Configuring Session Resolution (ÈÖçÁΩÆ‰ºöËØùËß£Êûê)</h3><p>‰ºöËØùËß£ÊûêÂèØ‰ª•ÈÄöËøá <code>HttpSessionConfiguration</code> ËøõË°åÈÖçÁΩÆ</p>
<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ã, sessions ‰ΩøÁî® <code>HttpSessionFilter</code> Êù•ËøõË°åËß£Êûê</p>
<p><code>HttpSessionFilter</code> ÈÄöËøá HTTP header(<code>Authorization-Info</code> Êàñ <code>X-Auth-Token</code>) ÊàñËÄÖÈÄöËøá‰∏Ä‰∏™ÂêçÂ≠ó‰∏∫ <code>SESSION</code> ÁöÑ Cookie Êù•ÂØªÊâæ session identifiers</p>
<p>ÂèØ‰ª•Âú® <code>application.yml</code> ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÂÖ≥Èó≠ header Ëß£ÊûêÊàñ cookie Ëß£Êûê:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">session:</span></span><br><span class="line">        <span class="attr">http:</span></span><br><span class="line">            <span class="attr">cookie:</span> <span class="literal">false</span></span><br><span class="line">            <span class="attr">header:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>ËøòÂèØ‰ª•ÈÖçÁΩÆ header Âíå cookie ÁöÑÂêçÂ≠ó</p>
<h3 id="Working-with-Sessions-‰ΩøÁî®‰ºöËØù"><a href="#Working-with-Sessions-‰ΩøÁî®‰ºöËØù" class="headerlink" title="Working with Sessions (‰ΩøÁî®‰ºöËØù)"></a>Working with Sessions (‰ΩøÁî®‰ºöËØù)</h3><p>ÂèØ‰ª•Âú® Controller ÊñπÊ≥ï‰∏≠ÈÄöËøáÁ±ªÂûã‰∏∫ <code>Session</code> ÁöÑÂèÇÊï∞Ëé∑Âèñ‰∏Ä‰∏™ session:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.session.Session    </span><br><span class="line"></span><br><span class="line">    <span class="meta">@Post</span>(<span class="string">&quot;/cart/&#123;name&#125;&quot;</span>)</span><br><span class="line">    Cart addItem(Session session, <span class="meta">@NotBlank</span> String name) &#123;</span><br><span class="line">        Cart cart = session.get(<span class="string">&quot;cart&quot;</span>, Cart).orElseGet(&#123;</span><br><span class="line">            Cart newCart = <span class="keyword">new</span> Cart()</span><br><span class="line">            session.put(<span class="string">&quot;cart&quot;</span>, newCart)</span><br><span class="line">            newCart</span><br><span class="line">        &#125;)</span><br><span class="line">        cart.items &lt;&lt; name</span><br><span class="line">        cart</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Âú®‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏≠, <code>Session</code> Ë¢´Â£∞Êòé‰∏∫‰∏Ä‰∏™ÂøÖÈÄâÂèÇÊï∞, ÊâÄ‰ª•‰∏∫‰∫ÜÊâßË°å Controller ÁöÑËøô‰∏™ÊñπÊ≥ï, ‰∏Ä‰∏™ <code>Session</code> Â∞Ü‰ºöË¢´ÂàõÂª∫Âπ∂‰øùÂ≠òÂà∞ <code>SessionStore</code></p>
<p>Â¶ÇÊûú‰Ω†‰∏çÊÉ≥ÂàõÂª∫ÈùûÂøÖË¶ÅÁöÑ <code>Session</code>, ‰ΩøÁî® <code>@Nullable</code> Ê≥®Ëß£‰øÆÈ•∞ <code>Session</code> ÂèÇÊï∞, ÁÑ∂ÂêéÊ≤°ÊúâÂøÖË¶ÅÁöÑËØù, Â∞±‰∏ç‰ºöÂàõÂª∫Âπ∂‰øùÂ≠ò‰∏Ä‰∏™ session</p>
<p>Example - Using <code>@Nullable</code> with Sessions:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Post</span>(<span class="string">&quot;/cart/clear&quot;</span>)</span><br><span class="line"><span class="type">void</span> clearCart(<span class="meta">@Nullable</span> Session session) &#123;</span><br><span class="line">    session?.remove(ATTR_CART)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Session-Clients-‰ºöËØùÂÆ¢Êà∑Á´Ø"><a href="#Session-Clients-‰ºöËØùÂÆ¢Êà∑Á´Ø" class="headerlink" title="Session Clients (‰ºöËØùÂÆ¢Êà∑Á´Ø)"></a>Session Clients (‰ºöËØùÂÆ¢Êà∑Á´Ø)</h3><p>Â¶ÇÊûúÂÆ¢Êà∑Á´ØÊòØ web ÊµèËßàÂô®, ÈÇ£‰πàÂú® cookies ÂºÄÂêØÁöÑÊÉÖÂÜµ‰∏ã sessions ÊòØÊ≠£Â∏∏Â∑•‰ΩúÁöÑ</p>
<p>‰ΩÜÊòØ, ÂØπ‰∫éÁºñÁ®ãÂºèÁöÑ HTTP ÂÆ¢Êà∑Á´Ø, ‰Ω†ÈúÄË¶ÅÂú® HTTP Ë∞ÉÁî®‰πãÈó¥‰º†Êí≠ session ID</p>
<p>Âú®‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏≠, HTTP ÂÆ¢Êà∑Á´ØËØ∑Ê±Ç‰∫Ü Controller ‰∏≠ÁöÑ <code>addItem</code> ÊñπÊ≥ïÂêé, ÈªòËÆ§‰ºöÊé•ÂèóÂà∞‰∏Ä‰∏™ <code>AUTHORIZATION_INFO</code> header:</p>
<p>Example - Retrieving the AUTHORIZATION_INFO header:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">when:</span> <span class="string">&quot;The shopping cart is retrieved&quot;</span></span><br><span class="line">HttpResponse&lt;Cart&gt; response = client.exchange(HttpRequest.GET(<span class="string">&#x27;/shopping/cart&#x27;</span>), Cart).blockFirst()</span><br><span class="line">Cart cart = response.body()</span><br><span class="line"></span><br><span class="line"><span class="attr">then:</span> <span class="string">&quot;The shopping cart is present as well as a session id header&quot;</span></span><br><span class="line">response.header(HttpHeaders.AUTHORIZATION_INFO) != <span class="literal">null</span>     <span class="comment">// The AUTHORIZATION_INFO header is present in the response</span></span><br></pre></td></tr></table></figure>

<p>ÁÑ∂ÂêéÂú®Êé•‰∏ãÊù•ÁöÑËØ∑Ê±Ç‰∏≠ÈáçÁî®Â∑≤Â≠òÂú®ÁöÑ Session, ÈÄöËøá‰º†ÈÄíËøô‰∏™ <code>AUTHORIZATION_INFO</code></p>
<p>Example - Sending the AUTHORIZATION_INFO header:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">String sessionId = response.header(HttpHeaders.AUTHORIZATION_INFO)  <span class="comment">// ‰ªéÂìçÂ∫î‰∏≠Ëé∑Âèñ AUTHORIZATION_INFO</span></span><br><span class="line"></span><br><span class="line">response = client.exchange(HttpRequest.POST(<span class="string">&#x27;/shopping/cart/Apple&#x27;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">                                      .header(HttpHeaders.AUTHORIZATION_INFO, sessionId),       <span class="comment">// Âú®ÂèëÈÄÅËØ∑Ê±ÇÊó∂ÈôÑÂä†‰∏ä AUTHORIZATION_INFO session</span></span><br><span class="line">                           Cart)</span><br><span class="line">                 .blockFirst()</span><br><span class="line">cart = response.body()</span><br></pre></td></tr></table></figure>

<h3 id="Using-SessionValue-‰ΩøÁî®-SessionValue-Ê≥®Ëß£"><a href="#Using-SessionValue-‰ΩøÁî®-SessionValue-Ê≥®Ëß£" class="headerlink" title="Using @SessionValue (‰ΩøÁî® @SessionValue Ê≥®Ëß£)"></a>Using <code>@SessionValue</code> (‰ΩøÁî® <code>@SessionValue</code> Ê≥®Ëß£)</h3><p>ÂèØ‰ª•‰ΩøÁî® <code>@SessionValue</code> Ê≥®Ëß£‰ª£ÊõøÊòæÂºèÂú∞Â∞Ü <code>Session</code> Ê≥®ÂÖ•Âà∞ Controller ÁöÑÊñπÊ≥ïÂèÇÊï∞‰∏ä</p>
<p>Example - Using <code>@SessionValue</code>:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Get</span>(<span class="string">&#x27;/cart&#x27;</span>)</span><br><span class="line"><span class="meta">@SessionValue</span>(<span class="string">&#x27;cart&#x27;</span>)   <span class="comment">// 1</span></span><br><span class="line">Cart viewCart(<span class="meta">@SessionValue</span> <span class="meta">@Nullable</span> Cart cart) &#123;  <span class="comment">// 2</span></span><br><span class="line">    cart ?: <span class="keyword">new</span> Cart()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>1</code> : ‰ΩúÁî®‰∫éÊñπÊ≥ï‰∏äÁöÑ <code>@SessionValue</code> ‰ºöÂ∞ÜÊñπÊ≥ïËøîÂõûÂÄº‰øùÂ≠òÂà∞ <code>Session</code> ‰∏≠. Ê≥®ÊÑè, ‰ΩúÁî®‰∫éÊñπÊ≥ï‰∏äÊó∂, ÂøÖÈ°ªÊåáÂÆö attribute ÁöÑÂêçÁß∞</p>
<p><code>2</code> : <code>@SessionValue</code> ‰ΩúÁî®‰∫é <code>@Nullable</code> ‰øÆÈ•∞ÁöÑÂèÇÊï∞, Ëøô‰ºöÂØºËá¥‰ª•ÈùûÈòªÂ°ûÊñπÂºè‰ªé <code>Session</code> ‰∏≠Êü•ÊâæÂÄºÂπ∂Âú®Â≠òÂú®Êó∂Êèê‰æõËøô‰∏™ÂÄº. Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠, Ê≤°ÊúâÊåáÊòé <code>@SessionValue</code> ÁöÑ value, ÊâÄ‰ª•‰ºö‰ΩøÁî®ÂèÇÊï∞ÂêçÁß∞Êù•Êü•Êâæ attribute</p>
<h3 id="Session-Events-‰ºöËØù‰∫ã‰ª∂"><a href="#Session-Events-‰ºöËØù‰∫ã‰ª∂" class="headerlink" title="Session Events (‰ºöËØù‰∫ã‰ª∂)"></a>Session Events (‰ºöËØù‰∫ã‰ª∂)</h3><p>ÂèØ‰ª•Ê≥®ÂÜå <code>ApplicationEventListener</code> Beans Êù•ÁõëÂê¨ <code>Session</code> Áõ∏ÂÖ≥ÁöÑ ‰Ωç‰∫é<code>io.micronaut.session.event</code>ÂåÖÁöÑ ‰∫ã‰ª∂</p>
<p>Table - Session Events:</p>
<table>
<thead>
<tr>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>SessionCreatedEvent</code></td>
<td align="left">Fired when a <code>Session</code> is created</td>
</tr>
<tr>
<td align="left"><code>SessionDeletedEvent</code></td>
<td align="left">Fired when a <code>Session</code> is deleted</td>
</tr>
<tr>
<td align="left"><code>SessionExpiredEvent</code></td>
<td align="left">Fired when a <code>Session</code> expires</td>
</tr>
<tr>
<td align="left"><code>SessionDestroyedEvent</code></td>
<td align="left">Parent of both <code>SessionDeletedEvent</code> and <code>SessionExpiredEvent</code></td>
</tr>
</tbody></table>
<h2 id="Server-Sent-Events-Server-ÂèëÈÄÅ‰∫ã‰ª∂"><a href="#Server-Sent-Events-Server-ÂèëÈÄÅ‰∫ã‰ª∂" class="headerlink" title="Server Sent Events (Server ÂèëÈÄÅ‰∫ã‰ª∂)"></a>Server Sent Events (Server ÂèëÈÄÅ‰∫ã‰ª∂)</h2><p>Micronaut HTTP server ÊîØÊåÅ‰ΩøÁî® <code>Event</code> API Êù•ËæìÂá∫ <code>Server Sent Events (SSE)</code></p>
<p>‰∏∫‰∫Ü‰ªé server ËæìÂá∫‰∫ã‰ª∂, ËøîÂõû‰∏Ä‰∏™ËæìÂá∫ÂØπË±°Á±ªÂûã‰∏∫ <code>Event</code> ÁöÑÂìçÂ∫îÂºèÊµÅ <code>Publisher</code></p>
<p><code>Publisher</code> Êú¨Ë∫´ÂèØ‰ª•Âú®‰∏Ä‰∏™ÂêéÂè∞‰ªªÂä°‰∏≠ÂèëÈÄÅ‰∫ã‰ª∂, ‰æãÂ¶ÇÈÄöËøá‰∏Ä‰∏™‰∫ã‰ª∂Á≥ªÁªü</p>
<p>‰∏∫‰∫ÜÂèëÈÄÅ‰∫ã‰ª∂, ÁºñÂÜô‰∏Ä‰∏™ËøîÂõû <code>Event</code> ÂÆû‰æãÁöÑ <code>Publisher</code> ÁöÑ Controller, ‰ΩøÁî®‰ªª‰Ωï‰Ω†ÂñúÊ¨¢ÁöÑÂìçÂ∫îÂºèÂ∫ì</p>
<p>Example - Publishing Server Sent Events from a Controller:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.http.MediaType</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Controller</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Get</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.sse.Event</span><br><span class="line"><span class="keyword">import</span> io.micronaut.scheduling.TaskExecutors</span><br><span class="line"><span class="keyword">import</span> io.micronaut.scheduling.annotation.ExecuteOn</span><br><span class="line"><span class="keyword">import</span> org.reactivestreams.Publisher</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Flux</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&quot;/headlines&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HeadlineController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExecuteOn</span>(TaskExecutors.IO)</span><br><span class="line">    <span class="meta">@Get</span>(produces = MediaType.TEXT_EVENT_STREAM)</span><br><span class="line">    Publisher&lt;Event&lt;Headline&gt;&gt; index() &#123;    <span class="comment">// 1</span></span><br><span class="line">        String[] versions = [<span class="string">&quot;1.0&quot;</span>, <span class="string">&quot;2.0&quot;</span>]  <span class="comment">// 2</span></span><br><span class="line">        Flux.generate(                      <span class="comment">// 3</span></span><br><span class="line">            () -&gt; <span class="number">0</span>,</span><br><span class="line">            (i, emitter) -&gt; &#123;</span><br><span class="line">                <span class="keyword">if</span> (i &lt; versions.length) &#123;</span><br><span class="line">                    emitter.next(           <span class="comment">// 4</span></span><br><span class="line">                        Event.of(<span class="keyword">new</span> Headline(<span class="string">&quot;Micronaut $&#123;versions[i]&#125; Released&quot;</span>, <span class="string">&quot;Come and get it&quot;</span>))</span><br><span class="line">                    )</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    emitter.complete()      <span class="comment">// 5</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> i + <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>1</code> : The controller method returns a <code>Publisher</code> of <code>Event</code></p>
<p><code>2</code> : A headline is emitted for each version of Micronaut</p>
<p><code>3</code> : The <code>Flux</code> type‚Äôs <code>generate</code> method generates a <code>Publisher</code>. The <code>generate</code> method accepts an initial value and a lambda that accepts the value and a <code>Emitter</code>. Note that this example executes on the same thread as the controller action, but you could use <code>subscribeOn</code> or map an existing ‚Äúhot‚Äù <code>Flux</code></p>
<p><code>4</code> : The <code>Emitter</code> interface <code>onNext</code> method emits objects of type <code>Event</code>. The <code>Event.of(ET)</code> factory method constructs the event.</p>
<p><code>5</code> : The <code>Emitter</code> interface <code>onComplete</code> method indicates when to finish sending server sent events</p>
<p>‰Ω†ÂæàÂèØËÉΩÊÉ≥Ë¶ÅÂú®‰∏Ä‰∏™‰∏çÂêåÁöÑ executor ‰∏äË∞ÉÂ∫¶ SSE ‰∫ã‰ª∂ÊµÅ, ‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏≠‰ΩøÁî®‰∫Ü <code>@ExecutorOn</code> Êù•Âú® I&#x2F;O executor ‰∏äÊâßË°åÊµÅ</p>
<p>‰∏äÈù¢ÁöÑ‰æãÂ≠êÂèëÂõû‰∏Ä‰∏™Á±ªÂûã‰∏∫ <code>text/event-stream</code> ÁöÑÂìçÂ∫î, ÊØè‰∏™ <code>Event</code> ËæìÂá∫ËΩ¨Êç¢‰∏∫ JSON ÁöÑÊï∞ÊçÆ:</p>
<p>Example - Server Sent Event Response Output:</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data: &#123;&quot;title&quot;: &quot;Micronaut 1.0 Released&quot;, &quot;description&quot;: &quot;Come and get it&quot;&#125;</span><br><span class="line">data: &#123;&quot;title&quot;: &quot;Micronaut 2.0 Released&quot;, &quot;description&quot;: &quot;Come and get it&quot;&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>You can use the methods of the Event interface to customize the Server Sent Event data sent back, including associating event ids, comments, retry timeout, etc.</p>
</blockquote>
<p>‰Ω†ÂèØ‰ª•‰ΩøÁî® <code>Event</code> Êé•Âè£ÁöÑÊñπÊ≥ïÊù•Ëá™ÂÆö‰πâ Server Sent Event ÂèëÂõûÁöÑÊï∞ÊçÆ, ÂåÖÊã¨ÂÖ≥ËÅîÁöÑ‰∫ã‰ª∂ id, comments, ÈáçËØïÊó∂Èó¥Á≠â</p>
<h2 id="WebSocket-Support-WebSocket-ÊîØÊåÅ"><a href="#WebSocket-Support-WebSocket-ÊîØÊåÅ" class="headerlink" title="WebSocket Support (WebSocket ÊîØÊåÅ)"></a>WebSocket Support (WebSocket ÊîØÊåÅ)</h2><p>Micronaut ‰∏ìÈó®ÊîØÊåÅÂàõÂª∫ WebSocket ÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Âô®</p>
<p><code>io.micronaut.websocket.annotation</code> ÂåÖ‰∏≠ÂåÖÂê´‰∫ÜÂÆö‰πâÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Á´ØÁöÑÊ≥®Ëß£</p>
<h3 id="Using-ServerWebSocket-‰ΩøÁî®-ServerWebSocket-Ê≥®Ëß£"><a href="#Using-ServerWebSocket-‰ΩøÁî®-ServerWebSocket-Ê≥®Ëß£" class="headerlink" title="Using @ServerWebSocket(‰ΩøÁî® @ServerWebSocket Ê≥®Ëß£)"></a>Using <code>@ServerWebSocket</code>(‰ΩøÁî® <code>@ServerWebSocket</code> Ê≥®Ëß£)</h3><p><code>@ServerWebSocket</code> Ê≥®Ëß£ÂèØ‰ª•Â∫îÁî®Âà∞‰ªª‰ΩïÁ±ª‰∏ä, ËÄå‰∏îÂ∫îËØ•Êò†Â∞ÑÂà∞‰∏Ä‰∏™ WebSocket URI</p>
<p>Example - WebSocket Chat:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.websocket.WebSocketBroadcaster</span><br><span class="line"><span class="keyword">import</span> io.micronaut.websocket.WebSocketSession</span><br><span class="line"><span class="keyword">import</span> io.micronaut.websocket.annotation.onClose</span><br><span class="line"><span class="keyword">import</span> io.micronaut.websocket.annotation.OnMessage</span><br><span class="line"><span class="keyword">import</span> io.micronaut.websocket.annotation.OnOpen</span><br><span class="line"><span class="keyword">import</span> io.micronaut.websocket.annotation.ServerWebSocket</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.function.Predicate</span><br><span class="line"></span><br><span class="line"><span class="meta">@ServerWebSocket</span>(<span class="string">&quot;/chat/&#123;topic&#125;/&#123;username&#125;&quot;</span>)    <span class="comment">// 1</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ChatServerWebSocket</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> WebSocketBroadcaster broadcaster</span><br><span class="line"></span><br><span class="line">    ChatServerWebSocket(WebSocketBroadcaster broadcaster) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.broadcaster = broadcaster</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@OnOpen</span>     <span class="comment">// 2</span></span><br><span class="line">    <span class="type">void</span> onOpen(String topic, String username, WebSocketSession session) &#123;</span><br><span class="line">        String msg = <span class="string">&quot;[$username] Joined!&quot;</span></span><br><span class="line">        broadcaster.broadcastSync(msg, isValid(topic, session))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@OnMessage</span> <span class="comment">// 3</span></span><br><span class="line">    <span class="type">void</span> onMessage(String topic, String username, String message, WebSocketSession session) &#123;</span><br><span class="line">        String msg = <span class="string">&quot;[$username] $message&quot;</span></span><br><span class="line">        broadcaster.broadcastSync(msg, isValid(topic, session))     <span class="comment">// 4</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@OnClose</span> <span class="comment">// 5</span></span><br><span class="line">    <span class="type">void</span> onClose(String topic, String username, WebSocketSession session) &#123;</span><br><span class="line">        String msg = <span class="string">&quot;[$username] Disconnected!&quot;</span></span><br><span class="line">        broadcaster.broadcastSync(msg, isValid(topic, session))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Predicate&lt;WebSocketSession&gt; isValid(String topic, WebSocketSession session) &#123;</span><br><span class="line">        &#123; s -&gt; s != session &amp;&amp; topic.equalsIgnoreCase(s.uriVariables.get(<span class="string">&#x27;topic&#x27;</span>, String, <span class="literal">null</span>)) &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>1</code> : The <code>@ServerWebSocket</code> annotation defines the path the WebSocket is mapped under. The URI can be a URI template</p>
<p><code>2</code> : The <code>@OnOpen</code> annotation declares the method to invoke when the WebSocket is opened.</p>
<p><code>3</code> : The <code>@OnMessage</code> annotation declares the method to invoke when a message is received</p>
<p><code>4</code> : You can use a <code>WebSocketBroadcaster</code> to broadcast messages to every WebSocket session. You can filter which sessions to send to with a <code>Predicate</code>. Also, you could use the <code>WebSocketSession</code> instance to send a message to it with <code>WebSocketSession::send</code></p>
<p><code>5</code> : The <code>@OnClose</code> annotation declares the method to invoke when the WebSocket is closed</p>
<p>Êü•Áúã <a class="link"   target="_blank" rel="noopener" href="https://github.com/micronaut-projects/micronaut-examples/tree/master/websocket-chat" >Micronaut Example<i class="fas fa-external-link-alt"></i></a> ‰∫ÜËß£Êõ¥ËØ¶ÁªÜÁöÑ‰æãÂ≠ê</p>
<p>ÂØπ‰∫éÁªëÂÆö, ÊØè‰∏™ WebSocket ÊñπÊ≥ïÁöÑÊñπÊ≥ïÂèÇÊï∞ÂèØ‰ª•ÊòØ:</p>
<ul>
<li>‰∏Ä‰∏™Êù•Ëá™ URI template ÁöÑÂèòÈáè (Âú®‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏≠, <code>topic</code> Âíå <code>name</code> ÊòØ URI template ÂèòÈáè)</li>
<li>‰∏Ä‰∏™ <code>WebSocketSession</code> ÂÆû‰æã</li>
</ul>
<h4 id="The-OnClose-Method-OnClose-ÊñπÊ≥ï"><a href="#The-OnClose-Method-OnClose-ÊñπÊ≥ï" class="headerlink" title="The @OnClose Method (@OnClose ÊñπÊ≥ï)"></a>The <code>@OnClose</code> Method (<code>@OnClose</code> ÊñπÊ≥ï)</h4><p><code>@OnClose</code> ÊñπÊ≥ïÂèØ‰ª•ÂèØÈÄâÂú∞Êé•Êî∂‰∏Ä‰∏™ <code>CloseReason</code></p>
<p><code>@OnClose</code> ÊñπÊ≥ïÂú® session ÂÖ≥Èó≠‰πãÂâçË¢´Ë∞ÉÁî®</p>
<h4 id="The-OnMessage-Method-OnMessage-ÊñπÊ≥ï"><a href="#The-OnMessage-Method-OnMessage-ÊñπÊ≥ï" class="headerlink" title="The @OnMessage Method (@OnMessage ÊñπÊ≥ï)"></a>The <code>@OnMessage</code> Method (<code>@OnMessage</code> ÊñπÊ≥ï)</h4><p><code>@OnMessage</code> ÊñπÊ≥ïÂèØ‰ª•‰∏∫ message body ÂÆö‰πâ‰∏Ä‰∏™ÂèÇÊï∞. Ëøô‰∏™ÂèÇÊï∞ÂèØ‰ª•ÊòØÂ¶Ç‰∏ãËøô‰∫õ:</p>
<ul>
<li>‰∏Ä‰∏™ Netty ÁöÑ <code>WebSocketFrame</code></li>
<li>‰ªª‰Ωï Java ÂéüÂßãÁ±ªÂûãÊàñÁÆÄÂçïÁ±ªÂûã (‰æãÂ¶Ç <code>String</code>). ‰∫ãÂÆû‰∏ä, ÂèØ‰ª•‰ªé <code>ByteBuf</code> ËΩ¨Êç¢ÁöÑ‰ªª‰ΩïÁ±ªÂûãÈÉΩË°å (ÂèØ‰ª•Ê≥®ÂÜåÈ¢ùÂ§ñÁöÑ <code>TypeConverter</code> Beans Êù•ÊîØÊåÅ‰∏Ä‰∏™Ëá™ÂÆö‰πâÁ±ªÂûã)</li>
<li>‰∏Ä‰∏™ <code>byte[]</code>, ‰∏Ä‰∏™ <code>ByteBuf</code>, ÊàñËÄÖ‰∏Ä‰∏™ Java NIO <code>ByteBuffer</code></li>
<li>‰∏Ä‰∏™ POJO, Âú®Ëøô‰∏™Âú∫ÊôØ, ÈªòËÆ§‰ΩøÁî® <code>JsonMediaTypeCodec</code> Ëß£Á†Å‰∏∫ JSON. ‰Ω†ÂèØ‰ª•Ê≥®ÂÜå‰∏Ä‰∏™Ëá™ÂÆö‰πâÁöÑ codec, Âπ∂‰ΩøÁî® <code>@Consumes</code> Ê≥®Ëß£Êù•ÂÆö‰πâ Handler ÁöÑ content type</li>
<li>‰∏Ä‰∏™ <code>WebSocketPongMessage</code>. ËøôÊòØ‰∏Ä‰∏™ÁâπÂà´ÁöÑ‰æãÂ≠ê: ÊñπÊ≥ï‰∏ç‰ºöÊé•Êî∂ÂéüÂßã‰ø°ÊÅØ, ËÄåÊòØÂ§ÑÁêÜ‰Ωú‰∏∫ÂØπÂèëÈÄÅÂà∞ÂÆ¢Êà∑Á´ØÁöÑ ping ÁöÑÂõûÂ§çËÄåÂà∞ËææÁöÑ WebSocket pong</li>
</ul>
<h4 id="The-OnError-Method-OnError-ÊñπÊ≥ï"><a href="#The-OnError-Method-OnError-ÊñπÊ≥ï" class="headerlink" title="The @OnError Method (@OnError ÊñπÊ≥ï)"></a>The <code>@OnError</code> Method (<code>@OnError</code> ÊñπÊ≥ï)</h4><p>‰∏Ä‰∏™‰ΩøÁî® <code>@OnError</code> Ê≥®Ëß£‰øÆÈ•∞ÁöÑÊñπÊ≥ïÂèØ‰ª•Áî®Êù•ÂÆûÁé∞Ëá™ÂÆö‰πâ error Â§ÑÁêÜ</p>
<p><code>@OnError</code> ÊñπÊ≥ïÂèØ‰ª•ÂÆö‰πâ‰∏Ä‰∏™ÂèÇÊï∞Êù•Êé•Êî∂Ë¶ÅÂ§ÑÁêÜÁöÑÂºÇÂ∏∏Á±ªÂûã</p>
<p>Â¶ÇÊûúÊ≤°Êúâ <code>@OnError</code> Â§ÑÁêÜÊñπÊ≥ï, ‰∏îÂèëÁîü‰∫Ü‰∏Ä‰∏™Ê≤°ÊúâË¶ÜÁõñÂà∞ÁöÑÂºÇÂ∏∏, WebSocket Â∞Ü‰ºöËá™Âä®ÂÖ≥Èó≠</p>
<h4 id="Non-Blocking-Message-Handling-ÈùûÈòªÂ°ûÂºè‰ø°ÊÅØÂ§ÑÁêÜ"><a href="#Non-Blocking-Message-Handling-ÈùûÈòªÂ°ûÂºè‰ø°ÊÅØÂ§ÑÁêÜ" class="headerlink" title="Non-Blocking Message Handling (ÈùûÈòªÂ°ûÂºè‰ø°ÊÅØÂ§ÑÁêÜ)"></a>Non-Blocking Message Handling (ÈùûÈòªÂ°ûÂºè‰ø°ÊÅØÂ§ÑÁêÜ)</h4><p>‰∏äÈù¢‰æãÂ≠ê‰∏≠‰ΩøÁî®ÁöÑ <code>WebSocketBroadcaster</code> Êé•Âè£ÁöÑ <code>broadcastSync</code> ÁöÑÊñπÊ≥ïÂ∞Ü‰ºöÈòªÂ°ûÁü•ÈÅì broadcast ÂÆåÊàê</p>
<p>‰∏Ä‰∏™Â≠òÂú®‰∫é <code>WebSocketSession</code> Á±ª‰ººÁöÑ <code>sendSync</code> ÊñπÊ≥ïÈÄöËøáÈòªÂ°ûÁöÑÊñπÂºèÂèëÈÄÅ‰∏Ä‰∏™Ê∂àÊÅØÂà∞Âçï‰∏™Êé•ÂèóËÄÖ</p>
<p>ÂèØ‰ª•ÈÄöËøáÂ£∞ÊòéÊØè‰∏™ WebSocket Â§ÑÁêÜÊñπÊ≥ïËøîÂõû <code>Publisher</code> Êàñ <code>Futuer</code> Êù•ÂÆûÁé∞ÈùûÈòªÂ°û WebSocket server</p>
<p>Example - WebSocket Chat:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@OnMessage</span></span><br><span class="line">Publisher&lt;Message&gt; onMessage(String topic,</span><br><span class="line">                             String username,</span><br><span class="line">                             Message message,</span><br><span class="line">                             WebSocketSession session) &#123;</span><br><span class="line">    String text = <span class="string">&quot;[$username] $message.text&quot;</span></span><br><span class="line">    Message message = <span class="keyword">new</span> Message(text)</span><br><span class="line">    broadcaster.broadcast(newMessage, isValid(topic, session))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰ΩøÁî® <code>boradcaset</code> ÊñπÊ≥ï, Ëøô‰∏™ÊñπÊ≥ïÂàõÂª∫‰∏Ä‰∏™ <code>Publisher</code> ÂÆû‰æãÂπ∂ËøîÂõûÂÄºÁªô Micronaut</p>
<p>Micronaut Âü∫‰∫é <code>Publisher</code> Êé•Âè£Êù•ÂºÇÊ≠•Âú∞ÂèëÈÄÅ‰ø°ÊÅØ</p>
<p>Áõ∏‰ººÁöÑÊñπÊ≥ï <code>send</code> ÈÄöËøá Micronaut ËøîÂõûÂÄºÂºÇÊ≠•Âú∞ÂèëÈÄÅÂçï‰∏™‰ø°ÊÅØ</p>
<p>‰∏∫‰∫ÜÂú® Micronaut Ê≥®Ëß£ÁöÑÂ§ÑÁêÜÊñπÊ≥ï‰πãÂ§ñÂºÇÊ≠•Âú∞ÂèëÈÄÅ‰ø°ÊÅØ, ÂèØ‰ª•‰ΩøÁî®ÂàÜÂà´‰Ωç‰∫é <code>WebSocketBroadcaster</code> Âíå <code>WebSocketSession</code> ÁöÑ <code>broadcastAsync</code> Âíå <code>sendAsync</code> ÊñπÊ≥ï</p>
<p>Ë¶ÅËøõË°åÈòªÂ°ûÂºèÂèëÈÄÅ, ‰ΩøÁî® <code>broadcasterSync</code> Âíå <code>sendSync</code> ÊñπÊ≥ï</p>
<h4 id="ServerWebSocket-and-Scopes-ServerWebSocket-Âíå‰ΩúÁî®Âüü"><a href="#ServerWebSocket-and-Scopes-ServerWebSocket-Âíå‰ΩúÁî®Âüü" class="headerlink" title="@ServerWebSocket and Scopes (@ServerWebSocket Âíå‰ΩúÁî®Âüü)"></a><code>@ServerWebSocket</code> and Scopes (<code>@ServerWebSocket</code> Âíå‰ΩúÁî®Âüü)</h4><p>ÈªòËÆ§Âú∞, <code>@ServerWebSocket</code> ÂÆû‰æãÂú®ÊâÄÊúâÁöÑ WebSocket ËøûÊé•‰∏≠ÂÖ±‰∫´</p>
<p>Âõ†Ê≠§ÈúÄË¶ÅÈ¢ùÂ§ñÂ∞èÂøÉÂú∞ÂêåÊ≠•Êú¨Âú∞Áä∂ÊÄÅÊù•ÈÅøÂÖçÁ∫øÁ®ãÂÆâÂÖ®ÈóÆÈ¢ò</p>
<p>Â¶ÇÊûúË¶ÅÊØè‰∏™ËøûÊé•‰∏Ä‰∏™ÂÆû‰æã, ‰ΩøÁî® <code>@Prototype</code> Ê≥®Ëß£ËøõË°å‰øÆÈ•∞. Ëøô‰ΩøÂæó‰Ω†ÂèØ‰ª•‰ªé <code>@OnOpen</code> ÊñπÊ≥ï‰∏≠Ëé∑Âèñ <code>WebSocketSession</code> Âπ∂Â∞ÜËøô‰∏™ session ËµãÂÄºÂà∞ <code>@ServerWebSocket</code> ÂÆû‰æãÁöÑÂ≠óÊÆµ‰∏≠</p>
<h4 id="Sharing-Sessions-with-the-HTTP-Session-Âíå-HTTP-session-ÂÖ±‰∫´-session"><a href="#Sharing-Sessions-with-the-HTTP-Session-Âíå-HTTP-session-ÂÖ±‰∫´-session" class="headerlink" title="Sharing Sessions with the HTTP Session (Âíå HTTP session ÂÖ±‰∫´ session)"></a>Sharing Sessions with the HTTP Session (Âíå HTTP session ÂÖ±‰∫´ session)</h4><blockquote>
<p>The WebSocketSession is by default backed by an in-memory map.</p>
</blockquote>
<p><code>WebSocketSession</code> ÈªòËÆ§Áî±ÂÜÖÂ≠òÊò†Â∞ÑÊîØÊåÅ</p>
<p>Â¶ÇÊûú‰Ω†Ê∑ªÂä†‰∫Ü <code>session</code> Ê®°Âùó, ‰Ω†ÂèØ‰ª•Âú® HTTP server Âíå WebSocket server ‰πãÈó¥ÂÖ±‰∫´ sessions</p>
<p>ÂΩì sessions ÈÄöËøáÊåÅ‰πÖÂåñÂ≠òÂÇ®Êù•ÂÆûÁé∞Êó∂ (‰æãÂ¶Ç Redis), Âú®ÊØè‰∏™‰ø°ÊÅØË¢´Â§ÑÁêÜ‰πãÂêé, session ‰ºöË¢´Êõ¥Êñ∞Âà∞ÊîØÊåÅÂÖ∂ÁöÑÂ≠òÂÇ®‰∏ä</p>
<h4 id="Using-the-CLI-‰ΩøÁî®-CLI"><a href="#Using-the-CLI-‰ΩøÁî®-CLI" class="headerlink" title="Using the CLI (‰ΩøÁî® CLI)"></a>Using the CLI (‰ΩøÁî® CLI)</h4><p>Â¶ÇÊûú‰Ω†‰ΩøÁî® Application Type <code>Micronaut Application</code> Êù•ÂàõÂª∫È°πÁõÆ, ÈÇ£‰πàÂèØ‰ª•‰ΩøÁî® <code>create-websocket-server</code> ÂëΩ‰ª§Êù•ÂàõÂª∫‰∏Ä‰∏™‰ΩøÁî® <code>@ServerWebSocket</code> Ê≥®Ëß£‰øÆÈ•∞ÁöÑÁ±ª:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mn create-websocket-server MyChat</span><br><span class="line">| Rendered template WebSocketServer.java to destination src/main/java/example/MyChatServer.java</span><br></pre></td></tr></table></figure>

<h4 id="Connection-Timeouts-ËøûÊé•Ë∂ÖÊó∂"><a href="#Connection-Timeouts-ËøûÊé•Ë∂ÖÊó∂" class="headerlink" title="Connection Timeouts (ËøûÊé•Ë∂ÖÊó∂)"></a>Connection Timeouts (ËøûÊé•Ë∂ÖÊó∂)</h4><p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ã, Micronaut Âú®‰∫îÂàÜÈíüÂêé‰ΩøÊ≤°Êúâ‰ªª‰ΩïÊ¥ªÂä®ÁöÑÁ©∫Èó≤ËøûÊé•Ë∂ÖÊó∂</p>
<p>Ê≠£Â∏∏ÊÉÖÂÜµ‰∏ãËøô‰∏ç‰ºöÊòØ‰∏Ä‰∏™ÈóÆÈ¢ò, Âõ†‰∏∫ÊµèËßàÂô®‰ºöËá™Âä®ÈáçÊñ∞ËøûÊé• WebSocket sessions</p>
<p>‰Ω†ÂèØ‰ª•ÈÄöËøáËÆæÁΩÆ <code>micronaut.server.idle-timeout</code> Êù•ÊéßÂà∂Ëøô‰∏™Ë°å‰∏∫:</p>
<p>Example - Setting the Connection Timeout for the Server:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">server:</span></span><br><span class="line">        <span class="attr">idle-timeout:</span> <span class="string">30m</span> <span class="comment"># 30 ÂàÜÈíü</span></span><br></pre></td></tr></table></figure>

<p>Â¶ÇÊûúËÆæÁΩÆ‰∏∫Ë¥üÊï∞, Âàô‰ª£Ë°®‰∏ç‰ºöË∂ÖÊó∂</p>
<p>Â¶ÇÊûú‰ΩøÁî® Micronaut ÁöÑ WebSocket ÂÆ¢Êà∑Á´Ø, ÂèØ‰ª•ËøôÊ†∑ËÆæÁΩÆÂÆ¢Êà∑Á´Ø‰∏äÁöÑË∂ÖÊó∂Êó∂Èó¥:</p>
<p>Example - Setting the Connection Timeout for the Client:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">http:</span></span><br><span class="line">        <span class="attr">client:</span></span><br><span class="line">            <span class="attr">read-idle-timeout:</span> <span class="string">30m</span> <span class="comment"># 30 ÂàÜÈíü</span></span><br></pre></td></tr></table></figure>

<h3 id="Using-ClientWebSocket-‰ΩøÁî®-ClientWebSocket"><a href="#Using-ClientWebSocket-‰ΩøÁî®-ClientWebSocket" class="headerlink" title="Using @ClientWebSocket (‰ΩøÁî® @ClientWebSocket)"></a>Using <code>@ClientWebSocket</code> (‰ΩøÁî® <code>@ClientWebSocket</code>)</h3><blockquote>
<p>The <code>@ClientWebSocket</code> annotation can be used with the <code>WebSocketClient</code> interface to define WebSocket clients.</p>
</blockquote>
<p>ÈÄöËøá <code>WebSocketClient</code> Êé•Âè£ÈÖçÂêà <code>@ClientWebSocket</code> Ê≥®Ëß£Êù•ÂÆö‰πâ WebSocket ÂÆ¢Êà∑Á´Ø</p>
<p>ÂèØ‰ª•‰ΩøÁî® <code>@Client</code> Ê≥®Ëß£Êù•Ê≥®ÂÖ•‰∏Ä‰∏™ <code>WebSocketClient</code> ÂºïÁî®:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Inject</span></span><br><span class="line"><span class="meta">@Client</span>(<span class="string">&quot;http://localhost:8080&quot;</span>)</span><br><span class="line">WebSocketClient webSocketClient</span><br></pre></td></tr></table></figure>

<p>ËøôÂèØ‰ª•ËÆ©‰Ω†ÁöÑ WebSocket ÂÆ¢Êà∑Á´Ø‰ΩøÁî®Áõ∏ÂêåÁöÑÊúçÂä°ÂèëÁé∞ÂíåË¥üËΩΩÂùáË°°ÁâπÊÄß</p>
<p>‰∏ÄÊó¶‰Ω†Êúâ‰∫Ü‰∏Ä‰∏™ <code>WebSocketClient</code> Êé•Âè£ÁöÑÂºïÁî®, ‰Ω†ÂèØ‰ª•‰ΩøÁî® <code>connect</code> ÊñπÊ≥ïÊù•Ëé∑Âèñ‰∏Ä‰∏™ËøûÊé•ÁöÑ bean ÂÆû‰æã, Ëøô‰∏™ bean ÂÆû‰æã‰ΩøÁî® <code>@ClientWebSocket</code> Ê≥®Ëß£‰øÆÈ•∞</p>
<p>Example - WebSocket Chat:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.http.HttpRequest</span><br><span class="line"><span class="keyword">import</span> io.micronaut.websocket.WebSocketSession</span><br><span class="line"><span class="keyword">import</span> io.micronaut.websocket.annotation.ClientWebSocket</span><br><span class="line"><span class="keyword">import</span> io.micronaut.websocket.annotation.OnMessage</span><br><span class="line"><span class="keyword">import</span> io.micronaut.websocket.annotation.OnOpen</span><br><span class="line"><span class="keyword">import</span> org.reactivestreams.Publisher</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Mono</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ConcurrentLinkedQueue</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Future</span><br><span class="line"><span class="keyword">import</span> io.micronaut.core.async.annotation.SingleResult</span><br><span class="line"></span><br><span class="line"><span class="meta">@ClientWebSocket</span>(<span class="string">&quot;/chat/&#123;topic&#125;/&#123;username&#125;&quot;</span>)    <span class="comment">// 1</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">ChatClientWebSocket</span> <span class="keyword">implements</span> <span class="title class_">AutoCloseable</span> &#123;   <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> WebSocketSession session</span><br><span class="line">    <span class="keyword">private</span> HttpRequest request</span><br><span class="line">    <span class="keyword">private</span> String topic</span><br><span class="line">    <span class="keyword">private</span> String username</span><br><span class="line">    <span class="keyword">private</span> Collection&lt;String&gt; replies = <span class="keyword">new</span> ConcurrentLinkedQueue&lt;&gt;()</span><br><span class="line"></span><br><span class="line">    <span class="meta">@OnOpen</span></span><br><span class="line">    <span class="type">void</span> onOpen(String topic,</span><br><span class="line">                String username,</span><br><span class="line">                WebSocketSession session,</span><br><span class="line">                HttpRequest request) &#123;      <span class="comment">// 3</span></span><br><span class="line">        <span class="variable language_">this</span>.topic = topic</span><br><span class="line">        <span class="variable language_">this</span>.username = username</span><br><span class="line">        <span class="variable language_">this</span>.session = session</span><br><span class="line">        <span class="variable language_">this</span>.request = request</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    String getTopic() &#123; topic &#125;</span><br><span class="line">    String getUsername() &#123; username &#125;</span><br><span class="line">    Collection&lt;String&gt; getReplies() &#123; replies &#125;</span><br><span class="line">    WebSocketSession getSession() &#123; session &#125;</span><br><span class="line">    HttpRequest getRequest &#123; request &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@OnMessage</span></span><br><span class="line">    <span class="type">void</span> onMessage(String message) &#123; replies &lt;&lt; message&#125;    <span class="comment">// 4</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>1</code> : The class is abstract (more on that later) and is annotated with <code>@ClientWebSocket</code></p>
<p><code>2</code> : The client must implements <code>AutoCloseable</code> and you should ensure that the connection is closed at some point</p>
<p><code>3</code> : You can use the same annotations as on the server, in this case <code>@OnOpen</code> to obtain a reference to the underlying session</p>
<p><code>4</code> : <code>@OnMessage</code> annotation defines the method that receives responses from the server</p>
<p>‰Ω†ËøòÂèØ‰ª•ÂÆö‰πâÊäΩË±°ÊñπÊ≥ï, Ëøô‰∫õÊñπÊ≥ï‰ª• <code>send</code> Êàñ <code>broadcast</code> ÂºÄÂ§¥, Ëøô‰∫õÊñπÊ≥ïÂ∞Ü‰ºöÂú®ÁºñËØëÊó∂Ëá™Âä®Ë¢´ÂÆûÁé∞:</p>
<p>Example - WebSocket Send Methods:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="type">void</span> send(String message)</span><br></pre></td></tr></table></figure>

<p>ÈÄöËøáËøîÂõû <code>void</code> Êù•ÂëäËØâ Micronaut Ëøô‰∏™ÊñπÊ≥ïÊòØÈòªÂ°ûÂºèÂèëÈÄÅÁöÑ</p>
<p>ÂêåÊó∂, ÂèØ‰ª•ÂÆö‰πâÊñπÊ≥ïËøîÂõû <code>Future</code> Êàñ <code>Publisher</code>:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> reactor.core.publisher.Mono&lt;String&gt; send(String message)</span><br></pre></td></tr></table></figure>

<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> java.util.concurrent.Future&lt;String&gt; sendAsync(String message)</span><br></pre></td></tr></table></figure>

<p>‰∏ÄÊó¶‰Ω†ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ÂÆ¢Êà∑Á´ØÁ±ª, ‰Ω†ÂèØ‰ª•ËøûÊé•Âà∞ÂÆ¢Êà∑Á´Ø Socket, Âπ∂ÂºÄÂßãÂèëÈÄÅ‰ø°ÊÅØ:</p>
<p>Example - Connecting a Client WebSocket:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ChatClientWebSocket chatClient = webSocketClient.connect(ChatClientWebSocket.<span class="keyword">class</span>, <span class="string">&quot;/chat/football/fred&quot;</span>)</span><br><span class="line">.blockFirst();</span><br><span class="line">chatClient.send(<span class="string">&quot;Hello World!&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="Using-the-CLI-‰ΩøÁî®-CLI-1"><a href="#Using-the-CLI-‰ΩøÁî®-CLI-1" class="headerlink" title="Using the CLI (‰ΩøÁî® CLI)"></a>Using the CLI (‰ΩøÁî® CLI)</h4><p>Â¶ÇÊûú‰Ω†‰ΩøÁî® Micronaut CLI Êù•ÂàõÂª∫‰Ω†ÁöÑÈ°πÁõÆ, Âπ∂‰∏îÊòØÈªòËÆ§ (<code>service</code>) profile, ‰Ω†ÂèØ‰ª•‰ΩøÁî® <code>create-websocket-client</code> ÂëΩ‰ª§Êù•ÈÄöËøá <code>WebSocketClient</code> ÂàõÂª∫‰∏Ä‰∏™ÊäΩË±°Á±ª:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mn create-websocket-client MyChat</span><br><span class="line">| Rendered template WebSocketClient.java to destination src/main/java/example/MyChatClient.java</span><br></pre></td></tr></table></figure>

<h2 id="HTTP-x2F-2-Support-HTTP-x2F-2-ÊîØÊåÅ"><a href="#HTTP-x2F-2-Support-HTTP-x2F-2-ÊîØÊåÅ" class="headerlink" title="HTTP&#x2F;2 Support (HTTP&#x2F;2 ÊîØÊåÅ)"></a>HTTP&#x2F;2 Support (HTTP&#x2F;2 ÊîØÊåÅ)</h2><p>‰ªé Micronaut 2.x ÂºÄÂßã, Micronaut ÁöÑÂü∫‰∫é Netty ÁöÑ HTTP server ÂèØ‰ª•ÈÄöËøáÈÖçÁΩÆÊù•ÊîØÊåÅ HTTP&#x2F;2</p>
<h3 id="Configuring-the-Server-for-HTTP-x2F-2-‰∏∫-HTTP-x2F-2-ÈÖçÁΩÆ-Server"><a href="#Configuring-the-Server-for-HTTP-x2F-2-‰∏∫-HTTP-x2F-2-ÈÖçÁΩÆ-Server" class="headerlink" title="Configuring the Server for HTTP&#x2F;2 (‰∏∫ HTTP&#x2F;2 ÈÖçÁΩÆ Server)"></a>Configuring the Server for HTTP&#x2F;2 (‰∏∫ HTTP&#x2F;2 ÈÖçÁΩÆ Server)</h3><p>Á¨¨‰∏ÄÊ≠•ÊòØÈÖçÁΩÆÊîØÊåÅÁöÑ HTTP ÁâàÊú¨</p>
<p>Example - Enabling HTTP&#x2F;2 Support:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">server:</span></span><br><span class="line">        <span class="attr">http-version:</span> <span class="number">2.0</span></span><br></pre></td></tr></table></figure>

<p>ÈÄöËøáËøô‰∏™ÈÖçÁΩÆ, Micronaut ÂºÄÂêØ‰∫ÜÂØπ <code>h2c</code> (<a class="link"   target="_blank" rel="noopener" href="https://httpwg.org/specs/rfc7540.html#discover-http" >HTTP&#x2F;2 over cleartext<i class="fas fa-external-link-alt"></i></a>) ÂçèËÆÆÁöÑÊîØÊåÅ, ËøôÂØπ‰∫éÂºÄÂèëÊù•ËØ¥ÂæàÂ•Ω</p>
<p>Âõ†‰∏∫ÊµèËßàÂô®‰∏çÊîØÊåÅ <code>h2c</code> ‰ΩÜ‰∏ÄËà¨Êù•ËØ¥ÊîØÊåÅ <a class="link"   target="_blank" rel="noopener" href="https://httpwg.org/specs/rfc7540.html#discover-https" >HTTP&#x2F;2 over TLS<i class="fas fa-external-link-alt"></i></a> (<code>h2</code> ÂçèËÆÆ), Êé®ËçêÂú®Áîü‰∫ßÁéØÂ¢ÉÂºÄÂêØ HTTPS ÊîØÊåÅ</p>
<p>ÂØπ‰∫éÂºÄÂèëÊù•ËØ¥, ÂèØ‰ª•ËøôÊ†∑ËøõË°åÈÖçÁΩÆ</p>
<p>Example - Enabling <code>h2</code> Protocol Support:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">server:</span></span><br><span class="line">        <span class="attr">http-version:</span> <span class="number">2.0</span></span><br><span class="line">        <span class="attr">ssl:</span></span><br><span class="line">            <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">            <span class="attr">buildSelfSigned:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>ÂØπ‰∫éÁîü‰∫ßÁéØÂ¢É, ÂèÇËÄÉ <code>configuring HTTPS</code> Á´†ËäÇ</p>
<p>Â¶ÇÊûú‰Ω†ÁöÑÂºÄÂèëÁéØÂ¢É‰ΩøÁî®ÁöÑÊòØ JDK8, ÊàñËÆ∏ÈúÄË¶ÅÊèêÈ´òÂØπ OpenSSL ÁöÑÊîØÊåÅ, ÂÆö‰πâ‰ª•‰∏ãÂØπ Netty Tomcat Native ÁöÑÊîØÊåÅ:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">runtimeOnly(<span class="string">&quot;io.netty:netty-tcnative:2.0.46.Final&quot;</span>)</span><br><span class="line"></span><br><span class="line">runtimeOnly(<span class="string">&quot;io.netty:netty-tcnative-boringssl-static:2.0.46.Final&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>Èô§Ê≠§‰πãÂ§ñËøòË¶ÅÈÖçÁΩÆ‰∏Ä‰∏™ÈÄÇÂêàÁöÑ‰Ω†ÁîµËÑëÁ≥ªÁªüÊû∂ÊûÑÁöÑÊú¨Âú∞Â∫ì‰æùËµñ:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">runtimeOnly <span class="string">&quot;io.netty:netty-tcnative-boringssl-static:2.0.46.Final:$&#123;Os.isFamily(Os.FAMILY_MAC) ? (Os.isArch(&quot;</span>aarch64<span class="string">&quot;) ? &quot;</span>osx-aarch_64<span class="string">&quot; : &quot;</span>osx-x86_64<span class="string">&quot;) : &#x27;linux-x86_64&#x27;&#125;&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="HTTP-x2F-2-Server-Push-Support-HTTP-x2F-2-Server-Êé®ÈÄÅÊîØÊåÅ"><a href="#HTTP-x2F-2-Server-Push-Support-HTTP-x2F-2-Server-Êé®ÈÄÅÊîØÊåÅ" class="headerlink" title="HTTP&#x2F;2 Server Push Support (HTTP&#x2F;2 Server Êé®ÈÄÅÊîØÊåÅ)"></a>HTTP&#x2F;2 Server Push Support (HTTP&#x2F;2 Server Êé®ÈÄÅÊîØÊåÅ)</h3><p>Micronaut 3.2 ÂºÄÂßãÊîØÊåÅ server push</p>
<p>server push ÂÖÅËÆ∏Âçï‰∏™ËØ∑Ê±ÇËß¶ÂèëÂ§ö‰∏™ÂìçÂ∫î. ÊúÄÂ∏∏‰ΩøÁî®Âú®Âü∫‰∫éÊµèËßàÂô®ÁöÑËµÑÊ∫ê (browser based resources)</p>
<p>ÁõÆÊ†áÊòØÂáèÂ∞ëÂÆ¢Êà∑Á´ØÁöÑÁ≠âÂæÖÊó∂Èó¥, Âõ†‰∏∫ÂÆ¢Êà∑Á´Ø‰∏çÈúÄË¶ÅÂÜçÊâãÂä®ËØ∑Ê±ÇËµÑÊ∫ê</p>
<p>‰∏Ä‰∏™Êñ∞ÁöÑÊé•Âè£ <code>PushCapableHttpRequest</code> Ë¢´ÂàõÂª∫Êù•ÊîØÊåÅËøô‰∏™ÁâπÊÄß</p>
<p>ÁÆÄÂçïÂú∞Ê∑ªÂä†‰∏Ä‰∏™ <code>PushCapableHttpRequest</code> ÂèÇÊï∞Âà∞ Controller ÁöÑÊñπÊ≥ï‰∏ä, ÁÑ∂Âêé‰ΩøÁî® <code>PushCapableHttpRequest</code> ‰∏äÁöÑ API Êù•Ëß¶ÂèëÈ¢ùÂ§ñËØ∑Ê±Ç</p>
<p><code>PushCapableHttpRequest</code> ÁªßÊâø‰∫Ü <code>HttpRequest</code>, ÊâÄ‰ª•Ê≤°ÊúâÂøÖË¶ÅÂú® Controller ÊñπÊ≥ïÂèÇÊï∞‰∏äÂêåÊó∂ÂåÖÂê´Ëøô‰∏§ÁßçÁ±ªÂûãÁöÑÂèÇÊï∞</p>
<p>Âú®Ëß¶ÂèëÈ¢ùÂ§ñËØ∑Ê±ÇÂâç, Ë¶ÅË∞ÉÁî® <code>isServerPushSupported()</code> ÊñπÊ≥ïÊù•Á°Æ‰øùËøô‰∏™ÁâπÊÄßÊòØÂèØÁî®ÁöÑ</p>
<p>‰∏ÄÊó¶Áü•ÈÅìËøô‰∏™ÁâπÊÄßÊòØÂèØÁî®ÁöÑ, ‰ΩøÁî® <code>serverPush(HttpRequest)</code> ÊñπÊ≥ïÊù•Ëß¶ÂèëÈ¢ùÂ§ñËØ∑Ê±Ç (additional requests). ‰æãÂ¶Ç, <code>request.serverPush(HttpRequest.GET(&#39;/static/style.css&#39;))</code></p>
<h2 id="Server-Events-Server-‰∫ã‰ª∂"><a href="#Server-Events-Server-‰∫ã‰ª∂" class="headerlink" title="Server Events (Server ‰∫ã‰ª∂)"></a>Server Events (Server ‰∫ã‰ª∂)</h2><p>HTTP Server ËæìÂá∫‰∏ÄÁ≥ªÂàó‰∫ã‰ª∂, Ëøô‰∫õ‰∫ã‰ª∂ÈÉΩÂÆö‰πâÂú® <code>io.micronaut.runtime.server.event</code> ÂåÖ‰∏≠, ÂèØ‰ª•‰∏∫Ëøô‰∫õ‰∫ã‰ª∂ÁºñÂÜôÁõëÂê¨Âô®</p>
<p>Table - Server Events:</p>
<table>
<thead>
<tr>
<th align="left">Event</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>ServerStartupEvent</code></td>
<td align="left">Emitted when the server completes startup</td>
</tr>
<tr>
<td align="left"><code>ServerShutdownEvent</code></td>
<td align="left">Emitted when the server shuts down</td>
</tr>
<tr>
<td align="left"><code>ServerReadyEvent</code></td>
<td align="left">Emitted after all <code>ServerStartupEvent</code> listeners have been invoked and exposes the <code>EmbeddedServerInstance</code></td>
</tr>
<tr>
<td align="left"><code>ServerStoppedEvent</code></td>
<td align="left">Emitted after all <code>ServerShutdownEvent</code> listeners have been invoked and exposes the <code>EmbeddedServerInstance</code></td>
</tr>
</tbody></table>
<p>Âú® <code>ServerStartupEvent</code> ‰∏≠ËøõË°åÈáçË¶ÅÁöÑÂ∑•‰ΩúÂ∞Ü‰ºöÊòæËëóÂ¢ûÂä†ÂêØÂä®Êó∂Èó¥</p>
<p>Example - Listening for Server Startup Events - ÈÄöËøáÂÆûÁé∞ <code>ApplicationEventListener</code> ÁöÑÊñπÂºèËøõË°åÁõëÂê¨:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.context.event.ApplicationEventListener</span><br><span class="line"></span><br><span class="line"><span class="meta">@Singleton</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StartupListener</span> <span class="keyword">implements</span> <span class="title class_">ApplicationEventListener</span>&lt;ServerStartupEvent&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">void</span> onApplicationEvent(ServerStartupEvent event) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Example - Âú®‰ªªÊÑè Bean ÁöÑÊñπÊ≥ï‰∏ä‰ΩøÁî® <code>@EventListener</code> Ê≥®Ëß£ÁõëÂê¨ server ÂêØÂä®‰∫ã‰ª∂:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.runtime.event.annotation.EventListener</span><br><span class="line"><span class="keyword">import</span> io.micronaut.runtime.server.event.ServerStartupEvent</span><br><span class="line"><span class="keyword">import</span> javax.inject.Singleton</span><br><span class="line"></span><br><span class="line"><span class="meta">@Singleton</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBean</span> &#123;</span><br><span class="line">    <span class="meta">@EventListener</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">void</span> onStartup(ServerStartupEvent event) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Configuring-the-HTTP-Server-ÈÖçÁΩÆ-HTTP-Server"><a href="#Configuring-the-HTTP-Server-ÈÖçÁΩÆ-HTTP-Server" class="headerlink" title="Configuring the HTTP Server (ÈÖçÁΩÆ HTTP Server)"></a>Configuring the HTTP Server (ÈÖçÁΩÆ HTTP Server)</h2><p>HTTP Server ÊúâÂæàÂ§öÁöÑÈÖçÁΩÆÈÄâÈ°π</p>
<p>Ëøô‰∫õÈÖçÁΩÆÈÄâÈ°πÂÆö‰πâÂú® <code>NettyHttpServerConfiguration</code> ÈÖçÁΩÆÁ±ª‰∏≠, Ëøô‰∏™Á±ªÁªßÊâø‰∫Ü <code>HttpServerConfiguration</code></p>
<p>Example - Configuring HTTP server settings:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">server:</span></span><br><span class="line">        <span class="attr">maxRequestSize:</span> <span class="string">1MB</span></span><br><span class="line">        <span class="attr">host:</span> <span class="string">localhost</span>             <span class="string">//</span> <span class="number">1</span></span><br><span class="line">        <span class="attr">netty:</span></span><br><span class="line">            <span class="attr">maxHeaderSize:</span> <span class="string">500KB</span>    <span class="string">//</span> <span class="number">2</span></span><br><span class="line">            <span class="attr">worker:</span></span><br><span class="line">                <span class="attr">threads:</span> <span class="number">8</span>          <span class="string">//</span> <span class="number">3</span></span><br><span class="line">            <span class="attr">childOptions:</span></span><br><span class="line">                <span class="attr">autoRead:</span> <span class="literal">true</span>      <span class="string">//</span> <span class="number">4</span></span><br></pre></td></tr></table></figure>

<p><code>1</code> : By default Micronaut binds to all network interfaces. Use <code>localhost</code> to bind only to loopback network interface</p>
<p><code>2</code> : Maximum size for headers</p>
<p><code>3</code> : Number of Netty worker threads</p>
<p><code>4</code> : Auto read requset body</p>
<p><a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/server/netty/configuration/NettyHttpServerConfiguration.html" >NettyHttpServerConfiguration<i class="fas fa-external-link-alt"></i></a></p>
<p>‰∏≠ÁöÑ getter ÊñπÊ≥ïÊåáÁ§∫‰∫ÜÈÖçÁΩÆÂ±ûÊÄß</p>
<p>‰æãÂ¶Ç, <code>getMaxHeaderSize()</code> ÊñπÊ≥ï ÂØπÂ∫î <code>micronaut.server.netty.max-header-size</code> Property</p>
<h3 id="Using-Native-Transports-‰ΩøÁî®ÂéüÁîü‰º†Ëæì"><a href="#Using-Native-Transports-‰ΩøÁî®ÂéüÁîü‰º†Ëæì" class="headerlink" title="Using Native Transports (‰ΩøÁî®ÂéüÁîü‰º†Ëæì)"></a>Using Native Transports (‰ΩøÁî®ÂéüÁîü‰º†Ëæì)</h3><blockquote>
<p>The native Netty transports add features specific to a particular platform, generate less garbage, and generally improve performance when compared to the NIO-based transport.</p>
</blockquote>
<p>ÂéüÁîü Netty ‰º†Ëæì‰∏∫ÁâπÂÆöÂπ≥Âè∞Ê∑ªÂä†ÁâπÂÆöÂäüËÉΩ, ‰∏éÂü∫‰∫é NIO ÁöÑ‰º†ËæìÁõ∏ÊØî‰∫ßÁîüÊõ¥Â∞ëÁöÑÂûÉÂúæ, Âπ∂‰∏îÊÄª‰Ωì‰∏äÊèêÈ´ò‰∫ÜÊÄßËÉΩ</p>
<p>‰∏∫‰∫ÜÂºÄÂêØÂéüÁîü‰º†Ëæì, È¶ñÂÖàÈúÄË¶ÅÊ∑ªÂä†‰æùËµñ:</p>
<p>x86 Âπ≥Âè∞ÁöÑ MacOS: <code>runtimeOnly(&quot;io.netty:netty-transport-native-kqueue::osx-x86_64&quot;)</code></p>
<p>M1 Âπ≥Âè∞ÁöÑ MacOS: <code>runtimeOnly(&quot;io.netty:netty-transport-native-kqueue::osx-aarch_64&quot;)</code></p>
<p>x86 Âπ≥Âè∞ÁöÑ Linux: <code>runtimeOnly(&quot;io.netty:netty-transport-native-kqueue::linux-x86_64&quot;)</code></p>
<p>ARM64 Âπ≥Âè∞ÁöÑ Linux: <code>runtimeOnly(&quot;io.netty:netty-transport-native-kqueue::linux-aarch_64&quot;)</code></p>
<p>ÁÑ∂ÂêéÈÖçÁΩÆÈªòËÆ§ÁöÑ event loop group ÂÄæÂêë‰∫éÂéüÁîü‰º†Ëæì:</p>
<p>Example - Configuring The Default Event Loop to Prefer Native Transports:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">netty:</span></span><br><span class="line">        <span class="attr">event-loops:</span></span><br><span class="line">            <span class="attr">default:</span></span><br><span class="line">                <span class="attr">prefer-native-transport:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Netty enables simplistic sampling resource leak detection which reports there is a leak or not, at the cost of small overhead. You can disable it or enable more advanced detection by setting property netty.<code>resource-leak-detector-level</code> to one of: SIMPLE (default), DISABLED, PARANOID or ADVANCED</p>
</blockquote>
<p>Netty ÊîØÊåÅÁÆÄÂçïÁöÑËµÑÊ∫êÈááÊ†∑Ê≥ÑÈú≤Ê£ÄÊµã, ÂÆÉÊä•ÂëäÊòØÂê¶Â≠òÂú®Ê≥ÑÈú≤, ÂΩìÂºÄÈîÄÂæàÂ∞è. ‰Ω†ÂèØ‰ª•ÈÄöËøáÂ∞ÜÂ±ûÊÄß <code>netty.resource-leak-detector-level</code> ËÆæÁΩÆ‰∏∫‰ª•‰∏ã‰πã‰∏ÄÊù•Á¶ÅÁî®ÂÆÉÊàñÂêØÁî®Êõ¥È´òÁ∫ßÁöÑÊ£ÄÊµã: <code>SIMPLE</code>(ÈªòËÆ§), <code>DISABLED</code>, <code>PARANOID</code>(ÂÅèÊâß), <code>ADVANCED</code>(È´òÁ∫ß)</p>
<h3 id="Configuring-Server-Thread-Pools-ÈÖçÁΩÆ-Server-Á∫øÁ®ãÊ±†"><a href="#Configuring-Server-Thread-Pools-ÈÖçÁΩÆ-Server-Á∫øÁ®ãÊ±†" class="headerlink" title="Configuring Server Thread Pools (ÈÖçÁΩÆ Server Á∫øÁ®ãÊ±†)"></a>Configuring Server Thread Pools (ÈÖçÁΩÆ Server Á∫øÁ®ãÊ±†)</h3><p>HTTP Server ÊòØÊûÑÂª∫Âú® Netty ‰∏äÁöÑ, Netty Ë¢´ËÆæËÆ°‰Ωú‰∏∫‰∏Ä‰∏™‰ΩøÁî® event loop Ê®°ÂûãÁöÑÈùûÈòªÂ°û I&#x2F;O Â∑•ÂÖ∑</p>
<p>Netty worker event loop ‰ΩøÁî®ÂêçÁß∞‰∏∫ <code>default</code> ÁöÑ event loop group. ÂèØ‰ª•ÈÄöËøá <code>micronaut.netty.event-loops.default</code> Â±ûÊÄßÊù•ËøõË°åÈÖçÁΩÆ</p>
<blockquote>
<p>The event loop configuration under <code>micronaut.server.netty.worker</code> is only used if the <code>event-loop-group</code> is set to a name which doesn‚Äôt correspond to any <code>micronaut.netty.event-loops</code> configuration.</p>
</blockquote>
<p>‰ªÖÂΩì <code>event-loop-group</code> ËÆæÁΩÆ‰∏∫‰∏Ä‰∏™ÂêçÁß∞, Ëøô‰∏™ÂêçÁß∞‰∏é‰ªª‰Ωï <code>micronaut.netty.event-loops</code> ÈÖçÁΩÆÈÉΩ‰∏çÂåπÈÖçÊó∂, Êâç‰ºö‰ΩøÁî® <code>micronaut.server.netty.worker</code> ‰∏ãÁöÑ event loop ÈÖçÁΩÆ</p>
<blockquote>
<p>This behavior is deprecated and will be removed in a future version.</p>
</blockquote>
<p>Ëøô‰∏™Ë°å‰∏∫Â∑≤ÁªèÊòØËøáÊó∂ÁöÑ, Â∞Ü‰ºöÂú®Â∞ÜÊù•ÁöÑÁâàÊú¨‰∏≠ÁßªÈô§</p>
<blockquote>
<p>Use <code>micronaut.netty.event-loops.*</code> for any event loop group configuration beyond setting the name through <code>event-loop-group</code>.</p>
</blockquote>
<p>‰∏∫ÊâÄÊúâ event loop group ÈÖçÁΩÆ‰ΩøÁî® <code>micronaut.netty.event-loops.*</code>, ËÄå‰∏çÊòØÈÄöËøá <code>event-loop-group</code> ËÆæÁΩÆÂêçÁß∞</p>
<blockquote>
<p>This does not apply to the parent event loop configuration (<code>micronaut.server.netty.parent</code>).</p>
</blockquote>
<p>Ëøô‰∏çÈÄÇÁî®‰∫éÁà∂ event loop ÈÖçÁΩÆ (<code>micronaut.server.netty.parent</code>)</p>
<p>Table - Configuration Properties for <code>Worker</code>:</p>
<table>
<thead>
<tr>
<th align="left">Property</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>micronaut.server.netty.worker</code></td>
<td align="left"><code>NettyHttpServerConfiguration$Worker</code></td>
<td align="left">Sets the worker event loop configuration</td>
</tr>
<tr>
<td align="left"><code>micronaut.server.netty.worker.event-loop-group</code></td>
<td align="left"><code>java.lang.Strng</code></td>
<td align="left">Sets the name to use</td>
</tr>
<tr>
<td align="left"><code>micronaut.server.netty.worker.threads</code></td>
<td align="left"><code>int</code></td>
<td align="left">Sets the number of threads for the event loop group</td>
</tr>
<tr>
<td align="left"><code>micronaut.server.netty.worker.io-ratio</code></td>
<td align="left"><code>java.lang.Integer</code></td>
<td align="left">Sets the I&#x2F;O ratio</td>
</tr>
<tr>
<td align="left"><code>micronaut.server.netty.worker.executor</code></td>
<td align="left"><code>java.lang.String</code></td>
<td align="left">Sets the name of the executor</td>
</tr>
<tr>
<td align="left"><code>micronaut.server.netty.worker.prefer-native-transport</code></td>
<td align="left"><code>boolean</code></td>
<td align="left">Set whether to prefer the native transport if available</td>
</tr>
<tr>
<td align="left"><code>micronaut.server.netty.worker.shutdown-quiet-period</code></td>
<td align="left"><code>java.time.Duration</code></td>
<td align="left">Set the shutdown quiet period</td>
</tr>
<tr>
<td align="left"><code>micronaut.server.netty.worker.shutdown-timeout</code></td>
<td align="left"><code>java.time.Duration</code></td>
<td align="left">Set the shutdown timeout (must be &gt;&#x3D; shutdownQuietPeriod)</td>
</tr>
</tbody></table>
<blockquote>
<p>The parent event loop can be configured with <code>micronaut.server.netty.parent</code> with the same configuration options.</p>
</blockquote>
<p>Áà∂ event loop ÂèØ‰ª•ÈÄöËøáÁõ∏ÂêåÁöÑÈÖçÁΩÆÈÄâÈ°πÊù•‰ΩøÁî® <code>micronuat.server.netty.parent</code> ËøõË°åÈÖçÁΩÆ</p>
<p>Example - Using a different event loop for the server - server ÂèØ‰ª•ÈÖçÁΩÆ‰∏∫‰ΩøÁî®‰∏Ä‰∏™‰∏çÂêåÂëΩÂêçÁöÑ worker event loop:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">server:</span></span><br><span class="line">        <span class="attr">netty:</span></span><br><span class="line">            <span class="attr">worker:</span></span><br><span class="line">                <span class="attr">event-loop-group:</span> <span class="string">other</span></span><br><span class="line">    <span class="attr">netty:</span></span><br><span class="line">        <span class="attr">event-loops:</span></span><br><span class="line">            <span class="attr">other:</span></span><br><span class="line">                <span class="attr">num-threads:</span> <span class="number">10</span></span><br></pre></td></tr></table></figure>

<p>Á∫øÁ®ãÊï∞ÈáèÁöÑÈªòËÆ§ÂÄºÊòØÁ≥ªÁªüÂ±ûÊÄß <code>io.netty.eventLoopThreads</code> ÁöÑÂÄº, Â¶ÇÊûúËøô‰∏™Á≥ªÁªüÂ±ûÊÄßÊ≤°ÊúâÈÖçÁΩÆ, ÂàôÁ∫øÁ®ãÊï∞Èáè‰∏∫ÂèØÁî®Â§ÑÁêÜÂô®Êï∞ÈáèÁöÑ‰∏§ÂÄç</p>
<p>Table - Configuration Properties for <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/netty/channel/DefaultEventLoopGroupConfiguration.html" >DefaultEventLoopGroupConfiguration<i class="fas fa-external-link-alt"></i></a>:</p>
<p>Property | Type | Description<br><code>micronaut.netty.event-loops.*.num-threads</code> | <code>int</code> |<br><code>micronaut.netty.event-loops.*.io-ratio</code> | <code>java.lang.Integer</code> |<br><code>micronaut.netty.event-loops.*.prefer-native-transport</code> | <code>boolean</code> |<br><code>micronaut.netty.event-loops.*.executor</code> | <code>java.lang.String</code> |<br><code>micronaut.netty.event-loops.*.shutdown-quiet-period</code> | <code>java.time.Duration</code> |<br><code>micronaut.netty.event-loops.*.shutdown-timeout</code> | <code>java.time.Duration</code> |</p>
<h4 id="Blocking-Operations-ÈòªÂ°ûÂºèÊìç‰Ωú"><a href="#Blocking-Operations-ÈòªÂ°ûÂºèÊìç‰Ωú" class="headerlink" title="Blocking Operations (ÈòªÂ°ûÂºèÊìç‰Ωú)"></a>Blocking Operations (ÈòªÂ°ûÂºèÊìç‰Ωú)</h4><p>ÂΩìÂ§ÑÁêÜÈòªÂ°ûÂºèÊìç‰Ωú, Micronaut ÈªòËÆ§Â∞ÜËøô‰∏™Êìç‰ΩúËΩ¨ÁßªÂà∞‰∏Ä‰∏™Êó†ËæπÁïåÁöÑÁºìÂ≠òÁöÑ I&#x2F;O Á∫øÁ®ãÊ±†</p>
<p>‰Ω†ÂèØ‰ª•‰ΩøÁî®ÂêçÁß∞‰∏∫ <code>io</code> ÁöÑ <code>ExecutorConfiguration</code> ÈÖçÁΩÆËøô‰∏™ I&#x2F;O Á∫øÁ®ãÊ±†:</p>
<p>Example - Configuring the Server I&#x2F;O Thread Pool:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">executors:</span></span><br><span class="line">        <span class="attr">io:</span></span><br><span class="line">            <span class="attr">type:</span> <span class="string">fixed</span></span><br><span class="line">            <span class="attr">nThreads:</span> <span class="number">75</span></span><br></pre></td></tr></table></figure>

<h3 id="Configuring-the-Netty-Pipeline-ÈÖçÁΩÆ-Netty-ÁÆ°ÈÅì"><a href="#Configuring-the-Netty-Pipeline-ÈÖçÁΩÆ-Netty-ÁÆ°ÈÅì" class="headerlink" title="Configuring the Netty Pipeline (ÈÖçÁΩÆ Netty ÁÆ°ÈÅì)"></a>Configuring the Netty Pipeline (ÈÖçÁΩÆ Netty ÁÆ°ÈÅì)</h3><p>ÂèØ‰ª•ÈÄöËøáÁºñÂÜô‰∏Ä‰∏™ <code>Bean Event Listener</code> ÁõëÂê¨ <code>ChannelPipelineCustomizer</code> ÁöÑÂàõÂª∫Êù•Ëá™ÂÆö‰πâ Netty pipeline</p>
<p>Netty HTTP server Âíå client ÂÆûÁé∞‰∫ÜËøô‰∏™Êé•Âè£, ÂÖÅËÆ∏‰Ω†Ëá™ÂÆö‰πâ Netty <code>ChannelPipeline</code> Âπ∂Ê∑ªÂä†È¢ùÂ§ñÁöÑÂ§ÑÁêÜÂô®</p>
<p><code>ChannelPipelineCustomizer</code> Êé•Âè£‰∏∫ Micronaut Ê≥®ÂÜåÁöÑÂ§ö‰∏™Â§ÑÁêÜÂô®ÁöÑÂêçÁß∞ÂÆö‰πâÂ∏∏Èáè (constants)</p>
<p>‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÁ§∫‰æãÂ±ïÁ§∫‰∫ÜÊ≥®ÂÜåÂåÖÂê´‰∫ÜÈ¢ùÂ§ñ Netty Â§ÑÁêÜÂô®Êù•Â§ÑÁêÜËØ∑Ê±ÇÂìçÂ∫îÊó•ÂøóÁöÑ <code>Logbook</code> Â∫ì</p>
<p>Example - Customizing the Netty pipeline for Logbook:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.context.annotation.Requires</span><br><span class="line"><span class="keyword">import</span> io.micronaut.context.event.BeanCreatedEvent</span><br><span class="line"><span class="keyword">import</span> io.micronaut.context.event.BeanCreatedEventListener</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.netty.channel.ChannelPipelineCustomizer</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.ChannelPipeline</span><br><span class="line"><span class="keyword">import</span> org.zalando.logbook.Logbook</span><br><span class="line"><span class="keyword">import</span> org.zalando.logbook.netty.LogbookClientHandler</span><br><span class="line"><span class="keyword">import</span> org.zalando.logbook.netty.LogbookServerHandler</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.inject.Singleton</span><br><span class="line"></span><br><span class="line"><span class="meta">@Requires</span>(beans = LogBook.<span class="keyword">class</span>)</span><br><span class="line"><span class="meta">@Singleton</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LogbookPipelineCustomizer</span> <span class="keyword">implements</span> <span class="title class_">BeanCreatedEventListener</span>&lt;ChannelPipelineCustomizer&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Logbook logbook</span><br><span class="line"></span><br><span class="line">    LogbookPipelineCustomizer(Logbook logbook) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.logbook = logbook</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    ChannelPipelineCustomizer onCreated(BeanCreatedEvent&lt;ChannelPipelineCustomizer&gt; event) &#123;</span><br><span class="line">        ChannelPipelineCustomizer customizer = event.bean</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (customizer.serverChannel) &#123;</span><br><span class="line">            customizer.doOnConnect( &#123; ChannelPipeline pipeline -&gt;</span><br><span class="line">                pipeline.addAfter(</span><br><span class="line">                        ChannelPipelineCustomizer.HANDLER_HTTP_SERVER_CODEC,</span><br><span class="line">                        <span class="string">&quot;logbook&quot;</span>,</span><br><span class="line">                        <span class="keyword">new</span> LogbookServerHandler(logbook)</span><br><span class="line">                )</span><br><span class="line">                <span class="keyword">return</span> pipeline</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            customizer.doOnConnect(&#123; ChannelPipeline pipeline -&gt;</span><br><span class="line">                pipeline.addAfter(</span><br><span class="line">                        ChannelPipelineCustomizer.HANDLER_HTTP_CLIENT_CODEC,</span><br><span class="line">                        <span class="string">&quot;logbook&quot;</span>,</span><br><span class="line">                        <span class="keyword">new</span> LogbookClientHandler(logbook)</span><br><span class="line">                )</span><br><span class="line">                <span class="keyword">return</span> pipeline</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> customizer</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Configuring-CORS-ÈÖçÁΩÆË∑®ÂüüËØ∑Ê±Ç"><a href="#Configuring-CORS-ÈÖçÁΩÆË∑®ÂüüËØ∑Ê±Ç" class="headerlink" title="Configuring CORS (ÈÖçÁΩÆË∑®ÂüüËØ∑Ê±Ç)"></a>Configuring CORS (ÈÖçÁΩÆË∑®ÂüüËØ∑Ê±Ç)</h3><p>Micronaut ÂºÄÁÆ±ÊîØÊåÅ CORS (Cross Origin Resource Sharing)</p>
<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ã, CORS ËØ∑Ê±ÇÊòØË¢´ÊãíÁªùÁöÑ</p>
<p>‰∏∫‰∫ÜÂºÄÂêØ CORS ËØ∑Ê±Ç, ‰øÆÊîπ‰Ω†ÁöÑÈÖçÁΩÆ:</p>
<p>Example - CORS Configuration:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">server:</span></span><br><span class="line">        <span class="attr">cors:</span></span><br><span class="line">            <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>By only enabling CORS processing, a ‚Äúwide open‚Äù strategy is adopted that allows requests from any origin.</p>
</blockquote>
<p>‰ªÖÈÄöËøáÂêØÁî® CORS Â§ÑÁêÜ, Â∞±ÈááÁî®‰∫Ü‰∏Ä‰∏™ÂÖÅËÆ∏Êù•Ëá™‰ªª‰ΩïÊù•Ê∫êÁöÑËØ∑Ê±ÇÁöÑ ‚ÄúÂπøÊ≥õÂºÄÂèë‚Äù Á≠ñÁï•</p>
<p>‰∏∫‰∫Ü‰øÆÊîπÊâÄÊúâÊù•Ê∫êÊàñ‰∏Ä‰∏™ÁâπÂÆöÊù•Ê∫êÁöÑËÆæÁΩÆ, ÈÄöËøáÊèê‰æõ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ <code>configurations</code> Êù•ÊîπÂèòÈÖçÁΩÆ</p>
<p>ÈÄöËøáÊèê‰æõ‰ªª‰ΩïÈÖçÁΩÆ, ÈªòËÆ§ÁöÑ <code>wide open</code> ÈÖçÁΩÆÂ∞±‰∏ç‰ºöË¢´ÈÖçÁΩÆ</p>
<p>Example - CORS Configurations:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">server:</span></span><br><span class="line">        <span class="attr">cors:</span></span><br><span class="line">            <span class="attr">configurations:</span></span><br><span class="line">                <span class="attr">all:</span></span><br><span class="line">                    <span class="string">...</span></span><br><span class="line">                <span class="attr">web:</span></span><br><span class="line">                    <span class="string">...</span></span><br><span class="line">                <span class="attr">mobile:</span></span><br><span class="line">                    <span class="string">...</span></span><br></pre></td></tr></table></figure>

<p>Âú®‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏≠, Êèê‰æõ‰∫Ü‰∏â‰∏™ÈÖçÁΩÆ</p>
<p>ÂÆÉ‰ª¨ÁöÑÂêçÂ≠ó (all, web, mobile) Âπ∂‰∏çÈáçË¶Å, ‰∏îÂú® Micronaut ÂÜÖÈÉ®Ê≤°ÊúâÊÑè‰πâ</p>
<blockquote>
<p>They are there purely to be able to easily recognize the intended user of the configuration.</p>
</blockquote>
<p>ÂÆÉ‰ª¨ÁöÑÂ≠òÂú®Á∫ØÁ≤πÊòØ‰∏∫‰∫ÜËÉΩÂ§üËΩªÊùæËØÜÂà´ÈÖçÁΩÆÁöÑÈ¢ÑÊúüÁî®Êà∑</p>
<p>ÂêåÊ†∑ÁöÑÈÖçÁΩÆÂ±ûÊÄßÂèØ‰ª•Â∫îÁî®‰∫éÊØè‰∏™ÈÖçÁΩÆ, ÂèÇËÄÉ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/server/cors/CorsOriginConfiguration.html" >CorsOriginConfiguration<i class="fas fa-external-link-alt"></i></a> Ëé∑ÂèñÂèØ‰ª•ÂÆö‰πâÁöÑÂ±ûÊÄß</p>
<blockquote>
<p>The values of each configuration supplied will default to the default values of the corresponding fields.</p>
</blockquote>
<p>Êèê‰æõÁöÑÊØè‰∏™ÈÖçÁΩÆÁöÑÂÄºÂ∞ÜÈªòËÆ§‰∏∫ Áõ∏Â∫îÂ≠óÊÆµÁöÑ ÈªòËÆ§ÂÄº</p>
<blockquote>
<p>When a CORS request is made, configurations are searched for allowed origins that match exactly or match the request origin through a regular expression.</p>
</blockquote>
<p>ÂΩìÂèëÁîü‰∏Ä‰∏™ CORS ËØ∑Ê±ÇÊó∂, Â∞ÜÂú®ÈÖçÁΩÆ‰∏≠ÊêúÁ¥¢‰∏éËØ∑Ê±ÇÊ∫êÂÆåÂÖ®ÂåπÈÖçÊàñÈÄöËøáÊ≠£ÂàôË°®ËææÂºèÂåπÈÖçÁöÑÂÖÅËÆ∏Ê∫ê</p>
<h4 id="Allowed-Origins-ÂÖÅËÆ∏ÁöÑÊ∫ê"><a href="#Allowed-Origins-ÂÖÅËÆ∏ÁöÑÊ∫ê" class="headerlink" title="Allowed Origins (ÂÖÅËÆ∏ÁöÑÊ∫ê)"></a>Allowed Origins (ÂÖÅËÆ∏ÁöÑÊ∫ê)</h4><p>Âú®‰∏Ä‰∏™ÁªôÂÆöÁöÑÈÖçÁΩÆ‰∏≠ÂÖÅËÆ∏‰ªª‰ΩïÊ∫ê, ‰∏çË¶ÅÂåÖÂê´ <code>allowedOrigins</code> key Âà∞‰Ω†ÁöÑÈÖçÁΩÆ‰∏≠</p>
<p>ÂØπ‰∫éÂ§ö‰∏™ÊúâÊïàÁöÑÊ∫ê, ËÆæÁΩÆÈÖçÁΩÆÁöÑ <code>allowedOrigins</code> key ‰∏∫‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÂàóË°®. ÊØè‰∏™ÂÄºÂèØ‰ª•ÊòØ‰∏Ä‰∏™ÈùôÊÄÅÂÄº (<code>http://www.foo.com</code>) ÊàñËÄÖ‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºè (<code>^http(|s)://www\.google\.com$</code>)</p>
<p>Ê≠£ÂàôË°®ËææÂºèÂ∞ÜË¢´‰º†ÈÄíÁªô <code>Pattern#compile</code> Âπ∂‰ΩøÁî® <code>Matcher#matches</code> Êù•ÂíåËØ∑Ê±ÇÁöÑÊ∫êËøõË°åÂåπÈÖç</p>
<p>Example - CORS Configuration:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">server:</span></span><br><span class="line">        <span class="attr">cors:</span></span><br><span class="line">            <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">            <span class="attr">configurations:</span></span><br><span class="line">                <span class="attr">web:</span></span><br><span class="line">                    <span class="attr">allowedOrigins:</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">http://foo.com</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">^http(|s):\/\/www\.google\.com$</span></span><br></pre></td></tr></table></figure>

<h4 id="Allowed-Methods-ÂÖÅËÆ∏ÁöÑÊñπÊ≥ï"><a href="#Allowed-Methods-ÂÖÅËÆ∏ÁöÑÊñπÊ≥ï" class="headerlink" title="Allowed Methods (ÂÖÅËÆ∏ÁöÑÊñπÊ≥ï)"></a>Allowed Methods (ÂÖÅËÆ∏ÁöÑÊñπÊ≥ï)</h4><p>Âú®‰∏Ä‰∏™ÁªôÂÆöÁöÑÈÖçÁΩÆ‰∏≠ÂÖÅËÆ∏‰ªª‰ΩïËØ∑Ê±ÇÊñπÊ≥ï, ‰∏çË¶ÅÂåÖÂê´ <code>allowedMethods</code> key Âà∞‰Ω†ÁöÑÈÖçÁΩÆ‰∏≠</p>
<p>‰∏∫‰∫ÜÂÖÅËÆ∏Â§ö‰∏™ÊñπÊ≥ï, ËÆæÁΩÆÈÖçÁΩÆÁöÑ <code>allowedMethods</code> key ‰∏∫‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÂàóË°®</p>
<p>Example - CORS Configuration:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">server:</span></span><br><span class="line">        <span class="attr">cors:</span></span><br><span class="line">            <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">            <span class="attr">configurations:</span></span><br><span class="line">                <span class="attr">web:</span></span><br><span class="line">                    <span class="attr">allowedMethods:</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">POST</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">PUT</span></span><br></pre></td></tr></table></figure>

<h4 id="Allowed-Headers-ÂÖÅËÆ∏ÁöÑËØ∑Ê±ÇÂ§¥"><a href="#Allowed-Headers-ÂÖÅËÆ∏ÁöÑËØ∑Ê±ÇÂ§¥" class="headerlink" title="Allowed Headers (ÂÖÅËÆ∏ÁöÑËØ∑Ê±ÇÂ§¥)"></a>Allowed Headers (ÂÖÅËÆ∏ÁöÑËØ∑Ê±ÇÂ§¥)</h4><p>Âú®‰∏Ä‰∏™ÁªôÂÆöÁöÑÈÖçÁΩÆ‰∏≠ÂÖÅËÆ∏‰ªª‰ΩïËØ∑Ê±ÇÂ§¥, ‰∏çË¶ÅÂåÖÂê´ <code>allowedHeaders</code> key Âà∞‰Ω†ÁöÑÈÖçÁΩÆ‰∏≠</p>
<p>‰∏∫‰∫ÜÂÖÅËÆ∏Â§ö‰∏™ËØ∑Ê±ÇÂ§¥, ËÆæÁΩÆÈÖçÁΩÆÁöÑ <code>allowedHeaders</code> key ‰∏∫‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÂàóË°®</p>
<p>Example - CORS Configuration:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">server:</span></span><br><span class="line">        <span class="attr">cors:</span></span><br><span class="line">            <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">            <span class="attr">configurations:</span></span><br><span class="line">                <span class="attr">web:</span></span><br><span class="line">                    <span class="attr">allowedHeaders:</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">Content-Type</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">Authorization</span></span><br></pre></td></tr></table></figure>

<h4 id="Exposed-Headers-Êö¥Èú≤ÁöÑËØ∑Ê±ÇÂ§¥"><a href="#Exposed-Headers-Êö¥Èú≤ÁöÑËØ∑Ê±ÇÂ§¥" class="headerlink" title="Exposed Headers (Êö¥Èú≤ÁöÑËØ∑Ê±ÇÂ§¥)"></a>Exposed Headers (Êö¥Èú≤ÁöÑËØ∑Ê±ÇÂ§¥)</h4><blockquote>
<p>To configure the headers that are sent in the response to a CORS request through the <code>Access-Control-Expose-Headers</code> header, include a list of strings for the <code>exposedHeaders</code> key in your configuration. None are exposed by default.</p>
</blockquote>
<p>Â¶ÇÊûúË¶ÅÈÖçÁΩÆ Âú®ÂØπ CORS ËØ∑Ê±ÇÁöÑÂìçÂ∫î‰∏≠ ÂåÖÂê´Âú® <code>Access-Control-Expose-Headers</code> header ÁöÑ header, Âú®‰Ω†ÁöÑÈÖçÁΩÆ‰∏≠‰ΩøÁî® <code>exposedHeaders</code> key Êù•ÂåÖÂê´‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÂàóË°®. ÈªòËÆ§ÊòØ‰∏çÊö¥Èú≤‰ªª‰Ωï headers</p>
<p>Example - CORS Configuration:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">server:</span></span><br><span class="line">        <span class="attr">cors:</span></span><br><span class="line">            <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">            <span class="attr">configurations:</span></span><br><span class="line">                <span class="attr">web:</span></span><br><span class="line">                    <span class="attr">exposedHeaders:</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">Content-Type</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">Authorization</span></span><br></pre></td></tr></table></figure>

<h4 id="Allow-Credentials-ÂÖÅËÆ∏-Credentials"><a href="#Allow-Credentials-ÂÖÅËÆ∏-Credentials" class="headerlink" title="Allow Credentials (ÂÖÅËÆ∏ Credentials)"></a>Allow Credentials (ÂÖÅËÆ∏ Credentials)</h4><p>Credentials : ËØÅ‰π¶</p>
<p>ÂØπ‰∫é CORS ËØ∑Ê±Ç, ÈªòËÆ§ÊòØÂÖÅËÆ∏ Credentials ÁöÑ</p>
<p>ÈÄöËøáËÆæÁΩÆ <code>allowCredentials</code> ‰∏∫ <code>false</code> Êù•‰∏çÂÖÅËÆ∏:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">server:</span></span><br><span class="line">        <span class="attr">cors:</span></span><br><span class="line">            <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">            <span class="attr">configurations:</span></span><br><span class="line">                <span class="attr">web:</span></span><br><span class="line">                    <span class="attr">allowedCredentials:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h4 id="Max-age-ÊúÄÂ§ß-age"><a href="#Max-age-ÊúÄÂ§ß-age" class="headerlink" title="Max age (ÊúÄÂ§ß age)"></a>Max age (ÊúÄÂ§ß age)</h4><p>ÂèØ‰ª•ÁºìÂ≠òÁöÑÈ¢ÑÊ£ÄÁöÑËØ∑Ê±ÇÈªòËÆ§ÊúÄÂ§ß age ‰∏∫ 30 ÂàÜÈíü</p>
<p>ÈÄöËøáÊåáÂÆöÁßíÊï∞Êù•‰øÆÊîπËøô‰∏™Ë°å‰∏∫:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">server:</span></span><br><span class="line">        <span class="attr">cors:</span></span><br><span class="line">            <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">            <span class="attr">configurations:</span></span><br><span class="line">                <span class="attr">web:</span></span><br><span class="line">                    <span class="attr">maxAge:</span> <span class="number">3600</span> <span class="comment"># 1 Â∞èÊó∂</span></span><br></pre></td></tr></table></figure>

<h4 id="Multiple-Header-Values-Â§ö‰∏™-Header-ÂÄº"><a href="#Multiple-Header-Values-Â§ö‰∏™-Header-ÂÄº" class="headerlink" title="Multiple Header Values (Â§ö‰∏™ Header ÂÄº)"></a>Multiple Header Values (Â§ö‰∏™ Header ÂÄº)</h4><p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ã, ÂΩì‰∏Ä‰∏™ header ÊúâÂ§ö‰∏™ÂÄºÊó∂, Â§ö‰∏™ header ‰ºöË¢´ÂèëÈÄÅ, ÊØè‰∏™ header Êúâ‰∏Ä‰∏™ÂÄº</p>
<p>ÂèØ‰ª•ËÆæÁΩÆÈÖçÁΩÆÈÄâÈ°π‰øÆÊîπËøô‰∏™Ë°å‰∏∫Êù•ÂèëÈÄÅ‰∏Ä‰∏™‰ΩøÁî®ÈÄóÂè∑ÂàÜÈöîÁöÑÂàóË°®‰Ωú‰∏∫ÂÄºÁöÑ header</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">server:</span></span><br><span class="line">        <span class="attr">cors:</span></span><br><span class="line">            <span class="attr">single-header:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h3 id="Securing-the-Server-with-HTTPS-‰ΩøÁî®-HTTPS-‰øùÊä§-Server"><a href="#Securing-the-Server-with-HTTPS-‰ΩøÁî®-HTTPS-‰øùÊä§-Server" class="headerlink" title="Securing the Server with HTTPS (‰ΩøÁî® HTTPS ‰øùÊä§ Server)"></a>Securing the Server with HTTPS (‰ΩøÁî® HTTPS ‰øùÊä§ Server)</h3><p>Micronaut Êèê‰æõÂºÄÁÆ±Âç≥Áî®ÁöÑ HTTPS ÊîØÊåÅ</p>
<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ã, HTTPS Ê≤°ÊúâÂºÄÂêØ, ÊâÄÊúâÊé•ÂèóÁöÑËØ∑Ê±ÇÈÉΩÊòØ‰ΩøÁî® HTTP</p>
<p>‰∏∫‰∫ÜÂºÄÂêØ HTTPS ÊîØÊåÅ, Ë¶Å‰øÆÊîπ‰Ω†ÁöÑÈÖçÁΩÆ</p>
<p>Example - HTTPS Configuration:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">server:</span></span><br><span class="line">        <span class="attr">ssl:</span></span><br><span class="line">            <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">            <span class="attr">buildSelfSigned:</span> <span class="literal">true</span>   <span class="string">//</span> <span class="string">Micronaut</span> <span class="string">will</span> <span class="string">create</span> <span class="string">a</span> <span class="string">self-signed</span> <span class="string">certificate</span></span><br></pre></td></tr></table></figure>

<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ã, ‰ΩøÁî® HTTPS ÊîØÊåÅÁöÑ Micronaut Âú®Á´ØÂè£ 8443 ÂêØÂä®, ÂèØ‰ª•ÈÄöËøáÂ±ûÊÄß <code>micronaut.server.ssl.port</code> Êù•‰øÆÊîπËøô‰∏™Á´ØÂè£Âè∑</p>
<h4 id="Using-a-valid-x509-certificate-‰ΩøÁî®‰∏Ä‰∏™ÊúâÊïàÁöÑ-x509-ËØÅ‰π¶"><a href="#Using-a-valid-x509-certificate-‰ΩøÁî®‰∏Ä‰∏™ÊúâÊïàÁöÑ-x509-ËØÅ‰π¶" class="headerlink" title="Using a valid x509 certificate (‰ΩøÁî®‰∏Ä‰∏™ÊúâÊïàÁöÑ x509 ËØÅ‰π¶)"></a>Using a valid x509 certificate (‰ΩøÁî®‰∏Ä‰∏™ÊúâÊïàÁöÑ x509 ËØÅ‰π¶)</h4><p>ÂèØ‰ª•ÈÖçÁΩÆ Micronaut ‰ΩøÁî®‰∏Ä‰∏™Â∑≤Â≠òÂú®ÁöÑÊúâÊïà x509 ËØÅ‰π¶</p>
<p>‰æãÂ¶Ç, ÈÄöËøá <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide/#io.micronaut.http.server.netty.configuration.NettyHttpServerConfiguration.Worker" >Let‚Äôs Encrypt<i class="fas fa-external-link-alt"></i></a> ÂàõÂª∫‰∫Ü‰∏Ä‰∏™ËØÅ‰π¶. ‰Ω†Â∞Ü‰ºöÈúÄË¶Å <code>server.crt</code> Âíå <code>server.key</code> Êñá‰ª∂, ÁÑ∂ÂêéÂ∞ÜÂÆÉ‰ª¨ËΩ¨Êç¢‰∏∫‰∏Ä‰∏™ PKCS #12 Êñá‰ª∂</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">openssl pkcs12 -<span class="built_in">export</span> \</span><br><span class="line">-<span class="keyword">in</span> server.crt \ <span class="comment"># 1</span></span><br><span class="line">-inkey server.key \ <span class="comment"># 2</span></span><br><span class="line">-out server.p12 \ <span class="comment"># 3</span></span><br><span class="line">-name someAlias \ <span class="comment"># 4</span></span><br><span class="line">-chain -CAfile ca.crt -caname root</span><br></pre></td></tr></table></figure>

<p><code>1</code> : The original <code>server.crt</code> file</p>
<p><code>2</code> : The original <code>server.key</code> file</p>
<p><code>3</code> : The <code>server.p12</code> file to create</p>
<p><code>4</code> : The alias for the certificate</p>
<p>Âú®ÂàõÂª∫ <code>server.p12</code> Êñá‰ª∂Êó∂, ÊúâÂøÖË¶ÅÂÆö‰πâ‰∏Ä‰∏™ÂØÜÁ†Å, Á®çÂêéÂú® Micronaut ‰∏≠‰ΩøÁî®ËØÅ‰π¶Êó∂Â∞Ü‰ºöÈúÄË¶ÅËøô‰∏™ÂØÜÁ†Å</p>
<p>ÁÑ∂Âêé, ‰øÆÊîπ‰Ω†ÁöÑÈÖçÁΩÆ:</p>
<p>Example - HTTPS Configuration:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">ssl:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">keyStore:</span></span><br><span class="line">            <span class="attr">path:</span> <span class="string">classpath:server.p12</span>  <span class="comment"># 1</span></span><br><span class="line">            <span class="attr">password:</span> <span class="string">mypassword</span>        <span class="comment"># 2</span></span><br><span class="line">            <span class="attr">type:</span> <span class="string">PKCS12</span></span><br></pre></td></tr></table></figure>

<p><code>1</code> : The <code>p12</code> file. It can also be referenced as <code>file:/path/to/the/file</code></p>
<p><code>2</code> : The password defined during the export</p>
<p>ÈÄöËøáËøô‰∏™ÈÖçÁΩÆ, Âú® Micronaut ÂêØÂä®‰πãÂêéÂπ∂ËÆøÈóÆ <code>https://localhost:8443</code>, ËøòÊòØÂèØ‰ª•ÁúãÂà∞ÊµèËßàÂô®ÁöÑ warning, ‰ΩÜÊòØÂ¶ÇÊûúÊàë‰ª¨Ê£ÄÊü•ËØÅ‰π¶, Êàë‰ª¨ÂèØ‰ª•Á°ÆËÆ§ÊòØÊàë‰ª¨ÂàöÂàöÂàõÂª∫ÁöÑËØÅ‰π¶</p>
<p>Êàë‰ª¨ÂèØ‰ª•ÈÄöËøáÊ∑ªÂä†‰∏Ä‰∏™ÂüüÂêçÂà´ÂêçÂà∞ <code>/etc/hosts</code> Êñá‰ª∂‰∏≠Êù•ÊµãËØïËøô‰∏™ËØÅ‰π¶ÂØπ‰∫éÊµèËßàÂô®ÊòØÊúâÊïàÁöÑ:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/hosts</span><br><span class="line">...</span><br><span class="line">127.0.0.1 my-domain.org</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="Using-Java-Keystore-‰ΩøÁî®-Java-Keystore-JKS"><a href="#Using-Java-Keystore-‰ΩøÁî®-Java-Keystore-JKS" class="headerlink" title="Using Java Keystore (‰ΩøÁî® Java Keystore (JKS))"></a>Using Java Keystore (‰ΩøÁî® Java Keystore (JKS))</h3><p>‰∏çÊé®Ëçê‰ΩøÁî®Ëøô‰∏™Á±ªÂûãÁöÑËØÅ‰π¶, Âõ†‰∏∫Ê†ºÂºèÊòØ‰∏ìÊúâÁöÑ</p>
<p>Êé®Ëçê‰ΩøÁî® PKCS12 Ê†ºÂºè</p>
<p>‰ΩÜÊòØ Micronaut ‰πüÊîØÊåÅ JKS</p>
<p>‰æãÂ≠êÁúÅÁï•</p>
<h4 id="Refreshing-x2F-Reloading-HTTPS-Certificates-Âà∑Êñ∞-x2F-ÈáçËΩΩ-HTTPS-ËØÅ‰π¶"><a href="#Refreshing-x2F-Reloading-HTTPS-Certificates-Âà∑Êñ∞-x2F-ÈáçËΩΩ-HTTPS-ËØÅ‰π¶" class="headerlink" title="Refreshing&#x2F;Reloading HTTPS Certificates (Âà∑Êñ∞&#x2F;ÈáçËΩΩ HTTPS ËØÅ‰π¶)"></a>Refreshing&#x2F;Reloading HTTPS Certificates (Âà∑Êñ∞&#x2F;ÈáçËΩΩ HTTPS ËØÅ‰π¶)</h4><p>Âú® HTTPS ËØÅ‰π¶ËøáÊúüÂêé‰øùÊåÅËØÅ‰π¶ÊúÄÊñ∞ÊòØ‰∏Ä‰∏™ÊåëÊàò</p>
<p>‰∏Ä‰∏™Â•ΩÁöÑËß£ÂÜ≥ÊñπÊ°àÊòØ <a class="link"   target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Automated_Certificate_Management_Environment" >Automated Certificate Management Environment<i class="fas fa-external-link-alt"></i></a> (ACME)</p>
<p><a class="link"   target="_blank" rel="noopener" href="https://micronaut-projects.github.io/micronaut-acme/latest/guide/index.html" >Micronaut ACME Module<i class="fas fa-external-link-alt"></i></a> ÊîØÊåÅËá™Âä®Âà∑Êñ∞Êù•Ëá™ËØÅ‰π¶È¢ÅÂèëÊú∫ÊûÑÁöÑËØÅ‰π¶</p>
<p>Â¶ÇÊûú‰∏çËÉΩ‰ΩøÁî®ËØÅ‰π¶ËÆ§ËØÅÊú∫ÊûÑ, ÈÇ£‰πà‰Ω†ÈúÄË¶Å‰ªéÁ°¨Áõò‰∏≠Êõ¥Êñ∞ËØÅ‰π¶, ÁÑ∂Âêé‰Ω†Ë¶Å ‰ΩøÁî® Micronaut ÊîØÊåÅÁöÑ ÂåÖÂê´‰Ω†ÁöÑ HTTPS ÈÖçÁΩÆÂÆö‰πâÁöÑ keysÁöÑ <code>Application Events</code> Êù•Ëß¶Âèë‰∏Ä‰∏™ <code>RefreshEvent</code></p>
<p>Micronaut Â∞Ü‰ºö‰ªéÁ°¨ÁõòÈáçÊñ∞Âä†ËΩΩËØÅ‰π¶Âπ∂Â∫îÁî®Êñ∞ÁöÑÈÖçÁΩÆÂà∞ server ‰∏≠</p>
<p>‰Ω†ËøòÂèØ‰ª•‰ΩøÁî® <code>Refresh Management Endpoint</code>, ‰ΩÜËøôÂè™Âú®ËØÅ‰π¶ÁöÑÁ°¨ÁõòÁâ©ÁêÜÂú∞ÂùÄÊîπÂèòÁöÑÊó∂ÂÄô‰ΩøÁî®</p>
<p>Â¶Ç‰∏ã‰æãÂ≠êÂ∞Ü‰ºö‰ªéÁ°¨Áõò‰∏äÈáçÊñ∞Âä†ËΩΩ‰πãÂâçÂàóÂá∫ÁöÑ HTTPS ÈÖçÁΩÆ, Âπ∂Â∞ÜÂÖ∂Â∫îÁî®Âà∞ËøõÊù•ÁöÑËØ∑Ê±Ç</p>
<p>Ëøô‰∏™‰ª£Á†ÅÂ∫îËØ•ËøêË°åÂú®‰∏Ä‰∏™Ë∞ÉÂ∫¶‰ªªÂä°‰∏≠, Êù•Âú®ËØÅ‰π¶ÊîπÂèòÊó∂ÊãâÂèñËØÅ‰π¶</p>
<p>Example - Manually Refreshing HTTPS configuration:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jakarta.inject.Inject</span><br><span class="line"><span class="keyword">import</span> io.micronaut.context.evetn.ApplicationEventPublisher</span><br><span class="line"><span class="keyword">import</span> io.micronaut.runtime.context.scope.refresh.RefreshEvent</span><br><span class="line"></span><br><span class="line"><span class="meta">@Inject</span> ApplicationEventPublisher&lt;RefreshEvent&gt; eventPublisher</span><br><span class="line"></span><br><span class="line">eventPublisher.publishEvent(<span class="keyword">new</span> RefreshEvent(</span><br><span class="line">    Collections.singletonMap(<span class="string">&quot;micronaut.ssl&quot;</span>, <span class="string">&quot;*&quot;</span>)</span><br><span class="line">))</span><br></pre></td></tr></table></figure>

<h3 id="Enabling-HTTP-and-HTTPS-ÂêåÊó∂ÂºÄÂêØ-HTTP-Âíå-HTTPS"><a href="#Enabling-HTTP-and-HTTPS-ÂêåÊó∂ÂºÄÂêØ-HTTP-Âíå-HTTPS" class="headerlink" title="Enabling HTTP and HTTPS (ÂêåÊó∂ÂºÄÂêØ HTTP Âíå HTTPS)"></a>Enabling HTTP and HTTPS (ÂêåÊó∂ÂºÄÂêØ HTTP Âíå HTTPS)</h3><p>Micronaut ÊîØÊåÅÂêåÊó∂ÁªëÂÆö HTTP Âíå HTTPS</p>
<p>Ë¶ÅÂºÄÂêØÂ§öÂçèËÆÆÊîØÊåÅ, ‰øÆÊîπ‰Ω†ÁöÑÈÖçÁΩÆ:</p>
<p>Example - Dual Protocol Configuration:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">server:</span></span><br><span class="line">        <span class="attr">ssl:</span></span><br><span class="line">            <span class="attr">enabled:</span> <span class="literal">true</span>               <span class="comment"># You must configure SSL for HTTPS to work</span></span><br><span class="line">            <span class="attr">build-self-singed:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">dual-protocol:</span> <span class="literal">true</span>             <span class="comment"># Enabling both HTTP and HTTPS is an opt-in feature - setting the `dualProtocol` flag enbales it. By default Micronaut only enables one</span></span><br></pre></td></tr></table></figure>

<p>ËøòÂèØ‰ª•Ëá™Âä®Â∞ÜÊâÄÊúâ HTTP ËØ∑Ê±ÇÈáçÂÆöÂêëÂà∞ HTTPS</p>
<p>Example - Enable HTTP to HTTPS Redirects:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">server:</span></span><br><span class="line">        <span class="attr">ssl:</span></span><br><span class="line">            <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">            <span class="attr">build-self-singed:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">dual-protocol:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">http-to-https-redirect:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h3 id="Enabling-Access-Logger-ÂºÄÂêØËÆøÈóÆÊó•Âøó"><a href="#Enabling-Access-Logger-ÂºÄÂêØËÆøÈóÆÊó•Âøó" class="headerlink" title="Enabling Access Logger (ÂºÄÂêØËÆøÈóÆÊó•Âøó)"></a>Enabling Access Logger (ÂºÄÂêØËÆøÈóÆÊó•Âøó)</h3><p>ÂèØ‰ª•‰∏∫ HTTP server ÂºÄÂêØ‰∏Ä‰∏™ËÆøÈóÆÊó•ÂøóÂô® (access logger)</p>
<p>Âú® <code>application.yml</code> ‰∏≠ÂºÄÂêØÂíåÈÖçÁΩÆ access logger:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">server:</span></span><br><span class="line">        <span class="attr">netty:</span></span><br><span class="line">            <span class="attr">access-logger:</span></span><br><span class="line">                <span class="attr">enabled:</span> <span class="literal">true</span>                   <span class="comment"># Enables the access logger</span></span><br><span class="line">                <span class="attr">logger-name:</span> <span class="string">my-access-logger</span>   <span class="comment"># A logger name, optional, default is `HTTP_ACCESS_LOGGER`</span></span><br><span class="line">                <span class="attr">log-format:</span> <span class="string">common</span>              <span class="comment"># A log format, optional, default is Common Log Format</span></span><br></pre></td></tr></table></figure>

<h4 id="Filtering-access-logs-ËøáÊª§ËÆøÈóÆÊó•Âøó"><a href="#Filtering-access-logs-ËøáÊª§ËÆøÈóÆÊó•Âøó" class="headerlink" title="Filtering access logs (ËøáÊª§ËÆøÈóÆÊó•Âøó)"></a>Filtering access logs (ËøáÊª§ËÆøÈóÆÊó•Âøó)</h4><p>Â¶ÇÊûú‰Ω†‰∏çÊÉ≥Ë¶ÅËÆ∞ÂΩïËØÅ‰π¶Ë∑ØÂæÑËÆøÈóÆÊó•Âøó, ‰Ω†ÂèØ‰ª•Âú®ÈÖçÁΩÆ‰∏≠Â£∞Êòé‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèËøáÊª§Âô®:</p>
<p>Example - Filtering the access logs:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">micronaut:</span></span><br><span class="line">    <span class="attr">server:</span></span><br><span class="line">        <span class="attr">netty:</span></span><br><span class="line">            <span class="attr">access-logger:</span></span><br><span class="line">                <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">                <span class="attr">logger-name:</span> <span class="string">my-access-logger</span></span><br><span class="line">                <span class="attr">log-format:</span> <span class="string">common</span></span><br><span class="line">                <span class="attr">exclusions:</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="string">/health</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="string">/path/.+</span></span><br></pre></td></tr></table></figure>

<h4 id="Logback-Configuration-Logback-ÈÖçÁΩÆ"><a href="#Logback-Configuration-Logback-ÈÖçÁΩÆ" class="headerlink" title="Logback Configuration (Logback ÈÖçÁΩÆ)"></a>Logback Configuration (Logback ÈÖçÁΩÆ)</h4><p>Èô§‰∫ÜÂºÄÂêØ access logger, ‰Ω†ËøòÂøÖÈ°ª‰∏∫ ÊåáÂÆöÁöÑloggerÂêçÁß∞ Êàñ ÈªòËÆ§ÁöÑloggerÂêçÁß∞ Ê∑ªÂä†‰∏Ä‰∏™ logger</p>
<p>‰æãÂ¶ÇÂú® LogBack ‰∏≠‰ΩøÁî®ÈªòËÆ§ loggerÂêçÁß∞:</p>
<p>Example - Logback configuration:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">appender</span></span></span><br><span class="line"><span class="tag">    <span class="attr">name</span>=<span class="string">&quot;httpAccessLogAppender&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">append</span>&gt;</span>true<span class="tag">&lt;/<span class="name">append</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">file</span>&gt;</span>log/http-access.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            log/http-access-%d&#123;yyyy-MM-dd&#125;.log</span><br><span class="line">        <span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">            7</span><br><span class="line">        <span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>$msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">immediateFlush</span>&gt;</span>true<span class="tag">&lt;/<span class="name">immediateFlush</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;HTTP_ACCESS_LOGGER&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span> <span class="attr">level</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;httpAccessLogAppender&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="Log-Format-Êó•ÂøóÊ†ºÂºè"><a href="#Log-Format-Êó•ÂøóÊ†ºÂºè" class="headerlink" title="Log Format (Êó•ÂøóÊ†ºÂºè)"></a>Log Format (Êó•ÂøóÊ†ºÂºè)</h4><p>ËØ≠Ê≥ïÊòØÂü∫‰∫é <a class="link"   target="_blank" rel="noopener" href="https://httpd.apache.org/docs/current/mod/mod_log_config.html" >Apache httpd log format<i class="fas fa-external-link-alt"></i></a> ÁöÑ</p>
<p>ÂèØ‰ª•‰ΩøÁî®Â¶Ç‰∏ãÈÄöÁî®ËØ≠Ê≥ïÊ®°ÊùøÁöÑÂà´Âêç:</p>
<ul>
<li><code>common</code>  : <a class="link"   target="_blank" rel="noopener" href="https://httpd.apache.org/docs/2.4/logs.html#common" >Common Log Format<i class="fas fa-external-link-alt"></i></a> (CLF) ÁöÑ <code>%h %l %u %t &quot;%r&quot; %s %b</code></li>
<li><code>combined</code> : <a class="link"   target="_blank" rel="noopener" href="https://httpd.apache.org/docs/2.4/logs.html#combined" >Combined Log Format<i class="fas fa-external-link-alt"></i></a> ÁöÑ <code>%h %l %u %t &quot;%r&quot; %s %b &quot;%&#123;Referer&#125;i&quot; &quot;%&#123;User-Agent&#125;i&quot;</code></li>
</ul>
<p>CLF ‰æãÂ≠ê: <code>127.0.0.1 - frank [10/Oct/2000:13:55:36 -0700] &quot;GET /apache_pb.gif HTTP/1.0&quot; 200 2326</code></p>
<p>Combined Log Format ‰æãÂ≠ê: <code>127.0.0.1 - frank [10/Oct/2000:13:55:36 -0700] &quot;GET /apache_pb.gif HTTP/1.0&quot; 200 2326 &quot;http://www.example.com/start.html&quot; &quot;Mozilla/4.08 [en] (Win98; I ;Nav)&quot;</code></p>
<h3 id="Starting-Secondary-Servers-ÂºÄÂêØ‰∫åÁ∫ßÊúçÂä°"><a href="#Starting-Secondary-Servers-ÂºÄÂêØ‰∫åÁ∫ßÊúçÂä°" class="headerlink" title="Starting Secondary Servers (ÂºÄÂêØ‰∫åÁ∫ßÊúçÂä°)"></a>Starting Secondary Servers (ÂºÄÂêØ‰∫åÁ∫ßÊúçÂä°)</h3><p>Micronaut ÊîØÊåÅ‰ΩøÁî® <code>NettyEmbeddedServerFactory</code> Êé•Âè£ÁºñÁ®ãÂºèÂàõÂª∫È¢ùÂ§ñÁöÑ Netty servers</p>
<p>ËøôÂú®‰Ω†ÈúÄË¶ÅÈÄöËøá‰∏çÂêåÁöÑÁ´ØÂè£ÂºÄÊîæ‰∏çÂêåÁöÑ servers, Âπ∂ÂÖ∑ÊúâÂèØËÉΩ‰∏çÁõ∏ÂêåÁöÑÈÖçÁΩÆ (HTTPS, Á∫øÁ®ãËµÑÊ∫êÁ≠âÁ≠â)</p>
<p>‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Â±ïÁ§∫‰∫ÜÊÄéÊ†∑ÂÆö‰πâ‰∏Ä‰∏™ Factory Bean ‰ΩøÁî®‰∏Ä‰∏™ÁºñÁ®ãÂºèÂàõÂª∫ÁöÑÈÖçÁΩÆÊù•ÂºÄÂêØ‰∏Ä‰∏™È¢ùÂ§ñÁöÑ server:</p>
<p>Example - Programmatically creating Secondary servers:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.context.annotation.Bean</span><br><span class="line"><span class="keyword">import</span> io.micronaut.context.annotation.Context</span><br><span class="line"><span class="keyword">import</span> io.micronaut.context.annotation.Factory</span><br><span class="line"><span class="keyword">import</span> io.micronaut.context.annotation.Requires</span><br><span class="line"><span class="keyword">import</span> io.micronaut.context.env.Environment</span><br><span class="line"><span class="keyword">import</span> io.micronaut.core.util.StringUtils</span><br><span class="line"><span class="keyword">import</span> io.micronaut.discovery.ServiceInstanceList</span><br><span class="line"><span class="keyword">import</span> io.micronaut.discovery.StaticServiceInstanceList</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.server.netty.NettyEmbeddedServer</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.server.netty.NettyEmbeddedServerFactory</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.server.netty.configuration.NettyHttpServerConfiguration</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.ssl.ServerSslConfiguration</span><br><span class="line"><span class="keyword">import</span> jakarta.inject.Named</span><br><span class="line"></span><br><span class="line"><span class="meta">@Factory</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SecondaryNettyServer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> String SERVER_ID = <span class="string">&#x27;another&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Named</span>(SERVER_ID)</span><br><span class="line">    <span class="meta">@Context</span></span><br><span class="line">    <span class="meta">@Bean</span>(preDestory = <span class="string">&quot;stop&quot;</span>)  <span class="comment">// 2</span></span><br><span class="line">    <span class="meta">@Requires</span>(beans = Environment.<span class="keyword">class</span>)</span><br><span class="line">    NettyEmbeddedServer nettyEmbeddedServer(NettyEmbeddedServerFactory serverFactory) &#123;     <span class="comment">// 3</span></span><br><span class="line">        <span class="keyword">def</span> configuration = <span class="keyword">new</span> NettyHttpServerConfiguration()  <span class="comment">// 4</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> sslConfiguration = <span class="keyword">new</span> ServerSslConfiguration()     <span class="comment">// 5</span></span><br><span class="line">        sslConfiguration.setBuildSelfSigned(<span class="literal">true</span>)</span><br><span class="line">        sslConfiguration.enabled = <span class="literal">true</span></span><br><span class="line">        sslConfiguration.prot = <span class="number">-1</span> <span class="comment">// random port</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// configure server programmatically</span></span><br><span class="line">        <span class="keyword">final</span> NettyEmbeddedServer embeddedServer = serverFactory.build(configuration, sslConfiguration)     <span class="comment">// 6</span></span><br><span class="line">        embeddedServer.start()  <span class="comment">// 7</span></span><br><span class="line">        <span class="keyword">return</span> embeddedServer   <span class="comment">// 8</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span>   <span class="comment">// 9</span></span><br><span class="line">    ServiceInstanceList serviceInstanceList(</span><br><span class="line">        <span class="meta">@Named</span>(SERVER_ID) NettyEmbeddedServer nettyEmbeddedServer</span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> StaticServiceInstanceList(</span><br><span class="line">            SERVER_ID,</span><br><span class="line">            [ nettyEmbeddedServer.URI ]</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>2</code> : Define a <code>@Context</code> scoped bean using the server name and including <code>preDestroy=&quot;stop&quot;</code> to ensure the server is shutdown when the context is closed</p>
<p><code>3</code> : Ineject the <code>NettyEmbeddedServerFactory</code> into a Factory Bean</p>
<p><code>4</code> : Programmatically craete the <code>NettyHttpServerConfiguration</code></p>
<p><code>5</code> : Optionally create the <code>ServerSslConfiguration</code></p>
<p><code>6</code> : Use the <code>build</code> method to build the server instance</p>
<p><code>7</code> : Start the server with the <code>start</code> methdo</p>
<p><code>8</code> : Return the server instance as a managed bean</p>
<p><code>9</code> : Optionally define an instance of <code>ServiceInstanceList</code> if you wish to inject <code>HTTP Clients</code> by the server name</p>
<p>Êúâ‰∫ÜËøô‰∏™Á±ª, ÂΩì <code>ApplicationContext</code> ÂêØÂä®Êó∂, server ‰πü‰ºö‰ΩøÁî®ÈÄÇÂΩìÁöÑÈÖçÁΩÆÂêØÂä®</p>
<p>Âõ†‰∏∫Âú®Á¨¨ <code>9</code> Ê≠•‰∏≠ÂÆö‰πâ‰∫Ü <code>ServiceInstanceList</code>, ‰Ω†ÂèØ‰ª•Âú®‰Ω†ÁöÑÊµãËØï‰∏≠Ê≥®ÂÖ•‰∏Ä‰∏™ client Êù•ÊµãËØïËøô‰∏™‰∫åÁ∫ß server:</p>
<p>Example - Inject the server or client:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Client</span>(path = <span class="string">&quot;/&quot;</span>, id = SecondaryNettyServer.SERVER_ID)    <span class="comment">// 1</span></span><br><span class="line"><span class="meta">@Inject</span></span><br><span class="line">HttpClient httpClient</span><br><span class="line"></span><br><span class="line"><span class="meta">@Named</span>(SecondaryNettyServer.SERVER_ID)                      <span class="comment">// 2</span></span><br><span class="line">EmbeddedServer embeddedServer</span><br></pre></td></tr></table></figure>

<p><code>1</code> : Use the server name to inject a client by ID</p>
<p><code>2</code> : Use the <code>@Named</code> annotation as a qualifier to inject the embedded server instance</p>
<h2 id="Server-Side-View-Rendering-ÊúçÂä°Âô®Á´ØËßÜÂõæÊ∏≤Êüì"><a href="#Server-Side-View-Rendering-ÊúçÂä°Âô®Á´ØËßÜÂõæÊ∏≤Êüì" class="headerlink" title="Server Side View Rendering (ÊúçÂä°Âô®Á´ØËßÜÂõæÊ∏≤Êüì)"></a>Server Side View Rendering (ÊúçÂä°Âô®Á´ØËßÜÂõæÊ∏≤Êüì)</h2><p>ÂèÇËÄÉ <a class="link"   target="_blank" rel="noopener" href="https://micronaut-projects.github.io/micronaut-views/latest/guide" >Micronaut Views<i class="fas fa-external-link-alt"></i></a> ÊñáÊ°£</p>
<h2 id="OpenAPI-x2F-Swagger-Support-OpenAPI-x2F-Swagger-ÊîØÊåÅ"><a href="#OpenAPI-x2F-Swagger-Support-OpenAPI-x2F-Swagger-ÊîØÊåÅ" class="headerlink" title="OpenAPI &#x2F; Swagger Support (OpenAPI &#x2F; Swagger ÊîØÊåÅ)"></a>OpenAPI &#x2F; Swagger Support (OpenAPI &#x2F; Swagger ÊîØÊåÅ)</h2><p>ÂèÇËÄÉ<a class="link"   target="_blank" rel="noopener" href="https://micronaut-projects.github.io/micronaut-openapi/latest/guide/index.html" >ÊñáÊ°£<i class="fas fa-external-link-alt"></i></a></p>
<h2 id="GraphQL-Support-GraphQL-ÊîØÊåÅ"><a href="#GraphQL-Support-GraphQL-ÊîØÊåÅ" class="headerlink" title="GraphQL Support (GraphQL ÊîØÊåÅ)"></a>GraphQL Support (GraphQL ÊîØÊåÅ)</h2><p>ÂèÇËÄÉ<a class="link"   target="_blank" rel="noopener" href="https://micronaut-projects.github.io/micronaut-graphql/latest/guide" >ÊñáÊ°£<i class="fas fa-external-link-alt"></i></a></p>

        </div>

        
            <div class="post-copyright-info">
                <div class="article-copyright-info-container">
    <ul>
        <li>Êú¨ÊñáÊ†áÈ¢òÔºöMicronaut ‰∏≠ÊñáÊñáÊ°£ The HTTP Server</li>
        <li>Êú¨Êñá‰ΩúËÄÖÔºöÊûóÂ®ÅÁæΩ</li>
        <li>ÂàõÂª∫Êó∂Èó¥Ôºö2022-04-29 09:43:17</li>
        <li>
            Êú¨ÊñáÈìæÊé•Ôºöhttps://linweiyu21.github.io/micronaut/micronaut-the-http-server/
        </li>
        <li>
            ÁâàÊùÉÂ£∞ÊòéÔºöÊú¨ÂçöÂÆ¢ÊâÄÊúâÊñáÁ´†Èô§ÁâπÂà´Â£∞ÊòéÂ§ñÔºåÂùáÈááÁî® <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> ËÆ∏ÂèØÂçèËÆÆ„ÄÇËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§ÑÔºÅ
        </li>
    </ul>
</div>

            </div>
        

        
            <ul class="post-tags-box">
                
                    <li class="tag-item">
                        <a href="/tags/Micronaut/">#Micronaut</a>&nbsp;
                    </li>
                
                    <li class="tag-item">
                        <a href="/tags/Groovy/">#Groovy</a>&nbsp;
                    </li>
                
                    <li class="tag-item">
                        <a href="/tags/%E4%B8%AD%E6%96%87/">#‰∏≠Êñá</a>&nbsp;
                    </li>
                
            </ul>
        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/micronaut/micronaut-the-http-client/"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Micronaut ‰∏≠ÊñáÊñáÊ°£ The HTTP Client</span>
                                <span class="post-nav-item">‰∏ä‰∏ÄÁØá</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/micronaut/micronaut-aspect-oriented-programming/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Micronaut ‰∏≠ÊñáÊñáÊ°£ Aspect Oriented Programming</span>
                                <span class="post-nav-item">‰∏ã‰∏ÄÁØá</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
            <div class="comment-container">
                <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fas fa-comments">&nbsp;ËØÑËÆ∫</i>
    </div>
    

        
            
    <div class="valine-container">
        <script data-pjax
                src="//cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js"></script>
        <div id="vcomments"></div>
        <script data-pjax>
            function loadValine() {
                new Valine({
                    el: '#vcomments',
                    appId: '8xWQ0WFbKUNN4h8ixIO12etk-gzGzoHsz',
                    appKey: '7cLjTvkIsF6aIuIVSd0um89m',
                    meta: ['nick', 'mail', 'link'],
                    avatar: 'wavatar',
                    enableQQ: true,
                    placeholder: 'ËØ∑ÂºÄÂßã‰Ω†ÁöÑË°®Êºî',
                    lang: 'zh-CN'.toLowerCase()
                });

                function getAuthor(language) {
                    switch (language) {
                        case 'en':
                            return 'Author';
                        case 'zh-CN':
                            return 'Âçö‰∏ª';
                        default:
                            return 'Master';
                    }
                }

                // Add "Author" identify
                const getValineDomTimer = setInterval(() => {
                    const vcards = document.querySelectorAll('#vcomments .vcards .vcard');
                    if (vcards.length > 0) {
                        let author = 'ÊûóÂ®ÅÁæΩ';

                        if (author) {
                            for (let vcard of vcards) {
                                const vnick_dom = vcard.querySelector('.vhead .vnick');
                                const vnick = vnick_dom.innerHTML;
                                if (vnick === author) {
                                    vnick_dom.innerHTML = `${vnick} <span class="author">${getAuthor(KEEP.hexo_config.language)}</span>`
                                }
                            }
                        }
                        clearInterval(getValineDomTimer);
                    } else {
                        clearInterval(getValineDomTimer);
                    }
                }, 2000);
            }

            if ('true') {
                const loadValineTimeout = setTimeout(() => {
                    loadValine();
                    clearTimeout(loadValineTimeout);
                }, 1000);
            } else {
                window.addEventListener('DOMContentLoaded', loadValine);
            }
        </script>
    </div>



        
    
</div>

            </div>
        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
            2022&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">ÊûóÂ®ÅÁæΩ</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv">
                        ËÆøÈóÆ‰∫∫Êï∞&nbsp;<span id="busuanzi_value_site_uv"></span>&ensp;
                    </span>
                
                
                    <span id="busuanzi_container_site_pv">
                        ÊÄªËÆøÈóÆÈáè&nbsp;<span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            Áî± <a target="_blank" href="https://hexo.io">Hexo</a> È©±Âä®&nbsp;|&nbsp;‰∏ªÈ¢ò&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.5</a>
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fas fa-comment"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#The-HTTP-Server"><span class="nav-number">1.</span> <span class="nav-text">The HTTP Server</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Running-the-Embedded-Server-%E8%BF%90%E8%A1%8C%E5%86%85%E5%B5%8C%E7%9A%84-Server"><span class="nav-number">1.1.</span> <span class="nav-text">Running the Embedded Server (ËøêË°åÂÜÖÂµåÁöÑ Server)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Running-Server-on-a-Specific-Port-%E5%9C%A8%E6%8C%87%E5%AE%9A%E7%AB%AF%E5%8F%A3%E4%B8%8A%E8%BF%90%E8%A1%8C-Server"><span class="nav-number">1.2.</span> <span class="nav-text">Running Server on a Specific Port (Âú®ÊåáÂÆöÁ´ØÂè£‰∏äËøêË°å Server)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP-Routing-HTTP-%E8%B7%AF%E7%94%B1"><span class="nav-number">1.3.</span> <span class="nav-text">HTTP Routing (HTTP Ë∑ØÁî±)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#URI-Paths-URI-%E8%B7%AF%E5%BE%84"><span class="nav-number">1.3.1.</span> <span class="nav-text">URI Paths (URI Ë∑ØÂæÑ)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#URI-Path-Variables-URI-%E8%B7%AF%E5%BE%84%E5%8F%98%E9%87%8F"><span class="nav-number">1.3.2.</span> <span class="nav-text">URI Path Variables (URI Ë∑ØÂæÑÂèòÈáè)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#URI-Reserved-Character-Matching-URI-%E4%BF%9D%E7%95%99%E5%AD%97%E7%AC%A6%E5%8C%B9%E9%85%8D"><span class="nav-number">1.3.3.</span> <span class="nav-text">URI Reserved Character Matching (URI ‰øùÁïôÂ≠óÁ¨¶ÂåπÈÖç)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Routing-Annotations-%E8%B7%AF%E7%94%B1%E6%B3%A8%E8%A7%A3"><span class="nav-number">1.3.4.</span> <span class="nav-text">Routing Annotations (Ë∑ØÁî±Ê≥®Ëß£)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Multiple-URIs-%E5%A4%9A%E4%B8%AA-URI"><span class="nav-number">1.3.5.</span> <span class="nav-text">Multiple URIs (Â§ö‰∏™ URI)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Building-Routes-Programmatically-%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%9C%B0%E6%9E%84%E5%BB%BA%E8%B7%AF%E7%94%B1"><span class="nav-number">1.3.6.</span> <span class="nav-text">Building Routes Programmatically (ÁºñÁ®ãÂºèÂú∞ÊûÑÂª∫Ë∑ØÁî±)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Route-Compile-Time-Validation-%E8%B7%AF%E7%94%B1%E7%BC%96%E8%AF%91%E6%97%B6%E6%A0%A1%E9%AA%8C"><span class="nav-number">1.3.7.</span> <span class="nav-text">Route Compile-Time Validation (Ë∑ØÁî±ÁºñËØëÊó∂Ê†°È™å)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Routing-non-standard-HTTP-methods-%E8%B7%AF%E7%94%B1%E9%9D%9E%E6%A0%87%E5%87%86-HTTP-%E6%96%B9%E6%B3%95"><span class="nav-number">1.3.8.</span> <span class="nav-text">Routing non-standard HTTP methods (Ë∑ØÁî±ÈùûÊ†áÂáÜ HTTP ÊñπÊ≥ï)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Simple-Request-Binding-%E7%AE%80%E5%8D%95%E8%AF%B7%E6%B1%82%E7%BB%91%E5%AE%9A"><span class="nav-number">1.4.</span> <span class="nav-text">Simple Request Binding (ÁÆÄÂçïËØ∑Ê±ÇÁªëÂÆö)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Binding-Annotations-%E7%BB%91%E5%AE%9A%E6%B3%A8%E8%A7%A3"><span class="nav-number">1.4.1.</span> <span class="nav-text">Binding Annotations (ÁªëÂÆöÊ≥®Ëß£)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Stream-Support-Stream-%E6%94%AF%E6%8C%81"><span class="nav-number">1.4.2.</span> <span class="nav-text">Stream Support (Stream ÊîØÊåÅ)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Binding-from-Multiple-Query-values-%E4%BD%BF%E7%94%A8%E5%A4%9A%E4%B8%AA%E8%AF%B7%E6%B1%82%E5%80%BC%E8%BF%9B%E8%A1%8C%E7%BB%91%E5%AE%9A"><span class="nav-number">1.4.3.</span> <span class="nav-text">Binding from Multiple Query values (‰ΩøÁî®Â§ö‰∏™ËØ∑Ê±ÇÂÄºËøõË°åÁªëÂÆö)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Binding-from-Multiple-Bindable-values-%E4%BB%8E%E5%A4%9A%E4%B8%AA%E5%8F%AF%E7%BB%91%E5%AE%9A%E5%80%BC%E4%B8%AD%E8%BF%9B%E8%A1%8C%E7%BB%91%E5%AE%9A"><span class="nav-number">1.4.4.</span> <span class="nav-text">Binding from Multiple Bindable values (‰ªéÂ§ö‰∏™ÂèØÁªëÂÆöÂÄº‰∏≠ËøõË°åÁªëÂÆö)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Bindable-Types-%E5%8F%AF%E7%BB%91%E5%AE%9A%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.4.5.</span> <span class="nav-text">Bindable Types (ÂèØÁªëÂÆöÁ±ªÂûã)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Type-Based-Binding-Parameters-%E5%9F%BA%E4%BA%8E%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8F%82%E6%95%B0%E7%BB%91%E5%AE%9A"><span class="nav-number">1.4.6.</span> <span class="nav-text">Type-Based Binding Parameters (Âü∫‰∫éÁ±ªÂûãÁöÑÂèÇÊï∞ÁªëÂÆö)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Variable-resolution-%E5%8F%98%E9%87%8F%E8%A7%A3%E6%9E%90"><span class="nav-number">1.4.7.</span> <span class="nav-text">Variable resolution (ÂèòÈáèËß£Êûê)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Custom-Argument-Binding-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%82%E6%95%B0%E7%BB%91%E5%AE%9A"><span class="nav-number">1.5.</span> <span class="nav-text">Custom Argument Binding (Ëá™ÂÆö‰πâÂèÇÊï∞ÁªëÂÆö)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#AnnotatedRequestArgumentBinder-%E6%B3%A8%E8%A7%A3%E4%BF%AE%E9%A5%B0%E7%9A%84%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E7%BB%91%E5%AE%9A"><span class="nav-number">1.5.1.</span> <span class="nav-text">AnnotatedRequestArgumentBinder (Ê≥®Ëß£‰øÆÈ•∞ÁöÑËØ∑Ê±ÇÂèÇÊï∞ÁªëÂÆö)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TypedRequestArgumentBinder-%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E7%B1%BB%E5%9E%8B%E7%BB%91%E5%AE%9A"><span class="nav-number">1.5.2.</span> <span class="nav-text">TypedRequestArgumentBinder (ËØ∑Ê±ÇÂèÇÊï∞Á±ªÂûãÁªëÂÆö)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Host-Resolution-Host-%E8%A7%A3%E6%9E%90"><span class="nav-number">1.6.</span> <span class="nav-text">Host Resolution (Host Ëß£Êûê)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Locale-Resolution-%E6%9C%AC%E5%9C%B0%E5%8C%96%E8%A7%A3%E6%9E%90"><span class="nav-number">1.7.</span> <span class="nav-text">Locale Resolution (Êú¨Âú∞ÂåñËß£Êûê)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Client-IP-Address-%E5%AE%A2%E6%88%B7%E7%AB%AF-IP-%E5%9C%B0%E5%9D%80"><span class="nav-number">1.8.</span> <span class="nav-text">Client IP Address (ÂÆ¢Êà∑Á´Ø IP Âú∞ÂùÄ)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#The-HttpRequest-and-HttpResponse-HttpRequest-%E5%92%8C-HttpResponse"><span class="nav-number">1.9.</span> <span class="nav-text">The HttpRequest and HttpResponse (HttpRequest Âíå HttpResponse)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Response-Status-%E5%93%8D%E5%BA%94%E7%8A%B6%E6%80%81"><span class="nav-number">1.10.</span> <span class="nav-text">Response Status (ÂìçÂ∫îÁä∂ÊÄÅ)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Response-Content-Type-%E5%93%8D%E5%BA%94%E7%9A%84-Content-Type"><span class="nav-number">1.11.</span> <span class="nav-text">Response Content-Type (ÂìçÂ∫îÁöÑ Content-Type)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Accepted-Request-Content-Type-%E5%8F%AF%E6%8E%A5%E5%8F%97%E7%9A%84%E8%AF%B7%E6%B1%82-Content-Type"><span class="nav-number">1.12.</span> <span class="nav-text">Accepted Request Content-Type (ÂèØÊé•ÂèóÁöÑËØ∑Ê±Ç Content-Type)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Customing-Processed-Content-Types-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%A4%84%E7%90%86%E7%9A%84-Content-Type"><span class="nav-number">1.12.1.</span> <span class="nav-text">Customing Processed Content Types (Ëá™ÂÆö‰πâÂ§ÑÁêÜÁöÑ Content-Type)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Reactive-HTTP-Request-Processing-%E5%93%8D%E5%BA%94%E5%BC%8F-HTTP-%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86"><span class="nav-number">1.13.</span> <span class="nav-text">Reactive HTTP Request Processing (ÂìçÂ∫îÂºè HTTP ËØ∑Ê±ÇÂ§ÑÁêÜ)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-the-Body-Annotation-%E4%BD%BF%E7%94%A8-Body-%E6%B3%A8%E8%A7%A3"><span class="nav-number">1.13.1.</span> <span class="nav-text">Using the @Body Annotation (‰ΩøÁî® @Body Ê≥®Ëß£)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Reactive-Responses-%E5%93%8D%E5%BA%94%E5%BC%8F%E5%93%8D%E5%BA%94"><span class="nav-number">1.13.2.</span> <span class="nav-text">Reactive Responses (ÂìçÂ∫îÂºèÂìçÂ∫î)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSON-Binding-with-Jackson-%E4%BD%BF%E7%94%A8-Jackson-%E8%BF%9B%E8%A1%8C-JSON-%E7%BB%91%E5%AE%9A"><span class="nav-number">1.14.</span> <span class="nav-text">JSON Binding with Jackson (‰ΩøÁî® Jackson ËøõË°å JSON ÁªëÂÆö)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Binding-using-Reactive-Frameworks-%E4%BD%BF%E7%94%A8%E5%93%8D%E5%BA%94%E5%BC%8F%E6%A1%86%E6%9E%B6%E8%BF%9B%E8%A1%8C%E7%BB%91%E5%AE%9A"><span class="nav-number">1.14.1.</span> <span class="nav-text">Binding using Reactive Frameworks (‰ΩøÁî®ÂìçÂ∫îÂºèÊ°ÜÊû∂ËøõË°åÁªëÂÆö)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Binding-Using-CompletableFuture-%E4%BD%BF%E7%94%A8-CompletableFuture-%E8%BF%9B%E8%A1%8C%E7%BB%91%E5%AE%9A"><span class="nav-number">1.14.2.</span> <span class="nav-text">Binding Using CompletableFuture (‰ΩøÁî® CompletableFuture ËøõË°åÁªëÂÆö)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Binding-using-POJOs-%E4%BD%BF%E7%94%A8-POJO-%E8%BF%9B%E8%A1%8C%E7%BB%91%E5%AE%9A"><span class="nav-number">1.14.3.</span> <span class="nav-text">Binding using POJOs (‰ΩøÁî® POJO ËøõË°åÁªëÂÆö)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Jackson-Configuration-Jackson-%E9%85%8D%E7%BD%AE"><span class="nav-number">1.14.4.</span> <span class="nav-text">Jackson Configuration (Jackson ÈÖçÁΩÆ)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Features-%E7%89%B9%E6%80%A7"><span class="nav-number">1.14.4.1.</span> <span class="nav-text">Features (ÁâπÊÄß)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Further-customing-JsonFactory-%E6%9B%B4%E6%B7%B1%E5%85%A5%E8%87%AA%E5%AE%9A%E4%B9%89-JsonFactory"><span class="nav-number">1.14.4.2.</span> <span class="nav-text">Further customing JsonFactory (Êõ¥Ê∑±ÂÖ•Ëá™ÂÆö‰πâ JsonFactory )</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Support-for-JsonView-JsonView-%E7%9A%84%E6%94%AF%E6%8C%81"><span class="nav-number">1.14.4.3.</span> <span class="nav-text">Support for @JsonView (@JsonView ÁöÑÊîØÊåÅ)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Beans-Beans"><span class="nav-number">1.14.4.4.</span> <span class="nav-text">Beans (Beans)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Service-Loader-Service-%E5%8A%A0%E8%BD%BD%E5%99%A8"><span class="nav-number">1.14.4.5.</span> <span class="nav-text">Service Loader (Service Âä†ËΩΩÂô®)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Number-Precision-%E6%95%B0%E5%80%BC%E7%B2%BE%E7%A1%AE%E6%80%A7"><span class="nav-number">1.14.4.6.</span> <span class="nav-text">Number Precision (Êï∞ÂÄºÁ≤æÁ°ÆÊÄß)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Data-Validation-%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C"><span class="nav-number">1.15.</span> <span class="nav-text">Data Validation (Êï∞ÊçÆÊ†°È™å)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Serving-Static-Resources-%E6%8F%90%E4%BE%9B%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90"><span class="nav-number">1.16.</span> <span class="nav-text">Serving Static Resources (Êèê‰æõÈùôÊÄÅËµÑÊ∫ê)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Error-Handling-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="nav-number">1.17.</span> <span class="nav-text">Error Handling (ÈîôËØØÂ§ÑÁêÜ)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Status-Handlers-%E7%8A%B6%E6%80%81%E5%A4%84%E7%90%86%E5%99%A8"><span class="nav-number">1.17.1.</span> <span class="nav-text">Status Handlers (Áä∂ÊÄÅÂ§ÑÁêÜÂô®)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Local-Error-Handling-%E6%9C%AC%E5%9C%B0%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="nav-number">1.17.2.</span> <span class="nav-text">Local Error Handling (Êú¨Âú∞ÂºÇÂ∏∏Â§ÑÁêÜ)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Global-Error-Handling-%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="nav-number">1.17.3.</span> <span class="nav-text">Global Error Handling (ÂÖ®Â±ÄÂºÇÂ∏∏Â§ÑÁêÜ)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ExceptionHandler-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%99%A8"><span class="nav-number">1.17.4.</span> <span class="nav-text">ExceptionHandler (ÂºÇÂ∏∏Â§ÑÁêÜÂô®)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Built-In-Exception-Handlers-%E5%86%85%E7%BD%AE%E7%9A%84%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%99%A8"><span class="nav-number">1.17.5.</span> <span class="nav-text">Built-In Exception Handlers (ÂÜÖÁΩÆÁöÑÂºÇÂ∏∏Â§ÑÁêÜÂô®)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Custom-Exception-Handler-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%99%A8"><span class="nav-number">1.17.5.1.</span> <span class="nav-text">Custom Exception Handler (Ëá™ÂÆö‰πâÂºÇÂ∏∏Â§ÑÁêÜÂô®)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Error-Formatting-%E9%94%99%E8%AF%AF%E6%A0%BC%E5%BC%8F"><span class="nav-number">1.17.6.</span> <span class="nav-text">Error Formatting (ÈîôËØØÊ†ºÂºè)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#API-Versioning-API-%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6"><span class="nav-number">1.18.</span> <span class="nav-text">API Versioning (API ÁâàÊú¨ÊéßÂà∂)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Default-Version-%E9%BB%98%E8%AE%A4%E7%89%88%E6%9C%AC"><span class="nav-number">1.18.1.</span> <span class="nav-text">Default Version (ÈªòËÆ§ÁâàÊú¨)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Versioning-Client-Requests-%E7%89%88%E6%9C%AC%E5%8C%96%E7%9A%84%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%AF%B7%E6%B1%82"><span class="nav-number">1.18.2.</span> <span class="nav-text">Versioning Client Requests (ÁâàÊú¨ÂåñÁöÑÂÆ¢Êà∑Á´ØËØ∑Ê±Ç)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Handling-Form-Data-%E5%A4%84%E7%90%86%E8%A1%A8%E5%8D%95%E6%95%B0%E6%8D%AE"><span class="nav-number">1.19.</span> <span class="nav-text">Handling Form Data (Â§ÑÁêÜË°®ÂçïÊï∞ÊçÆ)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Writing-Response-Data-%E7%BC%96%E5%86%99%E5%93%8D%E5%BA%94%E6%95%B0%E6%8D%AE"><span class="nav-number">1.20.</span> <span class="nav-text">Writing Response Data (ÁºñÂÜôÂìçÂ∫îÊï∞ÊçÆ)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Performing-Blocking-I-x2F-O-%E8%BF%90%E8%A1%8C%E9%98%BB%E5%A1%9E-I-x2F-O"><span class="nav-number">1.20.1.</span> <span class="nav-text">Performing Blocking I&#x2F;O (ËøêË°åÈòªÂ°û I&#x2F;O)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Writable-%E5%8F%AF%E5%86%99%E7%9A%84"><span class="nav-number">1.20.1.1.</span> <span class="nav-text">Writable (ÂèØÂÜôÁöÑ)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#InputStream-%E8%BE%93%E5%85%A5%E6%B5%81"><span class="nav-number">1.20.1.2.</span> <span class="nav-text">InputStream (ËæìÂÖ•ÊµÅ)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#404-Responses-404-%E5%93%8D%E5%BA%94"><span class="nav-number">1.20.1.3.</span> <span class="nav-text">404 Responses (404 ÂìçÂ∫î)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#File-Uploads-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="nav-number">1.21.</span> <span class="nav-text">File Uploads (Êñá‰ª∂‰∏ä‰º†)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Route-Arguments-%E8%B7%AF%E7%94%B1%E5%8F%82%E6%95%B0"><span class="nav-number">1.21.1.</span> <span class="nav-text">Route Arguments (Ë∑ØÁî±ÂèÇÊï∞)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Chunk-Data-Types-%E5%9D%97%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.21.1.1.</span> <span class="nav-text">Chunk Data Types (ÂùóÊï∞ÊçÆÁ±ªÂûã)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Whole-Data-Types-%E5%AE%8C%E6%95%B4%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.21.1.2.</span> <span class="nav-text">Whole Data Types (ÂÆåÊï¥Êï∞ÊçÆÁ±ªÂûã)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Multiple-Uploads-%E5%A4%9A%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="nav-number">1.21.2.</span> <span class="nav-text">Multiple Uploads (Â§öÊñá‰ª∂‰∏ä‰º†)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Different-Names-%E4%B8%8D%E5%90%8C%E7%9A%84%E5%90%8D%E5%AD%97"><span class="nav-number">1.21.2.1.</span> <span class="nav-text">Different Names (‰∏çÂêåÁöÑÂêçÂ≠ó)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Same-name-%E7%9B%B8%E5%90%8C%E7%9A%84%E5%90%8D%E5%AD%97"><span class="nav-number">1.21.2.2.</span> <span class="nav-text">Same name (Áõ∏ÂêåÁöÑÂêçÂ≠ó)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Whole-Body-Binding-%E5%AE%8C%E6%95%B4-Body-%E7%BB%91%E5%AE%9A"><span class="nav-number">1.21.3.</span> <span class="nav-text">Whole Body Binding (ÂÆåÊï¥ Body ÁªëÂÆö)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#File-Transfers-%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93"><span class="nav-number">1.22.</span> <span class="nav-text">File Transfers (Êñá‰ª∂‰º†Ëæì)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Sending-File-Objects-%E5%8F%91%E9%80%81%E6%96%87%E4%BB%B6%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.22.1.</span> <span class="nav-text">Sending File Objects (ÂèëÈÄÅÊñá‰ª∂ÂØπË±°)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Sending-an-InputStream-%E5%8F%91%E9%80%81%E4%B8%80%E4%B8%AA-InputStream"><span class="nav-number">1.22.2.</span> <span class="nav-text">Sending an InputStream (ÂèëÈÄÅ‰∏Ä‰∏™ InputStream)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cache-Configuration-%E7%BC%93%E5%AD%98%E9%85%8D%E7%BD%AE"><span class="nav-number">1.22.3.</span> <span class="nav-text">Cache Configuration (ÁºìÂ≠òÈÖçÁΩÆ)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP-Filters-HTTP-%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="nav-number">1.23.</span> <span class="nav-text">HTTP Filters (HTTP ËøáÊª§Âô®)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Writing-a-Filter-%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="nav-number">1.23.1.</span> <span class="nav-text">Writing a Filter (ÁºñÂÜô‰∏Ä‰∏™ËøáÊª§Âô®)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP-Sessions-HTTP-%E4%BC%9A%E8%AF%9D"><span class="nav-number">1.24.</span> <span class="nav-text">HTTP Sessions (HTTP ‰ºöËØù)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Enabling-Sessions-%E5%BC%80%E5%90%AF%E4%BC%9A%E8%AF%9D"><span class="nav-number">1.24.1.</span> <span class="nav-text">Enabling Sessions (ÂºÄÂêØ‰ºöËØù)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Redis-Sessions-Redis-%E4%BC%9A%E8%AF%9D"><span class="nav-number">1.24.1.1.</span> <span class="nav-text">Redis Sessions (Redis ‰ºöËØù)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Configuring-Session-Resolution-%E9%85%8D%E7%BD%AE%E4%BC%9A%E8%AF%9D%E8%A7%A3%E6%9E%90"><span class="nav-number">1.24.2.</span> <span class="nav-text">Configuring Session Resolution (ÈÖçÁΩÆ‰ºöËØùËß£Êûê)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Working-with-Sessions-%E4%BD%BF%E7%94%A8%E4%BC%9A%E8%AF%9D"><span class="nav-number">1.24.3.</span> <span class="nav-text">Working with Sessions (‰ΩøÁî®‰ºöËØù)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Session-Clients-%E4%BC%9A%E8%AF%9D%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="nav-number">1.24.4.</span> <span class="nav-text">Session Clients (‰ºöËØùÂÆ¢Êà∑Á´Ø)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-SessionValue-%E4%BD%BF%E7%94%A8-SessionValue-%E6%B3%A8%E8%A7%A3"><span class="nav-number">1.24.5.</span> <span class="nav-text">Using @SessionValue (‰ΩøÁî® @SessionValue Ê≥®Ëß£)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Session-Events-%E4%BC%9A%E8%AF%9D%E4%BA%8B%E4%BB%B6"><span class="nav-number">1.24.6.</span> <span class="nav-text">Session Events (‰ºöËØù‰∫ã‰ª∂)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Server-Sent-Events-Server-%E5%8F%91%E9%80%81%E4%BA%8B%E4%BB%B6"><span class="nav-number">1.25.</span> <span class="nav-text">Server Sent Events (Server ÂèëÈÄÅ‰∫ã‰ª∂)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#WebSocket-Support-WebSocket-%E6%94%AF%E6%8C%81"><span class="nav-number">1.26.</span> <span class="nav-text">WebSocket Support (WebSocket ÊîØÊåÅ)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-ServerWebSocket-%E4%BD%BF%E7%94%A8-ServerWebSocket-%E6%B3%A8%E8%A7%A3"><span class="nav-number">1.26.1.</span> <span class="nav-text">Using @ServerWebSocket(‰ΩøÁî® @ServerWebSocket Ê≥®Ëß£)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#The-OnClose-Method-OnClose-%E6%96%B9%E6%B3%95"><span class="nav-number">1.26.1.1.</span> <span class="nav-text">The @OnClose Method (@OnClose ÊñπÊ≥ï)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#The-OnMessage-Method-OnMessage-%E6%96%B9%E6%B3%95"><span class="nav-number">1.26.1.2.</span> <span class="nav-text">The @OnMessage Method (@OnMessage ÊñπÊ≥ï)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#The-OnError-Method-OnError-%E6%96%B9%E6%B3%95"><span class="nav-number">1.26.1.3.</span> <span class="nav-text">The @OnError Method (@OnError ÊñπÊ≥ï)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Non-Blocking-Message-Handling-%E9%9D%9E%E9%98%BB%E5%A1%9E%E5%BC%8F%E4%BF%A1%E6%81%AF%E5%A4%84%E7%90%86"><span class="nav-number">1.26.1.4.</span> <span class="nav-text">Non-Blocking Message Handling (ÈùûÈòªÂ°ûÂºè‰ø°ÊÅØÂ§ÑÁêÜ)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ServerWebSocket-and-Scopes-ServerWebSocket-%E5%92%8C%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="nav-number">1.26.1.5.</span> <span class="nav-text">@ServerWebSocket and Scopes (@ServerWebSocket Âíå‰ΩúÁî®Âüü)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Sharing-Sessions-with-the-HTTP-Session-%E5%92%8C-HTTP-session-%E5%85%B1%E4%BA%AB-session"><span class="nav-number">1.26.1.6.</span> <span class="nav-text">Sharing Sessions with the HTTP Session (Âíå HTTP session ÂÖ±‰∫´ session)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Using-the-CLI-%E4%BD%BF%E7%94%A8-CLI"><span class="nav-number">1.26.1.7.</span> <span class="nav-text">Using the CLI (‰ΩøÁî® CLI)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Connection-Timeouts-%E8%BF%9E%E6%8E%A5%E8%B6%85%E6%97%B6"><span class="nav-number">1.26.1.8.</span> <span class="nav-text">Connection Timeouts (ËøûÊé•Ë∂ÖÊó∂)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-ClientWebSocket-%E4%BD%BF%E7%94%A8-ClientWebSocket"><span class="nav-number">1.26.2.</span> <span class="nav-text">Using @ClientWebSocket (‰ΩøÁî® @ClientWebSocket)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Using-the-CLI-%E4%BD%BF%E7%94%A8-CLI-1"><span class="nav-number">1.26.2.1.</span> <span class="nav-text">Using the CLI (‰ΩøÁî® CLI)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP-x2F-2-Support-HTTP-x2F-2-%E6%94%AF%E6%8C%81"><span class="nav-number">1.27.</span> <span class="nav-text">HTTP&#x2F;2 Support (HTTP&#x2F;2 ÊîØÊåÅ)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Configuring-the-Server-for-HTTP-x2F-2-%E4%B8%BA-HTTP-x2F-2-%E9%85%8D%E7%BD%AE-Server"><span class="nav-number">1.27.1.</span> <span class="nav-text">Configuring the Server for HTTP&#x2F;2 (‰∏∫ HTTP&#x2F;2 ÈÖçÁΩÆ Server)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP-x2F-2-Server-Push-Support-HTTP-x2F-2-Server-%E6%8E%A8%E9%80%81%E6%94%AF%E6%8C%81"><span class="nav-number">1.27.2.</span> <span class="nav-text">HTTP&#x2F;2 Server Push Support (HTTP&#x2F;2 Server Êé®ÈÄÅÊîØÊåÅ)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Server-Events-Server-%E4%BA%8B%E4%BB%B6"><span class="nav-number">1.28.</span> <span class="nav-text">Server Events (Server ‰∫ã‰ª∂)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Configuring-the-HTTP-Server-%E9%85%8D%E7%BD%AE-HTTP-Server"><span class="nav-number">1.29.</span> <span class="nav-text">Configuring the HTTP Server (ÈÖçÁΩÆ HTTP Server)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-Native-Transports-%E4%BD%BF%E7%94%A8%E5%8E%9F%E7%94%9F%E4%BC%A0%E8%BE%93"><span class="nav-number">1.29.1.</span> <span class="nav-text">Using Native Transports (‰ΩøÁî®ÂéüÁîü‰º†Ëæì)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Configuring-Server-Thread-Pools-%E9%85%8D%E7%BD%AE-Server-%E7%BA%BF%E7%A8%8B%E6%B1%A0"><span class="nav-number">1.29.2.</span> <span class="nav-text">Configuring Server Thread Pools (ÈÖçÁΩÆ Server Á∫øÁ®ãÊ±†)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Blocking-Operations-%E9%98%BB%E5%A1%9E%E5%BC%8F%E6%93%8D%E4%BD%9C"><span class="nav-number">1.29.2.1.</span> <span class="nav-text">Blocking Operations (ÈòªÂ°ûÂºèÊìç‰Ωú)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Configuring-the-Netty-Pipeline-%E9%85%8D%E7%BD%AE-Netty-%E7%AE%A1%E9%81%93"><span class="nav-number">1.29.3.</span> <span class="nav-text">Configuring the Netty Pipeline (ÈÖçÁΩÆ Netty ÁÆ°ÈÅì)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Configuring-CORS-%E9%85%8D%E7%BD%AE%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82"><span class="nav-number">1.29.4.</span> <span class="nav-text">Configuring CORS (ÈÖçÁΩÆË∑®ÂüüËØ∑Ê±Ç)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Allowed-Origins-%E5%85%81%E8%AE%B8%E7%9A%84%E6%BA%90"><span class="nav-number">1.29.4.1.</span> <span class="nav-text">Allowed Origins (ÂÖÅËÆ∏ÁöÑÊ∫ê)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Allowed-Methods-%E5%85%81%E8%AE%B8%E7%9A%84%E6%96%B9%E6%B3%95"><span class="nav-number">1.29.4.2.</span> <span class="nav-text">Allowed Methods (ÂÖÅËÆ∏ÁöÑÊñπÊ≥ï)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Allowed-Headers-%E5%85%81%E8%AE%B8%E7%9A%84%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="nav-number">1.29.4.3.</span> <span class="nav-text">Allowed Headers (ÂÖÅËÆ∏ÁöÑËØ∑Ê±ÇÂ§¥)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Exposed-Headers-%E6%9A%B4%E9%9C%B2%E7%9A%84%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="nav-number">1.29.4.4.</span> <span class="nav-text">Exposed Headers (Êö¥Èú≤ÁöÑËØ∑Ê±ÇÂ§¥)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Allow-Credentials-%E5%85%81%E8%AE%B8-Credentials"><span class="nav-number">1.29.4.5.</span> <span class="nav-text">Allow Credentials (ÂÖÅËÆ∏ Credentials)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Max-age-%E6%9C%80%E5%A4%A7-age"><span class="nav-number">1.29.4.6.</span> <span class="nav-text">Max age (ÊúÄÂ§ß age)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Multiple-Header-Values-%E5%A4%9A%E4%B8%AA-Header-%E5%80%BC"><span class="nav-number">1.29.4.7.</span> <span class="nav-text">Multiple Header Values (Â§ö‰∏™ Header ÂÄº)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Securing-the-Server-with-HTTPS-%E4%BD%BF%E7%94%A8-HTTPS-%E4%BF%9D%E6%8A%A4-Server"><span class="nav-number">1.29.5.</span> <span class="nav-text">Securing the Server with HTTPS (‰ΩøÁî® HTTPS ‰øùÊä§ Server)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Using-a-valid-x509-certificate-%E4%BD%BF%E7%94%A8%E4%B8%80%E4%B8%AA%E6%9C%89%E6%95%88%E7%9A%84-x509-%E8%AF%81%E4%B9%A6"><span class="nav-number">1.29.5.1.</span> <span class="nav-text">Using a valid x509 certificate (‰ΩøÁî®‰∏Ä‰∏™ÊúâÊïàÁöÑ x509 ËØÅ‰π¶)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-Java-Keystore-%E4%BD%BF%E7%94%A8-Java-Keystore-JKS"><span class="nav-number">1.29.6.</span> <span class="nav-text">Using Java Keystore (‰ΩøÁî® Java Keystore (JKS))</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Refreshing-x2F-Reloading-HTTPS-Certificates-%E5%88%B7%E6%96%B0-x2F-%E9%87%8D%E8%BD%BD-HTTPS-%E8%AF%81%E4%B9%A6"><span class="nav-number">1.29.6.1.</span> <span class="nav-text">Refreshing&#x2F;Reloading HTTPS Certificates (Âà∑Êñ∞&#x2F;ÈáçËΩΩ HTTPS ËØÅ‰π¶)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Enabling-HTTP-and-HTTPS-%E5%90%8C%E6%97%B6%E5%BC%80%E5%90%AF-HTTP-%E5%92%8C-HTTPS"><span class="nav-number">1.29.7.</span> <span class="nav-text">Enabling HTTP and HTTPS (ÂêåÊó∂ÂºÄÂêØ HTTP Âíå HTTPS)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Enabling-Access-Logger-%E5%BC%80%E5%90%AF%E8%AE%BF%E9%97%AE%E6%97%A5%E5%BF%97"><span class="nav-number">1.29.8.</span> <span class="nav-text">Enabling Access Logger (ÂºÄÂêØËÆøÈóÆÊó•Âøó)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Filtering-access-logs-%E8%BF%87%E6%BB%A4%E8%AE%BF%E9%97%AE%E6%97%A5%E5%BF%97"><span class="nav-number">1.29.8.1.</span> <span class="nav-text">Filtering access logs (ËøáÊª§ËÆøÈóÆÊó•Âøó)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Logback-Configuration-Logback-%E9%85%8D%E7%BD%AE"><span class="nav-number">1.29.8.2.</span> <span class="nav-text">Logback Configuration (Logback ÈÖçÁΩÆ)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Log-Format-%E6%97%A5%E5%BF%97%E6%A0%BC%E5%BC%8F"><span class="nav-number">1.29.8.3.</span> <span class="nav-text">Log Format (Êó•ÂøóÊ†ºÂºè)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Starting-Secondary-Servers-%E5%BC%80%E5%90%AF%E4%BA%8C%E7%BA%A7%E6%9C%8D%E5%8A%A1"><span class="nav-number">1.29.9.</span> <span class="nav-text">Starting Secondary Servers (ÂºÄÂêØ‰∫åÁ∫ßÊúçÂä°)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Server-Side-View-Rendering-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E8%A7%86%E5%9B%BE%E6%B8%B2%E6%9F%93"><span class="nav-number">1.30.</span> <span class="nav-text">Server Side View Rendering (ÊúçÂä°Âô®Á´ØËßÜÂõæÊ∏≤Êüì)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#OpenAPI-x2F-Swagger-Support-OpenAPI-x2F-Swagger-%E6%94%AF%E6%8C%81"><span class="nav-number">1.31.</span> <span class="nav-text">OpenAPI &#x2F; Swagger Support (OpenAPI &#x2F; Swagger ÊîØÊåÅ)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GraphQL-Support-GraphQL-%E6%94%AF%E6%8C%81"><span class="nav-number">1.32.</span> <span class="nav-text">GraphQL Support (GraphQL ÊîØÊåÅ)</span></a></li></ol></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="ÊêúÁ¥¢..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>



<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/dark-light-toggle.js"></script>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/local-search.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/code-copy.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/lazyload.js"></script>


<div class="post-scripts pjax">
    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/left-side-toggle.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/libs/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/toc.js"></script>
    
</div>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/libs/pjax.min.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            KEEP.refresh();
        });
    });
</script>



</body>
</html>
