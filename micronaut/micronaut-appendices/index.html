<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Micronaut,Groovy,Gradle,Java,æ–‡æ¡£,ä¸­æ–‡">
    <meta name="description" content="Micronaut Groovy Gradle Java æ–‡æ¡£ ä¸­æ–‡">
    <meta name="author" content="æ—å¨ç¾½">
    
    <title>
        
            Micronaut ä¸­æ–‡æ–‡æ¡£ Appendices |
        
        æ—å¨ç¾½çš„ç¬”è®°
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/logo.svg">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/css/font-awesome.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"zh-CN","path":"search.json"};
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":true,"init_open":true},"style":{"primary_color":"rgb(153,153,0)","avatar":"/images/avatar.jpg","favicon":"/images/logo.svg","article_img_align":"left","left_side_width":"400px","content_max_width":"920px","hover":{"shadow":true,"scale":true},"first_screen":{"enable":true,"background_img":null,"description":"def containsğŸš€ = ['Micronaut', 'Groovy', 'Gradle', 'etc']"},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":true}}},"local_search":{"enable":true,"preload":true},"code_copy":{"enable":true,"style":"mac"},"pjax":{"enable":true},"lazyload":{"enable":true},"version":"3.4.5"};
    KEEP.language_ago = {"second":"%s ç§’å‰","minute":"%s åˆ†é’Ÿå‰","hour":"%s å°æ—¶å‰","day":"%s å¤©å‰","week":"%s å‘¨å‰","month":"%s ä¸ªæœˆå‰","year":"%s å¹´å‰"};
  </script>
<meta name="generator" content="Hexo 6.1.0"></head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fas fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                æ—å¨ç¾½çš„ç¬”è®°
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                é¦–é¡µ
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/categories"
                            >
                                åˆ†ç±»
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/tags"
                            >
                                æ ‡ç­¾
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                å½’æ¡£
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >
                                å…³äº
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">é¦–é¡µ</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/categories">åˆ†ç±»</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/tags">æ ‡ç­¾</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">å½’æ¡£</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about">å…³äº</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

    <a target="_blank" rel="noopener" href="https://github.com/linweiyu21/" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80"
        viewBox="0 0 250 250" style="fill:#64CEAA; color:#fff; position: absolute; top: 0; border: 0; right: 0;"
        aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path
          d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
          fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path
          d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
          fill="currentColor" class="octo-body"></path>
      </svg></a>
    <style>
      .github-corner:hover .octo-arm {
        animation: octocat-wave 560ms ease-in-out
      }

      @keyframes octocat-wave {

        0%,
        100% {
          transform: rotate(0)
        }

        20%,
        60% {
          transform: rotate(-25deg)
        }

        40%,
        80% {
          transform: rotate(10deg)
        }
      }

      @media (max-width:500px) {
        .github-corner:hover .octo-arm {
          animation: none
        }

        .github-corner .octo-arm {
          animation: octocat-wave 560ms ease-in-out
        }
      }
    </style>
</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">Micronaut ä¸­æ–‡æ–‡æ¡£ Appendices</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/avatar.jpg">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">æ—å¨ç¾½</span>
                        
                            <span class="author-label">Lv8</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;
        <span class="pc">2022-04-29 09:51:13</span>
        <span class="mobile">2022-04-29 09:51</span>
    </span>
    
        <span class="article-categories article-meta-item">
            <i class="fas fa-folder"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/Micronaut-%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3/">Micronaut ä¸­æ–‡æ–‡æ¡£</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/Micronaut/">Micronaut</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/Groovy/">Groovy</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/%E4%B8%AD%E6%96%87/">ä¸­æ–‡</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
        <span class="article-pv article-meta-item">
            <i class="fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <!-- TOC -->

<ul>
<li><a href="#appendices">Appendices</a><ul>
<li><a href="#micronaut-architecture-micronaut-%E6%9E%B6%E6%9E%84">Micronaut Architecture (Micronaut æ¶æ„)</a><ul>
<li><a href="#compiler-%E7%BC%96%E8%AF%91%E5%99%A8">Compiler (ç¼–è¯‘å™¨)</a></li>
<li><a href="#annotation-metadata-%E6%B3%A8%E8%A7%A3%E5%85%83%E6%95%B0%E6%8D%AE">Annotation Metadata (æ³¨è§£å…ƒæ•°æ®)</a></li>
<li><a href="#bean-introspections-bean-%E5%86%85%E7%9C%81">Bean Introspections (Bean å†…çœ)</a></li>
<li><a href="#bean-definitions-bean-%E5%AE%9A%E4%B9%89">Bean Definitions (Bean å®šä¹‰)</a><ul>
<li><a href="#configuration-properties-handling-%E9%85%8D%E7%BD%AE%E5%B1%9E%E6%80%A7%E5%A4%84%E7%90%86">Configuration Properties Handling (é…ç½®å±æ€§å¤„ç†)</a></li>
</ul>
</li>
<li><a href="#aop-proxies-aop-%E4%BB%A3%E7%90%86">AOP Proxies (AOP ä»£ç†)</a><ul>
<li><a href="#security-considerations-%E5%AE%89%E5%85%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">Security Considerations (å®‰å…¨æ³¨æ„äº‹é¡¹)</a></li>
</ul>
</li>
<li><a href="#application-context-%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%B8%8A%E4%B8%8B%E6%96%87">Application Context (åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡)</a></li>
<li><a href="#http-server-http-%E6%9C%8D%E5%8A%A1%E5%99%A8">HTTP Server (HTTP æœåŠ¡å™¨)</a><ul>
<li><a href="#server-configuration-%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE">Server Configuration (æœåŠ¡å™¨é…ç½®)</a></li>
<li><a href="#server-configuration-security-considerations-%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE%E5%AE%89%E5%85%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">Server Configuration Security Considerations (æœåŠ¡å™¨é…ç½®å®‰å…¨æ³¨æ„äº‹é¡¹)</a></li>
<li><a href="#netty-server-initialization-netty-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%88%9D%E5%A7%8B%E5%8C%96">Netty Server Initialization (Netty æœåŠ¡å™¨åˆå§‹åŒ–)</a></li>
<li><a href="#channelpipeline-security-considerations-channelpipeline-%E5%AE%89%E5%85%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">ChannelPipeline Security Considerations (ChannelPipeline å®‰å…¨æ³¨æ„äº‹é¡¹)</a></li>
<li><a href="#netty-server-routing-netty-%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%B7%AF%E7%94%B1">Netty Server Routing (Netty æœåŠ¡å™¨è·¯ç”±)</a></li>
<li><a href="#netty-server-routing-security-considerations-netty-%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%B7%AF%E7%94%B1%E5%AE%89%E5%85%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">Netty Server Routing Security Considerations (Netty æœåŠ¡å™¨è·¯ç”±å®‰å…¨æ³¨æ„äº‹é¡¹)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#frequently-asked-questions-faq-%E6%9C%80%E5%B8%B8%E9%97%AE%E7%9A%84%E9%97%AE%E9%A2%98">Frequently Asked Questions (FAQ) (æœ€å¸¸é—®çš„é—®é¢˜)</a><ul>
<li><a href="#does-micronaut-modify-my-bytecode-micronaut-%E4%BF%AE%E6%94%B9%E4%BA%86%E6%88%91%E7%9A%84%E5%AD%97%E8%8A%82%E7%A0%81%E5%90%97">Does Micronaut modify my bytecode? (Micronaut ä¿®æ”¹äº†æˆ‘çš„å­—èŠ‚ç å—?)</a></li>
<li><a href="#why-doesnt-micronaut-use-spring-%E4%B8%BA%E4%BB%80%E4%B9%88-micronaut-%E4%B8%8D%E4%BD%BF%E7%94%A8-spring">Why Doesnâ€™t Micronaut use Spring? (ä¸ºä»€ä¹ˆ Micronaut ä¸ä½¿ç”¨ Spring?)</a></li>
<li><a href="#does-micronaut-support-scala-micronaut-%E6%94%AF%E6%8C%81-scala-%E5%90%97">Does Micronaut support Scala? (Micronaut æ”¯æŒ Scala å—?)</a></li>
<li><a href="#can-micronaut-be-used-for-purposes-other-than-microservices-micronaut-%E5%8F%AF%E4%BB%A5%E7%94%A8%E5%9C%A8%E5%85%B6%E4%BB%96%E7%94%A8%E9%80%94%E8%80%8C%E4%B8%8D%E6%98%AF%E4%BD%9C%E4%B8%BA%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%90%97">Can Micronaut be used for purposes other than Microservices? (Micronaut å¯ä»¥ç”¨åœ¨å…¶ä»–ç”¨é€”è€Œä¸æ˜¯ä½œä¸ºå¾®æœåŠ¡å—?)</a></li>
<li><a href="#what-are-the-advantages-of-micronauts-dependency-injection-and-aop-implementation-micronaut-%E7%9A%84%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%E5%92%8C-aop-%E5%AE%9E%E7%8E%B0%E6%9C%89%E4%BB%80%E4%B9%88%E4%BC%98%E7%82%B9">What are the advantages of Micronautâ€™s Dependency Injection and AOP implementation? (Micronaut çš„ä¾èµ–æ³¨å…¥å’Œ AOP å®ç°æœ‰ä»€ä¹ˆä¼˜ç‚¹?)</a></li>
<li><a href="#why-does-micronaut-have-its-own-consul-and-eureka-client-implementations-%E4%B8%BA%E4%BB%80%E4%B9%88-micronaut-%E6%9C%89%E8%87%AA%E5%B7%B1%E7%9A%84-consul-%E5%92%8C-eureka-%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AE%9E%E7%8E%B0">Why does Micronaut have its own Consul and Eureka client implementations? (ä¸ºä»€ä¹ˆ Micronaut æœ‰è‡ªå·±çš„ Consul å’Œ Eureka å®¢æˆ·ç«¯å®ç°?)</a></li>
<li><a href="#why-am-i-encountering-a-nosuchmethoderror-occurs-loading-my-beans-groovy-%E4%B8%BA%E4%BB%80%E4%B9%88%E6%88%91%E5%9C%A8%E5%8A%A0%E8%BD%BD%E6%88%91%E7%9A%84-beans-%E6%97%B6%E9%81%87%E5%88%B0%E4%BA%86-nosuchmethoderror-%E9%97%AE%E9%A2%98">Why am I encountering a NoSuchMethodError occurs loading my beans (Groovy)? (ä¸ºä»€ä¹ˆæˆ‘åœ¨åŠ è½½æˆ‘çš„ beans æ—¶é‡åˆ°äº† NoSuchMethodError é—®é¢˜?)</a></li>
<li><a href="#why-is-it-taking-much-longer-than-it-should-to-start-the-application-%E4%B8%BA%E4%BB%80%E4%B9%88%E5%90%AF%E5%8A%A8%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E8%8A%B1%E8%B4%B9%E7%9A%84%E6%97%B6%E9%97%B4%E6%AF%94%E5%BA%94%E6%9C%89%E7%9A%84%E6%97%B6%E9%97%B4%E9%95%BF%E5%BE%97%E5%A4%9A">Why is it taking much longer than it should to start the application? (ä¸ºä»€ä¹ˆå¯åŠ¨åº”ç”¨ç¨‹åºèŠ±è´¹çš„æ—¶é—´æ¯”åº”æœ‰çš„æ—¶é—´é•¿å¾—å¤š?)</a></li>
</ul>
</li>
<li><a href="#using-snapshots-%E4%BD%BF%E7%94%A8%E5%BF%AB%E7%85%A7%E7%89%88%E6%9C%AC">Using Snapshots (ä½¿ç”¨å¿«ç…§ç‰ˆæœ¬)</a></li>
<li><a href="#common-problems-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98">Common Problems (å¸¸è§é—®é¢˜)</a><ul>
<li><a href="#dependency-injection-is-not-working-%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%E4%B8%8D%E7%94%9F%E6%95%88">Dependency injection is not working (ä¾èµ–æ³¨å…¥ä¸ç”Ÿæ•ˆ)</a></li>
<li><a href="#a-nosuchmethoderror-occurs-loading-beans-groovy-%E5%8A%A0%E8%BD%BD-beans-%E6%97%B6%E5%87%BA%E7%8E%B0-nosuchmethoderror">A NoSuchMethodError occurs loading beans (Groovy) (åŠ è½½ beans æ—¶å‡ºç° NoSuchMethodError)</a></li>
<li><a href="#it-is-taking-much-longer-to-start-my-application-than-it-should-nix-os-%E5%90%AF%E5%8A%A8%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E8%8A%B1%E8%B4%B9%E7%9A%84%E6%97%B6%E9%97%B4%E6%AF%94%E5%BA%94%E6%9C%89%E7%9A%84%E6%97%B6%E9%97%B4%E9%95%BF%E5%BE%97%E5%A4%9A">It is taking much longer to start my application than it should (*nix OS) (å¯åŠ¨åº”ç”¨ç¨‹åºèŠ±è´¹çš„æ—¶é—´æ¯”åº”æœ‰çš„æ—¶é—´é•¿å¾—å¤š)</a></li>
</ul>
</li>
<li><a href="#breaking-changes">Breaking Changes</a></li>
</ul>
</li>
</ul>
<!-- /TOC -->

<h1 id="Appendices"><a href="#Appendices" class="headerlink" title="Appendices"></a>Appendices</h1><p><strong>å£°æ˜</strong>:</p>
<ul>
<li>æœ¬æ–‡ç”±æœ¬äººç¿»è¯‘è‡ª<a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide" >å®˜æ–¹æ–‡æ¡£<i class="fas fa-external-link-alt"></i></a></li>
<li>éƒ¨åˆ†å†…å®¹å¯èƒ½ä¼šæœ‰ä¿®æ”¹æˆ–åˆ å‡, ä¸€åˆ‡ä»¥å®˜æ–¹æ–‡æ¡£ä¸ºå‡†.</li>
<li>æœ¬æ–‡ç¿»è¯‘æ—¶ Micronaut ç‰ˆæœ¬ä¸º 3.4.2</li>
</ul>
<h2 id="Micronaut-Architecture-Micronaut-æ¶æ„"><a href="#Micronaut-Architecture-Micronaut-æ¶æ„" class="headerlink" title="Micronaut Architecture (Micronaut æ¶æ„)"></a>Micronaut Architecture (Micronaut æ¶æ„)</h2><blockquote>
<p>The following documentation describes Micronautâ€™s architecture and is designed for those who are looking for information on the internal workings of Micronaut and how it is architected.</p>
</blockquote>
<p>æ¥ä¸‹æ¥çš„æ–‡æ¡£æè¿°äº† Micronaut çš„æ¶æ„, å¹¶ä¸”æ˜¯ä¸ºé‚£äº›æ­£åœ¨å¯»æ‰¾æœ‰å…³ Micronaut å†…éƒ¨å·¥ä½œåŸç†å’Œæ¶æ„æ–¹å¼çš„ä¿¡æ¯çš„äººè®¾è®¡çš„</p>
<blockquote>
<p>This is not intended as end-user developer documentation, but for those interested in the inner workings of Micronaut.</p>
</blockquote>
<p>è¿™ä¸æ˜¯ä½œä¸ºç»ˆç«¯å¼€å‘äººå‘˜çš„æ–‡æ¡£, è€Œæ˜¯é’ˆå¯¹é‚£äº›å¯¹ Micronaut å†…éƒ¨æ„Ÿå…´è¶£çš„äººçš„æ–‡æ¡£</p>
<p>è¿™ä¸ªæ–‡æ¡£è¢«åˆ†å¼€ä¸ºä¸åŒçš„ç« èŠ‚æ¥æè¿°ç¼–è¯‘å™¨, å†…çœ, åº”ç”¨ç¨‹åºå®¹å™¨, ä¾èµ–æ³¨å…¥ç­‰ç­‰</p>
<p>å› ä¸ºè¿™ä¸ªæ–‡æ¡£è¦†ç›–äº† Micronaut çš„å†…éƒ¨å·¥ä½œ, è®¸å¤š APIs å¼•ç”¨ä¸æè¿°éƒ½è¢«è®¤ä¸ºæ˜¯å†…éƒ¨çš„, éå…¬å¼€ API, å¹¶ä¸”ä½¿ç”¨ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/core/annotation/Internal.html" >@Internal<i class="fas fa-external-link-alt"></i></a> æ³¨è§£è¿›è¡Œä¿®é¥°</p>
<p>å†…éƒ¨ APIs å¯ä»¥åœ¨ Micronaut çš„è¡¥ä¸ç‰ˆæœ¬ä¹‹é—´å‘ç”Ÿå˜åŒ–, å¹¶ä¸”ä¸ä¼šåŒ…å«åœ¨ Micronaut çš„è¯­ä¹‰åŒ–ç‰ˆæœ¬å‘å¸ƒç­–ç•¥ä¸­</p>
<h3 id="Compiler-ç¼–è¯‘å™¨"><a href="#Compiler-ç¼–è¯‘å™¨" class="headerlink" title="Compiler (ç¼–è¯‘å™¨)"></a>Compiler (ç¼–è¯‘å™¨)</h3><p>Micronaut ç¼–è¯‘å™¨æ˜¯å¯¹ç°æœ‰è¯­è¨€ç¼–è¯‘å™¨çš„ä¸€ç»„æ‰©å±•:</p>
<ul>
<li>Java : <a href="">Java Annotation Processing (APT) API</a> æ˜¯ç”¨äº Java å’Œ Kotlin ä»£ç çš„ (å°†æ¥çš„ç‰ˆæœ¬å°†ä¼šä¸º Kotlin æ”¯æŒ KSP)</li>
<li>Groovy : Groovy <a class="link"   target="_blank" rel="noopener" href="https://docs.groovy-lang.org/latest/html/api/org/codehaus/groovy/transform/ASTTransformation.html" >AST Transformations<i class="fas fa-external-link-alt"></i></a> ç”¨æ¥å‚ä¸ Groovy ä»£ç ç¼–è¯‘</li>
</ul>
<p>ä¸ºäº†ä½¿æœ¬æ–‡æ¡£ä¿æŒç®€å•, å…¶ä½™éƒ¨åˆ†å°†æè¿°ä¸ Java ç¼–è¯‘å™¨çš„äº¤äº’</p>
<blockquote>
<p>The Micronaut Compiler visits end user code and generates additional bytecode that sits alongside the user code in the same package structure.</p>
</blockquote>
<p>Micronaut ç¼–è¯‘å™¨è®¿é—®æœ€ç»ˆç”¨æˆ·ä»£ç , åœ¨ç”¨æˆ·ä»£ç ç›¸åŒçš„åŒ…ç»“æ„ä¸­ç”Ÿæˆä¸ç”¨æˆ·ä»£ç å¹¶åˆ—çš„é¢å¤–å­—èŠ‚ç </p>
<blockquote>
<p>The AST of user source is visited using implementations of TypeElementVisitor which are loaded via the standard Java service loader mechanism.</p>
</blockquote>
<p>ç”¨æˆ·æºä»£ç çš„ AST ä½¿ç”¨ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/visitor/TypeElementVisitor.html" >TypeElementVisitor<i class="fas fa-external-link-alt"></i></a> å®ç°æ¥è®¿é—®, è¿™ä¸ªå®ç°é€šè¿‡ <a class="link"   target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/ServiceLoader.html" >standard Java service loader mechanism<i class="fas fa-external-link-alt"></i></a> åŠ è½½</p>
<blockquote>
<p>Each TypeElementVisitor implementation can override one or more of the visit* methods which receive an instance of Element.</p>
</blockquote>
<p>æ¯ä¸ª <a href="">TypeElementVisitor</a> å®ç°å¯ä»¥é‡è½½ä¸€ä¸ªæˆ–å¤šä¸ª <code>visit*</code> æ–¹æ³•, è¿™ä¸ªæ–¹æ³•æ¥å—ä¸€ä¸ª <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/ast/Element.html" >Element<i class="fas fa-external-link-alt"></i></a> å®ä¾‹</p>
<blockquote>
<p>The Element API provides a language-neutral abstraction over the AST and computation of the AnnotationMetadata for a given element (class, method, field etc.).</p>
</blockquote>
<p><a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/ast/package-summary.html" >Element API<i class="fas fa-external-link-alt"></i></a> ä¸º AST å’Œç»™å®šå…ƒç´  (ä¾‹å¦‚: ç±»,æ–¹æ³•,å­—æ®µç­‰)çš„ AnnotationMetadata çš„è®¡ç®—æä¾›äº†ä¸€ä¸ªè¯­è¨€ä¸­ç«‹çš„æŠ½è±¡</p>
<h3 id="Annotation-Metadata-æ³¨è§£å…ƒæ•°æ®"><a href="#Annotation-Metadata-æ³¨è§£å…ƒæ•°æ®" class="headerlink" title="Annotation Metadata (æ³¨è§£å…ƒæ•°æ®)"></a>Annotation Metadata (æ³¨è§£å…ƒæ•°æ®)</h3><blockquote>
<p>Micronaut is an implementation of an annotation-based programming model. That is to say annotations form a fundamental part of the API design of the framework.</p>
</blockquote>
<p>Micronaut æ˜¯ä¸€ä¸ªåŸºäºæ³¨è§£çš„ç¼–ç¨‹æ¨¡å‹çš„å®ç°. ä¹Ÿå°±æ˜¯è¯´, æ³¨è§£æ„æˆäº†æ¡†æ¶ API è®¾è®¡çš„åŸºç¡€éƒ¨åˆ†</p>
<blockquote>
<p>Given this design decision, a compilation-time model was formulated to address the challenges of evaluating annotations at runtime.</p>
</blockquote>
<p>è€ƒè™‘åˆ°è¿™ä¸ªè®¾è®¡å†³å®š, åˆ¶å®šäº†ä¸€ä¸ªç¼–è¯‘æ—¶æ¨¡å‹æ¥è§£å†³åœ¨è¿è¡Œæ—¶è¯„ä¼°æ³¨è§£çš„æŒ‘æˆ˜</p>
<blockquote>
<p>The AnnotationMetadata API is a construct that is used both a compilation time and at runtime by framework components.</p>
</blockquote>
<p><a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/core/annotation/AnnotationMetadata.html" >AnnotationMetadata<i class="fas fa-external-link-alt"></i></a> API æ˜¯ä¸€ä¸ªåœ¨ç¼–è¯‘æ—¶å’Œè¿è¡Œæ—¶éƒ½ç”±æ¡†æ¶ç»„ä»¶ä½¿ç”¨çš„æ„é€ </p>
<blockquote>
<p>AnnotationMetadata represents the computed fusion of annotation information for a particular type, field, constructor, method or bean property and may include both annotations declared in the source code, but also synthetic meta-annotations that can be used at runtime to implement framework logic.</p>
</blockquote>
<p><code>AnnotationMetadata</code> è¡¨ç¤ºç‰¹å®šç±»å‹, å­—æ®µ, æ„é€ æ–¹æ³•, æ–¹æ³•æˆ– bean å±æ€§çš„æ³¨è§£ä¿¡æ¯çš„è®¡ç®—èåˆ, å¯èƒ½æ—¢åŒ…æ‹¬æºä»£ç ä¸­å£°æ˜çš„æ³¨è§£, ä¹Ÿå¯èƒ½åŒ…æ‹¬å¯ä»¥åœ¨è¿è¡Œæ—¶ç”¨äºå®ç°æ¡†æ¶é€»è¾‘çš„åˆæˆå…ƒæ³¨è§£</p>
<blockquote>
<p>When visiting source code within the Micronaut Compiler using the Element API for each ClassElement, FieldElement, MethodElement, ConstructorElement and PropertyElement an instance of AnnotationMetadata is computed.</p>
</blockquote>
<p>å½“ä½¿ç”¨ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/ast/package-summary.html" >Element API<i class="fas fa-external-link-alt"></i></a> è®¿é—® <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide/#compilerArch" >Micronaut Compiler<i class="fas fa-external-link-alt"></i></a> ä¸­çš„æºä»£ç æ—¶, ä¼šè®¡ç®— <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/core/annotation/AnnotationMetadata.html" >AnnotationMetadata<i class="fas fa-external-link-alt"></i></a> çš„ä¸€ä¸ªå®ä¾‹, ç”¨äºæ¯ä¸ª <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/ast/ClassElement.html" >ClassElement<i class="fas fa-external-link-alt"></i></a>, <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/ast/FieldElement.html" >FieldElement<i class="fas fa-external-link-alt"></i></a>, <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/ast/MethodElement.html" >MethodElement<i class="fas fa-external-link-alt"></i></a>, <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/ast/ConstructorElement.html" >ConstructorElement<i class="fas fa-external-link-alt"></i></a> å’Œ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/ast/PropertyElement.html" >PropertyElement<i class="fas fa-external-link-alt"></i></a></p>
<blockquote>
<p>The AnnotationMetadata API tries to address the following challenges:</p>
</blockquote>
<p><code>AnnotationMetadata</code> API å°è¯•è§£å†³å¦‚ä¸‹æŒ‘æˆ˜:</p>
<ul>
<li><blockquote>
<p>Annotations can be inherited from types and interfaces into implementations. To avoid the need to traverse the class&#x2F;interface hierarchy at runtime Micronaut will at build time compute inherited annotations and deal with member overriding rules</p>
</blockquote>
</li>
<li>å¯ä»¥ä»ç±»æˆ–æ¥å£ä¸­ç»§æ‰¿æ³¨è§£. ä¸ºäº†é¿å…åœ¨è¿è¡Œæ—¶éå†ç±»&#x2F;æ¥å£å±‚æ¬¡ç»“æ„, Micronaut ä¼šåœ¨æ„å»ºæ—¶è®¡ç®—ç»§æ‰¿çš„æ³¨è§£å¹¶å¤„ç†æˆå‘˜è¦†ç›–è§„åˆ™</li>
<li><blockquote>
<p>Annotations can be annotated with other annotations. These annotations are often referred to as meta-annotations or stereotypes. The AnnotationMetadata API provides methods to understand whether a particular annotation is declared as meta-annotation and to find out what annotations are meta-annotated with other annotations</p>
</blockquote>
</li>
<li>æ³¨è§£å¯ä»¥ä½¿ç”¨å…¶ä»–æ³¨è§£æ¥æ³¨é‡Š. è¿™äº›æ³¨è§£é€šå¸¸è¢«ç§°ä¸ºå…ƒæ³¨è§£æˆ–åŸå‹. <code>AnnotationMetadata</code> API æä¾›äº†æ–¹æ³•æ¥ç†è§£æŸä¸ªç‰¹å®šæ³¨è§£æ˜¯å¦è¢«å£°æ˜ä¸ºå…ƒæ³¨è§£, ä»¥åŠæ‰¾å‡ºå“ªäº›æ³¨è§£æ˜¯ä½¿ç”¨å…¶ä»–æ³¨è§£è¿›è¡Œå…ƒæ³¨é‡Šçš„</li>
<li><blockquote>
<p>It is often necessary to fuse annotation metadata together from different sources. For example, for JavaBean properties you want to combine the metadata from the private field, public getter and public setters into a single view otherwise you have to run logic to runtime to somehow combine this metadata from 3 distinct sources.</p>
</blockquote>
</li>
<li>é€šå¸¸æœ‰å¿…è¦å°†æ¥è‡ªä¸åŒæ¥æºçš„æ³¨è§£å…ƒæ•°æ®èåˆåœ¨ä¸€èµ·. ä¾‹å¦‚, å¯¹äº JavaBean å±æ€§, ä½ å¸Œæœ›å°†æ¥è‡ª private field, public setter&#x2F;getter çš„å…ƒæ•°æ®ç»„åˆåˆ°ä¸€ä¸ªè§†å›¾ä¸­, å¦åˆ™ä½ å¿…é¡»åœ¨åœ¨è¿è¡Œæ—¶æ‰§è¡Œé€»è¾‘æ¥ä»¥æŸç§æ–¹å¼ç»„åˆæ¥è‡ª 3 ä¸ªä¸åŒæ¥æºçš„å…ƒæ•°æ®</li>
<li><blockquote>
<p>Repeatable annotations are combined and normalized. If inherited the annotations are combined from parent interfaces or classes providing a single API to evaluate repeatable annotations instead of requiring runtime logic to perform normalization.</p>
</blockquote>
</li>
<li>å¯é‡å¤çš„æ³¨è§£è¢«åˆå¹¶ä¸”è§„èŒƒåŒ–. å¦‚æœç»§æ‰¿, æ³¨è§£å°†ä»çˆ¶æ¥å£æˆ–ç±»ç»„åˆè€Œæ¥, æä¾›å•ä¸ª API æ¥è¯„ä¼°å¯é‡å¤çš„æ³¨è§£, è€Œä¸éœ€è¦è¿è¡Œæ—¶é€»è¾‘æ¥æ‰§è¡Œè§„èŒƒåŒ–</li>
</ul>
<blockquote>
<p>When the source for a type is visited an instance of ClassElement is constructed via the ElementFactory API.</p>
</blockquote>
<p>å½“è®¿é—®ç±»å‹çš„æºæ—¶, é€šè¿‡ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/ast/ElementFactory.html" >ElementFactory API<i class="fas fa-external-link-alt"></i></a> æ„é€  <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/ast/ClassElement.html" >ClassElement<i class="fas fa-external-link-alt"></i></a> çš„å®ä¾‹</p>
<blockquote>
<p>The ElementFactory uses an instance of AbstractAnnotationMetadataBuilder which contains language specific implementations to construct AnnotationMedata for the underlying native type in the AST. In the case of Java this would be a javax.model.element.TypeElement.</p>
</blockquote>
<p><a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/ast/ElementFactory.html" >ElementFactory<i class="fas fa-external-link-alt"></i></a> ä½¿ç”¨ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/annotation/AbstractAnnotationMetadataBuilder.html" >AbstractAnnotationMetadataBuilder<i class="fas fa-external-link-alt"></i></a> çš„å®ä¾‹, è¯¥å®ä¾‹åŒ…å«ç‰¹å®šäºè¯­è¨€çš„å®ç°, ç”¨äºä¸º AST ä¸­çš„åº•å±‚åŸç”Ÿç±»å‹æ„é€  <code>AnnotationMetadata</code>. åœ¨ Java æƒ…å†µä¸‹, è¿™å°†æ˜¯ä¸€ä¸ª <code>javax.model.element.TypeElement</code></p>
<p>åŸºæœ¬æµç¨‹å¦‚ä¸‹æ‰€ç¤º:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://docs.micronaut.io/latest/img/arch/annotationmetadata.png"
                      alt="basic image"
                ></p>
<blockquote>
<p>Additionally, the AbstractAnnotationMetadataBuilder will load via the standard Java service loader mechanism one or more instances of the following types that allow manipulating how an annotation is represented in the AnnotationMetadata:</p>
</blockquote>
<p>æ­¤å¤–, <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/annotation/AbstractAnnotationMetadataBuilder.html" >AbstractAnnotationMetadataBuilder<i class="fas fa-external-link-alt"></i></a> é€šè¿‡ <a class="link"   target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/ServiceLoader.html" >standard Java service loader mechanism<i class="fas fa-external-link-alt"></i></a> åŠ è½½å¦‚ä¸‹ç±»å‹çš„ä¸€ä¸ªæˆ–å¤šä¸ªå®ä¾‹, è¿™äº›å®ä¾‹å…è®¸æ“ä½œæ³¨è§£åœ¨ <code>AnnotationMetadata</code> ä¸­çš„è¡¨ç¤ºæ–¹å¼:</p>
<ul>
<li><a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/annotation/AnnotationMapper.html" >AnnotationMapper<i class="fas fa-external-link-alt"></i></a> : ä¸€ä¸ªå¯ä»¥å°†ä¸€ä¸ªæ³¨è§£çš„å€¼æ˜ å°„åˆ°å¦ä¸€ä¸ªæ³¨è§£å¹¶åœ¨ <code>AnnotationMetadata</code> ä¸­ä¿ç•™åŸå§‹æ³¨è§£çš„ç±»å‹</li>
<li><a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/annotation/AnnotationTransformer.html" >AnnotationTransformer<i class="fas fa-external-link-alt"></i></a> : å¯ä»¥å°†ä¸€ä¸ªæ³¨è§£çš„å€¼è½¬æ¢ä¸ºå¦ä¸€ä¸ªæ³¨è§£çš„ç±»å‹, ä»è€Œåœ¨ <code>AnnotationMetadata</code> ä¸­åˆ é™¤åŸå§‹æ³¨è§£</li>
<li><a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/annotation/AnnotationRemapper.html" >AnnotationRemapper<i class="fas fa-external-link-alt"></i></a> : ä¸€ä¸ªå¯ä»¥è½¬æ¢ç»™å®šåŒ…ä¸­æ‰€æœ‰æ³¨è§£çš„å€¼ä»è€Œåœ¨ <code>AnnotationMetadata</code> ä¸­åˆ é™¤åŸå§‹æ³¨è§£çš„ç±»å‹</li>
</ul>
<blockquote>
<p>Note that at compilation time the AnnotationMetadata is mutable and can be further altered by implementations of TypeElementVisitor by invoking the annotate(..) method of the Element API.</p>
</blockquote>
<p>æ³¨æ„, <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/core/annotation/AnnotationMetadata.html" >AnnotationMetadata<i class="fas fa-external-link-alt"></i></a> åœ¨ç¼–è¯‘æ—¶æ˜¯å¯å˜çš„, å¯ä»¥è¢« <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/visitor/TypeElementVisitor.html" >TypeElementVisitor<i class="fas fa-external-link-alt"></i></a> çš„å®ç°é€šè¿‡è°ƒç”¨ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/ast/Element.html" >Element<i class="fas fa-external-link-alt"></i></a> API çš„ <code>annotate(..)</code> æ–¹æ³•è¿›è¡Œæ›´ä¸€æ­¥çš„ä¿®æ”¹</p>
<blockquote>
<p>However, at runtime the AnnotationMetadata is immutable and fixed</p>
</blockquote>
<p>ä½†æ˜¯, <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/core/annotation/AnnotationMetadata.html" >AnnotationMetadata<i class="fas fa-external-link-alt"></i></a> åœ¨è¿è¡Œæ—¶æ˜¯ä¸å¯å˜ä¸”å›ºå®šçš„</p>
<blockquote>
<p>The purpose of this design to allow the compiler to be extended and for Micronaut to be able to interpret different source-level annotation-based programming models.</p>
</blockquote>
<p>è¿™ç§è®¾è®¡çš„ç›®çš„æ˜¯å…è®¸ç¼–è¯‘å™¨è¿›è¡Œæ‰©å±•, å¹¶ä½¿ Micronaut èƒ½å¤Ÿè§£é‡Šä¸åŒæºä»£ç çº§åˆ«çš„åŸºäºæ³¨è§£çš„ç¼–ç¨‹æ¨¡å‹</p>
<blockquote>
<p>In practice this effectively allows decoupling the source code level annotation model from what is used at runtime such that different annotations can be used to represent the same annotation.</p>
</blockquote>
<p>åœ¨å®è·µä¸­, è¿™æœ‰æ•ˆåœ°å…è®¸å°†æºä»£ç çº§åˆ«çš„æ³¨è§£æ¨¡å‹ä¸è¿è¡Œæ—¶ä½¿ç”¨çš„æ³¨è§£æ¨¡å‹åˆ†ç¦», ä»¥ä¾¿å¯ä»¥ä½¿ç”¨ä¸åŒçš„æ³¨è§£æ¥è¡¨ç¤ºç›¸åŒçš„æ³¨è§£</p>
<blockquote>
<p>For example <code>jakarata.inject.Inject</code> or Springâ€™s <code>@Autowired</code> are supported as synonyms for <code>javax.inject.Inject</code> by transforming the source level annotation to <code>javax.inject.Inject</code> which is the only annotation represented at runtime.</p>
</blockquote>
<p>æ¯”å¦‚ <code>jakarta.inject.Inject</code> æˆ–è€… Spring çš„ <code>@Autowired</code> ä½œä¸º <code>javax.inject.Inject</code> çš„åŒä¹‰è¯ä½œä¸ºæ”¯æŒ, é€šè¿‡å°†æºä»£ç çº§åˆ«æ³¨è§£è½¬æ¢ <code>javax.inject.Inject</code>, å› ä¸º <code>javax.inject.Inject</code> æ˜¯è¿è¡Œæ—¶å”¯ä¸€è¡¨ç¤ºçš„æ³¨è§£</p>
<blockquote>
<p>Finally, annotations in Java also allow the definition of default values.</p>
</blockquote>
<p>æœ€å, Java ä¸­çš„æ³¨è§£è¿˜å…è®¸å®šä¹‰é»˜è®¤å€¼</p>
<blockquote>
<p>These defaults are not retained in individual instances of AnnotationMetadata but instead stored in a shared, static application-wide map for later retrieval for annotations known to be used by the application.</p>
</blockquote>
<p>è¿™äº›é»˜è®¤å€¼ä¸ä¼šä¿ç•™åœ¨ <code>AnnotationMetadata</code> çš„å„ä¸ªå®ä¾‹ä¸­, è€Œæ˜¯å­˜å‚¨åœ¨ä¸€ä¸ªå…±äº«çš„, é™æ€çš„åº”ç”¨ç¨‹åºèŒƒå›´çš„ map ä¸­, ä»¥ä¾¿ç¨åè¿›è¡Œæ³¨è§£æ£€ç´¢, è¿™äº›æ³¨è§£å·²çŸ¥è¢«åº”ç”¨ç¨‹åºæ‰€ä½¿ç”¨</p>
<h3 id="Bean-Introspections-Bean-å†…çœ"><a href="#Bean-Introspections-Bean-å†…çœ" class="headerlink" title="Bean Introspections (Bean å†…çœ)"></a>Bean Introspections (Bean å†…çœ)</h3><blockquote>
<p>The goal of Bean Introspections is to provide an alternative to reflection and the JDKâ€™s Introspector API that is coupled to the java.desktop module in recent versions of Java.</p>
</blockquote>
<p><a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide/#introspection" >Bean Introspections<i class="fas fa-external-link-alt"></i></a> çš„ç›®æ ‡æ˜¯æä¾›ä¸€ç§ åå°„ å’Œ è€¦åˆåˆ°æœ€è¿‘ Java ç‰ˆæœ¬ä¸­ <code>java.desktop</code> æ¨¡å—çš„ JDK çš„ <a class="link"   target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/beans/Introspector.html" >å†…çœ API<i class="fas fa-external-link-alt"></i></a> çš„æ›¿ä»£</p>
<blockquote>
<p>Many libraries in Java need to programmatically discover what methods represent properties of a class in some way and whilst the <a class="link"   target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/JavaBeans" >JavaBeans specification<i class="fas fa-external-link-alt"></i></a> tried to establish a standard convention, the language itself has evolved to include other constructs like Records that represent properties as components.</p>
</blockquote>
<p>Java ä¸­çš„è®¸å¤šåº“éœ€è¦ä»¥ç¼–ç¨‹çš„æ–¹å¼å‘ç°ä¸€ä¸ªç±»çš„ä»€ä¹ˆæ–¹æ³•ä»¥æŸç§æ–¹å¼ä»£è¡¨å±æ€§, è™½ç„¶ <a class="link"   target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/JavaBeans" >JavaBeans<i class="fas fa-external-link-alt"></i></a> è§„èŒƒè¯•å›¾å»ºç«‹ä¸€ä¸ªæ ‡å‡†çº¦å®š, ä½†æ˜¯è¯­è¨€æœ¬èº«å·²ç»å‘å±•åˆ°åŒ…å«å…¶ä»–æ„é€  (ä¾‹å¦‚ Records), Records å°†å±æ€§è¡¨ç¤ºä¸ºç»„ä»¶</p>
<blockquote>
<p>In addition, other languages like Kotlin and Groovy have native support for class properties that need to be supported at the framework level.</p>
</blockquote>
<p>é™¤æ­¤ä¹‹å¤–, å…¶ä»–è¯­è¨€åƒ Kotlin å’Œ Groovy å·²ç»åŸç”Ÿæ”¯æŒ æœ¬æ¥éœ€è¦åœ¨æ¡†æ¶çº§åˆ«æ”¯æŒçš„ ç±»å±æ€§</p>
<blockquote>
<p>The IntrospectedTypeElementVisitor visits declarations of the @Introspected annotation on types and generates at compilation time implementations of BeanIntrospection that are associated with each annotated type:</p>
</blockquote>
<p><a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/beans/visitor/IntrospectedTypeElementVisitor.html" >IntrospectedTypeElementVisitor<i class="fas fa-external-link-alt"></i></a> æ‰«æ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/core/annotation/Introspected.html" >@Introspected<i class="fas fa-external-link-alt"></i></a> åœ¨ç±»å‹ä¸Šçš„å£°æ˜, åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/core/beans/BeanIntrospection.html" >BeanIntrospection<i class="fas fa-external-link-alt"></i></a> å®ç°, è¿™ä¸ªå®ç°å’Œæ¯ä¸ªæ³¨è§£ç±»å‹å…³è”:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://docs.micronaut.io/latest/img/arch/introspections.png"
                      alt="img"
                ></p>
<blockquote>
<p>This generation happens via the BeanIntrospectionWriter class which uses the ASM bytecode generation library to generate two additional classes.</p>
</blockquote>
<p>æ­¤ç”Ÿæˆé€šè¿‡ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/beans/visitor/BeanIntrospectionWriter.html" >BeanIntrospectionWriter<i class="fas fa-external-link-alt"></i></a> ç±»è¿›è¡Œ, è¿™ä¸ªç±»ä½¿ç”¨ ASM å­—èŠ‚ç ç”Ÿæˆåº“æ¥ç”Ÿæˆå¦å¤–ä¸¤ä¸ªç±»</p>
<p>æ¯”å¦‚, ç»™å®šä¸€ä¸ªç§°ä¸º <code>example.Person</code> çš„ç±», é‚£ä¹ˆç”Ÿæˆçš„ç±»æ˜¯:</p>
<ul>
<li><blockquote>
<p><code>example.$Person$IntrospectionRef</code> - an implementation of BeanIntrospectionReference that allows the application to soft load the introspection without loading all of the metadata or the class itself (in the case where the introspected class is itself not on the classpath). Since references are loaded via ServiceLoader an entry in a generated META-INF&#x2F;services&#x2F;io.micronaut.core.beans.BeanIntrospectionReference referring to this type is also generated at compilation time.</p>
</blockquote>
</li>
<li><code>example.$Person$IntrospectionRef</code> - ä¸€ä¸ª <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/core/beans/BeanIntrospectionReference.html" >BeanIntrospectionReference<i class="fas fa-external-link-alt"></i></a> å®ç°, å…è®¸åº”ç”¨ç¨‹åºåœ¨ä¸åŠ è½½æ‰€æœ‰å…ƒæ•°æ®æˆ–ç±»æœ¬èº«çš„æƒ…å†µä¸‹è½¯åŠ è½½å†…çœ (åœ¨å†…çœç±»æœ¬èº«ä¸åœ¨ç±»è·¯å¾„ä¸Šçš„æƒ…å†µä¸‹). å› ä¸ºå¼•ç”¨æ˜¯é€šè¿‡ <a class="link"   target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/api/java/util/ServiceLoader.html" >ServiceLoader<i class="fas fa-external-link-alt"></i></a> åŠ è½½çš„, åœ¨ç”Ÿæˆçš„ <code>META-INFO/services/io.micronaut.core.beans.BeanIntrospectionReference</code> ä¸­å¼•ç”¨æ­¤ç±»å‹çš„ entry ä¹Ÿä¼šåœ¨ç¼–è¯‘æ—¶ç”Ÿæˆ</li>
<li><blockquote>
<p><code>example.$Person$Introspection</code> - an implementation of BeanIntrospection which contains the actual runtime introspection information.</p>
</blockquote>
</li>
<li><code>example.$Person$Introspection</code> - ä¸€ä¸ª <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/core/beans/BeanIntrospection.html" >BeanIntrospection<i class="fas fa-external-link-alt"></i></a> çš„å®ç°, åŒ…å«äº†å®é™…çš„è¿è¡Œæ—¶å†…çœä¿¡æ¯</li>
</ul>
<p>ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº† <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/core/beans/BeanIntrospection.html" >BeanIntrospection<i class="fas fa-external-link-alt"></i></a> API çš„ä½¿ç”¨:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> introspection = BeanIntrospection.getIntrospection(Person)                              <span class="comment">// 1</span></span><br><span class="line">Person person = introspection.instantiate(<span class="string">&#x27;John&#x27;</span>)                                           <span class="comment">// 2</span></span><br><span class="line">println <span class="string">&quot;Hello $person.name&quot;</span></span><br><span class="line"></span><br><span class="line">BeanProperty&lt;Person, String&gt; property = introspection.getRequiredProperty(<span class="string">&#x27;name&#x27;</span>, String)   <span class="comment">// 3</span></span><br><span class="line">property.set(person, <span class="string">&#x27;Fred&#x27;</span>)                                                                <span class="comment">// 4</span></span><br><span class="line">String name = property.get(person)                                                          <span class="comment">// 5</span></span><br><span class="line">println <span class="string">&quot;Hello $person.name&quot;</span></span><br></pre></td></tr></table></figure>

<p><code>1</code> : é€šè¿‡ç±»å‹æŸ¥æ‰¾ä¸€ä¸ª <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/core/beans/BeanIntrospection.html" >BeanIntrospection<i class="fas fa-external-link-alt"></i></a>. å‘ç”Ÿè¿™ç§æƒ…å†µæ—¶, å°†åœ¨ <a class="link"   target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/api/java/util/ServiceLoader.html" >ServiceLoader<i class="fas fa-external-link-alt"></i></a> åŠ è½½çš„ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/core/beans/BeanIntrospectionReference.html" >BeanTranspectionReference<i class="fas fa-external-link-alt"></i></a> å®ä¾‹ä¸­æœç´¢ BeanIntrospection</p>
<p><code>2</code> : <code>instantiate</code> æ–¹æ³•å…è®¸åˆ›å»ºå®ä¾‹</p>
<p><code>3</code> : å¯ä»¥é€šè¿‡å…¶ä¸­ä¸€ä¸ªå¯ç”¨æ–¹æ³•æ¥åŠ è½½ bean çš„å±æ€§, åœ¨è¿™ä¸ªæƒ…å†µä¸‹æ˜¯ <code>getRequiredProperty</code> æ–¹æ³•</p>
<p><code>4</code> : <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/core/beans/BeanProperty.html" >BeanProperty<i class="fas fa-external-link-alt"></i></a> å¼•ç”¨å¯ä»¥ç”¨æ¥å†™å…¥å¯ä¿®æ”¹å±æ€§</p>
<p><code>5</code> : è¯»å–å¯è¯»å±æ€§</p>
<p><code>Person</code> ç±»åªæœ‰åœ¨ <code>getBeanType()</code> æ–¹æ³•è°ƒç”¨çš„æ—¶å€™æ‰åˆå§‹åŒ–. å¦‚æœç±»æ²¡æœ‰å‡ºç°åœ¨ classpath ä¸Šé‚£ä¹ˆä¼šå‘ç”Ÿä¸€ä¸ª <code>NoClassDefFoundError</code>, è¦é¿å…è¿™ä¸ªé”™è¯¯å¼€å‘è€…å¯ä»¥å…ˆä½¿ç”¨ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/core/beans/BeanIntrospectionReference.html" >BeanIntrospectionReference<i class="fas fa-external-link-alt"></i></a> ä¸Šçš„ <code>isPresent()</code> æ–¹æ³•æ¥å°è¯•è·å–ç±»å‹</p>
<p>ä¸€ä¸ª <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/core/beans/BeanIntrospection.html" >BeanIntrospection<i class="fas fa-external-link-alt"></i></a> å®ç°æ‰§è¡Œä¸¤ä¸ªä¸»è¦åŠŸèƒ½:</p>
<ul>
<li><blockquote>
<p>The introspection holds Bean metadata about the properties and constructor arguments for a particular type that is abstracted away from the actual implementation (JavaBean property, Java 17+ Record, Kotlin data classes, Groovy properties etc.) and which also provide access to AnnotationMetadata without needing to use reflection to load the annotations themselves.</p>
</blockquote>
</li>
<li>å†…çœä¿å­˜å…³äºç‰¹å®šç±»å‹çš„å±æ€§å’Œæ„é€ æ–¹æ³•å‚æ•°çš„ Bean å…ƒæ•°æ®, è¯¥ç±»å‹æ˜¯ä»å®é™…å®ç°æŠ½è±¡å‡ºæ¥çš„ (JavaBean å±æ€§, Java 17+ Record, Kotlin æ•°æ®ç±», Groovy å±æ€§ç­‰), è¿˜æä¾›å¯¹ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/core/annotation/AnnotationMetadata.html" >AnnotationMetadata<i class="fas fa-external-link-alt"></i></a> çš„è®¿é—®, è€Œæ— éœ€ä½¿ç”¨åå°„æ¥åŠ è½½æ³¨è§£æœ¬èº«</li>
<li><blockquote>
<p>The introspection enables the ability to instantiate and read&#x2F;write bean properties without the use of Java reflection, based purely on the subset of build-time generated information.</p>
</blockquote>
</li>
<li>introspection å…è®¸åœ¨ä¸ä½¿ç”¨ Java åå°„çš„æƒ…å†µä¸‹è¿›è¡Œå®ä¾‹åŒ–å’Œè¯»&#x2F;å†™ bean å±æ€§, è¿™å®Œå…¨åŸºäºæ„å»ºæ—¶ç”Ÿæˆçš„ä¿¡æ¯å­é›†</li>
</ul>
<blockquote>
<p>Optimized reflection-free method dispatch is generated by overriding the dispatchOne method of AbstractInitializableBeanIntrospection, for example:</p>
</blockquote>
<p>ä¼˜åŒ–çš„æ— åå°„æ–¹æ³•è°ƒåº¦æ˜¯é€šè¿‡é‡å†™ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/beans/AbstractInitializableBeanIntrospection.html" >AbstractInitializableBeanIntrospection<i class="fas fa-external-link-alt"></i></a> çš„ <code>dispatchOne()</code> æ–¹æ³•ç”Ÿæˆçš„, ä¾‹å¦‚:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">final</span> Object <span class="title function_">dispatchOne</span><span class="params">(<span class="type">int</span> propertyIndex, Object bean, Object value)</span> &#123;</span><br><span class="line">    <span class="keyword">switch</span>(propertyIndex) &#123; <span class="comment">// 1</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> ((Person) bean).getName();   <span class="comment">// 2</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            ((Person) bean).setName((String) value);    <span class="comment">//3</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">throw</span> <span class="built_in">this</span>.unknownDispatchAtIndexException(propertyIndex);  <span class="comment">// 4</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>1</code> : æ¯ä¸ªè¯»æˆ–å†™æ–¹æ³•éƒ½åˆ†é…äº†ä¸€ä¸ªç´¢å¼•</p>
<p><code>2</code> : åœ¨è¯»å–æ–¹æ³•ä¸­ä½¿ç”¨ç´¢å¼•ç›´æ¥è·å–å€¼, è€Œä¸ä¾èµ–åå°„</p>
<p><code>3</code> : ç´¢å¼•ç”¨äºå†™æ–¹æ³•, ä¸ä½¿ç”¨åå°„æ¥è®¾ç½®å±æ€§</p>
<p><code>4</code> : å¦‚æœç´¢å¼•ä¸­ä¸å­˜åœ¨å±æ€§, åˆ™ä¼šå¼•å‘å¼‚å¸¸ ,å°½ç®¡è¿™æ˜¯å®ç°ç»†èŠ‚, ä½†æ˜¯ä»£ç è·¯å¾„æ°¸è¿œä¸ä¼šåˆ°è¾¾è¿™é‡Œ</p>
<blockquote>
<p>The approach to use a dispatch method with an index was used to avoid the need to generate a class per method (which would consume more memory) or introduce the overhead of lambdas.</p>
</blockquote>
<p>ä½¿ç”¨å¸¦æœ‰ç´¢å¼•çš„åˆ†æ´¾æ–¹æ³•çš„æ–¹å¼æ˜¯ä¸ºäº†é¿å…éœ€è¦ä¸ºæ¯ä¸ªæ–¹æ³•ç”Ÿæˆä¸€ä¸ªç±» (è¿™å°†æ¶ˆè€—æ›´å¤šå†…å­˜) æˆ–å¼•å…¥ Lambda çš„å¼€é”€</p>
<blockquote>
<p>In order to enable type instantiation the BeanIntrospectionWriter will also generate an implementation of the instantiateInternal method which contains the reflection-free code to instantiate a given type based on known valid argument types:</p>
</blockquote>
<p>ä¸ºäº†å¯ç”¨ç±»å‹å®ä¾‹åŒ–, <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/beans/visitor/BeanIntrospectionWriter.html" >BeanProspectionWriter<i class="fas fa-external-link-alt"></i></a> è¿˜å°†ç”Ÿæˆ <code>instantiateInternal</code> æ–¹æ³•çš„å®ç°, è¯¥æ–¹æ³•åŒ…å«æ— åå°„ä»£ç , ç”¨äºæ ¹æ®å·²çŸ¥çš„æœ‰æ•ˆå‚æ•°ç±»å‹å®ä¾‹åŒ–ç»™å®šç±»å‹:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Object <span class="title function_">instantiateInternal</span><span class="params">(Object[] args)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Person</span>(</span><br><span class="line">        (String) args[<span class="number">0</span>],</span><br><span class="line">        (Integer) args[<span class="number">1</span>]</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Bean-Definitions-Bean-å®šä¹‰"><a href="#Bean-Definitions-Bean-å®šä¹‰" class="headerlink" title="Bean Definitions (Bean å®šä¹‰)"></a>Bean Definitions (Bean å®šä¹‰)</h3><p>Micronaut æ˜¯ JSR-330 ä¾èµ–æ³¨å…¥è§„èŒƒçš„ä¸€ä¸ªå®ç°</p>
<p>ä¾èµ–æ³¨å…¥ (æˆ–æ§åˆ¶åè½¬) æ˜¯ Java ä¸­å¹¿æ³›é‡‡ç”¨çš„ä¸€ç§å¸¸è§æ¨¡å¼, å®ƒå…è®¸æ¾æ•£åœ°è§£è€¦ç»„ä»¶, ä»è€Œä½¿åº”ç”¨ç¨‹åºæ˜“äºæ‰©å±•å’Œæµ‹è¯•</p>
<blockquote>
<p>The way in which objects are wired together is decoupled from the objects themselves in this model by a separate programming model.</p>
</blockquote>
<p>åœ¨è¿™ä¸ªæ¨¡å‹ä¸­, å¯¹è±¡è¿æ¥åœ¨ä¸€èµ·çš„æ–¹å¼é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„ç¼–ç¨‹æ¨¡å‹ä¸å¯¹è±¡æœ¬èº«åˆ†ç¦»</p>
<blockquote>
<p>In the case of Micronaut this model is based on annotations defined within the JSR-330 specification plus an extended set of annotations located within the io.micronaut.context.annotation</p>
</blockquote>
<p>åœ¨ Micronaut çš„æƒ…å†µä¸‹, è¯¥æ¨¡å‹åŸºäº JSR-330 è§„èŒƒä¸­å®šä¹‰çš„æ³¨è§£, ä»¥åŠä½äº <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/context/annotation/package-summary.html" >io.micronaut.context.annotation<i class="fas fa-external-link-alt"></i></a> åŒ…ä¸­çš„ä¸€ç»„æ‰©å±•æ³¨è§£</p>
<blockquote>
<p>These annotations are visited by the Micronaut Compiler which traverses the source code language AST and builds a model used to wire objects together at runtime.</p>
</blockquote>
<p><a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide/#compilerArch" >Micronaut ç¼–è¯‘å™¨<i class="fas fa-external-link-alt"></i></a>å°†è®¿é—®è¿™äº›æ³¨è§£, è¯¥ç¼–è¯‘å™¨å°†éå†æºä»£ç è¯­è¨€ AST, å¹¶æ„å»ºä¸€ä¸ªç”¨äºåœ¨è¿è¡Œæ—¶å°†å¯¹è±¡è¿æ¥åœ¨ä¸€èµ·çš„æ¨¡å‹</p>
<blockquote>
<p>It is important to note that the actual object wiring is deferred until runtime.</p>
</blockquote>
<p>éœ€è¦æ³¨æ„çš„æ˜¯, å®é™…çš„å¯¹è±¡è¿æ¥æ¨è¿Ÿåˆ°è¿è¡Œæ—¶</p>
<blockquote>
<p>For Java code BeanDefinitionInjectProcessor (which is a Java Annotation Processor) is invoked from the Java compiler for each class annotated with a bean definition annotation.</p>
</blockquote>
<p>å¯¹äº Java ä»£ç , <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/annotation/processing/BeanDefinitionInjectProcessor.html" >BeanDefinitionInjectProcessor<i class="fas fa-external-link-alt"></i></a> (å®ƒæ˜¯ä¸€ä¸ª Java æ³¨è§£<a class="link"   target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/17/docs/api/java.compiler/javax/annotation/processing/Processor.html" >å¤„ç†å™¨<i class="fas fa-external-link-alt"></i></a>) ä» Java ç¼–è¯‘å™¨ä¸­ä¸ºæ¯ä¸ªç”¨ bean å®šä¹‰æ³¨è§£æ³¨é‡Šçš„ç±»è°ƒç”¨</p>
<blockquote>
<p>What constitutes a bean defining annotation is complex as it takes into account meta-annotations, but in general it is any annotation annotated with a JSR-330 bean @Scope</p>
</blockquote>
<p>bean å®šä¹‰æ³¨è§£çš„æ„æˆå¾ˆå¤æ‚, å› ä¸ºå®ƒè€ƒè™‘äº†å…ƒæ³¨è§£, ä½†ä¸€èˆ¬æ¥è¯´å®ƒæ˜¯ç”¨ JSR-330 bean <code>@Scope</code> æ³¨è§£æ³¨é‡Šçš„ä»»æ„æ³¨è§£</p>
<blockquote>
<p>The BeanDefinitionInjectProcessor will visit each bean in the user code source and generate additional byte code using the ASM byte code generation library that sits along side the annotated class in the same package.</p>
</blockquote>
<p><code>BeanDefinitionInjectProcessor</code> å°†ä¼šè®¿é—®ç”¨æˆ·ä»£ç æºä¸­çš„æ¯ä¸ª bean, å¹¶ä½¿ç”¨ä½äºåŒä¸€ä¸ªåŒ…ä¸­, åœ¨è¢«æ³¨è§£æ³¨é‡Šçš„ç±», æ—è¾¹çš„ ASM å­—èŠ‚ç ç”Ÿæˆåº“ç”Ÿæˆé¢å¤–çš„å­—èŠ‚ç </p>
<blockquote>
<p>For historic reasons the dependency injection processor does not use the TypeElementVisitor API but will likely do so in the future</p>
</blockquote>
<p>ç”±äºå†å²åŸå› , ä¾èµ–æ³¨å…¥å¤„ç†å™¨ä¸ä¼šä½¿ç”¨ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/visitor/TypeElementVisitor.html" >TypeElementVisitor<i class="fas fa-external-link-alt"></i></a> API ä½†æ˜¯ä¼šåœ¨å°†æ¥ä½¿ç”¨</p>
<blockquote>
<p>Byte code generation is implemented in the BeanDefinitionWriter which contains methods to â€œvisitâ€ different aspects of the way is bean is defined (the BeanDefinition).</p>
</blockquote>
<p>å­—èŠ‚ç ç”Ÿæˆæ˜¯åœ¨ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/writer/BeanDefinitionWriter.html" >BeanDefinitionWriter<i class="fas fa-external-link-alt"></i></a> ä¸­å®ç°çš„, å®ƒåŒ…å«ä¸€äº›æ–¹æ³•, å¯ä»¥ â€œè®¿é—®â€ ä¸åŒæ–¹é¢çš„æ–¹æ³•æ¥å®šä¹‰ bean çš„æ–¹å¼ (<a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/BeanDefinition.html" >BeanDefinition<i class="fas fa-external-link-alt"></i></a>)</p>
<p>ä¸‹å›¾å±•ç¤ºäº†è¿™ä¸ªæµç¨‹:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://docs.micronaut.io/latest/img/arch/beanwriter.png"
                      alt="img"
                ></p>
<p>ä¾‹å¦‚ç»™å®šå¦‚ä¸‹ç±»:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Singleton</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Vehicle</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> Engine engine</span><br><span class="line"></span><br><span class="line">    Vehicle(Engine engine) &#123; <span class="variable language_">this</span>.engine = engine&#125;</span><br><span class="line"></span><br><span class="line">    String start() &#123; engine.start() &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”Ÿæˆäº†å¦‚ä¸‹çš„ä¸œè¥¿:</p>
<ul>
<li><blockquote>
<p>A <code>example.$Vehicle$Definition$Reference</code> class that implements the <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/BeanDefinitionReference.html" >BeanDefinitionReference<i class="fas fa-external-link-alt"></i></a> interface that allows the application to soft load the bean definition without loading all of the metadata or the class itself (in the case where the introspected class is itself not on the classpath). Since references are loaded via <a class="link"   target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/api/java/util/ServiceLoader.html" >ServiceLoader<i class="fas fa-external-link-alt"></i></a> an entry in a generated <code>META-INF/services/io.micronaut.inject.BeanDefinitionReference</code> referring to this type is also generated at compilation time.</p>
</blockquote>
</li>
<li>ä¸€ä¸ª <code>example.$Vehicle$Definition$Reference</code> ç±», è¿™ä¸ªç±»å®ç°äº† <a href="">BeanDefinitionReference</a> æ¥å£, è¿™ä¸ªæ¥å£å…è®¸åº”ç”¨ç¨‹åºè½¯åŠ è½½ bean å®šä¹‰è€Œä¸éœ€è¦åŠ è½½å®Œæ•´çš„å…ƒæ•°æ®æˆ–è€…ç±»æœ¬èº« (åœ¨å†…çœç±»æœ¬èº«ä¸å­˜åœ¨äº classpath çš„æƒ…å†µ). å› ä¸ºå¼•ç”¨æ˜¯é€šè¿‡ <a class="link"   target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/api/java/util/ServiceLoader.html" >ServiceLoader<i class="fas fa-external-link-alt"></i></a> åŠ è½½çš„, å› æ­¤ç”Ÿæˆçš„ <code>META-INF/services/io.micronaut.inject.BeanDefinitionReference</code> ä¸­å¼•ç”¨æ­¤ç±»å‹çš„ entry ä¹Ÿä¼šåœ¨ç¼–è¯‘æ—¶ç”Ÿæˆ</li>
<li><blockquote>
<p>A <code>example.$Vehicle$Definition</code> which contains the actual <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/BeanDefinition.html" >BeanDefinition<i class="fas fa-external-link-alt"></i></a> information.</p>
</blockquote>
</li>
<li>ä¸€ä¸ªåŒ…å«å®é™… <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/BeanDefinition.html" >BeanDefinition<i class="fas fa-external-link-alt"></i></a> ä¿¡æ¯çš„ <code>example.$Vehicle$Definition</code></li>
</ul>
<p><a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/BeanDefinition.html" >BeanDefinition<i class="fas fa-external-link-alt"></i></a> æ˜¯ä¸€ç§ä¿å­˜ç‰¹å®šç±»å‹å…ƒæ•°æ®çš„ç±»å‹, åŒ…æ‹¬:</p>
<ul>
<li>ç±»çº§åˆ« [AnnotationMetadata](Class level AnnotationMetadata)</li>
<li>è®¡ç®—å‡ºçš„ JSR-330 <code>@Scope</code> å’Œ <code>@Qualifier</code></li>
<li>å¯ç”¨ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/InjectionPoint.html" >InjectPoint<i class="fas fa-external-link-alt"></i></a> å®ä¾‹çš„äº†è§£ (<code>Knowledge of the available InjectionPoint instances</code>)</li>
<li>å¯¹ä»»ä½•å·²å®šä¹‰çš„ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/ExecutableMethod.html" >ExecutableMethod<i class="fas fa-external-link-alt"></i></a> çš„å¼•ç”¨</li>
</ul>
<blockquote>
<p>In addition the BeanDefinition contains logic which knows how the bean is wired together, including how the type is constructed and fields and&#x2F;or methods injected.</p>
</blockquote>
<p>æ­¤å¤–, <code>BeanDefinition</code> åŒ…å«çŸ¥é“ bean å¦‚ä½•è¿æ¥åœ¨ä¸€èµ·çš„é€»è¾‘, åŒ…æ‹¬å¦‚ä½•æ„é€ ç±»å‹ä»¥åŠå¦‚ä½•æ³¨å…¥å­—æ®µå’Œ(æˆ–)æ–¹æ³•</p>
<blockquote>
<p>During compilation the ASM byte code library is used to fill out the details of the BeanDefinition, including a build method that, for the previous example, looks like:</p>
</blockquote>
<p>åœ¨ç¼–è¯‘æœŸé—´, ASM å­—èŠ‚ç åº“ç”¨äºå¡«å†™ <code>BeanDefinition</code> çš„è¯¦ç»†ä¿¡æ¯, åŒ…æ‹¬ä¸€ä¸ª <code>build</code> æ–¹æ³•, åœ¨ä¸Šä¸€ä¾‹å­ä¸­, è¯¥æ–¹æ³•å¦‚ä¸‹æ‰€ç¤º:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Vehicle <span class="title function_">build</span><span class="params">(</span></span><br><span class="line"><span class="params">    BeanResolutionContext resolution,   // <span class="number">1</span></span></span><br><span class="line"><span class="params">    BeanContext context,</span></span><br><span class="line"><span class="params">    BeanDefinition definition</span></span><br><span class="line"><span class="params">)</span> &#123;</span><br><span class="line">    <span class="type">Vehicle</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Vehicle</span>(</span><br><span class="line">        (Engine) <span class="built_in">super</span>.getBeanForConstructorArgument(   <span class="comment">// 2</span></span><br><span class="line">            resolution,</span><br><span class="line">            context,</span><br><span class="line">            <span class="number">0</span>,  <span class="comment">// 3</span></span><br><span class="line">            (Qualifier) <span class="literal">null</span></span><br><span class="line">        )</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">return</span> bean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>1</code> : <code>BeanResolutionContext</code> ç”¨äºè·Ÿè¸ªå¾ªç¯ bean å¼•ç”¨å¹¶æ”¹è¿›é”™è¯¯æŠ¥å‘Š</p>
<p><code>2</code> : è¯¥ç±»è¢«å®ä¾‹åŒ–, å¹¶ä¸”é€šè¿‡è°ƒç”¨ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/context/AbstractInitializableBeanDefinition.html" >AbstractInitializableBeanDefinition<i class="fas fa-external-link-alt"></i></a> çš„æ–¹æ³•æ¥æŸ¥æ‰¾æ¯ä¸ªæ„é€ æ–¹æ³•å‚æ•°</p>
<p><code>3</code> : åœ¨è¿™ä¸ªä¾‹å­ä¸­, å°†ä¸ªè·Ÿè¸ªæ„é€ æ–¹æ³•å‚æ•°çš„ç´¢å¼•</p>
<blockquote>
<p>Special handling is required when a Java field or method has private access. In this case Micronaut has no option but to fallback to using Java reflection to perform dependency injection.</p>
</blockquote>
<p>å½“ Java çš„ å­—æ®µæˆ–æ–¹æ³•æ˜¯ç§æœ‰è®¿é—®æƒé™æ—¶éœ€è¦ç‰¹æ®Šçš„å¤„ç†. åœ¨è¿™ç§æƒ…å†µä¸‹, Micronaut æ²¡æœ‰é€‰æ‹©, åªèƒ½ä½¿ç”¨ Java åå°„æ¥æ‰§è¡Œä¾èµ–æ³¨å…¥</p>
<h4 id="Configuration-Properties-Handling-é…ç½®å±æ€§å¤„ç†"><a href="#Configuration-Properties-Handling-é…ç½®å±æ€§å¤„ç†" class="headerlink" title="Configuration Properties Handling (é…ç½®å±æ€§å¤„ç†)"></a>Configuration Properties Handling (é…ç½®å±æ€§å¤„ç†)</h4><blockquote>
<p>The Micronaut Compiler handles beans declared with the meta-annotation @ConfigurationReader such as @ConfigurationProperties and @EachProperty distinctly to other beans.</p>
</blockquote>
<p><a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide/#compilerArch" >Micronaut ç¼–è¯‘å™¨<i class="fas fa-external-link-alt"></i></a>å¤„ç†ä½¿ç”¨å…ƒæ³¨è§£ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/context/annotation/ConfigurationReader.html" >@ConfigurationReader<i class="fas fa-external-link-alt"></i></a> å£°æ˜çš„ bean, ä¾‹å¦‚ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/context/annotation/ConfigurationProperties.html" >@ConfigurationProperties<i class="fas fa-external-link-alt"></i></a> å’Œ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/context/annotation/EachProperty.html" >@EachProperty<i class="fas fa-external-link-alt"></i></a>, è¿™ä¸å…¶ä»– bean ä¸åŒ</p>
<blockquote>
<p>In order to support binding Application Configuration to types annotated with one of the aforementioned annotations each discovered mutable bean property is dynamically annotated with the @Property annotation with the computed and normalized property name.</p>
</blockquote>
<p>ä¸ºäº†æ”¯æŒå°†<a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide/#config" >åº”ç”¨ç¨‹åºé…ç½®<i class="fas fa-external-link-alt"></i></a>ç»‘å®šåˆ°ä½¿ç”¨ä¸Šè¿°æ³¨è§£ä¹‹ä¸€æ³¨é‡Šçš„ç±», æ¯ä¸ªå‘ç°çš„å¯å˜ bean å±æ€§éƒ½ç”¨ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/context/annotation/Property.html" >@Property<i class="fas fa-external-link-alt"></i></a> æ³¨è§£åŠ¨æ€æ³¨é‡Š, å¹¶å¸¦æœ‰è®¡ç®—çš„å’Œè§„èŒƒåŒ–çš„å±æ€§åç§°</p>
<p>ä¾‹å¦‚æœ‰å¦‚ä¸‹ç»™å®šçš„ç±»:</p>
<p>Example - <code>@ConfiguratinoProperties</code>:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.context.annotation.ConfigurationProperties</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.Min</span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.NotBlank</span><br><span class="line"></span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(<span class="string">&#x27;my.engine&#x27;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EngineConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotBlank</span></span><br><span class="line">    String manufacturer = <span class="string">&#x27;Ford&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Min</span>(<span class="number">1</span>L)</span><br><span class="line">    <span class="type">int</span> cylinders</span><br><span class="line"></span><br><span class="line">    CrankShaft crankShaft = <span class="keyword">new</span> CrankShaft()</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ConfigurationProperties</span>(<span class="string">&#x27;crank-shaft&#x27;</span>)</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">CrankShaft</span> &#123;</span><br><span class="line">        Optional&lt;Double&gt; rofLength = Optional.empty()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>The setManufacturer(String) method will be annotated with @Property(name&#x3D;â€my.engine.manufacturerâ€) the value of which will be resolved from the configured Environment.</p>
</blockquote>
<p><code>setManufacturer(String)</code> æ–¹æ³•å°†ä¼šè¢« <code>@Property(name = &#39;my.engine.manufacturer&#39;)</code> æ³¨é‡Š, å€¼å°†ä¼šä»é…ç½®çš„ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide/#environments" >Environment<i class="fas fa-external-link-alt"></i></a> ä¸­è§£æ</p>
<blockquote>
<p>The injectBean method of AbstractInitializableBeanDefinition is subsequently overridden with logic to handle looking up the normalized property name my.engine.manufacturer from the current BeanContext and inject the value if it is present in a reflection-free manner.</p>
</blockquote>
<p>éšåä½¿ç”¨é€»è¾‘è¦†ç›– AbstractInitializableBeanDefinition çš„ injectBean æ–¹æ³•, ä»¥å¤„ç†ä»å½“å‰ BeanContext ä¸­æŸ¥æ‰¾è§„èŒƒåŒ–å±æ€§å my.engine.manufacturer çš„æ“ä½œ, å¹¶åœ¨è¯¥å€¼å­˜åœ¨æ—¶ä»¥æ— åå°„æ–¹å¼æ³¨å…¥è¯¥å€¼</p>
<blockquote>
<p>Property names are normalized into kebab case (lower case hyphen separated) which is the format used to store their values.</p>
</blockquote>
<p>å±æ€§åç§°è¢«è§„èŒƒåŒ–ä¸º kebab case (å°å†™è¿å­—ç¬¦åˆ†éš”), è¿™æ˜¯ç”¨äºå­˜å‚¨å…¶å€¼çš„æ ¼å¼</p>
<p>Example - Configuration Properties Injection:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Generated</span></span><br><span class="line"><span class="keyword">protected</span> Object <span class="title function_">injectBean</span><span class="params">(</span></span><br><span class="line"><span class="params">    BeanResolutionContext resolution,</span></span><br><span class="line"><span class="params">    BeanContext context,</span></span><br><span class="line"><span class="params">    Object bean</span></span><br><span class="line"><span class="params">)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.containsProperties(resolution, context)) &#123; <span class="comment">// 1</span></span><br><span class="line">        <span class="type">EngineConfig</span> <span class="variable">engineConfig</span> <span class="operator">=</span> (EngineConfig) bean;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.containsPropertyValue(resolution, context, <span class="string">&#x27;my.engine.manufacturer&#x27;</span>)) &#123;    <span class="comment">// 2</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> (String) <span class="built_in">super</span>.getPropertyValueForSetter(    <span class="comment">// 3</span></span><br><span class="line">                resolution,</span><br><span class="line">                context,</span><br><span class="line">                <span class="string">&#x27;setManufacturer&#x27;</span>,</span><br><span class="line">                Argument.of(String.class, <span class="string">&#x27;manufacturer&#x27;</span>),  <span class="comment">// 4</span></span><br><span class="line">                <span class="string">&#x27;my.engine.manufacturer&#x27;</span>,   <span class="comment">// 5</span></span><br><span class="line">                (String) <span class="literal">null</span>   <span class="comment">// 6</span></span><br><span class="line">            );</span><br><span class="line">            engineConfig.setManufacturer(value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>1</code> : æ·»åŠ äº†ä¸€ä¸ªé¡¶å±‚æ£€æŸ¥, ä»¥æŸ¥çœ‹æ˜¯å¦å­˜åœ¨å¸¦æœ‰ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/context/annotation/ConfigurationProperties.html" >@ConfigurationProperties<i class="fas fa-external-link-alt"></i></a> æ³¨è§£ä¸­å®šä¹‰çš„å‰ç¼€çš„å±æ€§</p>
<p><code>2</code> : æ‰§è¡Œæ£€æŸ¥ä»¥æŸ¥çœ‹è¯¥å±æ€§æ˜¯å¦å®é™…å­˜åœ¨</p>
<p><code>3</code> : å¦‚æœç¡®å®å¦‚æ­¤, åˆ™é€šè¿‡è°ƒç”¨ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/context/AbstractInitializableBeanDefinition.html" >AbstractInitializableBeanDefinition<i class="fas fa-external-link-alt"></i></a> çš„ <code>getPropertyValueForSetter</code> æ–¹æ³•æ¥æŸ¥æ‰¾è¯¥å€¼</p>
<p><code>4</code> : å°†åˆ›å»ºä¸€ä¸ª <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/core/type/Argument.html" >Argument<i class="fas fa-external-link-alt"></i></a> å®ä¾‹, ç”¨äºè½¬æ¢ä¸ºç›®æ ‡ç±»å‹ (åœ¨æœ¬ä¾‹ä¸­ä¸ºå­—ç¬¦ä¸²). <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/core/type/Argument.html" >Argument<i class="fas fa-external-link-alt"></i></a> è¿˜å¯èƒ½åŒ…å«æ³›å‹ä¿¡æ¯</p>
<p><code>5</code> : å±æ€§çš„è®¡ç®—å’Œè§„èŒƒåŒ–çš„è·¯å¾„</p>
<p><code>6</code> : å¦‚æœ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/core/bind/annotation/Bindable.html" >Bindable<i class="fas fa-external-link-alt"></i></a> æ³¨è§£ç”¨äºæŒ‡å®šé»˜è®¤å€¼, åˆ™ä¸ºé»˜è®¤å€¼</p>
<h3 id="AOP-Proxies-AOP-ä»£ç†"><a href="#AOP-Proxies-AOP-ä»£ç†" class="headerlink" title="AOP Proxies (AOP ä»£ç†)"></a>AOP Proxies (AOP ä»£ç†)</h3><blockquote>
<p>Micronaut supports annotation-based Aspect Oriented Programming (AOP) which allows decorating or introducing type behaviour through the use of interceptors defined in user code.</p>
</blockquote>
<p>Micronaut æ”¯æŒåŸºäºæ³¨è§£çš„ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide/#aop" >Aspect Oriented Programming<i class="fas fa-external-link-alt"></i></a> (AOP), å…è®¸é€šè¿‡ä½¿ç”¨ç”¨æˆ·ä»£ç ä¸­å®šä¹‰çš„æ‹¦æˆªå™¨æ¥ä¿®é¥°æˆ–å¼•å…¥ç±»å‹è¡Œä¸º</p>
<blockquote>
<p>The use of the AOP terminogy originates from AspectJ and historical use in Spring.</p>
</blockquote>
<p><a class="link"   target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Aspect-oriented_programming" >AOP æœ¯è¯­<i class="fas fa-external-link-alt"></i></a>çš„ä½¿ç”¨æºäº AspectJ å’Œ Spring ä¸­çš„å†å²ç”¨æ³•</p>
<blockquote>
<p>Any annotation defined by the framework can be meta-annotated with the @InterceptorBinding annotation which supports different kinds of interception including:</p>
</blockquote>
<p>æ¡†æ¶å®šä¹‰çš„ä»»ä½•æ³¨è§£éƒ½å¯ä»¥ä½¿ç”¨ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/aop/InterceptorBinding.html" >@InterceptorBinding<i class="fas fa-external-link-alt"></i></a> æ³¨è§£è¿›è¡Œå…ƒæ³¨é‡Š, è¯¥æ³¨è§£æ”¯æŒä¸åŒç±»å‹çš„æ‹¦æˆª, åŒ…æ‹¬:</p>
<ul>
<li><code>AROUND</code> - ä¸€ä¸ªå¯ç”¨äºä¿®é¥°ç°æœ‰æ–¹æ³•è°ƒç”¨çš„æ³¨è§£</li>
<li><code>AROUND_CONSTRUCT</code> - ä¸€ä¸ªå¯ç”¨äºæ‹¦æˆªä»»ä½•ç±»å‹çš„æ„é€ çš„æ³¨è§£</li>
<li><code>INTRODUCTION</code> - ä¸€ä¸ªå¯ç”¨äºâ€å¼•å…¥â€æ–°è¡Œä¸ºåˆ°æŠ½è±¡ç±»å‹æˆ–æ¥å£çš„æ³¨è§£</li>
<li><code>POST_CONSTRUCT</code> - ä¸€ä¸ªå¯ç”¨äºæ‹¦æˆª åœ¨å¯¹è±¡å®ä¾‹åŒ–ä¹‹åæ‰§è¡Œçš„<code>@PostConstruct</code>çš„ è°ƒç”¨çš„æ³¨è§£</li>
<li><code>PRE_DESTROY</code> - ä¸€ä¸ªå¯ç”¨äºæ‹¦æˆª åœ¨å¯¹è±¡å³å°†è¢«å¤„ç†ä¹‹åæ‰§è¡Œçš„<code>@PreDestroy</code>çš„ è°ƒç”¨çš„æ³¨è§£</li>
</ul>
<blockquote>
<p>One or many instances of Interceptor can be associated with an @InterceptorBinding allowing the user to implement behaviour that applies cross cutting concerns.</p>
</blockquote>
<p>ä¸€ä¸ªæˆ–å¤šä¸ª <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/aop/Interceptor.html" >Interceptor<i class="fas fa-external-link-alt"></i></a> å®ä¾‹å¯ä»¥ä¸ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/aop/InterceptorBinding.html" >@InterceptorBinding<i class="fas fa-external-link-alt"></i></a> å…³è”, å…è®¸ç”¨æˆ·å®ç°åº”ç”¨æ¨ªåˆ‡å…³æ³¨ç‚¹çš„è¡Œä¸º</p>
<blockquote>
<p>At an implementation level, the Micronaut Compiler will visit types that are meta-annotated with @InterceptorBinding and construct a new instance of AopProxyWriter which uses the ASM bytecode generation library to generate a subclass (or an implementation in the case of interfaces) of the annotated type.</p>
</blockquote>
<p>åœ¨å®ç°çº§åˆ«, <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide/#compilerArch" >Micronaut ç¼–è¯‘å™¨<i class="fas fa-external-link-alt"></i></a>å°†è¿”å›è¢« <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/aop/InterceptorBinding.html" >@InterceptorBinding<i class="fas fa-external-link-alt"></i></a> æ³¨è§£æ³¨é‡Šçš„ç±»å‹, å¹¶æ„é€ ä¸€ä¸ªæ–°çš„ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/aop/writer/AopProxyWriter.html" >AopProxyWriter<i class="fas fa-external-link-alt"></i></a> å®ä¾‹, è¯¥å®ä¾‹ä½¿ç”¨ ASM å­—èŠ‚ç ç”Ÿæˆåº“æ¥ç”Ÿæˆä¸€ä¸ªè¢«æ³¨é‡Šçš„ç±»çš„å­ç±» (æˆ–æ¥å£çš„å®ç°)</p>
<blockquote>
<p>Micronaut at no point modifies existing user byte code, the use of build-time generated proxies allows Micronaut to generate additional code that sits along side user code and enhances behaviour. This approach does have limitations however, for example it is required that annotated types are non-final and AOP advice cannot be applied to final or effectively final types such as Java 17 Records.</p>
</blockquote>
<p>Micronaut ä»»ä½•æ—¶å€™éƒ½ä¸ä¼šä¿®æ”¹å·²å­˜åœ¨çš„ç”¨æˆ·å­—èŠ‚ç , ä½¿ç”¨æ„å»ºæ—¶ç”Ÿæˆçš„ä»£ç†å¯ä»¥è®© Micronaut ç”Ÿæˆé™„åŠ çš„ä»£ç , è¿™äº›ä»£ç ä½äºç”¨æˆ·ä»£ç æ—è¾¹, å¹¶å¢å¼ºè¡Œä¸º. ç„¶è€Œ, è¿™ç§æ–¹æ³•ç¡®å®æœ‰å±€é™æ€§, ä¾‹å¦‚, éœ€è¦æ³¨é‡Šçš„ç±»å‹è¦æ±‚æ˜¯ non-final çš„, å¹¶ä¸” AOP advice ä¸èƒ½åº”ç”¨åˆ° final æˆ– æœ€ç»ˆä¸ºfinal çš„ç±»å‹ (ä¾‹å¦‚ Java 17 çš„ Records)</p>
<p>ä¾‹å¦‚æœ‰å¦‚ä¸‹ç»™å®šçš„æ³¨è§£</p>
<p>Example - Around Advice Annotation:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.microuant.aop.Around</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.*</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.annotation.ElementType.*</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.annotation.RetentionPolicy.RUNTIME</span><br><span class="line"></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Retention</span>(RUNTIME)         <span class="comment">// 1</span></span><br><span class="line"><span class="meta">@Target</span>([TYPE, METHOD])     <span class="comment">// 2</span></span><br><span class="line"><span class="meta">@Around</span>                     <span class="comment">// 3</span></span><br><span class="line"><span class="meta">@interface</span> NotNull &#123;&#125;</span><br></pre></td></tr></table></figure>

<p><code>1</code> : æ³¨è§£çš„ä¿ç•™ç­–ç•¥å¿…é¡»æ˜¯ <code>RUNTIME</code></p>
<p><code>2</code> : é€šå¸¸, ä½ å¸Œæœ›èƒ½å¤Ÿåœ¨ç±»æˆ–æ–¹æ³•çº§åˆ«åº”ç”¨ advice, å› æ­¤ç›®æ ‡ç±»å‹æ˜¯ <code>TYPE</code> å’Œ <code>METHOD</code></p>
<p><code>3</code> : è¿™é‡Œä½¿ç”¨ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/aop/Around.html" >@Around<i class="fas fa-external-link-alt"></i></a> æ³¨è§£, å®ƒæœ¬èº«ä½¿ç”¨ <code>@InterceptorBinding(kind=AROUND)</code> è¿›è¡Œæ³¨é‡Š, å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸º <code>AROUND</code> advice å®šä¹‰ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/aop/InterceptorBinding.html" >@InterceptorBinding<i class="fas fa-external-link-alt"></i></a> çš„ç®€å•å¿«æ·æ–¹å¼</p>
<p>å½“è¿™ä¸ªæ³¨è§£ä½¿ç”¨åœ¨ç±»æˆ–æ–¹æ³•ä¸Šæ—¶, ä¾‹å¦‚:</p>
<p>Example - Around Advice Usage:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jakarta.inject.Singleton</span><br><span class="line"></span><br><span class="line"><span class="meta">@Singleton</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NotNullExample</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="type">void</span> doWork(String taskName) &#123;</span><br><span class="line">        println <span class="string">&quot;Doing job: $taskName&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>The compiler will visit the type and the AopProxyWriter will generate additional bytecode using the ASM bytecode generation library.</p>
</blockquote>
<p>ç¼–è¯‘å™¨ä¼šæ‰«æè¿™ä¸ªç±», <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/aop/writer/AopProxyWriter.html" >AopProxyWriter<i class="fas fa-external-link-alt"></i></a> å°†ä½¿ç”¨ ASM å­—èŠ‚ç ç”Ÿæˆåº“ç”Ÿæˆé™„åŠ å­—èŠ‚ç </p>
<blockquote>
<p>During compilation the AopProxyWriter instance essentially proxies the BeanDefinitionWriter (see Bean Definitions), decorating the existing bytecode generation with additional behaviour.</p>
</blockquote>
<p>åœ¨ç¼–è¯‘æœŸé—´, <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/aop/writer/AopProxyWriter.html" >AopProxyWriter<i class="fas fa-external-link-alt"></i></a> å®ä¾‹å®é™…ä¸Šä»£ç†äº† <code>BeanDefinitionWriter</code>, ç”¨é™„åŠ è¡Œä¸ºè£…é¥°ç°æœ‰çš„å­—èŠ‚ç ç”Ÿæˆ</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://docs.micronaut.io/latest/img/arch/aop.png"
                      alt="img"
                ></p>
<p><a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/writer/BeanDefinitionWriter.html" >BeanDefinitionWriter<i class="fas fa-external-link-alt"></i></a> å°†ä¸ºæ¯ä¸ª bean ç”Ÿæˆå¸¸è§„ç±», åŒ…æ‹¬:</p>
<ul>
<li><code>$NotNullExample$Definition.class</code> - åŸå§‹çš„æ²¡æœ‰è¢«è£…é¥°çš„ bean å®šä¹‰</li>
<li><code>$NotNullExample$Definition$Exec.class</code> - ä¸€ä¸ªåŒ…å«å…è®¸ä¸ä½¿ç”¨åå°„åˆ†æ´¾(dispatching)åˆ°æ¯ä¸ªè¢«æ‹¦æˆªæ–¹æ³•çš„é€»è¾‘ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/context/ExecutableMethodsDefinition.html" >ExecutableMethodsDefinition<i class="fas fa-external-link-alt"></i></a> çš„å®ç°</li>
</ul>
<p><a href="">AopProxyWriter</a> å°†ä¼šè£…é¥°è¿™ä¸ªè¡Œä¸ºå¹¶ç”Ÿæˆ 3 ä¸ªé™„åŠ ç±»:</p>
<ul>
<li><code>$NotNullExample$Definition$Intercepted.class</code> - ä¿®é¥°ç±»çš„ä¸€ä¸ªå­ç±», åŒ…å«å¯¹åº”ç”¨çš„ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/aop/MethodInterceptor.html" >MethodInterceptor<i class="fas fa-external-link-alt"></i></a> å®ä¾‹çš„å¼•ç”¨, å¹¶è¦†ç›–æ‰€æœ‰è¢«æ‹¦æˆªçš„æ–¹æ³•, æ„é€  <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/aop/chain/MethodInterceptorChain.html" >MethodInterceptorChain<i class="fas fa-external-link-alt"></i></a> å®ä¾‹å¹¶è°ƒç”¨åº”ç”¨çš„æ‹¦æˆªå™¨</li>
<li><code>$NotNullExample$Definition$Intercepted$Definition.class</code> - å¯¹åŸå§‹æœªè£…é¥°çš„ bean å®šä¹‰è¿›è¡Œå­ç±»åŒ–çš„ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/BeanDefinition.html" >BeanDefinition<i class="fas fa-external-link-alt"></i></a></li>
<li><code>$NotNullExample$Definition$Intercepted$Definition$Reference.class</code> - ä¸€ä¸ª<a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/BeanDefinitionReference.html" >BeanDefinitionReference<i class="fas fa-external-link-alt"></i></a>, èƒ½å¤Ÿè½¯åŠ è½½è¢«æ‹¦æˆªçš„ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/BeanDefinition.html" >BeanDefinition<i class="fas fa-external-link-alt"></i></a></li>
</ul>
<blockquote>
<p>The majority of the classes generated are metadata for loading and resolving the BeanDefinition.</p>
</blockquote>
<p>ç”Ÿæˆçš„å¤§å¤šæ•°ç±»éƒ½æ˜¯ç”¨äºåŠ è½½å’Œè§£æ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/BeanDefinition.html" >BeanDefinition<i class="fas fa-external-link-alt"></i></a> çš„å…ƒæ•°æ®</p>
<p>å®é™…æ„å»ºæ—¶ä»£ç† æ˜¯ä¸€ä¸ª <code>$Intercepted</code> ç»“å°¾çš„ç±»</p>
<blockquote>
<p>This class implements the Intercepted interface and subclasses the proxied type, overriding any non-final and non-private methods to invoke the MethodInterceptorChain.</p>
</blockquote>
<p>è¿™ä¸ªç±»å®ç°äº† <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/aop/Intercepted.html" >Intercepted<i class="fas fa-external-link-alt"></i></a> æ¥å£, å¹¶å°†ä»£ç†ç±»å­ç±»åŒ–, é‡å†™æ‰€æœ‰ non-final å’Œ non-private æ–¹æ³•æ¥è°ƒç”¨ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/aop/chain/MethodInterceptorChain.html" >MethodInterceptorChain<i class="fas fa-external-link-alt"></i></a></p>
<blockquote>
<p>An implementation will create a constructor which is used to wire in the dependencies on the intercepted type that looks like:</p>
</blockquote>
<p>å®ç°å°†ä¼šåˆ›å»ºä¸€ä¸ªæ„é€ æ–¹æ³•, è¯¥æ„é€ æ–¹æ³•ç”¨äºè¿æ¥è¢«æ‹¦æˆªç±»ä¸Šçš„ä¾èµ–é¡¹, å¦‚ä¸‹æ‰€ç¤º:</p>
<p>Example - An intercepted type constructor:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Generated</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">$NotNullExample$Definition$Intercepted</span> <span class="keyword">extends</span> <span class="title class_">NotNullExample</span> <span class="keyword">implements</span> <span class="title class_">Intercepted</span> &#123;    <span class="comment">// 1</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Interceptor[][] $interceptors = <span class="keyword">new</span> <span class="title class_">Interceptor</span>[<span class="number">1</span>][];</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ExecutableMethod[] $proxyMethods = <span class="keyword">new</span> <span class="title class_">ExecutableMethod</span>[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> $NotNullExample$Definition$Intercepted(</span><br><span class="line">        BeanResolutionContext resolution,</span><br><span class="line">        BeanContext context,</span><br><span class="line">        Qualifier qualifier,</span><br><span class="line">        List&lt;Interceptor&gt; interceptors</span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="type">Exec</span> <span class="variable">executableMethods</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Exec</span>(<span class="literal">true</span>);    <span class="comment">// 2</span></span><br><span class="line">        <span class="built_in">this</span>.$proxyMethods[<span class="number">0</span>] = executableMethods.getExecutableMethodByIndex(<span class="number">0</span>);    <span class="comment">// 3</span></span><br><span class="line">        <span class="built_in">this</span>.$interceptors[<span class="number">0</span>] = InterceptorChain.resolveAroundInterceptors(</span><br><span class="line">            context,</span><br><span class="line">            <span class="built_in">this</span>.$proxyMethods[<span class="number">0</span>],</span><br><span class="line">            interceptors</span><br><span class="line">        );  <span class="comment">// 4</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>1</code> : <code>@Generated</code> å­ç±»ç»§æ‰¿äº†è¢«è£…é¥°ç±»å¹¶å®ç°äº† <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/aop/Intercepted.html" >Intercepted<i class="fas fa-external-link-alt"></i></a> æ¥å£</p>
<p><code>2</code> : æ„é€ ä¸€ä¸ª <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/context/ExecutableMethodsDefinition.html" >ExecutableMethodsDefinition<i class="fas fa-external-link-alt"></i></a> å®ä¾‹, å°†æ— åå°„åˆ†æ´¾å™¨è§£æä¸ºåŸå§‹æ–¹æ³•</p>
<p><code>3</code> : åä¸º <code>$proxyMethods</code> çš„å†…éƒ¨æ•°ç»„åŒ…å«å¯¹ç”¨äºä»£ç†è°ƒç”¨çš„æ¯ä¸ª <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/ExecutableMethod.html" >ExecutableMethod<i class="fas fa-external-link-alt"></i></a> å®ä¾‹çš„å¼•ç”¨</p>
<p><code>4</code> : åä¸º <code>$interceptors</code> çš„å†…éƒ¨æ•°æ®åŒ…å«å¯¹äºæ¯ä¸ªæ–¹æ³•åº”ç”¨çš„ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/aop/Interceptor.html" >æ‹¦æˆªå™¨<i class="fas fa-external-link-alt"></i></a> å®ä¾‹çš„å¼•ç”¨, å› ä¸º <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/aop/InterceptorBinding.html" >@InterceptorBinding<i class="fas fa-external-link-alt"></i></a> å¯ä»¥æ˜¯ç±»çº§åˆ«æˆ–è€…æ–¹æ³•çº§åˆ«, å¯¹äºæ¯ä¸ªæ–¹æ³•, å®ƒä»¬å¯èƒ½ä¸åŒ</p>
<blockquote>
<p>Each non-final and non-private method of the proxied type that has an @InterceptorBinding associated with it (either type level or method level) is overridden with logic that proxies the original method, for example:</p>
</blockquote>
<p>ä»£ç†ç±»å‹çš„æ¯ä¸ª non-final å’Œ non-private éƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„ <a href="">@InterceptorBinding</a> (ç±»çº§åˆ«æˆ–æ–¹æ³•çº§åˆ«), ä½¿ç”¨ä»£ç†åŸå§‹æ–¹æ³•çš„é€»è¾‘æ¥è¦†ç›–è¿™äº›æ–¹æ³•, ä¾‹å¦‚:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doWork</span><span class="params">(String taskName)</span> &#123;</span><br><span class="line">    <span class="type">ExecutableMethod</span> <span class="variable">method</span> <span class="operator">=</span> <span class="built_in">this</span>.$proxyMethods[<span class="number">0</span>];</span><br><span class="line">    Interceptor[] interceptors = <span class="built_in">this</span>.$interceptrors[<span class="number">0</span>];            <span class="comment">// 1</span></span><br><span class="line">    <span class="type">MethodInterceptorChain</span> <span class="variable">chain</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MethodInterceptorChain</span>(      <span class="comment">// 2</span></span><br><span class="line">        interceptors,</span><br><span class="line">        <span class="built_in">this</span>,</span><br><span class="line">        method,</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;taskName&#125;</span><br><span class="line">    );</span><br><span class="line">    chain.proceed();                                                <span class="comment">// 3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>1</code> : æ‰¾åˆ°è¯¥æ–¹æ³•çš„ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/ExecutableMethod.html" >ExecutableMethod<i class="fas fa-external-link-alt"></i></a> å®ä¾‹å’Œ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/aop/Interceptor.html" >Interceptor<i class="fas fa-external-link-alt"></i></a> å®ä¾‹æ•°ç»„</p>
<p><code>2</code> : ä½¿ç”¨æ‹¦æˆªå™¨æ•°ç»„, ä¸€ä¸ªè¢«æ‹¦æˆªçš„å®ä¾‹, æ–¹æ³•å’Œå‚æ•°æ¥æ„é€ ä¸€ä¸ªæ–°çš„ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/aop/chain/MethodInterceptorChain.html" >MethodInterceptorChain<i class="fas fa-external-link-alt"></i></a></p>
<p><code>3</code> : è°ƒç”¨ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/aop/chain/MethodInterceptorChain.html" >MethodInterceptorChain<i class="fas fa-external-link-alt"></i></a> ä¸Šçš„ <code>proceed()</code> æ–¹æ³•</p>
<blockquote>
<p>Note that the default behaviour of the @Around annotation is to invoke the original overridden method of the target type by calling the super implementation via a generated synthetic bridge method that allows access to the super implementation (in the above case NotNullExample).</p>
</blockquote>
<p>æ³¨æ„, <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/aop/Around.html" >@Around<i class="fas fa-external-link-alt"></i></a> æ³¨è§£çš„é»˜è®¤è¡Œä¸ºæ˜¯ é€šè¿‡ç”Ÿæˆåˆæˆæ¡¥æ–¹æ³• è°ƒç”¨çˆ¶ç±»å®ç° æ¥è°ƒç”¨ç›®æ ‡ç±»å‹çš„åŸå§‹è¢«è¦†ç›–æ–¹æ³•, è¯¥åˆæˆæ¡¥æ–¹æ³•å…è®¸è®¿é—®çˆ¶ç±»å®ç°</p>
<blockquote>
<p>In this arrangement the proxy and the proxy target are the same object, with interceptors being invoked and the call to proceed() invoke the original implementation via a call to super.doWork() in the case above.</p>
</blockquote>
<p>åœ¨è¿™ç§å®‰æ’ä¸­, ä»£ç†å’Œä»£ç†ç›®æ ‡æ˜¯åŒä¸€ä¸ªå¯¹è±¡, æ‹¦æˆªå™¨è¢«è°ƒç”¨, åœ¨ä¸Šè¿°æƒ…å†µä¸‹, è°ƒç”¨ <code>proceed()</code> æ˜¯é€šè¿‡è°ƒç”¨ <code>super.doWork()</code> æ¥æ‰§è¡ŒåŸå§‹çš„å®ç°</p>
<blockquote>
<p>However, this behaviour can be customized using the @Around annotation.</p>
</blockquote>
<p>ä½†æ˜¯, ä½¿ç”¨ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/aop/Around.html" >@Around<i class="fas fa-external-link-alt"></i></a> å¯ä»¥è‡ªå®šä¹‰è¿™ä¸ªè¡Œä¸º</p>
<blockquote>
<p>By setting @Around(proxyTarget&#x3D;true) the generated code will also implement the InterceptedProxy interface which defines a single method called interceptedTarget() that resolves the target object the proxy should delegate method calls to.</p>
</blockquote>
<p>é€šè¿‡è®¾ç½® <code>@Around(proxyTarget=true)</code>, ç”Ÿæˆçš„ä»£ç è¿˜å°†å®ç° <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/aop/InterceptedProxy.html" >InterceptedProxy<i class="fas fa-external-link-alt"></i></a> æ¥å£, è¯¥æ¥å£å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>interceptedTarget()</code> çš„æ–¹æ³•, è¯¥æ–¹æ³•è§£æ ä»£ç†åº”è¯¥å°†æ–¹æ³•è°ƒç”¨å§”æ‰˜ç»™çš„ ç›®æ ‡å¯¹è±¡</p>
<blockquote>
<p>The default behaviour (proxyTarget&#x3D;false) is more efficient memory wise as only a single BeanDefinition is required and a single instance of the proxied type.</p>
</blockquote>
<p>é»˜è®¤è¡Œä¸º (<code>proxyTarget=false</code>) åœ¨å†…å­˜æ–¹é¢æ•ˆç‡æ›´é«˜, å› ä¸ºåªéœ€è¦ä¸€ä¸ª <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/BeanDefinition.html" >BeanDefinition<i class="fas fa-external-link-alt"></i></a> å’Œä¸€ä¸ªä»£ç†ç±»çš„å®ä¾‹</p>
<blockquote>
<p>The evaluation of the proxy target is eager and done when the proxy is first created, however it can be made lazy by setting @Around(lazy&#x3D;true, proxyTarget&#x3D;true) in which case the proxy will only be retrieved when a proxied method is invoked.</p>
</blockquote>
<p>ä»£ç†ç›®æ ‡çš„è¯„ä¼°æ˜¯é¥¥é¥¿çš„, ä¸”åœ¨ç¬¬ä¸€æ¬¡åˆ›å»ºä»£ç†æ—¶è¿›è¡Œ ,ä½†æ˜¯å¯ä»¥é€šè¿‡è®¾ç½® <code>@Around(lazy=true, proxyTarget=true)</code> ä½¿å…¶å˜æˆæƒ°æ€§, åœ¨è¿™ç§æƒ…å†µä¸‹, åªæœ‰åœ¨è°ƒç”¨ä»£ç†æ–¹æ³•æ—¶æ‰ä¼šæ£€ç´¢ä»£ç†</p>
<blockquote>
<p>The difference in behaviour between proxying the target with proxyTarget&#x3D;true is illustrated in the following diagram:</p>
</blockquote>
<p>ä¸‹å›¾æ˜¾ç¤ºäº† <code>proxyTarget=true</code> ä»£ç†ç›®æ ‡çš„è¡Œä¸ºå·®å¼‚:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://docs.micronaut.io/latest/img/arch/aop-proxies.png"
                      alt="img"
                ></p>
<p>å›¾ç‰‡å·¦è¾¹çš„åºåˆ— (<code>proxyTarget=true</code>) é€šè¿‡è°ƒç”¨ super æ¥è°ƒç”¨ä»£ç†æ–¹æ³•</p>
<p>å›¾ç‰‡å³è¾¹çš„åºåˆ—ä» <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/context/BeanContext.html" >BeanContext<i class="fas fa-external-link-alt"></i></a> ä¸­æŸ¥æ‰¾ä»£ç†ç›®æ ‡å¹¶è°ƒç”¨ç›®æ ‡ä¸Šçš„æ–¹æ³•</p>
<blockquote>
<p>One final customization option is @Around(hotswap&#x3D;true) which triggers the compiler to produce a compile-time proxy that implements HotSwappableInterceptedProxy which defines a single method called swap(..) that allows swapping out the target of the proxy with a new instance (to allow this to be thread safe the generated code uses a ReentrantReadWriteLock).</p>
</blockquote>
<p>æœ€åä¸€ä¸ªå®šåˆ¶é€‰é¡¹æ˜¯ <code>@Around(hotswap = true)</code>, å®ƒè§¦å‘ç¼–è¯‘å™¨ç”Ÿæˆä¸€ä¸ªç¼–è¯‘æ—¶ä»£ç†, è¯¥ä»£ç†å®ç°äº† <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/aop/HotSwappableInterceptedProxy.html" >HotSwappableInterceptedProxy<i class="fas fa-external-link-alt"></i></a>, è¯¥ä»£ç†å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>swap(..)</code> çš„æ–¹æ³•, è¿™ä¸ªæ–¹æ³•å…è®¸ç”¨ä¸€ä¸ªæ–°å®ä¾‹äº¤æ¢ä»£ç†çš„ç›®æ ‡ (ä¸ºäº†ä½¿çº¿ç¨‹å®‰å…¨, ç”Ÿæˆçš„ä»£ç ä½¿ç”¨ <code>ReentrantReadWriteLock</code>)</p>
<h4 id="Security-Considerations-å®‰å…¨æ³¨æ„äº‹é¡¹"><a href="#Security-Considerations-å®‰å…¨æ³¨æ„äº‹é¡¹" class="headerlink" title="Security Considerations (å®‰å…¨æ³¨æ„äº‹é¡¹)"></a>Security Considerations (å®‰å…¨æ³¨æ„äº‹é¡¹)</h4><blockquote>
<p>Method interception via AROUND advice is typically used to define logic that addresses cross cutting concerns, one of which is security.</p>
</blockquote>
<p>é€šè¿‡ <code>AROUND</code> advice è¿›è¡Œçš„æ–¹æ³•æ‹¦æˆªé€šå¸¸ç”¨äºå®šä¹‰è§£å†³äº¤å‰å…³æ³¨ç‚¹çš„é€»è¾‘, å…¶ä¸­ä¹‹ä¸€å°±æ˜¯å®‰å…¨</p>
<blockquote>
<p>When multiple Interceptor instances apply to a single method it may be important from a security perspective that these interceptors execute in a specific order.</p>
</blockquote>
<p>å½“å¤šä¸ª<a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/aop/Interceptor.html" >æ‹¦æˆªå™¨<i class="fas fa-external-link-alt"></i></a>å®ä¾‹åº”ç”¨äºå•ä¸ªæ–¹æ³•æ—¶, ä»å®‰å…¨è§’åº¦æ¥çœ‹, è¿™äº›æ‹¦æˆªå™¨æŒ‰ç‰¹å®šé¡ºåºæ‰§è¡Œå¯èƒ½å¾ˆé‡è¦</p>
<blockquote>
<p>The Interceptor interface extends the Ordered interface to enable the developer to control interceptor ordering by overriding the getOrder() method.</p>
</blockquote>
<p><a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/aop/Interceptor.html" >Interceptor<i class="fas fa-external-link-alt"></i></a> æ¥å£ç»§æ‰¿äº† <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/core/order/Ordered.html" >Ordered<i class="fas fa-external-link-alt"></i></a> æ¥å£, ä½¿å¼€å‘è€…èƒ½å¤Ÿé€šè¿‡é‡å†™ <code>getOrder()</code> æ–¹æ³•æ¥æ§åˆ¶æ‹¦æˆªå™¨çš„é¡ºåº</p>
<blockquote>
<p>When the MethodInterceptorChain is constructed and multiple interceptors are present they are ordered with HIGHEST priority interceptors executed first.</p>
</blockquote>
<p>å½“ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/aop/chain/MethodInterceptorChain.html" >MethodInterceptorChain<i class="fas fa-external-link-alt"></i></a> è¢«æ„é€ å¹¶ä¸”å­˜åœ¨å¤šä¸ªæ‹¦æˆªå™¨æ—¶, å®ƒä»¬è¢«æ’åº, æœ€é«˜ä¼˜å…ˆçº§çš„æ‹¦æˆªå™¨é¦–å…ˆè¢«æ‰§è¡Œ</p>
<blockquote>
<p>To aid the developer who defines their own Around Advice the InterceptPhase enumeration defines various constants that can be used to correctly declare the value of getOrder() (for example security typically falls within the VALIDATE phase).</p>
</blockquote>
<p>ä¸ºäº†å¸®åŠ©å¼€å‘è€…å®šä¹‰è‡ªå·±çš„ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide/#aroundAdvice" >Around Advice<i class="fas fa-external-link-alt"></i></a>, <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/aop/InterceptPhase.html" >InterceptPhase<i class="fas fa-external-link-alt"></i></a> æšä¸¾å®šä¹‰äº†å„ç§å¸¸é‡, è¿™äº›å¸¸é‡å¯ç”¨äºæ­£ç¡®å£°æ˜ <code>getOrder()</code> çš„å€¼ (ä¾‹å¦‚, å®‰å…¨æ€§é€šå¸¸å±äº <code>VALIDATE</code> é˜¶æ®µ)</p>
<blockquote>
<p>Trace level logging can be enabled for the io.micronaut.aop.chain package to debug resolved interceptor order.</p>
</blockquote>
<p>å¯ä»¥ä¸º <code>io.micronaut.aop.chain</code> åŒ…å¼€å¯è·Ÿè¸ªæ—¥å¿—çº§åˆ«æ¥è°ƒè¯•è§£æåçš„æ‹¦æˆªå™¨é¡ºåº</p>
<h3 id="Application-Context-åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡"><a href="#Application-Context-åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡" class="headerlink" title="Application Context (åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡)"></a>Application Context (åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡)</h3><blockquote>
<p>Once the job of the Micronaut Compiler is complete and the required classes generated, it is up to the BeanContext to load the classes for runtime execution.</p>
</blockquote>
<p>ä¸€æ—¦ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide/#compilerArch" >Micronaut ç¼–è¯‘å™¨<i class="fas fa-external-link-alt"></i></a> çš„å·¥ä½œå®Œæˆå¹¶ç”Ÿæˆäº†æ‰€éœ€çš„ç±», <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/BeanContext.html" >BeanContext<i class="fas fa-external-link-alt"></i></a> å°±å¯ä»¥åŠ è½½è¿™äº›ç±»ä»¥ä¾›è¿è¡Œæ—¶æ‰§è¡Œ</p>
<blockquote>
<p>Whilst the standard Java service loader mechanism is used to define instances of BeanDefinitionReference, the instances themselves are instead loaded with SoftServiceLoader which is a more lenient implementation that allows checking if the service is actually present before loading and also allows parallel loading of services.</p>
</blockquote>
<p>è™½ç„¶ <a class="link"   target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/ServiceLoader.html" >æ ‡å‡† Java æœåŠ¡åŠ è½½å™¨æœºåˆ¶<i class="fas fa-external-link-alt"></i></a> ç”¨äºå®šä¹‰ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/BeanDefinitionReference.html" >BeanDefinitionReference<i class="fas fa-external-link-alt"></i></a> çš„æ˜¯å®ä¾‹, å½“å®ä¾‹æœ¬èº«ä½¿ç”¨ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/core/io/service/SoftServiceLoader.html" >SoftServiceLoader<i class="fas fa-external-link-alt"></i></a> åŠ è½½, è¿™æ˜¯ä¸€ç§æ›´å®½æ¾çš„å®ç°, å…è®¸åœ¨åŠ è½½ä¹‹å‰æ£€æŸ¥æœåŠ¡æ˜¯å¦å®é™…å­˜åœ¨, è¿˜å…è®¸å¹¶è¡ŒåŠ è½½æœåŠ¡</p>
<p><a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/BeanContext.html" >BeanContext<i class="fas fa-external-link-alt"></i></a> æ‰§è¡Œå¦‚ä¸‹æ­¥éª¤:</p>
<ol>
<li>å¹¶è¡Œåœ°è½¯åŠ è½½æ‰€æœ‰ [BeanDefinitionReference](Soft load all BeanDefinitionReference instances in parallel)</li>
<li>å®ä¾‹åŒ–æ‰€æœ‰ä½¿ç”¨ @Context æ³¨è§£æ³¨é‡Šçš„ beans (beans çš„ä½œç”¨åŸŸæ˜¯æ•´ä¸ªä¸Šä¸‹æ–‡)</li>
<li>ä¸ºå‘ç°çš„æ¯ä¸ªå·²å¤„ç†çš„ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/inject/ExecutableMethod.html" >ExecutableMethod<i class="fas fa-external-link-alt"></i></a> è¿è¡Œæ¯ä¸ª <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/context/processor/ExecutableMethodProcessor.html" >ExecutableMethodProcessor<i class="fas fa-external-link-alt"></i></a>. å¦‚æœä½¿ç”¨ <code>@Executable(processOnStartup = true)</code> å¯¹æ–¹æ³•è¿›è¡Œå…ƒæ³¨é‡Š, åˆ™è¯¥æ–¹æ³•è¢«è§†ä¸º â€œå·²å¤„ç†â€</li>
<li>åœ¨å¯åŠ¨ä¸Šä¸‹æ–‡æ—¶, åœ¨ç±»å‹ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/context/event/StartupEvent.html" >StartupEvent<i class="fas fa-external-link-alt"></i></a> ä¸Šå‘å¸ƒäº‹ä»¶</li>
</ol>
<p>åŸºæœ¬æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤º:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://docs.micronaut.io/latest/img/arch/beancontext.png"
                      alt="img"
                ></p>
<blockquote>
<p>The ApplicationContext is a specialized version of the BeanContext that adds the notion of one or more active environments (encapsulated by Environment) and conditional bean loading based on this environment.</p>
</blockquote>
<p><a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/context/ApplicationContext.html" >ApplicationContext<i class="fas fa-external-link-alt"></i></a> æ˜¯ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/context/BeanContext.html" >BeanContext<i class="fas fa-external-link-alt"></i></a> çš„ç‰¹åˆ«ç‰ˆæœ¬, å®ƒæ·»åŠ äº†ä¸€ä¸ªæˆ–å¤šä¸ªæ´»åŠ¨ç¯å¢ƒ (å°è£…ä¸º <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/context/Environment.html" >Environment<i class="fas fa-external-link-alt"></i></a>) å’ŒåŸºäºè¯¥ç¯å¢ƒçš„ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide/#conditionalBeans" >æ¡ä»¶åŒ– bean åŠ è½½<i class="fas fa-external-link-alt"></i></a></p>
<blockquote>
<p>The Environment is loaded from one or more defined PropertySource instances that are discovered via the standard Java service loader mechanism by loading instances of PropertySourceLoader.</p>
</blockquote>
<p><a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/context/Environment.html" >ç¯å¢ƒ<i class="fas fa-external-link-alt"></i></a>æ˜¯ä»ä¸€ä¸ªæˆ–å¤šä¸ªå®šä¹‰çš„ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/context/env/PropertySource.html" >PropertySource<i class="fas fa-external-link-alt"></i></a> å®ä¾‹åŠ è½½çš„, è¿™äº›å®ä¾‹æ˜¯é€šè¿‡ <a class="link"   target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/ServiceLoader.html" >æ ‡å‡† Java æœåŠ¡åŠ è½½å™¨æœºåˆ¶<i class="fas fa-external-link-alt"></i></a> é€šè¿‡åŠ è½½ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/context/env/PropertySourceLoader.html" >PropertySourceLoader<i class="fas fa-external-link-alt"></i></a> å®ä¾‹å‘ç°çš„</p>
<blockquote>
<p>A developer can extend Micronaut to load a PropertySource through an entirely custom mechanism by adding an additional implementation and the associated META-INF&#x2F;services&#x2F;io.micronaut.context.env.PropertySourceLoader file referencing this class.</p>
</blockquote>
<p>å¼€å‘è€…å¯ä»¥é€šè¿‡ä¸€ä¸ªå®Œå…¨å®šåˆ¶çš„æœºåˆ¶æ‰©å±• Micronaut æ¥åŠ è½½ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/context/env/PropertySource.html" >PropertySource<i class="fas fa-external-link-alt"></i></a>, æ–¹æ³•æ˜¯æ·»åŠ ä¸€ä¸ªé™„åŠ çš„å®ç°å’Œå¼•ç”¨è¯¥ç±»çš„ç›¸å…³ <code>META-INF/services/io.micronaut.context.env.PropertySourceLoader</code> æ–‡ä»¶</p>
<blockquote>
<p>A high level different between a BeanContext and an ApplicationContext is illustrated below:</p>
</blockquote>
<p>BeanContext å’Œ ApplicationContext ä¹‹é—´çš„é«˜çº§åŒºåˆ«å¦‚ä¸‹æ‰€ç¤º:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://docs.micronaut.io/latest/img/arch/applicationcontext.png"
                      alt="img"
                ></p>
<blockquote>
<p>As seen above the ApplicationContext loads the Environment which is used for multiple purposes including:</p>
</blockquote>
<p>å¦‚ä¸Šæ‰€ç¤º, <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/context/ApplicationContext.html" >ApplicationContext<i class="fas fa-external-link-alt"></i></a> åŠ è½½ç”¨äºå¤šç§ç›®çš„çš„<a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/context/Environment.html" >ç¯å¢ƒ<i class="fas fa-external-link-alt"></i></a>, åŒ…æ‹¬:</p>
<ul>
<li>é€šè¿‡ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide/#conditionalBeans" >Bean Requirements<i class="fas fa-external-link-alt"></i></a> å¯ç”¨å’Œç¦ç”¨ beans</li>
<li>å…è®¸é€šè¿‡ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide/#valueAnnotation" >@Value<i class="fas fa-external-link-alt"></i></a> æˆ– <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/context/annotation/Property.html" >@Property<i class="fas fa-external-link-alt"></i></a> æ³¨å…¥é…ç½®ä¾èµ–é¡¹</li>
<li>å…è®¸ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide/#configurationProperties" >Configuration Properties<i class="fas fa-external-link-alt"></i></a> ç»‘å®š</li>
</ul>
<h3 id="HTTP-Server-HTTP-æœåŠ¡å™¨"><a href="#HTTP-Server-HTTP-æœåŠ¡å™¨" class="headerlink" title="HTTP Server (HTTP æœåŠ¡å™¨)"></a>HTTP Server (HTTP æœåŠ¡å™¨)</h3><blockquote>
<p>The Micronaut HTTP server can be considered a Micronaut Module - that is a component of Micronaut that builds on the fundamental building blocks including Dependency Injection and the lifecycle of the ApplicationContext.</p>
</blockquote>
<p>Micronaut HTTP server å¯ä»¥è¢«è®¤ä¸ºæ˜¯ Micronaut çš„ä¸€ä¸ªæ¨¡å— - è¿™æ˜¯ä¸€ä¸ªå»ºç«‹äºåŒ…å«<a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide/#iocArch" >ä¾èµ–æ³¨å…¥<i class="fas fa-external-link-alt"></i></a>å’Œ<a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide/#containerArch" >åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ç”Ÿå‘½<i class="fas fa-external-link-alt"></i></a>å‘¨æœŸçš„åŸºç¡€æ„å»ºå—çš„ Micronaut ç»„ä»¶</p>
<blockquote>
<p>The HTTP server includes a set of abstract interfaces and common code contained with the micronaut-http and micronaut-http-server modules respectively (the former includes HTTP primitives shared across the client and the server).</p>
</blockquote>
<p>HTTP server åŒ…å«ä¸€ç»„æŠ½è±¡æ¥å£å’Œå…¬å…±ä»£ç , åˆ†åˆ«åŒ…å«åœ¨ micronaut-http å’Œ micronaut-http-server æ¨¡å—ä¸­ (å‰è€…åŒ…æ‹¬åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å…±äº«çš„ HTTP åŸè¯­)</p>
<blockquote>
<p>A default implementation of these interfaces is provided based on the Netty I&#x2F;O toolkit the architecture of which is described in the image below:</p>
</blockquote>
<p>è¿™äº›æ¥å£çš„é»˜è®¤å®ç°æ˜¯åŸºäº Netty I&#x2F;O å·¥å…·åŒ…æä¾›çš„, å…¶æ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤º:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://netty.io/images/components.png"
                      alt="Netty architecture"
                ></p>
<blockquote>
<p>The Netty API is in general a very low-level I&#x2F;O networking API designed for integrators to use to build clients and servers that present a higher abstraction layer. The Micronaut HTTP server is one such abstraction layer.</p>
</blockquote>
<p>Netty API é€šå¸¸æ˜¯ä¸€ä¸ªéå¸¸ä½çº§åˆ«çš„ I&#x2F;O ç½‘ç»œ API, ä¸“ä¸ºé›†æˆå•†è®¾è®¡, ç”¨äºæ„å»ºå‘ˆç°æ›´é«˜æŠ½è±¡å±‚çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨. Micronaut HTTP æœåŠ¡å™¨å°±æ˜¯è¿™æ ·ä¸€ç§æŠ½è±¡å±‚</p>
<blockquote>
<p>An architecture diagram of the Micronaut HTTP server and the components used in its implementation is described below:</p>
</blockquote>
<p>Micronaut HTTP server çš„æ¶æ„å›¾åŠå…¶å®ç°ä¸­ä½¿ç”¨çš„ç»„ä»¶æè¿°å¦‚ä¸‹:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://docs.micronaut.io/latest/img/arch/httpserver.png"
                      alt="img"
                ></p>
<blockquote>
<p>The main entry point for running the server is the Micronaut class which implements ApplicationContextBuilder. Typically the developer places the following call into the main entry point of their application:</p>
</blockquote>
<p>è¿è¡ŒæœåŠ¡å™¨çš„ä¸»è¦å…¥å£ç‚¹æ˜¯å®ç°äº† <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/context/ApplicationContextBuilder.html" >ApplicationContextBuilder<i class="fas fa-external-link-alt"></i></a> çš„ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/runtime/Micronaut.html" >Micronaut<i class="fas fa-external-link-alt"></i></a> ç±». é€šå¸¸, å¼€å‘è€…å°†ä»¥ä¸‹è°ƒç”¨æ”¾å…¥å…¶åº”ç”¨ç¨‹åºçš„ä¸»å…¥å£:</p>
<p>Example - Defining a <code>main</code> entry point:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    Micronaut.run(Application.class, args);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>The passed arguments a transformed into a CommandLinePropertySource and available for dependency injection via @Value.</p>
</blockquote>
<p>ä¼ é€’çš„å‚æ•° <code>args</code> è½¬æ¢ä¸º <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/context/env/CommandLinePropertySource.html" >CommandLinePropertySource<i class="fas fa-external-link-alt"></i></a> å¹¶å¯é€šè¿‡ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide/#valueAnnotation" >@Value<i class="fas fa-external-link-alt"></i></a> è¿›è¡Œä¾èµ–æ³¨å…¥</p>
<blockquote>
<p>Executing run will start the Micronaut <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide/#containerArch" >ApplicationContext<i class="fas fa-external-link-alt"></i></a> with the default settings and then search for a bean of type <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/runtime/server/EmbeddedServer.html" >EmbeddedServer<i class="fas fa-external-link-alt"></i></a> which is an interface that exposes information about a runnable server including host and port information.</p>
</blockquote>
<p>æ‰§è¡Œ <code>run</code> å°†ä¼šä½¿ç”¨é»˜è®¤è®¾ç½®å¯åŠ¨ Micronaut <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide/#containerArch" >ApplicationContext<i class="fas fa-external-link-alt"></i></a>, ç„¶åæœç´¢ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/runtime/server/EmbeddedServer.html" >EmbeddedServer<i class="fas fa-external-link-alt"></i></a> ç±»å‹çš„ bean, è¯¥ bean æ˜¯å…¬å¼€æœ‰å…³å¯è¿è¡ŒæœåŠ¡å™¨çš„ä¿¡æ¯çš„æ¥å£, åŒ…æ‹¬ä¸»æœºå’Œç«¯å£ä¿¡æ¯</p>
<blockquote>
<p>This design decouples Micronaut from the actual server implementation and whilst the default server is Netty (described above), other servers can be implemented by third-parties simply by providing an implementation of EmbeddedServer.</p>
</blockquote>
<p>è¿™ç§è®¾è®¡å°† Micronaut ä¸å®é™…çš„æœåŠ¡å™¨å®ç°è§£è€¦, è€Œé»˜è®¤æœåŠ¡å™¨æ˜¯ Netty (å¦‚ä¸Šæ‰€è¿°), å…¶ä»–æœåŠ¡å™¨å¯ä»¥ç”±ç¬¬ä¸‰æ–¹ç®€å•åœ°é€šè¿‡æä¾› <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/runtime/server/EmbeddedServer.html" >EmbeddedServer<i class="fas fa-external-link-alt"></i></a> çš„å®ç°æ¥å®ç°</p>
<p>Server å¦‚ä½•å¯åŠ¨çš„æ—¶åºå›¾å¦‚ä¸‹æ‰€ç¤º:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://docs.micronaut.io/latest/img/arch/embeddedserver.png"
                      alt="img"
                ></p>
<p>åœ¨ä½¿ç”¨ Netty å®ç°çš„æƒ…å†µä¸‹, <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/runtime/server/EmbeddedServer.html" >EmbeddedServer<i class="fas fa-external-link-alt"></i></a> æ¥å£ç”± <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/server/netty/NettyHttpServer.html" >NettyHttpServer<i class="fas fa-external-link-alt"></i></a> å®ç°</p>
<h4 id="Server-Configuration-æœåŠ¡å™¨é…ç½®"><a href="#Server-Configuration-æœåŠ¡å™¨é…ç½®" class="headerlink" title="Server Configuration (æœåŠ¡å™¨é…ç½®)"></a>Server Configuration (æœåŠ¡å™¨é…ç½®)</h4><p><a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/server/netty/NettyHttpServer.html" >NettyHttpServer<i class="fas fa-external-link-alt"></i></a> è¯»å– <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide/#serverConfiguration" >server é…ç½®<i class="fas fa-external-link-alt"></i></a>, åŒ…æ‹¬:</p>
<ul>
<li><a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/server/netty/configuration/NettyHttpServerConfiguration.html" >NettyHttpServerConfiguration<i class="fas fa-external-link-alt"></i></a> - <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/server/HttpServerConfiguration.html" >HttpServerConfiguration<i class="fas fa-external-link-alt"></i></a> çš„æ‰©å±•ç‰ˆæœ¬, å®ƒå®šä¹‰äº†é™¤ host, port ç­‰ä¹‹å¤–çš„ç‰¹å®šäº Netty çš„é…ç½®é€‰é¡¹</li>
<li><a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/netty/channel/EventLoopGroupConfiguration.html" >EventLoopGroupConfiguration<i class="fas fa-external-link-alt"></i></a> - å¯ä»¥é…ç½®ä¸€ä¸ªæˆ–å¤šä¸ª Netty <a class="link"   target="_blank" rel="noopener" href="https://netty.io/4.1/api/io/netty/channel/EventLoopGroup.html" >EventLoopGroup<i class="fas fa-external-link-alt"></i></a>, å¯ä»¥å°†å…¶é…ç½®ä¸ºæœåŠ¡å™¨ç‹¬æœ‰çš„ æˆ– ä¸ä¸€ä¸ªæˆ–å¤šä¸ª HTTP clients å…±äº«çš„</li>
<li><a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/ssl/ServerSslConfiguration.html" >ServerSslConfiguration<i class="fas fa-external-link-alt"></i></a> - ä¸º <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/server/netty/ssl/ServerSslBuilder.html" >ServerSslBuilder<i class="fas fa-external-link-alt"></i></a> æä¾›é…ç½®, ç”¨äºé…ç½® Netty <a class="link"   target="_blank" rel="noopener" href="https://netty.io/4.1/api/io/netty/handler/ssl/SslContext.html" >SslContext<i class="fas fa-external-link-alt"></i></a> ä»¥ç”¨äº HTTPS</li>
</ul>
<h4 id="Server-Configuration-Security-Considerations-æœåŠ¡å™¨é…ç½®å®‰å…¨æ³¨æ„äº‹é¡¹"><a href="#Server-Configuration-Security-Considerations-æœåŠ¡å™¨é…ç½®å®‰å…¨æ³¨æ„äº‹é¡¹" class="headerlink" title="Server Configuration Security Considerations (æœåŠ¡å™¨é…ç½®å®‰å…¨æ³¨æ„äº‹é¡¹)"></a>Server Configuration Security Considerations (æœåŠ¡å™¨é…ç½®å®‰å…¨æ³¨æ„äº‹é¡¹)</h4><blockquote>
<p>Nettyâ€™s SslContext provides an abstraction which allows using either the JDK-provided javax.net.ssl.SSLContext or an OpenSslEngine that requires the developer to additionally add netty-tcnative as a dependency (netty-tcnative is a fork of Tomcatâ€™s OpenSSL binding).</p>
</blockquote>
<p>Netty çš„ <a class="link"   target="_blank" rel="noopener" href="https://netty.io/4.1/api/io/netty/handler/ssl/SslContext.html" >SslContext<i class="fas fa-external-link-alt"></i></a> æä¾›äº†ä¸€ä¸ªæŠ½è±¡, è¿™ä¸ªæŠ½è±¡å…è®¸ä½¿ç”¨ JDK æä¾›çš„ <code>javax.net.ssl.SSLContext</code> æˆ–è€…ä¸€ä¸ªéœ€è¦å¼€å‘è€…æ·»åŠ é™„åŠ çš„ <a class="link"   target="_blank" rel="noopener" href="https://netty.io/wiki/forked-tomcat-native.html" >netty-tcnative<i class="fas fa-external-link-alt"></i></a> ä½œä¸ºä¾èµ– (<code>netty-tcnative</code> æ˜¯ <a class="link"   target="_blank" rel="noopener" href="https://tomcat.apache.org/native-doc/" >Tomcatâ€™s OpenSSL binding<i class="fas fa-external-link-alt"></i></a> çš„åˆ†æ”¯) çš„ <a class="link"   target="_blank" rel="noopener" href="https://netty.io/4.1/api/io/netty/handler/ssl/OpenSslEngine.html" >OpenSslEngine<i class="fas fa-external-link-alt"></i></a></p>
<blockquote>
<p>The ServerSslConfiguration allows configuring the application to a secure, readable location on disk where valid certificates exist to correctly configure the javax.net.ssl.TrustManagerFactory and javax.net.ssl.KeyManagerFactory by loading the configurtion from disk.</p>
</blockquote>
<p>ServerSslConfiguration å…è®¸å°†åº”ç”¨ç¨‹åºé…ç½®åˆ°ç£ç›˜ä¸Šå­˜åœ¨æœ‰æ•ˆè¯ä¹¦çš„å®‰å…¨, å¯è¯»ä½ç½®, ä»¥é€šè¿‡ä»ç£ç›˜åŠ è½½é…ç½®æ¥æ­£ç¡®é…ç½® <code>javax.net.ssl.TrustManagerFactory</code> å’Œ <code>javax.net.ssl.KeyManagerFactory</code></p>
<h4 id="Netty-Server-Initialization-Netty-æœåŠ¡å™¨åˆå§‹åŒ–"><a href="#Netty-Server-Initialization-Netty-æœåŠ¡å™¨åˆå§‹åŒ–" class="headerlink" title="Netty Server Initialization (Netty æœåŠ¡å™¨åˆå§‹åŒ–)"></a>Netty Server Initialization (Netty æœåŠ¡å™¨åˆå§‹åŒ–)</h4><p>å½“ NettyHttpServer æ‰§è¡Œ <code>start()</code> åºåˆ—æ—¶, å®ƒå°†æ‰§è¡Œå¦‚ä¸‹æ­¥éª¤:</p>
<ol>
<li>è¯»å– <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/netty/channel/EventLoopGroupConfiguration.html" >EventLoopGroupConfiguration<i class="fas fa-external-link-alt"></i></a> å¹¶åˆ›å»ºå¯åŠ¨ Netty server æ‰€éœ€çš„ parent å’Œ worker <a class="link"   target="_blank" rel="noopener" href="https://netty.io/4.1/api/io/netty/channel/EventLoopGroup.html" >EventLoopGroup<i class="fas fa-external-link-alt"></i></a> å®ä¾‹</li>
<li>è®¡ç®—è¦ä½¿ç”¨çš„ç‰¹å®šäºå¹³å°çš„ <a class="link"   target="_blank" rel="noopener" href="https://netty.io/4.1/api/io/netty/channel/socket/ServerSocketChannel.html" >ServerSocketChannel<i class="fas fa-external-link-alt"></i></a> (å–å†³äºæ“ä½œç³»ç»Ÿ, è¿™å¯èƒ½æ˜¯ Epoll æˆ–è€… KQueue, å¦‚æœæ— æ³•è¿›è¡ŒåŸç”Ÿç»‘å®š, åˆ™å›é€€åˆ° Java NIO)</li>
<li>åˆ›å»º <a class="link"   target="_blank" rel="noopener" href="https://netty.io/4.1/api/io/netty/bootstrap/ServerBootstrap.html" >ServerBoostrap<i class="fas fa-external-link-alt"></i></a> å®ä¾‹æ¥åˆå§‹åŒ– <a class="link"   target="_blank" rel="noopener" href="https://netty.io/4.1/api/io/netty/channel/socket/SocketChannel.html" >SocketChannel<i class="fas fa-external-link-alt"></i></a> (å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´çš„é“¾æ¥)</li>
<li><code>SocketChannel</code> ç”± Netty <a class="link"   target="_blank" rel="noopener" href="https://netty.io/4.1/api/io/netty/channel/ChannelInitializer.html" >ChannelInitializer<i class="fas fa-external-link-alt"></i></a> åˆå§‹åŒ–, å®ƒåˆ›å»ºè‡ªå®šä¹‰çš„ Netty <a class="link"   target="_blank" rel="noopener" href="https://netty.io/4.1/api/io/netty/channel/ChannelPipeline.html" >ChannelPipeline<i class="fas fa-external-link-alt"></i></a>, ç”¨äº Micronaut ä»¥æ ¹æ®é…ç½®ä¸º HTTP&#x2F;1.1 æˆ– HTTP&#x2F;2 è¯·æ±‚æä¾›æœåŠ¡</li>
<li>Netty ServerBootstrap ç»‘å®šåˆ°ä¸€ä¸ªæˆ–å¤šä¸ªé…ç½®ç«¯å£, æœ‰æ•ˆåœ°ä½¿æœåŠ¡å™¨å¯ç”¨äºæ¥æ”¶è¯·æ±‚</li>
<li>è§¦å‘ä¸¤ä¸ª <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide/#events" >Bean äº‹ä»¶<i class="fas fa-external-link-alt"></i></a>, ç¬¬ä¸€ä¸ª <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/runtime/server/event/ServerStartupEvent.html" >ServerStartupEvent<i class="fas fa-external-link-alt"></i></a> è¡¨ç¤ºæœåŠ¡å™¨å·²ç»å¯åŠ¨, æœ€åä¸€æ—¦æ‰€æœ‰è¿™äº›äº‹ä»¶éƒ½å¤„ç†å®Œæ¯•, åªæœ‰åœ¨è®¾ç½®äº†å±æ€§ <code>micronaut.application.name</code> æ—¶æ‰ä¼šè§¦å‘ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/discovery/event/ServiceReadyEvent.html" >ServiceReadyEvent<i class="fas fa-external-link-alt"></i></a></li>
</ol>
<p>å¯åŠ¨åºåˆ—å¦‚ä¸‹æ‰€ç¤º:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://docs.micronaut.io/latest/img/arch/nettybootstrap.png"
                      alt="img"
                ></p>
<blockquote>
<p>A NettyHttpServerInitializer class is used to initialize the ChannelPipeline that handles incoming HTTP&#x2F;1.1 or HTTP&#x2F;2 requests.</p>
</blockquote>
<p>ä¸€ä¸ª <code>NettyHttpServerInitializer</code> ç±»è¢«ç”¨æ¥åˆå§‹åŒ–å¤„ç†ä¼ å…¥çš„ HTTP&#x2F;1.1 æˆ– HTTP&#x2F;2 è¯·æ±‚çš„ <a class="link"   target="_blank" rel="noopener" href="https://netty.io/4.1/api/io/netty/channel/ChannelPipeline.html" >ChannelPipeline<i class="fas fa-external-link-alt"></i></a></p>
<h4 id="ChannelPipeline-Security-Considerations-ChannelPipeline-å®‰å…¨æ³¨æ„äº‹é¡¹"><a href="#ChannelPipeline-Security-Considerations-ChannelPipeline-å®‰å…¨æ³¨æ„äº‹é¡¹" class="headerlink" title="ChannelPipeline Security Considerations (ChannelPipeline å®‰å…¨æ³¨æ„äº‹é¡¹)"></a>ChannelPipeline Security Considerations (ChannelPipeline å®‰å…¨æ³¨æ„äº‹é¡¹)</h4><blockquote>
<p>The ChannelPipeline can be customized by the user by implementing a bean that implements the ChannelPipelineCustomizer interface and adding a new Netty ChannelHandler to the pipeline.</p>
</blockquote>
<p><code>ChannelPipeline</code> å¯ä»¥è¢«ç”¨æˆ·è‡ªå®šä¹‰, é€šè¿‡å®ç°ä¸€ä¸ª bean, è¿™ä¸ª bean å®ç° <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/netty/ChannelPipelineCustomizer.html" >ChannelPipelineCustomizer<i class="fas fa-external-link-alt"></i></a> æ¥å£å¹¶æ·»åŠ ä¸€ä¸ªæ–°çš„ Netty <a class="link"   target="_blank" rel="noopener" href="https://netty.io/4.1/api/io/netty/channel/ChannelHandler.html" >ChannelHandler<i class="fas fa-external-link-alt"></i></a> åˆ° pipeline ä¸­</p>
<blockquote>
<p>Adding a ChannelHandler allows performing tasks such as wire-level logging of incoming and outgoing data packets and may be used when wire-level security requirements are required such as validating the bytes of the incoming request body or outgoing response body.</p>
</blockquote>
<p>æ·»åŠ  ChannelHandler å…è®¸æ‰§è¡Œè¯¸å¦‚ä¼ å…¥å’Œä¼ å‡ºæ•°æ®åŒ…çš„ wire-level æ—¥å¿—çº§åˆ«ä¹‹ç±»çš„ä»»åŠ¡, å¹¶ä¸”å¯ä»¥åœ¨éœ€è¦ wire-level å®‰å…¨è¦æ±‚æ—¶ä½¿ç”¨, ä¾‹å¦‚éªŒè¯ä¼ å…¥è¯·æ±‚æ­£æ–‡æˆ–ä¼ å‡ºå“åº”æ­£æ–‡çš„å­—èŠ‚</p>
<h4 id="Netty-Server-Routing-Netty-æœåŠ¡å™¨è·¯ç”±"><a href="#Netty-Server-Routing-Netty-æœåŠ¡å™¨è·¯ç”±" class="headerlink" title="Netty Server Routing (Netty æœåŠ¡å™¨è·¯ç”±)"></a>Netty Server Routing (Netty æœåŠ¡å™¨è·¯ç”±)</h4><blockquote>
<p>Micronaut defines a set of HTTP annotations that allow binding user code to incoming HttpRequest instances and customizing the resulting HttpResponse.</p>
</blockquote>
<p>Micronaut å®šä¹‰äº†ä¸€ç»„ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/annotation/package-summary.html" >HTTP æ³¨è§£<i class="fas fa-external-link-alt"></i></a>, å…è®¸å°†è¯¥ç”¨æˆ·ä»£ç ç»‘å®šåˆ°ä¼ å…¥çš„ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/HttpRequest.html" >HttpRequest<i class="fas fa-external-link-alt"></i></a> å®ä¾‹å¹¶è‡ªå®šä¹‰ç”Ÿæˆçš„ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/HttpResponse.html" >HttpResponse<i class="fas fa-external-link-alt"></i></a></p>
<blockquote>
<p>One or many configured RouteBuilder implementations construct instances of UriRoute which is used by the Router components to route incoming requests methods of annotated classes such as:</p>
</blockquote>
<p>ä¸€ä¸ªæˆ–å¤šä¸ªé…ç½®çš„ RouteBuilder å®ç°æ„é€  UriRoute å®ä¾‹, Router ç»„ä»¶ä½¿ç”¨ UriRoute æ¥è·¯ç”±è¢«æ³¨è§£æ³¨é‡Šçš„ç±»çš„ä¼ å…¥è¯·æ±‚æ–¹æ³•, ä¾‹å¦‚:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.micronaut.http.MediaType</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Controller</span><br><span class="line"><span class="keyword">import</span> io.micronaut.http.annotation.Get</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&#x27;/hello&#x27;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Get</span>(produces = MediaType.TEXT_PLAIN)</span><br><span class="line">    String index() &#123; <span class="string">&#x27;Hello World&#x27;</span> &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide/#binding" >è¯·æ±‚ç»‘å®šæ³¨è§£<i class="fas fa-external-link-alt"></i></a> å¯ä»¥ç”¨æ¥ç»‘å®šæ–¹æ³•å‚æ•°åˆ° HTTP body, headers, parameters ç­‰. å¹¶ä¸”æ¡†æ¶ä¼šåœ¨æ•°æ®ä¼ è¾“ç»™æ¥æ”¶æ–¹æ³•ä¹‹å‰è‡ªåŠ¨å¤„ç†æ­£ç¡®çš„è½¬ä¹‰æ•°æ®</p>
<blockquote>
<p>An incoming request is received by Netty and a <code>ChannelPipeline</code> initialized by <code>NettyHttpServerInitializer</code>.</p>
</blockquote>
<p>Netty æ¥æ”¶ä¼ å…¥çš„è¯·æ±‚, æœ‰ <code>NettyHttpServerInitializer</code> åˆå§‹åŒ– <code>ChannelPipeline</code></p>
<blockquote>
<p>The incoming raw packets are transformed into a Netty HttpRequest which is subsequently wrapped in a Micronaut NettyHttpRequest which abstracts over the underlying Netty request.</p>
</blockquote>
<p>ä¼ å…¥çš„åŸå§‹æ•°æ®åŒ…è¢«è½¬æ¢ä¸º Netty <a class="link"   target="_blank" rel="noopener" href="https://netty.io/4.1/api/io/netty/handler/codec/http/HttpRequest.html" >HttpRequest<i class="fas fa-external-link-alt"></i></a>, éšåè¢«åŒ…è£…åœ¨ Micronaut <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/server/netty/NettyHttpRequest.html" >NettyHttpRequest<i class="fas fa-external-link-alt"></i></a> ä¸­, NettyHttpRequest å¯¹åº•å±‚ Netty è¯·æ±‚è¿›è¡ŒæŠ½è±¡</p>
<blockquote>
<p>The NettyHttpRequest is passed through the chain of Netty ChannelHandler instances until it arrives at RoutingInBoundHandler which uses the aforementioned Router to match the request a method of an annotated @Controller type.</p>
</blockquote>
<p><code>NettyHttpRequest</code> é€šè¿‡ Netty <a class="link"   target="_blank" rel="noopener" href="https://netty.io/4.1/api/io/netty/channel/ChannelHandler.html" >ChannelHandler<i class="fas fa-external-link-alt"></i></a> å®ä¾‹é“¾ä¼ é€’, ç›´åˆ°å®ƒåˆ°è¾¾ RoutingInBoundHandler, å®ƒä½¿ç”¨å‰é¢æåˆ°çš„ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/web/router/Router.html" >Router<i class="fas fa-external-link-alt"></i></a> å°†è¯·æ±‚ä¸å¸¦æ³¨è§£çš„ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/annotation/Controller.html" >@Controller<i class="fas fa-external-link-alt"></i></a> ç±»çš„æ–¹æ³•ç›¸åŒ¹é…</p>
<blockquote>
<p>The RoutingInBoundHandler delegates to RouteExecutor for actual execution of the route, which deals with all the logic to dispatch to a method of an annotated @Controller type.</p>
</blockquote>
<p><code>RoutingInBoundHandler</code> å§”æ‰˜ç»™ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/server/RouteExecutor.html" >RouteExecutor<i class="fas fa-external-link-alt"></i></a> ä»¥å®é™…æ‰§è¡Œè·¯ç”±, å®ƒå¤„ç†æ‰€æœ‰é€»è¾‘ä»¥åˆ†æ´¾åˆ°å¸¦æ³¨è§£çš„ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/annotation/Controller.html" >@Controller<i class="fas fa-external-link-alt"></i></a> ç±»çš„æ–¹æ³•</p>
<blockquote>
<p>Once executed, if the return value is not null an appropriate MediaTypeCodec is looked up from the MediaTypeCodecRegistry for the response Content-Type (defaulting to application&#x2F;json).</p>
</blockquote>
<p>æ‰§è¡Œå, å¦‚æœè¿”å›å€¼ä¸ä¸º <code>null</code>, åˆ™ä» <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/codec/MediaTypeCodecRegistry.html" >MediaTypeCodecRegistry<i class="fas fa-external-link-alt"></i></a> ä¸­ä¸ºå“åº” <a class="link"   target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type" >Content-Type<i class="fas fa-external-link-alt"></i></a> æŸ¥æ‰¾é€‚å½“çš„ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/codec/MediaTypeCodec.html" >MediaTypeCodec<i class="fas fa-external-link-alt"></i></a> (é»˜è®¤ä¸º <code>application/json</code>)</p>
<blockquote>
<p>The MediaTypeCodec is used to encode the return value into a byte[] and include it as the body of the resulting HttpResponse.</p>
</blockquote>
<p><code>MediaTypeCodec</code> ç”¨äºå°†è¿”å›å€¼ç¼–ç ä¸º <code>byte[]</code> å¹¶å°†å…¶ä½œä¸ºç»“æœ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/HttpResponse.html" >HttpResponse<i class="fas fa-external-link-alt"></i></a> çš„ä¸»ä½“åŒ…å«åœ¨å†…</p>
<p>ä¸‹å›¾è¯´æ˜äº†ä¼ å…¥è¯·æ±‚çš„æµç¨‹:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://docs.micronaut.io/latest/img/arch/http-server-requestflow.png"
                      alt="img"
                ></p>
<blockquote>
<p>The RouteExecutor will construct a FilterChain to execute one or many HttpServerFilter prior executing the target method of an annotated @Controller type.</p>
</blockquote>
<p><code>RouteExecutor</code> å°†æ„é€ ä¸€ä¸ª <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/filter/FilterChain.html" >FilterChain<i class="fas fa-external-link-alt"></i></a> æ¥æ‰§è¡Œä¸€ä¸ªæˆ–å¤šä¸ª <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/filter/HttpServerFilter.html" >HttpServerFilter<i class="fas fa-external-link-alt"></i></a>, ç„¶åå†æ‰§è¡Œå¸¦æ³¨è§£çš„ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/annotation/Controller.html" >@Controller<i class="fas fa-external-link-alt"></i></a> ç±»çš„ç›®æ ‡æ–¹æ³•</p>
<blockquote>
<p>Once all of the HttpServerFilter instances have been executed the RouteExecutor will attempt to satisfy the requirements of the target methodâ€™s parameters, including any Request binding annotations.</p>
</blockquote>
<p>ä¸€æ—¦æ‰€æœ‰ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/filter/HttpServerFilter.html" >HttpServerFilter<i class="fas fa-external-link-alt"></i></a> å®ä¾‹éƒ½å·²æ‰§è¡Œ, <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/server/RouteExecutor.html" >RouteExecutor<i class="fas fa-external-link-alt"></i></a> å°†å°è¯•æ»¡è¶³ç›®æ ‡æ–¹æ³•å‚æ•°çš„è¦æ±‚, åŒ…æ‹¬ä»»ä½•<a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide/#binding" >è¯·æ±‚ç»‘å®šæ³¨è§£<i class="fas fa-external-link-alt"></i></a></p>
<blockquote>
<p>If the parameters cannot be satisfied then a HTTP 400 - Bad Request HttpStatus response is returned to the calling client.</p>
</blockquote>
<p>å¦‚æœæ— æ³•æ»¡è¶³å‚æ•°, åˆ™å‘è°ƒç”¨å®¢æˆ·ç«¯è¿”å› <code>HTTP 400 - Bad Request</code> <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/HttpStatus.html" >HttpStatus<i class="fas fa-external-link-alt"></i></a> å“åº”</p>
<h4 id="Netty-Server-Routing-Security-Considerations-Netty-æœåŠ¡å™¨è·¯ç”±å®‰å…¨æ³¨æ„äº‹é¡¹"><a href="#Netty-Server-Routing-Security-Considerations-Netty-æœåŠ¡å™¨è·¯ç”±å®‰å…¨æ³¨æ„äº‹é¡¹" class="headerlink" title="Netty Server Routing Security Considerations (Netty æœåŠ¡å™¨è·¯ç”±å®‰å…¨æ³¨æ„äº‹é¡¹)"></a>Netty Server Routing Security Considerations (Netty æœåŠ¡å™¨è·¯ç”±å®‰å…¨æ³¨æ„äº‹é¡¹)</h4><blockquote>
<p>A HttpServerFilter instance can be used by the developer to control access to server resources. By not proceeding with the FilterChain an alternative response (such as a 403 - Forbidden) can be returned to the client barring access to sensitive resources.</p>
</blockquote>
<p>å¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/filter/HttpServerFilter.html" >HttpServerFilter<i class="fas fa-external-link-alt"></i></a> å®ä¾‹æ¥æ§åˆ¶å¯¹æœåŠ¡å™¨èµ„æºçš„è®¿é—®. é€šè¿‡ä¸ç»§ç»­ä½¿ç”¨ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/filter/FilterChain.html" >FilterChain<i class="fas fa-external-link-alt"></i></a>, å¯ä»¥å°†æ›¿ä»£å“åº” (ä¾‹å¦‚ <code>403-Forbidden</code>) è¿”å›ç»™å®¢æˆ·ç«¯, ç¦æ­¢è®¿é—®æ•æ„Ÿèµ„æº</p>
<blockquote>
<p>Note that the HttpServerFilter interface extends from the Ordered interface since it is frequently the case that multiple filters exist within a FilterChain.</p>
</blockquote>
<p>è¯·æ³¨æ„, <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/filter/HttpServerFilter.html" >HttpServerFilter<i class="fas fa-external-link-alt"></i></a> æ¥å£ä» <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/core/order/Ordered.html" >Ordered<i class="fas fa-external-link-alt"></i></a> æ¥å£ç»§æ‰¿è€Œæ¥, å› ä¸ºåœ¨ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/filter/FilterChain.html" >FilterChbain<i class="fas fa-external-link-alt"></i></a> ä¸­ç»å¸¸å­˜åœ¨å¤šä¸ªè¿‡æ»¤å™¨</p>
<blockquote>
<p>By implementing the getOrder() method the developer can return an appropriate priority to control ordering.</p>
</blockquote>
<p>é€šè¿‡å®ç° <code>getOrder()</code> æ–¹æ³•, å¼€å‘è€…å¯ä»¥è¿”å›é€‚å½“çš„ä¼˜å…ˆçº§æ¥æ§åˆ¶æ’åº</p>
<blockquote>
<p>In addition, the ServerFilterPhase enum provides a set of constants developers can use to correctly position a filter, including a SECURITY phase where security rules are commonly placed.</p>
</blockquote>
<p>æ­¤å¤–, <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/http/filter/ServerFilterPhase.html" >ServerFilterPhabse<i class="fas fa-external-link-alt"></i></a> æšä¸¾æä¾›äº†ä¸€ç»„å¸¸é‡, å¼€å‘è€…å¯ä»¥ä½¿ç”¨å®ƒä»¬æ¥æ­£ç¡®å®šä½è¿‡æ»¤å™¨, åŒ…æ‹¬é€šå¸¸æ”¾ç½®å®‰å…¨è§„åˆ™çš„ <code>SECURITY</code> é˜¶æ®µ</p>
<h2 id="Frequently-Asked-Questions-FAQ-æœ€å¸¸é—®çš„é—®é¢˜"><a href="#Frequently-Asked-Questions-FAQ-æœ€å¸¸é—®çš„é—®é¢˜" class="headerlink" title="Frequently Asked Questions (FAQ) (æœ€å¸¸é—®çš„é—®é¢˜)"></a>Frequently Asked Questions (FAQ) (æœ€å¸¸é—®çš„é—®é¢˜)</h2><blockquote>
<p>The following section covers frequently asked questions that you may find yourself asking while considering to use or using Micronaut.</p>
</blockquote>
<p>ä»¥ä¸‹éƒ¨åˆ†ä»‹ç»äº†ä½ åœ¨è€ƒè™‘ä½¿ç”¨æˆ–ä½¿ç”¨ Micronaut æ—¶å¯èƒ½ä¼šå‘ç°çš„å¸¸è§é—®é¢˜</p>
<h3 id="Does-Micronaut-modify-my-bytecode-Micronaut-ä¿®æ”¹äº†æˆ‘çš„å­—èŠ‚ç å—"><a href="#Does-Micronaut-modify-my-bytecode-Micronaut-ä¿®æ”¹äº†æˆ‘çš„å­—èŠ‚ç å—" class="headerlink" title="Does Micronaut modify my bytecode? (Micronaut ä¿®æ”¹äº†æˆ‘çš„å­—èŠ‚ç å—?)"></a>Does Micronaut modify my bytecode? (Micronaut ä¿®æ”¹äº†æˆ‘çš„å­—èŠ‚ç å—?)</h3><blockquote>
<p>No. Your classes are your classes. Micronaut does not transform classes or modify the bytecode generated from the code you write. Micronaut produces additional classes at compile time in the same package as your original unmodified classes.</p>
</blockquote>
<p>æ²¡æœ‰. ä½ çš„ç±»è¿˜æ˜¯ä½ çš„ç±». Micronaut ä¸ä¼šè½¬æ¢ç±»æˆ–ä¿®æ”¹ç”±ä½ ç¼–å†™çš„ä»£ç ç”Ÿæˆçš„å­—èŠ‚ç . Micronaut åœ¨ç¼–è¯‘æ—¶ä¸åŸå§‹æœªä¿®æ”¹ç±»çš„ç›¸åŒåŒ…ä¸­ç”Ÿæˆé™„åŠ ç±»</p>
<h3 id="Why-Doesnâ€™t-Micronaut-use-Spring-ä¸ºä»€ä¹ˆ-Micronaut-ä¸ä½¿ç”¨-Spring"><a href="#Why-Doesnâ€™t-Micronaut-use-Spring-ä¸ºä»€ä¹ˆ-Micronaut-ä¸ä½¿ç”¨-Spring" class="headerlink" title="Why Doesnâ€™t Micronaut use Spring? (ä¸ºä»€ä¹ˆ Micronaut ä¸ä½¿ç”¨ Spring?)"></a>Why Doesnâ€™t Micronaut use Spring? (ä¸ºä»€ä¹ˆ Micronaut ä¸ä½¿ç”¨ Spring?)</h3><p>å½“é—®åˆ°ä¸ºä»€ä¹ˆ Micronaut ä¸ä½¿ç”¨ Spring æ—¶, é€šå¸¸æ˜¯æŒ‡ Spring ä¾èµ–æ³¨å…¥å®¹å™¨</p>
<p>Spring ç”Ÿæ€ç³»ç»Ÿéå¸¸å¹¿æ³›, ä½ å¯ä»¥åœ¨ Micronaut ç›´æ¥ä½¿ç”¨è®¸å¤š Spring åº“, è€Œæ— éœ€ Spring å®¹å™¨</p>
<p>Micronaut æä¾›è‡ªå·±çš„åŸç”Ÿçš„å…¼å®¹ JSR-330 è§„èŒƒçš„ä¾èµ–æ³¨å…¥çš„åŸå› æ˜¯è¿™äº›ç‰¹æ€§åœ¨ Spring (ä»¥åŠä»»ä½•åŸºäºåå°„çš„ DI&#x2F;AOP å®¹å™¨) ä¸­çš„å†…å­˜æ¶ˆè€—å’Œå¯åŠ¨æ—¶é—´æˆæœ¬æ–¹é¢å¤ªå¤§äº†</p>
<p>ä¸ºäº†æ”¯æŒè¿è¡Œæ—¶ä¾èµ–æ³¨å…¥, Spring:</p>
<ul>
<li><a class="link"   target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-framework/tree/master/spring-core/src/main/java/org/springframework/core/type/classreading" >è¯»å–<i class="fas fa-external-link-alt"></i></a>å®ƒåœ¨è¿è¡Œæ—¶æ‰¾åˆ°çš„æ¯ä¸ª bean çš„å­—èŠ‚ç </li>
<li>ä¸ºæ¯ä¸ª bean æ–¹æ³•, æ„é€ æ–¹æ³•, å­—æ®µç­‰ ä¸Šé¢çš„æ¯ä¸ªæ³¨è§£[åˆæˆæ–°æ³¨è§£](Synthesizes new annotations for each annotation on each bean method, constructor, field etc. to support Annotation metadata.), ä»¥æ”¯æŒæ³¨è§£å…ƒæ•°æ®</li>
<li>ä¸ºæ¯ä¸ª bean çš„æ‰€æœ‰æ–¹æ³•, æ„é€ å™¨, å­—æ®µç­‰<a class="link"   target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-framework/blob/master/spring-beans/src/main/java/org/springframework/beans/CachedIntrospectionResults.java" >æ„å»ºåå°„å…ƒæ•°æ®<i class="fas fa-external-link-alt"></i></a></li>
</ul>
<p>ç»“æœæ˜¯éšç€ä½ çš„åº”ç”¨ç¨‹åºåŒ…å«æ›´å¤šåŠŸèƒ½, å¯åŠ¨æ—¶é—´å’Œå†…å­˜æ¶ˆè€—é€æ­¥æ¶åŒ–</p>
<p>å¯¹äºå¾®æœåŠ¡å’Œæ— æœåŠ¡å‡½æ•°æ¥è¯´, ä¿æŒå¯åŠ¨æ—¶é—´å’Œå†…å­˜æ¶ˆè€—ä¿æŒåœ¨è¾ƒä½æ°´å¹³è‡³å…³é‡è¦, ä½¿ç”¨ Spring å®¹å™¨çš„ä¸Šè¿°è¡Œä¸ºæ˜¯ä¸å¸Œæœ›çœ‹åˆ°çš„, å› æ­¤ Micronaut çš„è®¾è®¡è€…é€‰æ‹©ä¸ä½¿ç”¨ Spring</p>
<h3 id="Does-Micronaut-support-Scala-Micronaut-æ”¯æŒ-Scala-å—"><a href="#Does-Micronaut-support-Scala-Micronaut-æ”¯æŒ-Scala-å—" class="headerlink" title="Does Micronaut support Scala? (Micronaut æ”¯æŒ Scala å—?)"></a>Does Micronaut support Scala? (Micronaut æ”¯æŒ Scala å—?)</h3><p>Micronaut æ”¯æŒä»»ä½• æ”¯æŒæ³¨è§£å¤„ç†å™¨API çš„ JVM è¯­è¨€</p>
<p>Scala ç›®å‰ä¸æ”¯æŒè¿™ä¸ª API</p>
<p>ä½†æ˜¯ Groovy ä¹Ÿä¸æ”¯æŒè¿™ä¸ª API</p>
<p>ä½†æ˜¯å·²ç»æ„å»ºäº†å¤„ç† Groovy AST çš„ç‰¹æ®Šæ”¯æŒ</p>
<p>å¦‚æœæ„å»ºç±»ä¼¼äº <code>inject-groovy</code> çš„æ¨¡å—, å°†æ¥æŠ€æœ¯ä¸Šæ˜¯å¯èƒ½æ”¯æŒ Scala çš„, ä½†åœ¨æ’°å†™æœ¬æ–‡æ—¶ä¸æ”¯æŒ Scala</p>
<h3 id="Can-Micronaut-be-used-for-purposes-other-than-Microservices-Micronaut-å¯ä»¥ç”¨åœ¨å…¶ä»–ç”¨é€”è€Œä¸æ˜¯ä½œä¸ºå¾®æœåŠ¡å—"><a href="#Can-Micronaut-be-used-for-purposes-other-than-Microservices-Micronaut-å¯ä»¥ç”¨åœ¨å…¶ä»–ç”¨é€”è€Œä¸æ˜¯ä½œä¸ºå¾®æœåŠ¡å—" class="headerlink" title="Can Micronaut be used for purposes other than Microservices? (Micronaut å¯ä»¥ç”¨åœ¨å…¶ä»–ç”¨é€”è€Œä¸æ˜¯ä½œä¸ºå¾®æœåŠ¡å—?)"></a>Can Micronaut be used for purposes other than Microservices? (Micronaut å¯ä»¥ç”¨åœ¨å…¶ä»–ç”¨é€”è€Œä¸æ˜¯ä½œä¸ºå¾®æœåŠ¡å—?)</h3><p>å¯ä»¥</p>
<p>Micronaut éå¸¸æ¨¡å—åŒ–, ä½ å¯ä»¥é€‰æ‹©ä»…ä½¿ç”¨ä¾èµ–æ³¨å…¥å’Œ AOP å®ç°, é€šè¿‡åŒ…å« <code>micronaut-inject-java</code> (æˆ–è€…ä¸ºäº†ä½¿ç”¨ Groovy <code>micronaut-inject-groovy</code>) ä¾èµ–åˆ°ä½ çš„åº”ç”¨ç¨‹åºä¸­</p>
<p>äº‹å®ä¸Š, Micronaut å¯¹<a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide/#serverlessFunctions" >æ— æœåŠ¡è®¡ç®—<i class="fas fa-external-link-alt"></i></a>çš„æ”¯æŒæ­£æ˜¯ä½¿ç”¨äº†è¿™ç§æ–¹æ³•</p>
<h3 id="What-are-the-advantages-of-Micronautâ€™s-Dependency-Injection-and-AOP-implementation-Micronaut-çš„ä¾èµ–æ³¨å…¥å’Œ-AOP-å®ç°æœ‰ä»€ä¹ˆä¼˜ç‚¹"><a href="#What-are-the-advantages-of-Micronautâ€™s-Dependency-Injection-and-AOP-implementation-Micronaut-çš„ä¾èµ–æ³¨å…¥å’Œ-AOP-å®ç°æœ‰ä»€ä¹ˆä¼˜ç‚¹" class="headerlink" title="What are the advantages of Micronautâ€™s Dependency Injection and AOP implementation? (Micronaut çš„ä¾èµ–æ³¨å…¥å’Œ AOP å®ç°æœ‰ä»€ä¹ˆä¼˜ç‚¹?)"></a>What are the advantages of Micronautâ€™s Dependency Injection and AOP implementation? (Micronaut çš„ä¾èµ–æ³¨å…¥å’Œ AOP å®ç°æœ‰ä»€ä¹ˆä¼˜ç‚¹?)</h3><p>Micronaut å¤„ç†ä½ çš„ç±»å¹¶åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆæ‰€æœ‰å…ƒæ•°æ®. è¿™æ¶ˆé™¤äº†åå°„, ç¼“å­˜åå°„å…ƒæ•°æ®ä»¥åŠåœ¨è¿è¡Œæ—¶åˆ†æç±»çš„éœ€è¦, æ‰€æœ‰è¿™äº›éƒ½ä¼šå¯¼è‡´å¯åŠ¨æ€§èƒ½å˜æ…¢å’Œå¢åŠ å†…å­˜æ¶ˆè€—</p>
<p>é™¤æ­¤ä¹‹å¤–, Micronaut åœ¨ç¼–è¯‘æ—¶æ„å»ºæ— åå°„ AOP ä»£ç†, ä»è€Œæé«˜æ€§èƒ½, å‡å°‘å †æ ˆè·Ÿè¸ªå¤§å°å¹¶å‡å°‘å†…å­˜æ¶ˆè€—</p>
<h3 id="Why-does-Micronaut-have-its-own-Consul-and-Eureka-client-implementations-ä¸ºä»€ä¹ˆ-Micronaut-æœ‰è‡ªå·±çš„-Consul-å’Œ-Eureka-å®¢æˆ·ç«¯å®ç°"><a href="#Why-does-Micronaut-have-its-own-Consul-and-Eureka-client-implementations-ä¸ºä»€ä¹ˆ-Micronaut-æœ‰è‡ªå·±çš„-Consul-å’Œ-Eureka-å®¢æˆ·ç«¯å®ç°" class="headerlink" title="Why does Micronaut have its own Consul and Eureka client implementations? (ä¸ºä»€ä¹ˆ Micronaut æœ‰è‡ªå·±çš„ Consul å’Œ Eureka å®¢æˆ·ç«¯å®ç°?)"></a>Why does Micronaut have its own Consul and Eureka client implementations? (ä¸ºä»€ä¹ˆ Micronaut æœ‰è‡ªå·±çš„ Consul å’Œ Eureka å®¢æˆ·ç«¯å®ç°?)</h3><p>ç°æœ‰çš„å¤§å¤šæ•° Consul å’Œ Eureka å®¢æˆ·ç«¯éƒ½æ˜¯é˜»å¡çš„, å¹¶ä¸”åŒ…å«è®¸å¤šä½¿ JAR æ–‡ä»¶è†¨èƒ€çš„å¤–éƒ¨ä¾èµ–é¡¹</p>
<p>Micronaut çš„ <a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/api/io/micronaut/discovery/DiscoveryClient.html" >DiscoveryClient<i class="fas fa-external-link-alt"></i></a> ä½¿ç”¨ Microuant çš„åŸç”Ÿ HTTP å®¢æˆ·ç«¯, å¤§å¤§å‡å°‘äº†å¯¹å¤–éƒ¨ä¾èµ–çš„éœ€æ±‚, å¹¶ä¸ºä¸¤ä¸ªå‘ç°æœåŠ¡å™¨æä¾›äº†å“åº”å¼ API</p>
<h3 id="Why-am-I-encountering-a-NoSuchMethodError-occurs-loading-my-beans-Groovy-ä¸ºä»€ä¹ˆæˆ‘åœ¨åŠ è½½æˆ‘çš„-beans-æ—¶é‡åˆ°äº†-NoSuchMethodError-é—®é¢˜"><a href="#Why-am-I-encountering-a-NoSuchMethodError-occurs-loading-my-beans-Groovy-ä¸ºä»€ä¹ˆæˆ‘åœ¨åŠ è½½æˆ‘çš„-beans-æ—¶é‡åˆ°äº†-NoSuchMethodError-é—®é¢˜" class="headerlink" title="Why am I encountering a NoSuchMethodError occurs loading my beans (Groovy)? (ä¸ºä»€ä¹ˆæˆ‘åœ¨åŠ è½½æˆ‘çš„ beans æ—¶é‡åˆ°äº† NoSuchMethodError é—®é¢˜?)"></a>Why am I encountering a NoSuchMethodError occurs loading my beans (Groovy)? (ä¸ºä»€ä¹ˆæˆ‘åœ¨åŠ è½½æˆ‘çš„ beans æ—¶é‡åˆ°äº† NoSuchMethodError é—®é¢˜?)</h3><blockquote>
<p>Groovy by default imports classes in the groovy.lang package, including one named @Singleton, an AST transformation class that makes your class a singleton by adding a private constructor and static retrieval method.</p>
</blockquote>
<p>Groovy é»˜è®¤å¯¼å…¥ <code>groovy.lang</code> åŒ…ä¸­çš„ç±», åŒ…å«äº†ä¸€ä¸ªåç§°ä¸º <code>@Singleton</code> çš„æ³¨è§£, ä¸€ä¸ª AST transformation ç±»æ¥è®©ä½ çš„ç±»å˜æˆä¸€ä¸ªå•ä¾‹ç±», é€šè¿‡æ·»åŠ ä¸€ä¸ª private æ„é€ å™¨å’Œé™æ€è·å–æ–¹æ³•.</p>
<blockquote>
<p>This annotation is easily confused with the javax.inject.Singleton annotation used to define singleton beans in Micronaut. Make sure you use the correct annotation in your Groovy classes.</p>
</blockquote>
<p>è¿™ä¸ªæ³¨è§£å¾ˆå®¹æ˜“ä¸ç”¨åœ¨ Micronaut ä¸­å®šä¹‰å•ä¾‹ bean çš„ <code>javax.inject.Singleton</code> æ³¨è§£æ··æ·†. ç¡®ä¿ä½ åœ¨ä½ çš„ Groovy ç±»ä¸­ä½¿ç”¨äº†æ­£ç¡®çš„æ³¨è§£</p>
<h3 id="Why-is-it-taking-much-longer-than-it-should-to-start-the-application-ä¸ºä»€ä¹ˆå¯åŠ¨åº”ç”¨ç¨‹åºèŠ±è´¹çš„æ—¶é—´æ¯”åº”æœ‰çš„æ—¶é—´é•¿å¾—å¤š"><a href="#Why-is-it-taking-much-longer-than-it-should-to-start-the-application-ä¸ºä»€ä¹ˆå¯åŠ¨åº”ç”¨ç¨‹åºèŠ±è´¹çš„æ—¶é—´æ¯”åº”æœ‰çš„æ—¶é—´é•¿å¾—å¤š" class="headerlink" title="Why is it taking much longer than it should to start the application? (ä¸ºä»€ä¹ˆå¯åŠ¨åº”ç”¨ç¨‹åºèŠ±è´¹çš„æ—¶é—´æ¯”åº”æœ‰çš„æ—¶é—´é•¿å¾—å¤š?)"></a>Why is it taking much longer than it should to start the application? (ä¸ºä»€ä¹ˆå¯åŠ¨åº”ç”¨ç¨‹åºèŠ±è´¹çš„æ—¶é—´æ¯”åº”æœ‰çš„æ—¶é—´é•¿å¾—å¤š?)</h3><p>Micronaut çš„å¯åŠ¨æ—¶é—´é€šå¸¸éå¸¸å¿«. ä½†æ˜¯åœ¨åº”ç”¨ç¨‹åºçº§åˆ«, å¯èƒ½ä¼šå½±å“å¯åŠ¨äº‹ä»¶</p>
<p>å¦‚æœä½ é‡åˆ°å¯åŠ¨ç¼“æ…¢, è¯·æŸ¥çœ‹æ‰€æœ‰å‡æ…¢å¯åŠ¨é€Ÿåº¦çš„åº”ç”¨ç¨‹åºå¯åŠ¨ç›‘å¬å™¨å’Œ <code>@Context</code> æ³¨é‡Šçš„ beans</p>
<p>ä¸€äº›ç½‘ç»œé—®é¢˜ä¹Ÿå¯èƒ½å¯¼è‡´å¯åŠ¨ç¼“æ…¢. ä¾‹å¦‚, åœ¨ Mac ä¸Š, <code>/etc/hosts</code> æ–‡ä»¶çš„é”™è¯¯é…ç½®å¯èƒ½ä¼šå¯¼è‡´é—®é¢˜å‡ºç°. è¯·å‚é˜…ä¸€ä¸‹ <a class="link"   target="_blank" rel="noopener" href="https://stackoverflow.com/a/39698914/1264846" >stackoverflow<i class="fas fa-external-link-alt"></i></a> ç­”æ¡ˆ</p>
<h2 id="Using-Snapshots-ä½¿ç”¨å¿«ç…§ç‰ˆæœ¬"><a href="#Using-Snapshots-ä½¿ç”¨å¿«ç…§ç‰ˆæœ¬" class="headerlink" title="Using Snapshots (ä½¿ç”¨å¿«ç…§ç‰ˆæœ¬)"></a>Using Snapshots (ä½¿ç”¨å¿«ç…§ç‰ˆæœ¬)</h2><p>Micronaut é‡Œç¨‹ç¢‘ç‰ˆå’Œç¨³å®šç‰ˆæœ¬åˆ†å‘åˆ° Maven Central</p>
<p>ä¸€ä¸‹ä»£ç ç‰‡æ®µå±•ç¤ºäº†å¦‚ä½•åœ¨ Gradle ä¸­ä½¿ç”¨ Micronaut SNAPSHOT ç‰ˆæœ¬. æœ€æ–°çš„å¿«ç…§ç‰ˆæœ¬å°†å§‹ç»ˆæ˜¯ä¸‹ä¸€ä¸ªè¡¥ä¸ç‰ˆæœ¬åŠ  1 å¹¶é™„åŠ  <code>-SNAPSHOT</code></p>
<p>ä¾‹å¦‚, å¦‚æœæœ€æ–°ç‰ˆæœ¬æ˜¯ â€œ1.0.1â€, åˆ™å½“å‰å¿«ç…§å°†ä¼šæ˜¯ â€œ1.0.2-SNAPSHOTâ€:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ext &#123;</span><br><span class="line">    micronautVersion = <span class="string">&#x27;2.4.0-SNAPSHOT&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">repositories &#123;</span><br><span class="line">    mavenCentral()  <span class="comment">// 1</span></span><br><span class="line">    maven &#123; url <span class="string">&#x27;https://s01.oss.sonatype.org/content/repositories/snapshots/&#x27;</span> &#125;    <span class="comment">// 2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>1</code> : Micronaut releases are available on Maven Central</p>
<p><code>2</code> : Micronaut snapshots are available on Sonatype OSS Snapshots</p>
<p>ä½¿ç”¨ Maven æ—¶, ç¼–è¾‘ <code>pom.xml</code>:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.micronaut<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>micronaut-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">micronaut.version</span>&gt;</span>2.4.0-SNAPSHOT<span class="tag">&lt;/<span class="name">micronaut.version</span>&gt;</span> </span><br><span class="line">    ...</span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>sonatype-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://s01.oss.sonatype.org/content/repositories/snapshots/<span class="tag">&lt;/<span class="name">url</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Common-Problems-å¸¸è§é—®é¢˜"><a href="#Common-Problems-å¸¸è§é—®é¢˜" class="headerlink" title="Common Problems (å¸¸è§é—®é¢˜)"></a>Common Problems (å¸¸è§é—®é¢˜)</h2><p>ä»¥ä¸‹éƒ¨åˆ†ä»‹ç»äº†å¼€å‘è€…åœ¨ä½¿ç”¨ Micronaut æ—¶é‡åˆ°çš„å¸¸è§é—®é¢˜</p>
<h3 id="Dependency-injection-is-not-working-ä¾èµ–æ³¨å…¥ä¸ç”Ÿæ•ˆ"><a href="#Dependency-injection-is-not-working-ä¾èµ–æ³¨å…¥ä¸ç”Ÿæ•ˆ" class="headerlink" title="Dependency injection is not working (ä¾èµ–æ³¨å…¥ä¸ç”Ÿæ•ˆ)"></a>Dependency injection is not working (ä¾èµ–æ³¨å…¥ä¸ç”Ÿæ•ˆ)</h3><p>ä¾èµ–æ³¨å…¥ä¸ç”Ÿæ•ˆçš„æœ€å¸¸è§åŸå› æ˜¯æ²¡æœ‰é…ç½®é€‚å½“çš„æ³¨è§£å¤„ç†å™¨, æˆ–è€… IDE æ²¡æœ‰æ­£ç¡®é…ç½®</p>
<p>æœ‰å…³å¦‚ä½•ä½¿ç”¨ä½ çš„è¯­è¨€è¿›è¡Œé…ç½®, è¯·æŸ¥é˜…<a class="link"   target="_blank" rel="noopener" href="https://docs.micronaut.io/latest/guide/#languageSupport" >è¯­è¨€æ”¯æŒ<i class="fas fa-external-link-alt"></i></a>çš„éƒ¨åˆ†</p>
<h3 id="A-NoSuchMethodError-occurs-loading-beans-Groovy-åŠ è½½-beans-æ—¶å‡ºç°-NoSuchMethodError"><a href="#A-NoSuchMethodError-occurs-loading-beans-Groovy-åŠ è½½-beans-æ—¶å‡ºç°-NoSuchMethodError" class="headerlink" title="A NoSuchMethodError occurs loading beans (Groovy) (åŠ è½½ beans æ—¶å‡ºç° NoSuchMethodError)"></a>A NoSuchMethodError occurs loading beans (Groovy) (åŠ è½½ beans æ—¶å‡ºç° NoSuchMethodError)</h3><p>Groovy é»˜è®¤å¯¼å…¥ <code>groovy.lang</code> åŒ…ä¸­çš„ç±», åŒ…å«äº†ä¸€ä¸ªåç§°ä¸º <code>@Singleton</code> çš„æ³¨è§£, ä¸€ä¸ª AST transformation ç±»æ¥è®©ä½ çš„ç±»å˜æˆä¸€ä¸ªå•ä¾‹ç±», é€šè¿‡æ·»åŠ ä¸€ä¸ª private æ„é€ å™¨å’Œé™æ€è·å–æ–¹æ³•.</p>
<p>è¿™ä¸ªæ³¨è§£å¾ˆå®¹æ˜“ä¸ç”¨åœ¨ Micronaut ä¸­å®šä¹‰å•ä¾‹ bean çš„ <code>javax.inject.Singleton</code> æ³¨è§£æ··æ·†. ç¡®ä¿ä½ åœ¨ä½ çš„ Groovy ç±»ä¸­ä½¿ç”¨äº†æ­£ç¡®çš„æ³¨è§£</p>
<h3 id="It-is-taking-much-longer-to-start-my-application-than-it-should-nix-OS-å¯åŠ¨åº”ç”¨ç¨‹åºèŠ±è´¹çš„æ—¶é—´æ¯”åº”æœ‰çš„æ—¶é—´é•¿å¾—å¤š"><a href="#It-is-taking-much-longer-to-start-my-application-than-it-should-nix-OS-å¯åŠ¨åº”ç”¨ç¨‹åºèŠ±è´¹çš„æ—¶é—´æ¯”åº”æœ‰çš„æ—¶é—´é•¿å¾—å¤š" class="headerlink" title="It is taking much longer to start my application than it should (*nix OS) (å¯åŠ¨åº”ç”¨ç¨‹åºèŠ±è´¹çš„æ—¶é—´æ¯”åº”æœ‰çš„æ—¶é—´é•¿å¾—å¤š)"></a>It is taking much longer to start my application than it should (*nix OS) (å¯åŠ¨åº”ç”¨ç¨‹åºèŠ±è´¹çš„æ—¶é—´æ¯”åº”æœ‰çš„æ—¶é—´é•¿å¾—å¤š)</h3><blockquote>
<p>This is likely due to a bug related to java.net.InetAddress.getLocalHost() calls causing a long delay.</p>
</blockquote>
<p>è¿™å¯èƒ½æ˜¯ç”±äºä¸€ä¸ªbug, è¿™ä¸ª bug æ˜¯å…³äº <code>java.net.InetAddress.getLocalHost()</code> è°ƒç”¨å¯¼è‡´çš„é•¿æ—¶é—´å»¶è¿Ÿ</p>
<p>è§£å†³æ–¹æ¡ˆæ˜¯ä¿®æ”¹ä½ çš„ <code>/etc/hosts</code> æ–‡ä»¶, æ·»åŠ ä¸€ä¸ªåŒ…å«ä½ çš„ä¸»æœºåçš„ entry</p>
<p>è¦æ‰¾åˆ°ä½ çš„ä¸»æœºå, åœ¨ç»ˆç«¯ä¸­è¿è¡Œ <code>hostname</code></p>
<p>ç„¶åç¼–è¾‘ <code>/etc/hosts</code> æ–‡ä»¶æ¥æ·»åŠ æˆ–æ”¹å˜å¦‚ä¸‹é¢è¿™æ ·çš„ entries, å°† <code>&lt;hostname&gt;</code> æ›¿æ¢ä¸ºä½ çš„ä¸»æœºå</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1       localhost &lt;hostname&gt;</span><br><span class="line">::1             localhost &lt;hostname&gt;</span><br></pre></td></tr></table></figure>

<p>è¦çŸ¥é“æ›´å¤šå…³äºè¿™ä¸ªé—®é¢˜çš„ä¿¡æ¯, æŸ¥çœ‹è¿™ä¸ª <a class="link"   target="_blank" rel="noopener" href="https://stackoverflow.com/a/39698914/1264846" >stackoverflow answer<i class="fas fa-external-link-alt"></i></a></p>
<h2 id="Breaking-Changes"><a href="#Breaking-Changes" class="headerlink" title="Breaking Changes"></a>Breaking Changes</h2><p>ç•¥</p>

        </div>

        
            <div class="post-copyright-info">
                <div class="article-copyright-info-container">
    <ul>
        <li>æœ¬æ–‡æ ‡é¢˜ï¼šMicronaut ä¸­æ–‡æ–‡æ¡£ Appendices</li>
        <li>æœ¬æ–‡ä½œè€…ï¼šæ—å¨ç¾½</li>
        <li>åˆ›å»ºæ—¶é—´ï¼š2022-04-29 09:51:13</li>
        <li>
            æœ¬æ–‡é“¾æ¥ï¼šhttps://linweiyu21.github.io/micronaut/micronaut-appendices/
        </li>
        <li>
            ç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
        </li>
    </ul>
</div>

            </div>
        

        
            <ul class="post-tags-box">
                
                    <li class="tag-item">
                        <a href="/tags/Micronaut/">#Micronaut</a>&nbsp;
                    </li>
                
                    <li class="tag-item">
                        <a href="/tags/Groovy/">#Groovy</a>&nbsp;
                    </li>
                
                    <li class="tag-item">
                        <a href="/tags/%E4%B8%AD%E6%96%87/">#ä¸­æ–‡</a>&nbsp;
                    </li>
                
            </ul>
        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/groovy/groovy-shebang-line/"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Groovy Shebang line</span>
                                <span class="post-nav-item">ä¸Šä¸€ç¯‡</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/micronaut/micronaut-internationalization/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Micronaut ä¸­æ–‡æ–‡æ¡£ Internationalization</span>
                                <span class="post-nav-item">ä¸‹ä¸€ç¯‡</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
            <div class="comment-container">
                <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fas fa-comments">&nbsp;è¯„è®º</i>
    </div>
    

        
            
    <div class="valine-container">
        <script data-pjax
                src="//cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js"></script>
        <div id="vcomments"></div>
        <script data-pjax>
            function loadValine() {
                new Valine({
                    el: '#vcomments',
                    appId: '8xWQ0WFbKUNN4h8ixIO12etk-gzGzoHsz',
                    appKey: '7cLjTvkIsF6aIuIVSd0um89m',
                    meta: ['nick', 'mail', 'link'],
                    avatar: 'wavatar',
                    enableQQ: true,
                    placeholder: 'è¯·å¼€å§‹ä½ çš„è¡¨æ¼”',
                    lang: 'zh-CN'.toLowerCase()
                });

                function getAuthor(language) {
                    switch (language) {
                        case 'en':
                            return 'Author';
                        case 'zh-CN':
                            return 'åšä¸»';
                        default:
                            return 'Master';
                    }
                }

                // Add "Author" identify
                const getValineDomTimer = setInterval(() => {
                    const vcards = document.querySelectorAll('#vcomments .vcards .vcard');
                    if (vcards.length > 0) {
                        let author = 'æ—å¨ç¾½';

                        if (author) {
                            for (let vcard of vcards) {
                                const vnick_dom = vcard.querySelector('.vhead .vnick');
                                const vnick = vnick_dom.innerHTML;
                                if (vnick === author) {
                                    vnick_dom.innerHTML = `${vnick} <span class="author">${getAuthor(KEEP.hexo_config.language)}</span>`
                                }
                            }
                        }
                        clearInterval(getValineDomTimer);
                    } else {
                        clearInterval(getValineDomTimer);
                    }
                }, 2000);
            }

            if ('true') {
                const loadValineTimeout = setTimeout(() => {
                    loadValine();
                    clearTimeout(loadValineTimeout);
                }, 1000);
            } else {
                window.addEventListener('DOMContentLoaded', loadValine);
            }
        </script>
    </div>



        
    
</div>

            </div>
        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
            2022&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">æ—å¨ç¾½</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv">
                        è®¿é—®äººæ•°&nbsp;<span id="busuanzi_value_site_uv"></span>&ensp;
                    </span>
                
                
                    <span id="busuanzi_container_site_pv">
                        æ€»è®¿é—®é‡&nbsp;<span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            ç”± <a target="_blank" href="https://hexo.io">Hexo</a> é©±åŠ¨&nbsp;|&nbsp;ä¸»é¢˜&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.5</a>
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fas fa-comment"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Appendices"><span class="nav-number">1.</span> <span class="nav-text">Appendices</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Micronaut-Architecture-Micronaut-%E6%9E%B6%E6%9E%84"><span class="nav-number">1.1.</span> <span class="nav-text">Micronaut Architecture (Micronaut æ¶æ„)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Compiler-%E7%BC%96%E8%AF%91%E5%99%A8"><span class="nav-number">1.1.1.</span> <span class="nav-text">Compiler (ç¼–è¯‘å™¨)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Annotation-Metadata-%E6%B3%A8%E8%A7%A3%E5%85%83%E6%95%B0%E6%8D%AE"><span class="nav-number">1.1.2.</span> <span class="nav-text">Annotation Metadata (æ³¨è§£å…ƒæ•°æ®)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Bean-Introspections-Bean-%E5%86%85%E7%9C%81"><span class="nav-number">1.1.3.</span> <span class="nav-text">Bean Introspections (Bean å†…çœ)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Bean-Definitions-Bean-%E5%AE%9A%E4%B9%89"><span class="nav-number">1.1.4.</span> <span class="nav-text">Bean Definitions (Bean å®šä¹‰)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Configuration-Properties-Handling-%E9%85%8D%E7%BD%AE%E5%B1%9E%E6%80%A7%E5%A4%84%E7%90%86"><span class="nav-number">1.1.4.1.</span> <span class="nav-text">Configuration Properties Handling (é…ç½®å±æ€§å¤„ç†)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AOP-Proxies-AOP-%E4%BB%A3%E7%90%86"><span class="nav-number">1.1.5.</span> <span class="nav-text">AOP Proxies (AOP ä»£ç†)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Security-Considerations-%E5%AE%89%E5%85%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-number">1.1.5.1.</span> <span class="nav-text">Security Considerations (å®‰å…¨æ³¨æ„äº‹é¡¹)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Application-Context-%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%B8%8A%E4%B8%8B%E6%96%87"><span class="nav-number">1.1.6.</span> <span class="nav-text">Application Context (åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP-Server-HTTP-%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">1.1.7.</span> <span class="nav-text">HTTP Server (HTTP æœåŠ¡å™¨)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Server-Configuration-%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE"><span class="nav-number">1.1.7.1.</span> <span class="nav-text">Server Configuration (æœåŠ¡å™¨é…ç½®)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Server-Configuration-Security-Considerations-%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE%E5%AE%89%E5%85%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-number">1.1.7.2.</span> <span class="nav-text">Server Configuration Security Considerations (æœåŠ¡å™¨é…ç½®å®‰å…¨æ³¨æ„äº‹é¡¹)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Netty-Server-Initialization-Netty-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-number">1.1.7.3.</span> <span class="nav-text">Netty Server Initialization (Netty æœåŠ¡å™¨åˆå§‹åŒ–)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ChannelPipeline-Security-Considerations-ChannelPipeline-%E5%AE%89%E5%85%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-number">1.1.7.4.</span> <span class="nav-text">ChannelPipeline Security Considerations (ChannelPipeline å®‰å…¨æ³¨æ„äº‹é¡¹)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Netty-Server-Routing-Netty-%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%B7%AF%E7%94%B1"><span class="nav-number">1.1.7.5.</span> <span class="nav-text">Netty Server Routing (Netty æœåŠ¡å™¨è·¯ç”±)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Netty-Server-Routing-Security-Considerations-Netty-%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%B7%AF%E7%94%B1%E5%AE%89%E5%85%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-number">1.1.7.6.</span> <span class="nav-text">Netty Server Routing Security Considerations (Netty æœåŠ¡å™¨è·¯ç”±å®‰å…¨æ³¨æ„äº‹é¡¹)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Frequently-Asked-Questions-FAQ-%E6%9C%80%E5%B8%B8%E9%97%AE%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">1.2.</span> <span class="nav-text">Frequently Asked Questions (FAQ) (æœ€å¸¸é—®çš„é—®é¢˜)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Does-Micronaut-modify-my-bytecode-Micronaut-%E4%BF%AE%E6%94%B9%E4%BA%86%E6%88%91%E7%9A%84%E5%AD%97%E8%8A%82%E7%A0%81%E5%90%97"><span class="nav-number">1.2.1.</span> <span class="nav-text">Does Micronaut modify my bytecode? (Micronaut ä¿®æ”¹äº†æˆ‘çš„å­—èŠ‚ç å—?)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Why-Doesn%E2%80%99t-Micronaut-use-Spring-%E4%B8%BA%E4%BB%80%E4%B9%88-Micronaut-%E4%B8%8D%E4%BD%BF%E7%94%A8-Spring"><span class="nav-number">1.2.2.</span> <span class="nav-text">Why Doesnâ€™t Micronaut use Spring? (ä¸ºä»€ä¹ˆ Micronaut ä¸ä½¿ç”¨ Spring?)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Does-Micronaut-support-Scala-Micronaut-%E6%94%AF%E6%8C%81-Scala-%E5%90%97"><span class="nav-number">1.2.3.</span> <span class="nav-text">Does Micronaut support Scala? (Micronaut æ”¯æŒ Scala å—?)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Can-Micronaut-be-used-for-purposes-other-than-Microservices-Micronaut-%E5%8F%AF%E4%BB%A5%E7%94%A8%E5%9C%A8%E5%85%B6%E4%BB%96%E7%94%A8%E9%80%94%E8%80%8C%E4%B8%8D%E6%98%AF%E4%BD%9C%E4%B8%BA%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%90%97"><span class="nav-number">1.2.4.</span> <span class="nav-text">Can Micronaut be used for purposes other than Microservices? (Micronaut å¯ä»¥ç”¨åœ¨å…¶ä»–ç”¨é€”è€Œä¸æ˜¯ä½œä¸ºå¾®æœåŠ¡å—?)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#What-are-the-advantages-of-Micronaut%E2%80%99s-Dependency-Injection-and-AOP-implementation-Micronaut-%E7%9A%84%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%E5%92%8C-AOP-%E5%AE%9E%E7%8E%B0%E6%9C%89%E4%BB%80%E4%B9%88%E4%BC%98%E7%82%B9"><span class="nav-number">1.2.5.</span> <span class="nav-text">What are the advantages of Micronautâ€™s Dependency Injection and AOP implementation? (Micronaut çš„ä¾èµ–æ³¨å…¥å’Œ AOP å®ç°æœ‰ä»€ä¹ˆä¼˜ç‚¹?)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Why-does-Micronaut-have-its-own-Consul-and-Eureka-client-implementations-%E4%B8%BA%E4%BB%80%E4%B9%88-Micronaut-%E6%9C%89%E8%87%AA%E5%B7%B1%E7%9A%84-Consul-%E5%92%8C-Eureka-%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AE%9E%E7%8E%B0"><span class="nav-number">1.2.6.</span> <span class="nav-text">Why does Micronaut have its own Consul and Eureka client implementations? (ä¸ºä»€ä¹ˆ Micronaut æœ‰è‡ªå·±çš„ Consul å’Œ Eureka å®¢æˆ·ç«¯å®ç°?)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Why-am-I-encountering-a-NoSuchMethodError-occurs-loading-my-beans-Groovy-%E4%B8%BA%E4%BB%80%E4%B9%88%E6%88%91%E5%9C%A8%E5%8A%A0%E8%BD%BD%E6%88%91%E7%9A%84-beans-%E6%97%B6%E9%81%87%E5%88%B0%E4%BA%86-NoSuchMethodError-%E9%97%AE%E9%A2%98"><span class="nav-number">1.2.7.</span> <span class="nav-text">Why am I encountering a NoSuchMethodError occurs loading my beans (Groovy)? (ä¸ºä»€ä¹ˆæˆ‘åœ¨åŠ è½½æˆ‘çš„ beans æ—¶é‡åˆ°äº† NoSuchMethodError é—®é¢˜?)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Why-is-it-taking-much-longer-than-it-should-to-start-the-application-%E4%B8%BA%E4%BB%80%E4%B9%88%E5%90%AF%E5%8A%A8%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E8%8A%B1%E8%B4%B9%E7%9A%84%E6%97%B6%E9%97%B4%E6%AF%94%E5%BA%94%E6%9C%89%E7%9A%84%E6%97%B6%E9%97%B4%E9%95%BF%E5%BE%97%E5%A4%9A"><span class="nav-number">1.2.8.</span> <span class="nav-text">Why is it taking much longer than it should to start the application? (ä¸ºä»€ä¹ˆå¯åŠ¨åº”ç”¨ç¨‹åºèŠ±è´¹çš„æ—¶é—´æ¯”åº”æœ‰çš„æ—¶é—´é•¿å¾—å¤š?)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Using-Snapshots-%E4%BD%BF%E7%94%A8%E5%BF%AB%E7%85%A7%E7%89%88%E6%9C%AC"><span class="nav-number">1.3.</span> <span class="nav-text">Using Snapshots (ä½¿ç”¨å¿«ç…§ç‰ˆæœ¬)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Common-Problems-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98"><span class="nav-number">1.4.</span> <span class="nav-text">Common Problems (å¸¸è§é—®é¢˜)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Dependency-injection-is-not-working-%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%E4%B8%8D%E7%94%9F%E6%95%88"><span class="nav-number">1.4.1.</span> <span class="nav-text">Dependency injection is not working (ä¾èµ–æ³¨å…¥ä¸ç”Ÿæ•ˆ)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#A-NoSuchMethodError-occurs-loading-beans-Groovy-%E5%8A%A0%E8%BD%BD-beans-%E6%97%B6%E5%87%BA%E7%8E%B0-NoSuchMethodError"><span class="nav-number">1.4.2.</span> <span class="nav-text">A NoSuchMethodError occurs loading beans (Groovy) (åŠ è½½ beans æ—¶å‡ºç° NoSuchMethodError)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#It-is-taking-much-longer-to-start-my-application-than-it-should-nix-OS-%E5%90%AF%E5%8A%A8%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E8%8A%B1%E8%B4%B9%E7%9A%84%E6%97%B6%E9%97%B4%E6%AF%94%E5%BA%94%E6%9C%89%E7%9A%84%E6%97%B6%E9%97%B4%E9%95%BF%E5%BE%97%E5%A4%9A"><span class="nav-number">1.4.3.</span> <span class="nav-text">It is taking much longer to start my application than it should (*nix OS) (å¯åŠ¨åº”ç”¨ç¨‹åºèŠ±è´¹çš„æ—¶é—´æ¯”åº”æœ‰çš„æ—¶é—´é•¿å¾—å¤š)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Breaking-Changes"><span class="nav-number">1.5.</span> <span class="nav-text">Breaking Changes</span></a></li></ol></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="æœç´¢..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>



<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/dark-light-toggle.js"></script>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/local-search.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/code-copy.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/lazyload.js"></script>


<div class="post-scripts pjax">
    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/left-side-toggle.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/libs/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/toc.js"></script>
    
</div>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/libs/pjax.min.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            KEEP.refresh();
        });
    });
</script>



</body>
</html>
